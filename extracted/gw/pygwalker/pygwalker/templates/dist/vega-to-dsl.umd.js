(function(Oe,J){typeof exports=="object"&&typeof module<"u"?module.exports=J():typeof define=="function"&&define.amd?define(J):(Oe=typeof globalThis<"u"?globalThis:Oe||self,Oe.main=J())})(this,function(){"use strict";let Oe=(o=21)=>crypto.getRandomValues(new Uint8Array(o)).reduce((i,a)=>(a&=63,a<36?i+=a.toString(36):a<62?i+=(a-26).toString(36).toUpperCase():a>62?i+="-":i+="_",i),"");function J(o){return J=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},J(o)}function re(o,i){if(!(o instanceof i))throw new TypeError("Cannot call a class as a function")}function ht(o,i){if(J(o)!=="object"||o===null)return o;var a=o[Symbol.toPrimitive];if(a!==void 0){var c=a.call(o,i||"default");if(J(c)!=="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(o)}function xs(o){var i=ht(o,"string");return J(i)==="symbol"?i:String(i)}function ks(o,i){for(var a=0;a<i.length;a++){var c=i[a];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(o,xs(c.key),c)}}function ne(o,i,a){return i&&ks(o.prototype,i),a&&ks(o,a),Object.defineProperty(o,"prototype",{writable:!1}),o}function be(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function es(o,i){return es=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(c,r){return c.__proto__=r,c},es(o,i)}function Ue(o,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(i&&i.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),i&&es(o,i)}function Le(o,i){if(i&&(J(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return be(o)}function ae(o){return ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},ae(o)}function fe(o,i,a){return i=xs(i),i in o?Object.defineProperty(o,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[i]=a,o}function wt(o){if(Array.isArray(o))return o}function xt(o){if(typeof Symbol<"u"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)}function gs(o,i){(i==null||i>o.length)&&(i=o.length);for(var a=0,c=new Array(i);a<i;a++)c[a]=o[a];return c}function kt(o,i){if(o){if(typeof o=="string")return gs(o,i);var a=Object.prototype.toString.call(o).slice(8,-1);if(a==="Object"&&o.constructor&&(a=o.constructor.name),a==="Map"||a==="Set")return Array.from(o);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return gs(o,i)}}function gt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vt(o){return wt(o)||xt(o)||kt(o)||gt()}function vs(o,i){var a=Object.keys(o);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(o);i&&(c=c.filter(function(r){return Object.getOwnPropertyDescriptor(o,r).enumerable})),a.push.apply(a,c)}return a}function As(o){for(var i=1;i<arguments.length;i++){var a=arguments[i]!=null?arguments[i]:{};i%2?vs(Object(a),!0).forEach(function(c){fe(o,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(a)):vs(Object(a)).forEach(function(c){Object.defineProperty(o,c,Object.getOwnPropertyDescriptor(a,c))})}return o}var At={type:"logger",log:function(i){this.output("log",i)},warn:function(i){this.output("warn",i)},error:function(i){this.output("error",i)},output:function(i,a){console&&console[i]&&console[i].apply(console,a)}},Ot=function(){function o(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};re(this,o),this.init(i,a)}return ne(o,[{key:"init",value:function(a){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=c.prefix||"i18next:",this.logger=a||At,this.options=c,this.debug=c.debug}},{key:"setDebug",value:function(a){this.debug=a}},{key:"log",value:function(){for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return this.forward(c,"log","",!0)}},{key:"warn",value:function(){for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return this.forward(c,"warn","",!0)}},{key:"error",value:function(){for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return this.forward(c,"error","")}},{key:"deprecate",value:function(){for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return this.forward(c,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(a,c,r,s){return s&&!this.debug?null:(typeof a[0]=="string"&&(a[0]="".concat(r).concat(this.prefix," ").concat(a[0])),this.logger[c](a))}},{key:"create",value:function(a){return new o(this.logger,As(As({},{prefix:"".concat(this.prefix,":").concat(a,":")}),this.options))}},{key:"clone",value:function(a){return a=a||this.options,a.prefix=a.prefix||this.prefix,new o(this.logger,a)}}]),o}(),oe=new Ot,ye=function(){function o(){re(this,o),this.observers={}}return ne(o,[{key:"on",value:function(a,c){var r=this;return a.split(" ").forEach(function(s){r.observers[s]=r.observers[s]||[],r.observers[s].push(c)}),this}},{key:"off",value:function(a,c){if(this.observers[a]){if(!c){delete this.observers[a];return}this.observers[a]=this.observers[a].filter(function(r){return r!==c})}}},{key:"emit",value:function(a){for(var c=arguments.length,r=new Array(c>1?c-1:0),s=1;s<c;s++)r[s-1]=arguments[s];if(this.observers[a]){var n=[].concat(this.observers[a]);n.forEach(function(b){b.apply(void 0,r)})}if(this.observers["*"]){var m=[].concat(this.observers["*"]);m.forEach(function(b){b.apply(b,[a].concat(r))})}}}]),o}();function Ie(){var o,i,a=new Promise(function(c,r){o=c,i=r});return a.resolve=o,a.reject=i,a}function Os(o){return o==null?"":""+o}function St(o,i,a){o.forEach(function(c){i[c]&&(a[c]=i[c])})}function ss(o,i,a){function c(m){return m&&m.indexOf("###")>-1?m.replace(/###/g,"."):m}function r(){return!o||typeof o=="string"}for(var s=typeof i!="string"?[].concat(i):i.split(".");s.length>1;){if(r())return{};var n=c(s.shift());!o[n]&&a&&(o[n]=new a),Object.prototype.hasOwnProperty.call(o,n)?o=o[n]:o={}}return r()?{}:{obj:o,k:c(s.shift())}}function Ss(o,i,a){var c=ss(o,i,Object),r=c.obj,s=c.k;r[s]=a}function Et(o,i,a,c){var r=ss(o,i,Object),s=r.obj,n=r.k;s[n]=s[n]||[],c&&(s[n]=s[n].concat(a)),c||s[n].push(a)}function Me(o,i){var a=ss(o,i),c=a.obj,r=a.k;if(c)return c[r]}function Es(o,i,a){var c=Me(o,a);return c!==void 0?c:Me(i,a)}function Ts(o,i,a){for(var c in i)c!=="__proto__"&&c!=="constructor"&&(c in o?typeof o[c]=="string"||o[c]instanceof String||typeof i[c]=="string"||i[c]instanceof String?a&&(o[c]=i[c]):Ts(o[c],i[c],a):o[c]=i[c]);return o}function Se(o){return o.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var Tt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function Nt(o){return typeof o=="string"?o.replace(/[&<>"'\/]/g,function(i){return Tt[i]}):o}var ze=typeof window<"u"&&window.navigator&&typeof window.navigator.userAgentData>"u"&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,Ct=[" ",",","?","!",";"];function Rt(o,i,a){i=i||"",a=a||"";var c=Ct.filter(function(m){return i.indexOf(m)<0&&a.indexOf(m)<0});if(c.length===0)return!0;var r=new RegExp("(".concat(c.map(function(m){return m==="?"?"\\?":m}).join("|"),")")),s=!r.test(o);if(!s){var n=o.indexOf(a);n>0&&!r.test(o.substring(0,n))&&(s=!0)}return s}function Ns(o,i){var a=Object.keys(o);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(o);i&&(c=c.filter(function(r){return Object.getOwnPropertyDescriptor(o,r).enumerable})),a.push.apply(a,c)}return a}function Be(o){for(var i=1;i<arguments.length;i++){var a=arguments[i]!=null?arguments[i]:{};i%2?Ns(Object(a),!0).forEach(function(c){fe(o,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(a)):Ns(Object(a)).forEach(function(c){Object.defineProperty(o,c,Object.getOwnPropertyDescriptor(a,c))})}return o}function Lt(o){var i=It();return function(){var c=ae(o),r;if(i){var s=ae(this).constructor;r=Reflect.construct(c,arguments,s)}else r=c.apply(this,arguments);return Le(this,r)}}function It(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Cs(o,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(o){if(o[i])return o[i];for(var c=i.split(a),r=o,s=0;s<c.length;++s){if(!r||typeof r[c[s]]=="string"&&s+1<c.length)return;if(r[c[s]]===void 0){for(var n=2,m=c.slice(s,s+n).join(a),b=r[m];b===void 0&&c.length>s+n;)n++,m=c.slice(s,s+n).join(a),b=r[m];if(b===void 0)return;if(b===null)return null;if(i.endsWith(m)){if(typeof b=="string")return b;if(m&&typeof b[m]=="string")return b[m]}var y=c.slice(s+n).join(a);return y?Cs(b,y,a):void 0}r=r[c[s]]}return r}}var Pt=function(o){Ue(a,o);var i=Lt(a);function a(c){var r,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};return re(this,a),r=i.call(this),ze&&ye.call(be(r)),r.data=c||{},r.options=s,r.options.keySeparator===void 0&&(r.options.keySeparator="."),r.options.ignoreJSONStructure===void 0&&(r.options.ignoreJSONStructure=!0),r}return ne(a,[{key:"addNamespaces",value:function(r){this.options.ns.indexOf(r)<0&&this.options.ns.push(r)}},{key:"removeNamespaces",value:function(r){var s=this.options.ns.indexOf(r);s>-1&&this.options.ns.splice(s,1)}},{key:"getResource",value:function(r,s,n){var m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},b=m.keySeparator!==void 0?m.keySeparator:this.options.keySeparator,y=m.ignoreJSONStructure!==void 0?m.ignoreJSONStructure:this.options.ignoreJSONStructure,t=[r,s];n&&typeof n!="string"&&(t=t.concat(n)),n&&typeof n=="string"&&(t=t.concat(b?n.split(b):n)),r.indexOf(".")>-1&&(t=r.split("."));var _=Me(this.data,t);return _||!y||typeof n!="string"?_:Cs(this.data&&this.data[r]&&this.data[r][s],n,b)}},{key:"addResource",value:function(r,s,n,m){var b=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1},y=this.options.keySeparator;y===void 0&&(y=".");var t=[r,s];n&&(t=t.concat(y?n.split(y):n)),r.indexOf(".")>-1&&(t=r.split("."),m=s,s=t[1]),this.addNamespaces(s),Ss(this.data,t,m),b.silent||this.emit("added",r,s,n,m)}},{key:"addResources",value:function(r,s,n){var m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(var b in n)(typeof n[b]=="string"||Object.prototype.toString.apply(n[b])==="[object Array]")&&this.addResource(r,s,b,n[b],{silent:!0});m.silent||this.emit("added",r,s,n)}},{key:"addResourceBundle",value:function(r,s,n,m,b){var y=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},t=[r,s];r.indexOf(".")>-1&&(t=r.split("."),m=n,n=s,s=t[1]),this.addNamespaces(s);var _=Me(this.data,t)||{};m?Ts(_,n,b):_=Be(Be({},_),n),Ss(this.data,t,_),y.silent||this.emit("added",r,s,n)}},{key:"removeResourceBundle",value:function(r,s){this.hasResourceBundle(r,s)&&delete this.data[r][s],this.removeNamespaces(s),this.emit("removed",r,s)}},{key:"hasResourceBundle",value:function(r,s){return this.getResource(r,s)!==void 0}},{key:"getResourceBundle",value:function(r,s){return s||(s=this.options.defaultNS),this.options.compatibilityAPI==="v1"?Be(Be({},{}),this.getResource(r,s)):this.getResource(r,s)}},{key:"getDataByLanguage",value:function(r){return this.data[r]}},{key:"hasLanguageSomeTranslations",value:function(r){var s=this.getDataByLanguage(r),n=s&&Object.keys(s)||[];return!!n.find(function(m){return s[m]&&Object.keys(s[m]).length>0})}},{key:"toJSON",value:function(){return this.data}}]),a}(ye),Rs={processors:{},addPostProcessor:function(i){this.processors[i.name]=i},handle:function(i,a,c,r,s){var n=this;return i.forEach(function(m){n.processors[m]&&(a=n.processors[m].process(a,c,r,s))}),a}};function Ls(o,i){var a=Object.keys(o);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(o);i&&(c=c.filter(function(r){return Object.getOwnPropertyDescriptor(o,r).enumerable})),a.push.apply(a,c)}return a}function Q(o){for(var i=1;i<arguments.length;i++){var a=arguments[i]!=null?arguments[i]:{};i%2?Ls(Object(a),!0).forEach(function(c){fe(o,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(a)):Ls(Object(a)).forEach(function(c){Object.defineProperty(o,c,Object.getOwnPropertyDescriptor(a,c))})}return o}function jt(o){var i=qt();return function(){var c=ae(o),r;if(i){var s=ae(this).constructor;r=Reflect.construct(c,arguments,s)}else r=c.apply(this,arguments);return Le(this,r)}}function qt(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Is={},Ps=function(o){Ue(a,o);var i=jt(a);function a(c){var r,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return re(this,a),r=i.call(this),ze&&ye.call(be(r)),St(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],c,be(r)),r.options=s,r.options.keySeparator===void 0&&(r.options.keySeparator="."),r.logger=oe.create("translator"),r}return ne(a,[{key:"changeLanguage",value:function(r){r&&(this.language=r)}},{key:"exists",value:function(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(r==null)return!1;var n=this.resolve(r,s);return n&&n.res!==void 0}},{key:"extractFromKey",value:function(r,s){var n=s.nsSeparator!==void 0?s.nsSeparator:this.options.nsSeparator;n===void 0&&(n=":");var m=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,b=s.ns||this.options.defaultNS||[],y=n&&r.indexOf(n)>-1,t=!this.options.userDefinedKeySeparator&&!s.keySeparator&&!this.options.userDefinedNsSeparator&&!s.nsSeparator&&!Rt(r,n,m);if(y&&!t){var _=r.match(this.interpolator.nestingRegexp);if(_&&_.length>0)return{key:r,namespaces:b};var $=r.split(n);(n!==m||n===m&&this.options.ns.indexOf($[0])>-1)&&(b=$.shift()),r=$.join(m)}return typeof b=="string"&&(b=[b]),{key:r,namespaces:b}}},{key:"translate",value:function(r,s,n){var m=this;if(J(s)!=="object"&&this.options.overloadTranslationOptionHandler&&(s=this.options.overloadTranslationOptionHandler(arguments)),s||(s={}),r==null)return"";Array.isArray(r)||(r=[String(r)]);var b=s.returnDetails!==void 0?s.returnDetails:this.options.returnDetails,y=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,t=this.extractFromKey(r[r.length-1],s),_=t.key,$=t.namespaces,p=$[$.length-1],f=s.lng||this.language,w=s.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(f&&f.toLowerCase()==="cimode"){if(w){var x=s.nsSeparator||this.options.nsSeparator;return b?(v.res="".concat(p).concat(x).concat(_),v):"".concat(p).concat(x).concat(_)}return b?(v.res=_,v):_}var v=this.resolve(r,s),A=v&&v.res,N=v&&v.usedKey||_,h=v&&v.exactUsedKey||_,k=Object.prototype.toString.apply(A),O=["[object Number]","[object Function]","[object RegExp]"],C=s.joinArrays!==void 0?s.joinArrays:this.options.joinArrays,q=!this.i18nFormat||this.i18nFormat.handleAsObject,e=typeof A!="string"&&typeof A!="boolean"&&typeof A!="number";if(q&&A&&e&&O.indexOf(k)<0&&!(typeof C=="string"&&k==="[object Array]")){if(!s.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");var u=this.options.returnedObjectHandler?this.options.returnedObjectHandler(N,A,Q(Q({},s),{},{ns:$})):"key '".concat(_," (").concat(this.language,")' returned an object instead of string.");return b?(v.res=u,v):u}if(y){var l=k==="[object Array]",d=l?[]:{},g=l?h:N;for(var E in A)if(Object.prototype.hasOwnProperty.call(A,E)){var R="".concat(g).concat(y).concat(E);d[E]=this.translate(R,Q(Q({},s),{joinArrays:!1,ns:$})),d[E]===R&&(d[E]=A[E])}A=d}}else if(q&&typeof C=="string"&&k==="[object Array]")A=A.join(C),A&&(A=this.extendTranslation(A,r,s,n));else{var L=!1,I=!1,B=s.count!==void 0&&typeof s.count!="string",F=a.hasDefaultValue(s),j=B?this.pluralResolver.getSuffix(f,s.count,s):"",G=s["defaultValue".concat(j)]||s.defaultValue;!this.isValidLookup(A)&&F&&(L=!0,A=G),this.isValidLookup(A)||(I=!0,A=_);var ue=s.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,_e=ue&&I?void 0:A,se=F&&G!==A&&this.options.updateMissing;if(I||L||se){if(this.logger.log(se?"updateKey":"missingKey",f,p,_,se?G:A),y){var $e=this.resolve(_,Q(Q({},s),{},{keySeparator:!1}));$e&&$e.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var K=[],pe=this.languageUtils.getFallbackCodes(this.options.fallbackLng,s.lng||this.language);if(this.options.saveMissingTo==="fallback"&&pe&&pe[0])for(var me=0;me<pe.length;me++)K.push(pe[me]);else this.options.saveMissingTo==="all"?K=this.languageUtils.toResolveHierarchy(s.lng||this.language):K.push(s.lng||this.language);var we=function(ke,ws,yt){var dt=F&&yt!==A?yt:_e;m.options.missingKeyHandler?m.options.missingKeyHandler(ke,p,ws,dt,se,s):m.backendConnector&&m.backendConnector.saveMissing&&m.backendConnector.saveMissing(ke,p,ws,dt,se,s),m.emit("missingKey",ke,p,ws,A)};this.options.saveMissing&&(this.options.saveMissingPlurals&&B?K.forEach(function(xe){m.pluralResolver.getSuffixes(xe,s).forEach(function(ke){we([xe],_+ke,s["defaultValue".concat(ke)]||G)})}):we(K,_,G))}A=this.extendTranslation(A,r,s,v,n),I&&A===_&&this.options.appendNamespaceToMissingKey&&(A="".concat(p,":").concat(_)),(I||L)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?A=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(p,":").concat(_):_,L?A:void 0):A=this.options.parseMissingKeyHandler(A))}return b?(v.res=A,v):A}},{key:"extendTranslation",value:function(r,s,n,m,b){var y=this;if(this.i18nFormat&&this.i18nFormat.parse)r=this.i18nFormat.parse(r,Q(Q({},this.options.interpolation.defaultVariables),n),m.usedLng,m.usedNS,m.usedKey,{resolved:m});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init(Q(Q({},n),{interpolation:Q(Q({},this.options.interpolation),n.interpolation)}));var t=typeof r=="string"&&(n&&n.interpolation&&n.interpolation.skipOnVariables!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables),_;if(t){var $=r.match(this.interpolator.nestingRegexp);_=$&&$.length}var p=n.replace&&typeof n.replace!="string"?n.replace:n;if(this.options.interpolation.defaultVariables&&(p=Q(Q({},this.options.interpolation.defaultVariables),p)),r=this.interpolator.interpolate(r,p,n.lng||this.language,n),t){var f=r.match(this.interpolator.nestingRegexp),w=f&&f.length;_<w&&(n.nest=!1)}n.nest!==!1&&(r=this.interpolator.nest(r,function(){for(var A=arguments.length,N=new Array(A),h=0;h<A;h++)N[h]=arguments[h];return b&&b[0]===N[0]&&!n.context?(y.logger.warn("It seems you are nesting recursively key: ".concat(N[0]," in key: ").concat(s[0])),null):y.translate.apply(y,N.concat([s]))},n)),n.interpolation&&this.interpolator.reset()}var x=n.postProcess||this.options.postProcess,v=typeof x=="string"?[x]:x;return r!=null&&v&&v.length&&n.applyPostProcessor!==!1&&(r=Rs.handle(v,r,s,this.options&&this.options.postProcessPassResolved?Q({i18nResolved:m},n):n,this)),r}},{key:"resolve",value:function(r){var s=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},m,b,y,t,_;return typeof r=="string"&&(r=[r]),r.forEach(function($){if(!s.isValidLookup(m)){var p=s.extractFromKey($,n),f=p.key;b=f;var w=p.namespaces;s.options.fallbackNS&&(w=w.concat(s.options.fallbackNS));var x=n.count!==void 0&&typeof n.count!="string",v=x&&!n.ordinal&&n.count===0&&s.pluralResolver.shouldUseIntlApi(),A=n.context!==void 0&&(typeof n.context=="string"||typeof n.context=="number")&&n.context!=="",N=n.lngs?n.lngs:s.languageUtils.toResolveHierarchy(n.lng||s.language,n.fallbackLng);w.forEach(function(h){s.isValidLookup(m)||(_=h,!Is["".concat(N[0],"-").concat(h)]&&s.utils&&s.utils.hasLoadedNamespace&&!s.utils.hasLoadedNamespace(_)&&(Is["".concat(N[0],"-").concat(h)]=!0,s.logger.warn('key "'.concat(b,'" for languages "').concat(N.join(", "),`" won't get resolved as namespace "`).concat(_,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),N.forEach(function(k){if(!s.isValidLookup(m)){t=k;var O=[f];if(s.i18nFormat&&s.i18nFormat.addLookupKeys)s.i18nFormat.addLookupKeys(O,f,k,h,n);else{var C;x&&(C=s.pluralResolver.getSuffix(k,n.count,n));var q="".concat(s.options.pluralSeparator,"zero");if(x&&(O.push(f+C),v&&O.push(f+q)),A){var e="".concat(f).concat(s.options.contextSeparator).concat(n.context);O.push(e),x&&(O.push(e+C),v&&O.push(e+q))}}for(var u;u=O.pop();)s.isValidLookup(m)||(y=u,m=s.getResource(k,h,u,n))}}))})}}),{res:m,usedKey:b,exactUsedKey:y,usedLng:t,usedNS:_}}},{key:"isValidLookup",value:function(r){return r!==void 0&&!(!this.options.returnNull&&r===null)&&!(!this.options.returnEmptyString&&r==="")}},{key:"getResource",value:function(r,s,n){var m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(r,s,n,m):this.resourceStore.getResource(r,s,n,m)}}],[{key:"hasDefaultValue",value:function(r){var s="defaultValue";for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)&&s===n.substring(0,s.length)&&r[n]!==void 0)return!0;return!1}}]),a}(ye);function ts(o){return o.charAt(0).toUpperCase()+o.slice(1)}var Ft=function(){function o(i){re(this,o),this.options=i,this.supportedLngs=this.options.supportedLngs||!1,this.logger=oe.create("languageUtils")}return ne(o,[{key:"getScriptPartFromCode",value:function(a){if(!a||a.indexOf("-")<0)return null;var c=a.split("-");return c.length===2||(c.pop(),c[c.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(c.join("-"))}},{key:"getLanguagePartFromCode",value:function(a){if(!a||a.indexOf("-")<0)return a;var c=a.split("-");return this.formatLanguageCode(c[0])}},{key:"formatLanguageCode",value:function(a){if(typeof a=="string"&&a.indexOf("-")>-1){var c=["hans","hant","latn","cyrl","cans","mong","arab"],r=a.split("-");return this.options.lowerCaseLng?r=r.map(function(s){return s.toLowerCase()}):r.length===2?(r[0]=r[0].toLowerCase(),r[1]=r[1].toUpperCase(),c.indexOf(r[1].toLowerCase())>-1&&(r[1]=ts(r[1].toLowerCase()))):r.length===3&&(r[0]=r[0].toLowerCase(),r[1].length===2&&(r[1]=r[1].toUpperCase()),r[0]!=="sgn"&&r[2].length===2&&(r[2]=r[2].toUpperCase()),c.indexOf(r[1].toLowerCase())>-1&&(r[1]=ts(r[1].toLowerCase())),c.indexOf(r[2].toLowerCase())>-1&&(r[2]=ts(r[2].toLowerCase()))),r.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?a.toLowerCase():a}},{key:"isSupportedCode",value:function(a){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(a=this.getLanguagePartFromCode(a)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(a)>-1}},{key:"getBestMatchFromCodes",value:function(a){var c=this;if(!a)return null;var r;return a.forEach(function(s){if(!r){var n=c.formatLanguageCode(s);(!c.options.supportedLngs||c.isSupportedCode(n))&&(r=n)}}),!r&&this.options.supportedLngs&&a.forEach(function(s){if(!r){var n=c.getLanguagePartFromCode(s);if(c.isSupportedCode(n))return r=n;r=c.options.supportedLngs.find(function(m){if(m.indexOf(n)===0)return m})}}),r||(r=this.getFallbackCodes(this.options.fallbackLng)[0]),r}},{key:"getFallbackCodes",value:function(a,c){if(!a)return[];if(typeof a=="function"&&(a=a(c)),typeof a=="string"&&(a=[a]),Object.prototype.toString.apply(a)==="[object Array]")return a;if(!c)return a.default||[];var r=a[c];return r||(r=a[this.getScriptPartFromCode(c)]),r||(r=a[this.formatLanguageCode(c)]),r||(r=a[this.getLanguagePartFromCode(c)]),r||(r=a.default),r||[]}},{key:"toResolveHierarchy",value:function(a,c){var r=this,s=this.getFallbackCodes(c||this.options.fallbackLng||[],a),n=[],m=function(y){y&&(r.isSupportedCode(y)?n.push(y):r.logger.warn("rejecting language code not found in supportedLngs: ".concat(y)))};return typeof a=="string"&&a.indexOf("-")>-1?(this.options.load!=="languageOnly"&&m(this.formatLanguageCode(a)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&m(this.getScriptPartFromCode(a)),this.options.load!=="currentOnly"&&m(this.getLanguagePartFromCode(a))):typeof a=="string"&&m(this.formatLanguageCode(a)),s.forEach(function(b){n.indexOf(b)<0&&m(r.formatLanguageCode(b))}),n}}]),o}(),Dt=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],Ut={1:function(i){return Number(i>1)},2:function(i){return Number(i!=1)},3:function(i){return 0},4:function(i){return Number(i%10==1&&i%100!=11?0:i%10>=2&&i%10<=4&&(i%100<10||i%100>=20)?1:2)},5:function(i){return Number(i==0?0:i==1?1:i==2?2:i%100>=3&&i%100<=10?3:i%100>=11?4:5)},6:function(i){return Number(i==1?0:i>=2&&i<=4?1:2)},7:function(i){return Number(i==1?0:i%10>=2&&i%10<=4&&(i%100<10||i%100>=20)?1:2)},8:function(i){return Number(i==1?0:i==2?1:i!=8&&i!=11?2:3)},9:function(i){return Number(i>=2)},10:function(i){return Number(i==1?0:i==2?1:i<7?2:i<11?3:4)},11:function(i){return Number(i==1||i==11?0:i==2||i==12?1:i>2&&i<20?2:3)},12:function(i){return Number(i%10!=1||i%100==11)},13:function(i){return Number(i!==0)},14:function(i){return Number(i==1?0:i==2?1:i==3?2:3)},15:function(i){return Number(i%10==1&&i%100!=11?0:i%10>=2&&(i%100<10||i%100>=20)?1:2)},16:function(i){return Number(i%10==1&&i%100!=11?0:i!==0?1:2)},17:function(i){return Number(i==1||i%10==1&&i%100!=11?0:1)},18:function(i){return Number(i==0?0:i==1?1:2)},19:function(i){return Number(i==1?0:i==0||i%100>1&&i%100<11?1:i%100>10&&i%100<20?2:3)},20:function(i){return Number(i==1?0:i==0||i%100>0&&i%100<20?1:2)},21:function(i){return Number(i%100==1?1:i%100==2?2:i%100==3||i%100==4?3:0)},22:function(i){return Number(i==1?0:i==2?1:(i<0||i>10)&&i%10==0?2:3)}},Mt=["v1","v2","v3"],js={zero:0,one:1,two:2,few:3,many:4,other:5};function zt(){var o={};return Dt.forEach(function(i){i.lngs.forEach(function(a){o[a]={numbers:i.nr,plurals:Ut[i.fc]}})}),o}var Bt=function(){function o(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};re(this,o),this.languageUtils=i,this.options=a,this.logger=oe.create("pluralResolver"),(!this.options.compatibilityJSON||this.options.compatibilityJSON==="v4")&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=zt()}return ne(o,[{key:"addRule",value:function(a,c){this.rules[a]=c}},{key:"getRule",value:function(a){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(a,{type:c.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[a]||this.rules[this.languageUtils.getLanguagePartFromCode(a)]}},{key:"needsPlural",value:function(a){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getRule(a,c);return this.shouldUseIntlApi()?r&&r.resolvedOptions().pluralCategories.length>1:r&&r.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(a,c){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(a,r).map(function(s){return"".concat(c).concat(s)})}},{key:"getSuffixes",value:function(a){var c=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.getRule(a,r);return s?this.shouldUseIntlApi()?s.resolvedOptions().pluralCategories.sort(function(n,m){return js[n]-js[m]}).map(function(n){return"".concat(c.options.prepend).concat(n)}):s.numbers.map(function(n){return c.getSuffix(a,n,r)}):[]}},{key:"getSuffix",value:function(a,c){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=this.getRule(a,r);return s?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(s.select(c)):this.getSuffixRetroCompatible(s,c):(this.logger.warn("no plural rule found for: ".concat(a)),"")}},{key:"getSuffixRetroCompatible",value:function(a,c){var r=this,s=a.noAbs?a.plurals(c):a.plurals(Math.abs(c)),n=a.numbers[s];this.options.simplifyPluralSuffix&&a.numbers.length===2&&a.numbers[0]===1&&(n===2?n="plural":n===1&&(n=""));var m=function(){return r.options.prepend&&n.toString()?r.options.prepend+n.toString():n.toString()};return this.options.compatibilityJSON==="v1"?n===1?"":typeof n=="number"?"_plural_".concat(n.toString()):m():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&a.numbers.length===2&&a.numbers[0]===1?m():this.options.prepend&&s.toString()?this.options.prepend+s.toString():s.toString()}},{key:"shouldUseIntlApi",value:function(){return!Mt.includes(this.options.compatibilityJSON)}}]),o}();function qs(o,i){var a=Object.keys(o);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(o);i&&(c=c.filter(function(r){return Object.getOwnPropertyDescriptor(o,r).enumerable})),a.push.apply(a,c)}return a}function te(o){for(var i=1;i<arguments.length;i++){var a=arguments[i]!=null?arguments[i]:{};i%2?qs(Object(a),!0).forEach(function(c){fe(o,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(a)):qs(Object(a)).forEach(function(c){Object.defineProperty(o,c,Object.getOwnPropertyDescriptor(a,c))})}return o}var Ht=function(){function o(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};re(this,o),this.logger=oe.create("interpolator"),this.options=i,this.format=i.interpolation&&i.interpolation.format||function(a){return a},this.init(i)}return ne(o,[{key:"init",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};a.interpolation||(a.interpolation={escapeValue:!0});var c=a.interpolation;this.escape=c.escape!==void 0?c.escape:Nt,this.escapeValue=c.escapeValue!==void 0?c.escapeValue:!0,this.useRawValueToEscape=c.useRawValueToEscape!==void 0?c.useRawValueToEscape:!1,this.prefix=c.prefix?Se(c.prefix):c.prefixEscaped||"{{",this.suffix=c.suffix?Se(c.suffix):c.suffixEscaped||"}}",this.formatSeparator=c.formatSeparator?c.formatSeparator:c.formatSeparator||",",this.unescapePrefix=c.unescapeSuffix?"":c.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":c.unescapeSuffix||"",this.nestingPrefix=c.nestingPrefix?Se(c.nestingPrefix):c.nestingPrefixEscaped||Se("$t("),this.nestingSuffix=c.nestingSuffix?Se(c.nestingSuffix):c.nestingSuffixEscaped||Se(")"),this.nestingOptionsSeparator=c.nestingOptionsSeparator?c.nestingOptionsSeparator:c.nestingOptionsSeparator||",",this.maxReplaces=c.maxReplaces?c.maxReplaces:1e3,this.alwaysFormat=c.alwaysFormat!==void 0?c.alwaysFormat:!1,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var a="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(a,"g");var c="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(c,"g");var r="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(r,"g")}},{key:"interpolate",value:function(a,c,r,s){var n=this,m,b,y,t=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function _(x){return x.replace(/\$/g,"$$$$")}var $=function(v){if(v.indexOf(n.formatSeparator)<0){var A=Es(c,t,v);return n.alwaysFormat?n.format(A,void 0,r,te(te(te({},s),c),{},{interpolationkey:v})):A}var N=v.split(n.formatSeparator),h=N.shift().trim(),k=N.join(n.formatSeparator).trim();return n.format(Es(c,t,h),k,r,te(te(te({},s),c),{},{interpolationkey:h}))};this.resetRegExp();var p=s&&s.missingInterpolationHandler||this.options.missingInterpolationHandler,f=s&&s.interpolation&&s.interpolation.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables,w=[{regex:this.regexpUnescape,safeValue:function(v){return _(v)}},{regex:this.regexp,safeValue:function(v){return n.escapeValue?_(n.escape(v)):_(v)}}];return w.forEach(function(x){for(y=0;m=x.regex.exec(a);){var v=m[1].trim();if(b=$(v),b===void 0)if(typeof p=="function"){var A=p(a,m,s);b=typeof A=="string"?A:""}else if(s&&s.hasOwnProperty(v))b="";else if(f){b=m[0];continue}else n.logger.warn("missed to pass in variable ".concat(v," for interpolating ").concat(a)),b="";else typeof b!="string"&&!n.useRawValueToEscape&&(b=Os(b));var N=x.safeValue(b);if(a=a.replace(m[0],N),f?(x.regex.lastIndex+=b.length,x.regex.lastIndex-=m[0].length):x.regex.lastIndex=0,y++,y>=n.maxReplaces)break}}),a}},{key:"nest",value:function(a,c){var r=this,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n,m,b=te({},s);b.applyPostProcessor=!1,delete b.defaultValue;function y(p,f){var w=this.nestingOptionsSeparator;if(p.indexOf(w)<0)return p;var x=p.split(new RegExp("".concat(w,"[ ]*{"))),v="{".concat(x[1]);p=x[0],v=this.interpolate(v,b);var A=v.match(/'/g),N=v.match(/"/g);(A&&A.length%2===0&&!N||N.length%2!==0)&&(v=v.replace(/'/g,'"'));try{b=JSON.parse(v),f&&(b=te(te({},f),b))}catch(h){return this.logger.warn("failed parsing options string in nesting for key ".concat(p),h),"".concat(p).concat(w).concat(v)}return delete b.defaultValue,p}for(;n=this.nestingRegexp.exec(a);){var t=[],_=!1;if(n[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(n[1])){var $=n[1].split(this.formatSeparator).map(function(p){return p.trim()});n[1]=$.shift(),t=$,_=!0}if(m=c(y.call(this,n[1].trim(),b),b),m&&n[0]===a&&typeof m!="string")return m;typeof m!="string"&&(m=Os(m)),m||(this.logger.warn("missed to resolve ".concat(n[1]," for nesting ").concat(a)),m=""),_&&(m=t.reduce(function(p,f){return r.format(p,f,s.lng,te(te({},s),{},{interpolationkey:n[1].trim()}))},m.trim())),a=a.replace(n[0],m),this.regexp.lastIndex=0}return a}}]),o}();function Fs(o,i){var a=Object.keys(o);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(o);i&&(c=c.filter(function(r){return Object.getOwnPropertyDescriptor(o,r).enumerable})),a.push.apply(a,c)}return a}function de(o){for(var i=1;i<arguments.length;i++){var a=arguments[i]!=null?arguments[i]:{};i%2?Fs(Object(a),!0).forEach(function(c){fe(o,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(a)):Fs(Object(a)).forEach(function(c){Object.defineProperty(o,c,Object.getOwnPropertyDescriptor(a,c))})}return o}function Gt(o){var i=o.toLowerCase().trim(),a={};if(o.indexOf("(")>-1){var c=o.split("(");i=c[0].toLowerCase().trim();var r=c[1].substring(0,c[1].length-1);if(i==="currency"&&r.indexOf(":")<0)a.currency||(a.currency=r.trim());else if(i==="relativetime"&&r.indexOf(":")<0)a.range||(a.range=r.trim());else{var s=r.split(";");s.forEach(function(n){if(n){var m=n.split(":"),b=vt(m),y=b[0],t=b.slice(1),_=t.join(":").trim().replace(/^'+|'+$/g,"");a[y.trim()]||(a[y.trim()]=_),_==="false"&&(a[y.trim()]=!1),_==="true"&&(a[y.trim()]=!0),isNaN(_)||(a[y.trim()]=parseInt(_,10))}})}}return{formatName:i,formatOptions:a}}function Ee(o){var i={};return function(c,r,s){var n=r+JSON.stringify(s),m=i[n];return m||(m=o(r,s),i[n]=m),m(c)}}var Vt=function(){function o(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};re(this,o),this.logger=oe.create("formatter"),this.options=i,this.formats={number:Ee(function(a,c){var r=new Intl.NumberFormat(a,c);return function(s){return r.format(s)}}),currency:Ee(function(a,c){var r=new Intl.NumberFormat(a,de(de({},c),{},{style:"currency"}));return function(s){return r.format(s)}}),datetime:Ee(function(a,c){var r=new Intl.DateTimeFormat(a,de({},c));return function(s){return r.format(s)}}),relativetime:Ee(function(a,c){var r=new Intl.RelativeTimeFormat(a,de({},c));return function(s){return r.format(s,c.range||"day")}}),list:Ee(function(a,c){var r=new Intl.ListFormat(a,de({},c));return function(s){return r.format(s)}})},this.init(i)}return ne(o,[{key:"init",value:function(a){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}},r=c.interpolation;this.formatSeparator=r.formatSeparator?r.formatSeparator:r.formatSeparator||","}},{key:"add",value:function(a,c){this.formats[a.toLowerCase().trim()]=c}},{key:"addCached",value:function(a,c){this.formats[a.toLowerCase().trim()]=Ee(c)}},{key:"format",value:function(a,c,r,s){var n=this,m=c.split(this.formatSeparator),b=m.reduce(function(y,t){var _=Gt(t),$=_.formatName,p=_.formatOptions;if(n.formats[$]){var f=y;try{var w=s&&s.formatParams&&s.formatParams[s.interpolationkey]||{},x=w.locale||w.lng||s.locale||s.lng||r;f=n.formats[$](y,x,de(de(de({},p),s),w))}catch(v){n.logger.warn(v)}return f}else n.logger.warn("there was no format function for ".concat($));return y},a);return b}}]),o}();function Ds(o,i){var a=Object.keys(o);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(o);i&&(c=c.filter(function(r){return Object.getOwnPropertyDescriptor(o,r).enumerable})),a.push.apply(a,c)}return a}function Us(o){for(var i=1;i<arguments.length;i++){var a=arguments[i]!=null?arguments[i]:{};i%2?Ds(Object(a),!0).forEach(function(c){fe(o,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(a)):Ds(Object(a)).forEach(function(c){Object.defineProperty(o,c,Object.getOwnPropertyDescriptor(a,c))})}return o}function Wt(o){var i=Kt();return function(){var c=ae(o),r;if(i){var s=ae(this).constructor;r=Reflect.construct(c,arguments,s)}else r=c.apply(this,arguments);return Le(this,r)}}function Kt(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Yt(o,i){o.pending[i]!==void 0&&(delete o.pending[i],o.pendingCount--)}var Jt=function(o){Ue(a,o);var i=Wt(a);function a(c,r,s){var n,m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return re(this,a),n=i.call(this),ze&&ye.call(be(n)),n.backend=c,n.store=r,n.services=s,n.languageUtils=s.languageUtils,n.options=m,n.logger=oe.create("backendConnector"),n.waitingReads=[],n.maxParallelReads=m.maxParallelReads||10,n.readingCalls=0,n.maxRetries=m.maxRetries>=0?m.maxRetries:5,n.retryTimeout=m.retryTimeout>=1?m.retryTimeout:350,n.state={},n.queue=[],n.backend&&n.backend.init&&n.backend.init(s,m.backend,m),n}return ne(a,[{key:"queueLoad",value:function(r,s,n,m){var b=this,y={},t={},_={},$={};return r.forEach(function(p){var f=!0;s.forEach(function(w){var x="".concat(p,"|").concat(w);!n.reload&&b.store.hasResourceBundle(p,w)?b.state[x]=2:b.state[x]<0||(b.state[x]===1?t[x]===void 0&&(t[x]=!0):(b.state[x]=1,f=!1,t[x]===void 0&&(t[x]=!0),y[x]===void 0&&(y[x]=!0),$[w]===void 0&&($[w]=!0)))}),f||(_[p]=!0)}),(Object.keys(y).length||Object.keys(t).length)&&this.queue.push({pending:t,pendingCount:Object.keys(t).length,loaded:{},errors:[],callback:m}),{toLoad:Object.keys(y),pending:Object.keys(t),toLoadLanguages:Object.keys(_),toLoadNamespaces:Object.keys($)}}},{key:"loaded",value:function(r,s,n){var m=r.split("|"),b=m[0],y=m[1];s&&this.emit("failedLoading",b,y,s),n&&this.store.addResourceBundle(b,y,n),this.state[r]=s?-1:2;var t={};this.queue.forEach(function(_){Et(_.loaded,[b],y),Yt(_,r),s&&_.errors.push(s),_.pendingCount===0&&!_.done&&(Object.keys(_.loaded).forEach(function($){t[$]||(t[$]={});var p=_.loaded[$];p.length&&p.forEach(function(f){t[$][f]===void 0&&(t[$][f]=!0)})}),_.done=!0,_.errors.length?_.callback(_.errors):_.callback())}),this.emit("loaded",t),this.queue=this.queue.filter(function(_){return!_.done})}},{key:"read",value:function(r,s,n){var m=this,b=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,y=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,t=arguments.length>5?arguments[5]:void 0;if(!r.length)return t(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:r,ns:s,fcName:n,tried:b,wait:y,callback:t});return}return this.readingCalls++,this.backend[n](r,s,function(_,$){if(m.readingCalls--,m.waitingReads.length>0){var p=m.waitingReads.shift();m.read(p.lng,p.ns,p.fcName,p.tried,p.wait,p.callback)}if(_&&$&&b<m.maxRetries){setTimeout(function(){m.read.call(m,r,s,n,b+1,y*2,t)},y);return}t(_,$)})}},{key:"prepareLoading",value:function(r,s){var n=this,m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},b=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),b&&b();typeof r=="string"&&(r=this.languageUtils.toResolveHierarchy(r)),typeof s=="string"&&(s=[s]);var y=this.queueLoad(r,s,m,b);if(!y.toLoad.length)return y.pending.length||b(),null;y.toLoad.forEach(function(t){n.loadOne(t)})}},{key:"load",value:function(r,s,n){this.prepareLoading(r,s,{},n)}},{key:"reload",value:function(r,s,n){this.prepareLoading(r,s,{reload:!0},n)}},{key:"loadOne",value:function(r){var s=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",m=r.split("|"),b=m[0],y=m[1];this.read(b,y,"read",void 0,void 0,function(t,_){t&&s.logger.warn("".concat(n,"loading namespace ").concat(y," for language ").concat(b," failed"),t),!t&&_&&s.logger.log("".concat(n,"loaded namespace ").concat(y," for language ").concat(b),_),s.loaded(r,t,_)})}},{key:"saveMissing",value:function(r,s,n,m,b){var y=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(s)){this.logger.warn('did not save key "'.concat(n,'" as the namespace "').concat(s,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}n==null||n===""||(this.backend&&this.backend.create&&this.backend.create(r,s,n,m,null,Us(Us({},y),{},{isUpdate:b})),!(!r||!r[0])&&this.store.addResource(r[0],s,n,m))}}]),a}(ye);function Qt(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(i){var a={};if(J(i[1])==="object"&&(a=i[1]),typeof i[1]=="string"&&(a.defaultValue=i[1]),typeof i[2]=="string"&&(a.tDescription=i[2]),J(i[2])==="object"||J(i[3])==="object"){var c=i[3]||i[2];Object.keys(c).forEach(function(r){a[r]=c[r]})}return a},interpolation:{escapeValue:!0,format:function(i,a,c,r){return i},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function Ms(o){return typeof o.ns=="string"&&(o.ns=[o.ns]),typeof o.fallbackLng=="string"&&(o.fallbackLng=[o.fallbackLng]),typeof o.fallbackNS=="string"&&(o.fallbackNS=[o.fallbackNS]),o.supportedLngs&&o.supportedLngs.indexOf("cimode")<0&&(o.supportedLngs=o.supportedLngs.concat(["cimode"])),o}function zs(o,i){var a=Object.keys(o);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(o);i&&(c=c.filter(function(r){return Object.getOwnPropertyDescriptor(o,r).enumerable})),a.push.apply(a,c)}return a}function le(o){for(var i=1;i<arguments.length;i++){var a=arguments[i]!=null?arguments[i]:{};i%2?zs(Object(a),!0).forEach(function(c){fe(o,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(a)):zs(Object(a)).forEach(function(c){Object.defineProperty(o,c,Object.getOwnPropertyDescriptor(a,c))})}return o}function Xt(o){var i=Zt();return function(){var c=ae(o),r;if(i){var s=ae(this).constructor;r=Reflect.construct(c,arguments,s)}else r=c.apply(this,arguments);return Le(this,r)}}function Zt(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function He(){}function er(o){var i=Object.getOwnPropertyNames(Object.getPrototypeOf(o));i.forEach(function(a){typeof o[a]=="function"&&(o[a]=o[a].bind(o))})}var Ge=function(o){Ue(a,o);var i=Xt(a);function a(){var c,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;if(re(this,a),c=i.call(this),ze&&ye.call(be(c)),c.options=Ms(r),c.services={},c.logger=oe,c.modules={external:[]},er(be(c)),s&&!c.isInitialized&&!r.isClone){if(!c.options.initImmediate)return c.init(r,s),Le(c,be(c));setTimeout(function(){c.init(r,s)},0)}return c}return ne(a,[{key:"init",value:function(){var r=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;typeof s=="function"&&(n=s,s={}),!s.defaultNS&&s.defaultNS!==!1&&s.ns&&(typeof s.ns=="string"?s.defaultNS=s.ns:s.ns.indexOf("translation")<0&&(s.defaultNS=s.ns[0]));var m=Qt();this.options=le(le(le({},m),this.options),Ms(s)),this.options.compatibilityAPI!=="v1"&&(this.options.interpolation=le(le({},m.interpolation),this.options.interpolation)),s.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=s.keySeparator),s.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=s.nsSeparator);function b(v){return v?typeof v=="function"?new v:v:null}if(!this.options.isClone){this.modules.logger?oe.init(b(this.modules.logger),this.options):oe.init(null,this.options);var y;this.modules.formatter?y=this.modules.formatter:typeof Intl<"u"&&(y=Vt);var t=new Ft(this.options);this.store=new Pt(this.options.resources,this.options);var _=this.services;_.logger=oe,_.resourceStore=this.store,_.languageUtils=t,_.pluralResolver=new Bt(t,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),y&&(!this.options.interpolation.format||this.options.interpolation.format===m.interpolation.format)&&(_.formatter=b(y),_.formatter.init(_,this.options),this.options.interpolation.format=_.formatter.format.bind(_.formatter)),_.interpolator=new Ht(this.options),_.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},_.backendConnector=new Jt(b(this.modules.backend),_.resourceStore,_,this.options),_.backendConnector.on("*",function(v){for(var A=arguments.length,N=new Array(A>1?A-1:0),h=1;h<A;h++)N[h-1]=arguments[h];r.emit.apply(r,[v].concat(N))}),this.modules.languageDetector&&(_.languageDetector=b(this.modules.languageDetector),_.languageDetector.init(_,this.options.detection,this.options)),this.modules.i18nFormat&&(_.i18nFormat=b(this.modules.i18nFormat),_.i18nFormat.init&&_.i18nFormat.init(this)),this.translator=new Ps(this.services,this.options),this.translator.on("*",function(v){for(var A=arguments.length,N=new Array(A>1?A-1:0),h=1;h<A;h++)N[h-1]=arguments[h];r.emit.apply(r,[v].concat(N))}),this.modules.external.forEach(function(v){v.init&&v.init(r)})}if(this.format=this.options.interpolation.format,n||(n=He),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var $=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);$.length>0&&$[0]!=="dev"&&(this.options.lng=$[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined");var p=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];p.forEach(function(v){r[v]=function(){var A;return(A=r.store)[v].apply(A,arguments)}});var f=["addResource","addResources","addResourceBundle","removeResourceBundle"];f.forEach(function(v){r[v]=function(){var A;return(A=r.store)[v].apply(A,arguments),r}});var w=Ie(),x=function(){var A=function(h,k){r.isInitialized&&!r.initializedStoreOnce&&r.logger.warn("init: i18next is already initialized. You should call init just once!"),r.isInitialized=!0,r.options.isClone||r.logger.log("initialized",r.options),r.emit("initialized",r.options),w.resolve(k),n(h,k)};if(r.languages&&r.options.compatibilityAPI!=="v1"&&!r.isInitialized)return A(null,r.t.bind(r));r.changeLanguage(r.options.lng,A)};return this.options.resources||!this.options.initImmediate?x():setTimeout(x,0),w}},{key:"loadResources",value:function(r){var s=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:He,m=n,b=typeof r=="string"?r:this.language;if(typeof r=="function"&&(m=r),!this.options.resources||this.options.partialBundledLanguages){if(b&&b.toLowerCase()==="cimode")return m();var y=[],t=function(p){if(p){var f=s.services.languageUtils.toResolveHierarchy(p);f.forEach(function(w){y.indexOf(w)<0&&y.push(w)})}};if(b)t(b);else{var _=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);_.forEach(function($){return t($)})}this.options.preload&&this.options.preload.forEach(function($){return t($)}),this.services.backendConnector.load(y,this.options.ns,function($){!$&&!s.resolvedLanguage&&s.language&&s.setResolvedLanguage(s.language),m($)})}else m(null)}},{key:"reloadResources",value:function(r,s,n){var m=Ie();return r||(r=this.languages),s||(s=this.options.ns),n||(n=He),this.services.backendConnector.reload(r,s,function(b){m.resolve(),n(b)}),m}},{key:"use",value:function(r){if(!r)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!r.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return r.type==="backend"&&(this.modules.backend=r),(r.type==="logger"||r.log&&r.warn&&r.error)&&(this.modules.logger=r),r.type==="languageDetector"&&(this.modules.languageDetector=r),r.type==="i18nFormat"&&(this.modules.i18nFormat=r),r.type==="postProcessor"&&Rs.addPostProcessor(r),r.type==="formatter"&&(this.modules.formatter=r),r.type==="3rdParty"&&this.modules.external.push(r),this}},{key:"setResolvedLanguage",value:function(r){if(!(!r||!this.languages)&&!(["cimode","dev"].indexOf(r)>-1))for(var s=0;s<this.languages.length;s++){var n=this.languages[s];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}}},{key:"changeLanguage",value:function(r,s){var n=this;this.isLanguageChangingTo=r;var m=Ie();this.emit("languageChanging",r);var b=function($){n.language=$,n.languages=n.services.languageUtils.toResolveHierarchy($),n.resolvedLanguage=void 0,n.setResolvedLanguage($)},y=function($,p){p?(b(p),n.translator.changeLanguage(p),n.isLanguageChangingTo=void 0,n.emit("languageChanged",p),n.logger.log("languageChanged",p)):n.isLanguageChangingTo=void 0,m.resolve(function(){return n.t.apply(n,arguments)}),s&&s($,function(){return n.t.apply(n,arguments)})},t=function($){!r&&!$&&n.services.languageDetector&&($=[]);var p=typeof $=="string"?$:n.services.languageUtils.getBestMatchFromCodes($);p&&(n.language||b(p),n.translator.language||n.translator.changeLanguage(p),n.services.languageDetector&&n.services.languageDetector.cacheUserLanguage(p)),n.loadResources(p,function(f){y(f,p)})};return!r&&this.services.languageDetector&&!this.services.languageDetector.async?t(this.services.languageDetector.detect()):!r&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(t):t(r),m}},{key:"getFixedT",value:function(r,s,n){var m=this,b=function y(t,_){var $;if(J(_)!=="object"){for(var p=arguments.length,f=new Array(p>2?p-2:0),w=2;w<p;w++)f[w-2]=arguments[w];$=m.options.overloadTranslationOptionHandler([t,_].concat(f))}else $=le({},_);$.lng=$.lng||y.lng,$.lngs=$.lngs||y.lngs,$.ns=$.ns||y.ns,$.keyPrefix=$.keyPrefix||n||y.keyPrefix;var x=m.options.keySeparator||".",v=$.keyPrefix?"".concat($.keyPrefix).concat(x).concat(t):t;return m.t(v,$)};return typeof r=="string"?b.lng=r:b.lngs=r,b.ns=s,b.keyPrefix=n,b}},{key:"t",value:function(){var r;return this.translator&&(r=this.translator).translate.apply(r,arguments)}},{key:"exists",value:function(){var r;return this.translator&&(r=this.translator).exists.apply(r,arguments)}},{key:"setDefaultNamespace",value:function(r){this.options.defaultNS=r}},{key:"hasLoadedNamespace",value:function(r){var s=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var m=this.resolvedLanguage||this.languages[0],b=this.options?this.options.fallbackLng:!1,y=this.languages[this.languages.length-1];if(m.toLowerCase()==="cimode")return!0;var t=function(p,f){var w=s.services.backendConnector.state["".concat(p,"|").concat(f)];return w===-1||w===2};if(n.precheck){var _=n.precheck(this,t);if(_!==void 0)return _}return!!(this.hasResourceBundle(m,r)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||t(m,r)&&(!b||t(y,r)))}},{key:"loadNamespaces",value:function(r,s){var n=this,m=Ie();return this.options.ns?(typeof r=="string"&&(r=[r]),r.forEach(function(b){n.options.ns.indexOf(b)<0&&n.options.ns.push(b)}),this.loadResources(function(b){m.resolve(),s&&s(b)}),m):(s&&s(),Promise.resolve())}},{key:"loadLanguages",value:function(r,s){var n=Ie();typeof r=="string"&&(r=[r]);var m=this.options.preload||[],b=r.filter(function(y){return m.indexOf(y)<0});return b.length?(this.options.preload=m.concat(b),this.loadResources(function(y){n.resolve(),s&&s(y)}),n):(s&&s(),Promise.resolve())}},{key:"dir",value:function(r){if(r||(r=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!r)return"rtl";var s=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"];return s.indexOf(this.services.languageUtils.getLanguagePartFromCode(r))>-1||r.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}},{key:"cloneInstance",value:function(){var r=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:He,m=le(le(le({},this.options),s),{isClone:!0}),b=new a(m);(s.debug!==void 0||s.prefix!==void 0)&&(b.logger=b.logger.clone(s));var y=["store","services","language"];return y.forEach(function(t){b[t]=r[t]}),b.services=le({},this.services),b.services.utils={hasLoadedNamespace:b.hasLoadedNamespace.bind(b)},b.translator=new Ps(b.services,b.options),b.translator.on("*",function(t){for(var _=arguments.length,$=new Array(_>1?_-1:0),p=1;p<_;p++)$[p-1]=arguments[p];b.emit.apply(b,[t].concat($))}),b.init(m,n),b.translator.options=b.options,b.translator.backendConnector.services.utils={hasLoadedNamespace:b.hasLoadedNamespace.bind(b)},b}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),a}(ye);fe(Ge,"createInstance",function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;return new Ge(o,i)});var X=Ge.createInstance();X.createInstance=Ge.createInstance,X.createInstance,X.init,X.loadResources,X.reloadResources,X.use,X.changeLanguage,X.getFixedT,X.t,X.exists,X.setDefaultNamespace,X.hasLoadedNamespace,X.loadNamespaces,X.loadLanguages;const sr="gw_count_fid",Bs="gw_mea_key_fid",rs="gw_mea_val_fid",ge="gw_paint_fid",Hs=o=>o!=null;function Gs(o,i){if(o.length!==i.length)return!1;for(let a=0;a<o.length;a++)if(o[a]!==i[a])return!1;return!0}const Vs={AGGREGATOR_LIST:["sum","mean","median","count","min","max","variance","stdev"],CHART_LAYOUT_TYPE:["auto","fixed","full"],COORD_TYPES:["generic","geographic"],GEOM_TYPES:{generic:["auto","bar","line","area","trail","point","circle","tick","rect","arc","text","boxplot","table"],geographic:["poi","choropleth"]},MAX_HISTORY_SIZE:20,STACK_MODE:["none","stack","normalize","center"],META_FIELD_KEYS:["dimensions","measures"],CHANNEL_LIMIT:{rows:1/0,columns:1/0,color:1,opacity:1,size:1,shape:1,theta:1,radius:1,details:1/0,text:1},POSITION_CHANNEL_CONFIG_LIST:["x","y"],NON_POSITION_CHANNEL_CONFIG_LIST:["color","opacity","shape","size"],EMBEDED_MENU_LIST:["data_interpretation","data_view"],PAINT_MAP_SIZE:128,PAINT_SIZE_FACTOR:4,PAINT_MIN_BRUSH_SIZE:1,PAINT_DEFAULT_BRUSH_SIZE:9,PAINT_MAX_BRUSH_SIZE:36,KEYWORD_DEBOUNCE_SETTING:{timeout:300,leading:!0,trailing:!0}},Ws={showActions:!1,showTableSummary:!1,stack:"stack",interactiveScale:!1,zeroScale:!0,background:void 0,size:{mode:"auto",width:320,height:200},format:{numberFormat:void 0,timeFormat:void 0,normalizedNumberFormat:void 0},geoKey:"name",resolve:{x:!1,y:!1,color:!1,opacity:!1,shape:!1,size:!1}},Ks={defaultAggregated:!0,geoms:[Vs.GEOM_TYPES.generic[0]],coordSystem:"generic",limit:-1},tr={dimensions:[],measures:[],rows:[],columns:[],color:[],opacity:[],size:[],shape:[],radius:[],theta:[],longitude:[],latitude:[],geoId:[],details:[],filters:[],text:[]};function rr(){return"gw_"+Oe(4)}const Ve=(o,i,a)=>a===o.length?o.concat([i]):o.flatMap((c,r)=>r===a?[i,c]:[c]),Ys=(o,i)=>o.filter((a,c)=>c!==i),he=(o,i,a)=>o.map((c,r)=>r===i?a(c):c);function U(o,i,a){const c=(r,s,n)=>{const[m,...b]=s;return b.length===0?{...r,[m]:n(r[m])}:{...r,[m]:c(r[m],b,n)}};return c(o,i.split("."),a)}const nr=o=>Math.floor(Math.sqrt(2*o));function ar(o){return(i,a)=>{const{base:c,cache:r,cursor:s,now:n,timeline:m}=i;return{base:c,now:o(n,a),cursor:s+1,cache:s-r.cursor>nr(s)?{value:o(r.value,m[r.cursor]),cursor:r.cursor+1}:r,timeline:m.slice(0,s).concat([a])}}}const ie={measureAfterDimension(o){return o.filter(i=>i.analyticType==="dimension").concat(o.filter(i=>i.analyticType==="measure"))},crossLimit(o){return function(i){let a=0;return i.reduce((c,r)=>(r.analyticType==="dimension"&&a<o&&(c.push(r),a++),r.analyticType==="measure"&&c.push(r),c),[])}},forceAnalyticType(o){return function(i){return i.map(a=>({...a,analyticType:o}))}},forceSemanticType(o){return function(i){return i.map(a=>({...a,semanticType:o}))}}};function We(o,i){return i.reduce((a,c)=>c(a),o)}function Js(o,i){const a={};return i.rows&&i.rows.length>0&&(a.rows=We(i.rows,[ie.measureAfterDimension,ie.crossLimit(o==="table"?1/0:2)])),i.columns&&i.columns.length>0&&(a.columns=We(i.columns,[ie.measureAfterDimension,ie.crossLimit(o==="table"?1/0:2)])),i.latitude&&i.latitude.length>0&&(a.latitude=We(i.latitude,[ie.forceAnalyticType("dimension"),ie.forceSemanticType("quantitative"),ie.crossLimit(1)])),i.longitude&&i.longitude.length>0&&(a.longitude=We(i.longitude,[ie.forceAnalyticType("dimension"),ie.forceSemanticType("quantitative"),ie.crossLimit(1)])),a}var Qs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Pe={},Ke={},or={get exports(){return Ke},set exports(o){Ke=o}},Xs;function lr(){return Xs||(Xs=1,function(o){(function(i,a){o.exports?o.exports=a():i.moo=a()})(Qs,function(){var i=Object.prototype.hasOwnProperty,a=Object.prototype.toString,c=typeof new RegExp().sticky=="boolean";function r(l){return l&&a.call(l)==="[object RegExp]"}function s(l){return l&&typeof l=="object"&&!r(l)&&!Array.isArray(l)}function n(l){return l.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function m(l){var d=new RegExp("|"+l);return d.exec("").length-1}function b(l){return"("+l+")"}function y(l){if(!l.length)return"(?!)";var d=l.map(function(g){return"(?:"+g+")"}).join("|");return"(?:"+d+")"}function t(l){if(typeof l=="string")return"(?:"+n(l)+")";if(r(l)){if(l.ignoreCase)throw new Error("RegExp /i flag not allowed");if(l.global)throw new Error("RegExp /g flag is implied");if(l.sticky)throw new Error("RegExp /y flag is implied");if(l.multiline)throw new Error("RegExp /m flag is implied");return l.source}else throw new Error("Not a pattern: "+l)}function _(l,d){return l.length>d?l:Array(d-l.length+1).join(" ")+l}function $(l,d){for(var g=l.length,E=0;;){var R=l.lastIndexOf(`
`,g-1);if(R===-1||(E++,g=R,E===d)||g===0)break}var L=E<d?0:g+1;return l.substring(L).split(`
`)}function p(l){for(var d=Object.getOwnPropertyNames(l),g=[],E=0;E<d.length;E++){var R=d[E],L=l[R],I=[].concat(L);if(R==="include"){for(var B=0;B<I.length;B++)g.push({include:I[B]});continue}var F=[];I.forEach(function(j){s(j)?(F.length&&g.push(w(R,F)),g.push(w(R,j)),F=[]):F.push(j)}),F.length&&g.push(w(R,F))}return g}function f(l){for(var d=[],g=0;g<l.length;g++){var E=l[g];if(E.include){for(var R=[].concat(E.include),L=0;L<R.length;L++)d.push({include:R[L]});continue}if(!E.type)throw new Error("Rule has no type: "+JSON.stringify(E));d.push(w(E.type,E))}return d}function w(l,d){if(s(d)||(d={match:d}),d.include)throw new Error("Matching rules cannot also include states");var g={defaultType:l,lineBreaks:!!d.error||!!d.fallback,pop:!1,next:null,push:null,error:!1,fallback:!1,value:null,type:null,shouldThrow:!1};for(var E in d)i.call(d,E)&&(g[E]=d[E]);if(typeof g.type=="string"&&l!==g.type)throw new Error("Type transform cannot be a string (type '"+g.type+"' for token '"+l+"')");var R=g.match;return g.match=Array.isArray(R)?R:R?[R]:[],g.match.sort(function(L,I){return r(L)&&r(I)?0:r(I)?-1:r(L)?1:I.length-L.length}),g}function x(l){return Array.isArray(l)?f(l):p(l)}var v=w("error",{lineBreaks:!0,shouldThrow:!0});function A(l,d){for(var g=null,E=Object.create(null),R=!0,L=null,I=[],B=[],F=0;F<l.length;F++)l[F].fallback&&(R=!1);for(var F=0;F<l.length;F++){var j=l[F];if(j.include)throw new Error("Inheritance is not allowed in stateless lexers");if(j.error||j.fallback){if(g)throw!j.fallback==!g.fallback?new Error("Multiple "+(j.fallback?"fallback":"error")+" rules not allowed (for token '"+j.defaultType+"')"):new Error("fallback and error are mutually exclusive (for token '"+j.defaultType+"')");g=j}var G=j.match.slice();if(R)for(;G.length&&typeof G[0]=="string"&&G[0].length===1;){var ue=G.shift();E[ue.charCodeAt(0)]=j}if(j.pop||j.push||j.next){if(!d)throw new Error("State-switching options are not allowed in stateless lexers (for token '"+j.defaultType+"')");if(j.fallback)throw new Error("State-switching options are not allowed on fallback tokens (for token '"+j.defaultType+"')")}if(G.length!==0){R=!1,I.push(j);for(var _e=0;_e<G.length;_e++){var se=G[_e];if(r(se)){if(L===null)L=se.unicode;else if(L!==se.unicode&&j.fallback===!1)throw new Error("If one rule is /u then all must be")}}var $e=y(G.map(t)),K=new RegExp($e);if(K.test(""))throw new Error("RegExp matches empty string: "+K);var pe=m($e);if(pe>0)throw new Error("RegExp has capture groups: "+K+`
Use (?: … ) instead`);if(!j.lineBreaks&&K.test(`
`))throw new Error("Rule should declare lineBreaks: "+K);B.push(b($e))}}var me=g&&g.fallback,we=c&&!me?"ym":"gm",xe=c||me?"":"|";L===!0&&(we+="u");var ke=new RegExp(y(B)+xe,we);return{regexp:ke,groups:I,fast:E,error:g||v}}function N(l){var d=A(x(l));return new C({start:d},"start")}function h(l,d,g){var E=l&&(l.push||l.next);if(E&&!g[E])throw new Error("Missing state '"+E+"' (in token '"+l.defaultType+"' of state '"+d+"')");if(l&&l.pop&&+l.pop!=1)throw new Error("pop must be 1 (in token '"+l.defaultType+"' of state '"+d+"')")}function k(l,d){var g=l.$all?x(l.$all):[];delete l.$all;var E=Object.getOwnPropertyNames(l);d||(d=E[0]);for(var R=Object.create(null),L=0;L<E.length;L++){var I=E[L];R[I]=x(l[I]).concat(g)}for(var L=0;L<E.length;L++)for(var I=E[L],B=R[I],F=Object.create(null),j=0;j<B.length;j++){var G=B[j];if(G.include){var ue=[j,1];if(G.include!==I&&!F[G.include]){F[G.include]=!0;var _e=R[G.include];if(!_e)throw new Error("Cannot include nonexistent state '"+G.include+"' (in state '"+I+"')");for(var se=0;se<_e.length;se++){var $e=_e[se];B.indexOf($e)===-1&&ue.push($e)}}B.splice.apply(B,ue),j--}}for(var K=Object.create(null),L=0;L<E.length;L++){var I=E[L];K[I]=A(R[I],!0)}for(var L=0;L<E.length;L++){for(var pe=E[L],me=K[pe],we=me.groups,j=0;j<we.length;j++)h(we[j],pe,K);for(var xe=Object.getOwnPropertyNames(me.fast),j=0;j<xe.length;j++)h(me.fast[xe[j]],pe,K)}return new C(K,d)}function O(l){for(var d=typeof Map<"u",g=d?new Map:Object.create(null),E=Object.getOwnPropertyNames(l),R=0;R<E.length;R++){var L=E[R],I=l[L],B=Array.isArray(I)?I:[I];B.forEach(function(F){if(typeof F!="string")throw new Error("keyword must be string (in keyword '"+L+"')");d?g.set(F,L):g[F]=L})}return function(F){return d?g.get(F):g[F]}}var C=function(l,d){this.startState=d,this.states=l,this.buffer="",this.stack=[],this.reset()};C.prototype.reset=function(l,d){return this.buffer=l||"",this.index=0,this.line=d?d.line:1,this.col=d?d.col:1,this.queuedToken=d?d.queuedToken:null,this.queuedText=d?d.queuedText:"",this.queuedThrow=d?d.queuedThrow:null,this.setState(d?d.state:this.startState),this.stack=d&&d.stack?d.stack.slice():[],this},C.prototype.save=function(){return{line:this.line,col:this.col,state:this.state,stack:this.stack.slice(),queuedToken:this.queuedToken,queuedText:this.queuedText,queuedThrow:this.queuedThrow}},C.prototype.setState=function(l){if(!(!l||this.state===l)){this.state=l;var d=this.states[l];this.groups=d.groups,this.error=d.error,this.re=d.regexp,this.fast=d.fast}},C.prototype.popState=function(){this.setState(this.stack.pop())},C.prototype.pushState=function(l){this.stack.push(this.state),this.setState(l)};var q=c?function(l,d){return l.exec(d)}:function(l,d){var g=l.exec(d);return g[0].length===0?null:g};C.prototype._getGroup=function(l){for(var d=this.groups.length,g=0;g<d;g++)if(l[g+1]!==void 0)return this.groups[g];throw new Error("Cannot find token type for matched text")};function e(){return this.value}if(C.prototype.next=function(){var l=this.index;if(this.queuedGroup){var d=this._token(this.queuedGroup,this.queuedText,l);return this.queuedGroup=null,this.queuedText="",d}var g=this.buffer;if(l!==g.length){var I=this.fast[g.charCodeAt(l)];if(I)return this._token(I,g.charAt(l),l);var E=this.re;E.lastIndex=l;var R=q(E,g),L=this.error;if(R==null)return this._token(L,g.slice(l,g.length),l);var I=this._getGroup(R),B=R[0];return L.fallback&&R.index!==l?(this.queuedGroup=I,this.queuedText=B,this._token(L,g.slice(l,R.index),l)):this._token(I,B,l)}},C.prototype._token=function(l,d,g){var E=0;if(l.lineBreaks){var R=/\n/g,L=1;if(d===`
`)E=1;else for(;R.exec(d);)E++,L=R.lastIndex}var I={type:typeof l.type=="function"&&l.type(d)||l.defaultType,value:typeof l.value=="function"?l.value(d):d,text:d,toString:e,offset:g,lineBreaks:E,line:this.line,col:this.col},B=d.length;if(this.index+=B,this.line+=E,E!==0?this.col=B-L+1:this.col+=B,l.shouldThrow){var F=new Error(this.formatError(I,"invalid syntax"));throw F}return l.pop?this.popState():l.push?this.pushState(l.push):l.next&&this.setState(l.next),I},typeof Symbol<"u"&&Symbol.iterator){var u=function(l){this.lexer=l};u.prototype.next=function(){var l=this.lexer.next();return{value:l,done:!l}},u.prototype[Symbol.iterator]=function(){return this},C.prototype[Symbol.iterator]=function(){return new u(this)}}return C.prototype.formatError=function(l,d){if(l==null)var g=this.buffer.slice(this.index),l={text:g,offset:this.index,lineBreaks:g.indexOf(`
`)===-1?0:1,line:this.line,col:this.col};var E=2,R=Math.max(l.line-E,1),L=l.line+E,I=String(L).length,B=$(this.buffer,this.line-l.line+E+1).slice(0,5),F=[];F.push(d+" at line "+l.line+" col "+l.col+":"),F.push("");for(var j=0;j<B.length;j++){var G=B[j],ue=R+j;F.push(_(String(ue),I)+"  "+G),ue===l.line&&F.push(_("",I+l.col+1)+"^")}return F.join(`
`)},C.prototype.clone=function(){return new C(this.states,this.state)},C.prototype.has=function(l){return!0},{compile:N,states:k,error:Object.freeze({error:!0}),fallback:Object.freeze({fallback:!0}),keywords:O}})}(or)),Ke}var Ye={},ir={get exports(){return Ye},set exports(o){Ye=o}},Zs;function cr(){return Zs||(Zs=1,function(o){(function(i,a){o.exports?o.exports=a():i.nearley=a()})(Qs,function(){function i(y,t,_){return this.id=++i.highestId,this.name=y,this.symbols=t,this.postprocess=_,this}i.highestId=0,i.prototype.toString=function(y){var t=typeof y>"u"?this.symbols.map(b).join(" "):this.symbols.slice(0,y).map(b).join(" ")+" ● "+this.symbols.slice(y).map(b).join(" ");return this.name+" → "+t};function a(y,t,_,$){this.rule=y,this.dot=t,this.reference=_,this.data=[],this.wantedBy=$,this.isComplete=this.dot===y.symbols.length}a.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},a.prototype.nextState=function(y){var t=new a(this.rule,this.dot+1,this.reference,this.wantedBy);return t.left=this,t.right=y,t.isComplete&&(t.data=t.build(),t.right=void 0),t},a.prototype.build=function(){var y=[],t=this;do y.push(t.right.data),t=t.left;while(t.left);return y.reverse(),y},a.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,n.fail))};function c(y,t){this.grammar=y,this.index=t,this.states=[],this.wants={},this.scannable=[],this.completed={}}c.prototype.process=function(y){for(var t=this.states,_=this.wants,$=this.completed,p=0;p<t.length;p++){var f=t[p];if(f.isComplete){if(f.finish(),f.data!==n.fail){for(var w=f.wantedBy,x=w.length;x--;){var v=w[x];this.complete(v,f)}if(f.reference===this.index){var A=f.rule.name;(this.completed[A]=this.completed[A]||[]).push(f)}}}else{var A=f.rule.symbols[f.dot];if(typeof A!="string"){this.scannable.push(f);continue}if(_[A]){if(_[A].push(f),$.hasOwnProperty(A))for(var N=$[A],x=0;x<N.length;x++){var h=N[x];this.complete(f,h)}}else _[A]=[f],this.predict(A)}}},c.prototype.predict=function(y){for(var t=this.grammar.byName[y]||[],_=0;_<t.length;_++){var $=t[_],p=this.wants[y],f=new a($,0,this.index,p);this.states.push(f)}},c.prototype.complete=function(y,t){var _=y.nextState(t);this.states.push(_)};function r(y,t){this.rules=y,this.start=t||this.rules[0].name;var _=this.byName={};this.rules.forEach(function($){_.hasOwnProperty($.name)||(_[$.name]=[]),_[$.name].push($)})}r.fromCompiled=function($,t){var _=$.Lexer;$.ParserStart&&(t=$.ParserStart,$=$.ParserRules);var $=$.map(function(f){return new i(f.name,f.symbols,f.postprocess)}),p=new r($,t);return p.lexer=_,p};function s(){this.reset("")}s.prototype.reset=function(y,t){this.buffer=y,this.index=0,this.line=t?t.line:1,this.lastLineBreak=t?-t.col:0},s.prototype.next=function(){if(this.index<this.buffer.length){var y=this.buffer[this.index++];return y===`
`&&(this.line+=1,this.lastLineBreak=this.index),{value:y}}},s.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},s.prototype.formatError=function(y,t){var _=this.buffer;if(typeof _=="string"){var $=_.split(`
`).slice(Math.max(0,this.line-5),this.line),p=_.indexOf(`
`,this.index);p===-1&&(p=_.length);var f=this.index-this.lastLineBreak,w=String(this.line).length;return t+=" at line "+this.line+" col "+f+`:

`,t+=$.map(function(v,A){return x(this.line-$.length+A+1,w)+" "+v},this).join(`
`),t+=`
`+x("",w+f)+`^
`,t}else return t+" at index "+(this.index-1);function x(v,A){var N=String(v);return Array(A-N.length+1).join(" ")+N}};function n(y,t,_){if(y instanceof r)var $=y,_=t;else var $=r.fromCompiled(y,t);this.grammar=$,this.options={keepHistory:!1,lexer:$.lexer||new s};for(var p in _||{})this.options[p]=_[p];this.lexer=this.options.lexer,this.lexerState=void 0;var f=new c($,0);this.table=[f],f.wants[$.start]=[],f.predict($.start),f.process(),this.current=0}n.fail={},n.prototype.feed=function(y){var t=this.lexer;t.reset(y,this.lexerState);for(var _;;){try{if(_=t.next(),!_)break}catch(C){var w=new c(this.grammar,this.current+1);this.table.push(w);var $=new Error(this.reportLexerError(C));throw $.offset=this.current,$.token=C.token,$}var p=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var f=this.current+1,w=new c(this.grammar,f);this.table.push(w);for(var x=_.text!==void 0?_.text:_.value,v=t.constructor===s?_.value:_,A=p.scannable,N=A.length;N--;){var h=A[N],k=h.rule.symbols[h.dot];if(k.test?k.test(v):k.type?k.type===_.type:k.literal===x){var O=h.nextState({data:v,token:_,isToken:!0,reference:f-1});w.states.push(O)}}if(w.process(),w.states.length===0){var $=new Error(this.reportError(_));throw $.offset=this.current,$.token=_,$}this.options.keepHistory&&(p.lexerState=t.save()),this.current++}return p&&(this.lexerState=t.save()),this.results=this.finish(),this},n.prototype.reportLexerError=function(y){var t,_,$=y.token;return $?(t="input "+JSON.stringify($.text[0])+" (lexer error)",_=this.lexer.formatError($,"Syntax error")):(t="input (lexer error)",_=y.message),this.reportErrorCommon(_,t)},n.prototype.reportError=function(y){var t=(y.type?y.type+" token: ":"")+JSON.stringify(y.value!==void 0?y.value:y),_=this.lexer.formatError(y,"Syntax error");return this.reportErrorCommon(_,t)},n.prototype.reportErrorCommon=function(y,t){var _=[];_.push(y);var $=this.table.length-2,p=this.table[$],f=p.states.filter(function(x){var v=x.rule.symbols[x.dot];return v&&typeof v!="string"});if(f.length===0)_.push("Unexpected "+t+`. I did not expect any more input. Here is the state of my parse table:
`),this.displayStateStack(p.states,_);else{_.push("Unexpected "+t+`. Instead, I was expecting to see one of the following:
`);var w=f.map(function(x){return this.buildFirstStateStack(x,[])||[x]},this);w.forEach(function(x){var v=x[0],A=v.rule.symbols[v.dot],N=this.getSymbolDisplay(A);_.push("A "+N+" based on:"),this.displayStateStack(x,_)},this)}return _.push(""),_.join(`
`)},n.prototype.displayStateStack=function(y,t){for(var _,$=0,p=0;p<y.length;p++){var f=y[p],w=f.rule.toString(f.dot);w===_?$++:($>0&&t.push("    ^ "+$+" more lines identical to this"),$=0,t.push("    "+w)),_=w}},n.prototype.getSymbolDisplay=function(y){return m(y)},n.prototype.buildFirstStateStack=function(y,t){if(t.indexOf(y)!==-1)return null;if(y.wantedBy.length===0)return[y];var _=y.wantedBy[0],$=[y].concat(t),p=this.buildFirstStateStack(_,$);return p===null?null:[y].concat(p)},n.prototype.save=function(){var y=this.table[this.current];return y.lexerState=this.lexerState,y},n.prototype.restore=function(y){var t=y.index;this.current=t,this.table[t]=y,this.table.splice(t+1),this.lexerState=y.lexerState,this.results=this.finish()},n.prototype.rewind=function(y){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[y])},n.prototype.finish=function(){var y=[],t=this.grammar.start,_=this.table[this.table.length-1];return _.states.forEach(function($){$.rule.name===t&&$.dot===$.rule.symbols.length&&$.reference===0&&$.data!==n.fail&&y.push($)}),y.map(function($){return $.data})};function m(y){var t=typeof y;if(t==="string")return y;if(t==="object"){if(y.literal)return JSON.stringify(y.literal);if(y instanceof RegExp)return"character matching "+y;if(y.type)return y.type+" token";if(y.test)return"token matching "+String(y.test);throw new Error("Unknown symbol type: "+y)}}function b(y){var t=typeof y;if(t==="string")return y;if(t==="object"){if(y.literal)return JSON.stringify(y.literal);if(y instanceof RegExp)return y.toString();if(y.type)return"%"+y.type;if(y.test)return"<"+String(y.test)+">";throw new Error("Unknown symbol type: "+y)}}return{Parser:n,Grammar:r,Rule:i}})}(ir)),Ye}(function(o){(function(i,a){for(var c in a)i[c]=a[c]})(o,function(i){var a={};function c(r){if(a[r])return a[r].exports;var s=a[r]={i:r,l:!1,exports:{}};return i[r].call(s.exports,s,s.exports,c),s.l=!0,s.exports}return c.m=i,c.c=a,c.d=function(r,s,n){c.o(r,s)||Object.defineProperty(r,s,{enumerable:!0,get:n})},c.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},c.t=function(r,s){if(s&1&&(r=c(r)),s&8||s&4&&typeof r=="object"&&r&&r.__esModule)return r;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:r}),s&2&&typeof r!="string")for(var m in r)c.d(n,m,function(b){return r[b]}.bind(null,m));return n},c.n=function(r){var s=r&&r.__esModule?function(){return r.default}:function(){return r};return c.d(s,"a",s),s},c.o=function(r,s){return Object.prototype.hasOwnProperty.call(r,s)},c.p="",c(c.s=7)}([function(i,a){i.exports=lr()},function(i,a,c){Object.defineProperty(a,"__esModule",{value:!0}),a.unbox=a.doubleQuoted=a.box=a.track=a.tracking=a.trackingComments=a.lexerAny=a.lexer=void 0;const r=c(0),s=c(3),n={};for(const k of s.sqlKeywords)n["kw_"+k.toLowerCase()]=k;const m=k=>{const O=(0,r.keywords)(k);return C=>O(C.toUpperCase())};a.lexer=(0,r.compile)({word:{match:/[eE](?!')[A-Za-z0-9_]*|[a-df-zA-DF-Z_][A-Za-z0-9_]*/,type:m(n),value:k=>k.toLowerCase()},wordQuoted:{match:/"(?:[^"\*]|"")+"/,type:()=>"quoted_word",value:k=>k.substring(1,k.length-1)},string:{match:/'(?:[^']|\'\')*'/,value:k=>k.substring(1,k.length-1).replace(/''/g,"'")},eString:{match:/\b(?:e|E)'(?:[^'\\]|[\r\n\s]|(?:\\\s)|(?:\\\n)|(?:\\.)|(?:\'\'))+'/,value:k=>k.substring(2,k.length-1).replace(/''/g,"'").replace(/\\([\s\n])/g,(O,C)=>C).replace(/\\./g,O=>JSON.parse('"'+O+'"'))},qparam:{match:/\$\d+/},commentLine:/\-\-.*?$[\s\r\n]*/,commentFullOpen:/\/\*/,commentFullClose:/\*\/[\s\r\n]*/,star:"*",comma:",",space:{match:/[\s\t\n\v\f\r]+/,lineBreaks:!0},int:/\-?\d+(?![\.\d])/,float:/\-?(?:(?:\d*\.\d+)|(?:\d+\.\d*))/,lparen:"(",rparen:")",lbracket:"[",rbracket:"]",semicolon:";",dot:/\.(?!\d)/,op_cast:"::",op_colon:":",op_plus:"+",op_eq:"=",op_neq:{match:/(?:!=)|(?:\<\>)/,value:()=>"!="},op_membertext:"->>",op_member:"->",op_minus:"-",op_div:/\//,op_not_ilike:/\!~~\*/,op_not_like:/\!~~/,op_ilike:/~~\*/,op_like:/~~/,op_mod:"%",op_exp:"^",op_additive:{match:["||","-","#-","&&"]},op_compare:{match:[">",">=","<","<=","@>","<@","?","?|","?&","#>>",">>","<<","~","~*","!~","!~*","@@"]},ops_others:{match:["|","&","^","#"]},codeblock:{match:/\$\$(?:.|[\s\t\n\v\f\r])*?\$\$/s,lineBreaks:!0,value:k=>k.substring(2,k.length-2)}}),a.lexer.next=(k=>()=>{let O,C=null;for(;O=k.call(a.lexer);){if(O.type==="commentFullOpen"){if(C===null){C={nested:0,offset:O.offset,text:O.text};continue}C.nested++}if(C!=null){if(C.text+=O.text,O.type==="commentFullClose"){if(C.nested===0){b==null||b.push(y(C)),C=null;continue}C.nested--}continue}if(O.type!=="space"){if(O.type==="commentLine"){b==null||b.push(y(O));continue}break}}if(_&&O){const q=O.offset,e={start:q,end:q+O.text.length};O._location=e}return O})(a.lexer.next),a.lexerAny=a.lexer;let b=null;const y=({offset:k,text:O})=>({_location:{start:k,end:k+O.length},comment:O});function t(k){if(b)throw new Error("WAT ? Recursive comments tracking 🤔🤨 ?");try{b=[];const O=k();return{comments:b,ast:O}}finally{b=null}}a.trackingComments=t;let _=!1;function $(k){if(_)return k();try{return _=!0,k()}finally{_=!1}}a.tracking=$;function p(k,O){if(!_||!O||typeof O!="object")return O;const C=h(k,!0),q=h(k,!1);if(!C||!q)return O;if(C===q)O._location=C;else{const e={start:C.start,end:q.end};O._location=e}return O}a.track=p;const f=Symbol("_literal"),w=Symbol("_doublequoted");function x(k,O,C){return!_&&!C?O:p(k,{[f]:O,[w]:C})}a.box=x;function v(k){return Array.isArray(k)&&k.length===1&&(k=v(k[0])),Array.isArray(k)&&!k.length?null:k}function A(k){const O=v(k);if(typeof k=="object"&&(O!=null&&O[w]))return{doubleQuoted:!0}}a.doubleQuoted=A;function N(k){var O;return typeof k=="object"&&(O=k==null?void 0:k[f])!==null&&O!==void 0?O:k}a.unbox=N;function h(k,O){if(!k)return null;if(Array.isArray(k)){const C=O?1:-1;for(let q=O?0:k.length-1;q>=0&&q<k.length;q+=C){const e=h(k[q],O);if(e)return e}return null}return typeof k!="object"?null:k._location}},function(i,a,c){Object.defineProperty(a,"__esModule",{value:!0}),a.AstDefaultMapper=a.arrayNilMap=a.assignChanged=a.astMapper=void 0;const r=c(6);function s($){const p=new y;return p.wrapped=$(p),p}a.astMapper=s;function n($,p){if(!$)return $;let f=!1;for(const w of Object.keys(p))if($[w]!==p[w]){f=!0;break}return f?(0,r.trimNullish)({...$,...p},0):$}a.assignChanged=n;function m($,p){if(!($!=null&&$.length))return $;let f=!1,w=$;for(let x=0;x<$.length;x++){const v=$[x],A=p(v);!f&&(!A||A!==v)&&(f=!0,w=$.slice(0,x)),A&&f&&w.push(A)}return w}a.arrayNilMap=m;function b($){switch($==null?void 0:$.type){case"select":case"delete":case"insert":case"update":case"union":case"union all":case"with":return!0;default:return!1}}class y{super(){return new _(this)}statement(p){switch(p.type){case"alter table":return this.alterTable(p);case"alter index":return this.alterIndex(p);case"commit":case"start transaction":case"rollback":return this.transaction(p);case"create index":return this.createIndex(p);case"create table":return this.createTable(p);case"truncate table":return this.truncateTable(p);case"delete":return this.delete(p);case"insert":return this.insert(p);case"with":return this.with(p);case"with recursive":return this.withRecursive(p);case"select":return this.selection(p);case"update":return this.update(p);case"create extension":return this.createExtension(p);case"tablespace":return this.tablespace(p);case"set":return this.setGlobal(p);case"set timezone":return this.setTimezone(p);case"create sequence":return this.createSequence(p);case"alter sequence":return this.alterSequence(p);case"begin":return this.begin(p);case"drop table":case"drop index":case"drop sequence":case"drop type":case"drop trigger":return this.drop(p);case"create enum":return this.createEnum(p);case"create composite type":return this.createCompositeType(p);case"union":case"union all":return this.union(p);case"show":return this.show(p);case"prepare":return this.prepare(p);case"deallocate":return this.deallocate(p);case"create view":return this.createView(p);case"create materialized view":return this.createMaterializedView(p);case"refresh materialized view":return this.refreshMaterializedView(p);case"create schema":return this.createSchema(p);case"raise":return this.raise(p);case"comment":return this.comment(p);case"do":return this.do(p);case"create function":return this.createFunction(p);case"drop function":return this.dropFunction(p);case"values":return this.values(p);default:throw r.NotSupported.never(p)}}comment(p){return p}createView(p){const f=this.select(p.query);if(!f)return null;const w=this.tableRef(p.name);return w?n(p,{query:f,name:w}):null}createMaterializedView(p){const f=this.select(p.query);if(!f)return null;const w=this.tableRef(p.name);return w?n(p,{query:f,name:w}):null}refreshMaterializedView(p){return p}do(p){return p}createFunction(p){const f=m(p.arguments,x=>{const v=this.dataType(x.type);return n(x,{type:v})});let w;if(p.returns)switch(p.returns.kind){case"table":w=n(p.returns,{columns:m(p.returns.columns,x=>{const v=this.dataType(x.type);return v&&n(x,{type:v})})});break;case void 0:case null:case"array":w=this.dataType(p.returns);break;default:throw r.NotSupported.never(p.returns)}return n(p,{returns:w,arguments:f})}dropFunction(p){const f=m(p.arguments,w=>{const x=this.dataType(w.type);return n(w,{type:x})});return n(p,{arguments:f})}show(p){return p}createEnum(p){return p}createCompositeType(p){const f=m(p.attributes,w=>n(w,{dataType:this.dataType(w.dataType)}));return n(p,{attributes:f})}drop(p){return p}alterSequence(p){return p.change.type==="set options"&&p.change.as&&this.dataType(p.change.as),p}begin(p){return p}createSequence(p){return p.options.as&&this.dataType(p.options.as),p}tablespace(p){return p}setGlobal(p){return p}setTimezone(p){return p}update(p){if(!p)return p;const f=this.tableRef(p.table);if(!f)return null;const w=p.from&&this.from(p.from),x=p.where&&this.expr(p.where),v=m(p.sets,N=>this.set(N));if(!(v!=null&&v.length))return null;const A=m(p.returning,N=>this.selectionColumn(N));return n(p,{table:f,where:x,sets:v,from:w,returning:A})}insert(p){var f,w;const x=this.tableRef(p.into);if(!x)return null;const v=p.insert&&this.select(p.insert);if(!v)return null;const A=m(p.returning,k=>this.selectionColumn(k));let N=(f=p.onConflict)===null||f===void 0?void 0:f.on;switch(N==null?void 0:N.type){case"on constraint":break;case"on expr":N=n(N,{exprs:m(N.exprs,k=>this.expr(k))});break;case null:case void 0:break;default:throw r.NotSupported.never(N)}let h=(w=p.onConflict)===null||w===void 0?void 0:w.do;if(h&&h!=="do nothing"){const k=m(h.sets,O=>this.set(O));k!=null&&k.length?h.sets!==k&&(h={sets:k}):h="do nothing"}return n(p,{into:x,insert:v,returning:A,onConflict:h?n(p.onConflict,{do:h,on:N}):p.onConflict})}raise(p){return n(p,{formatExprs:p.formatExprs&&m(p.formatExprs,f=>this.expr(f)),using:p.using&&m(p.using,f=>n(f,{value:this.expr(f.value)}))})}delete(p){const f=this.tableRef(p.from);if(!f)return null;const w=p.where&&this.expr(p.where),x=m(p.returning,v=>this.selectionColumn(v));return n(p,{where:w,returning:x,from:f})}createSchema(p){return p}createTable(p){const f=m(p.columns,w=>{switch(w.kind){case"column":return this.createColumn(w);case"like table":return this.likeTable(w);default:throw r.NotSupported.never(w)}});return f!=null&&f.length?n(p,{columns:f}):null}likeTable(p){const f=this.tableRef(p.like);return f?n(p,{like:f}):null}truncateTable(p){return p}constraint(p){switch(p.type){case"not null":case"null":case"primary key":case"unique":case"add generated":return p;case"default":{const f=this.expr(p.default);return f?n(p,{default:f}):null}case"check":{const f=this.expr(p.expr);return f?n(p,{expr:f}):null}case"reference":{const f=this.tableRef(p.foreignTable);return f?n(p,{foreignTable:f}):null}default:throw r.NotSupported.never(p)}}set(p){const f=this.expr(p.value);return f?n(p,{value:f}):null}dataType(p){return p}tableRef(p){return p}transaction(p){return p}createExtension(p){return p}createIndex(p){const f=m(p.expressions,w=>{const x=this.expr(w.expression);return x===w.expression?w:x?{...w,expression:x}:null});return f!=null&&f.length?n(p,{expressions:f}):null}prepare(p){const f=this.statement(p.statement);return f?n(p,{args:m(p.args,w=>this.dataType(w)),statement:f}):null}deallocate(p){return p}alterIndex(p){return p}alterTable(p){var f;const w=this.tableRef(p.table);if(!w)return null;let x=[],v=!1;for(let A=0;A<(((f=p.changes)===null||f===void 0?void 0:f.length)||0);A++){const N=p.changes[A],h=this.tableAlteration(N,p.table);v=v||h!=N,h&&x.push(h)}return x.length?v?n(p,{table:w,changes:x}):p:null}tableAlteration(p,f){switch(p.type){case"add column":return this.addColumn(p,f);case"add constraint":return this.addConstraint(p,f);case"alter column":return this.alterColumn(p,f);case"rename":return this.renameTable(p,f);case"rename column":return this.renameColumn(p,f);case"rename constraint":return this.renameConstraint(p,f);case"drop column":return this.dropColumn(p,f);case"drop constraint":return this.dropConstraint(p,f);case"owner":return this.setTableOwner(p,f);default:throw r.NotSupported.never(p)}}dropColumn(p,f){return p}dropConstraint(p,f){return p}setTableOwner(p,f){return p}renameConstraint(p,f){return p}renameColumn(p,f){return p}renameTable(p,f){return p}alterColumn(p,f){let w;switch(p.alter.type){case"set default":w=this.setColumnDefault(p.alter,f,p.column);break;case"set type":w=this.setColumnType(p.alter,f,p.column);break;case"drop default":case"set not null":case"drop not null":w=this.alterColumnSimple(p.alter,f,p.column);break;case"add generated":w=this.alterColumnAddGenerated(p.alter,f,p.column);break;default:throw r.NotSupported.never(p.alter)}return w?n(p,{alter:w}):null}setColumnType(p,f,w){const x=this.dataType(p.dataType);return n(p,{dataType:x})}alterColumnAddGenerated(p,f,w){return p}alterColumnSimple(p,f,w){return p}setColumnDefault(p,f,w){const x=this.expr(p.default);return x?n(p,{default:x}):null}addConstraint(p,f){return p}addColumn(p,f){const w=this.createColumn(p.column);return w?n(p,{column:w}):null}createColumn(p){var f;const w=this.dataType(p.dataType);if(!w)return null;const x=(f=m(p.constraints,v=>this.constraint(v)))!==null&&f!==void 0?f:void 0;return n(p,{dataType:w,constraints:x})}select(p){switch(p.type){case"select":return this.selection(p);case"union":case"union all":return this.union(p);case"with":return this.with(p);case"values":return this.values(p);case"with recursive":return this.withRecursive(p);default:throw r.NotSupported.never(p)}}selection(p){var f,w;const x=m(p.from,C=>this.from(C)),v=m(p.columns,C=>this.selectionColumn(C)),A=p.where&&this.expr(p.where),N=m(p.groupBy,C=>this.expr(C)),h=p.having&&this.expr(p.having),k=this.orderBy(p.orderBy),O=n(p.limit,{limit:this.expr((f=p.limit)===null||f===void 0?void 0:f.limit),offset:this.expr((w=p.limit)===null||w===void 0?void 0:w.offset)});return n(p,{from:x,columns:v,where:A,groupBy:N,having:h,orderBy:k,limit:O})}orderBy(p){return m(p,f=>{const w=this.expr(f.by);return w?w===f.by?f:{...f,by:w}:null})}union(p){const f=this.select(p.left),w=this.select(p.right);return!f||!w?f??w:n(p,{left:f,right:w})}with(p){const f=m(p.bind,x=>{const v=this.statement(x.statement);return b(v)?n(x,{statement:v}):null});if(!f)return null;const w=this.statement(p.in);return b(w)?n(p,{bind:f,in:w}):null}withRecursive(p){const f=this.union(p.bind);if(!f||f.type!=="union"&&f.type!=="union all")return null;const w=this.statement(p.in);return b(w)?n(p,{bind:f,in:w}):null}from(p){switch(p.type){case"table":return this.fromTable(p);case"statement":return this.fromStatement(p);case"call":return this.fromCall(p);default:throw r.NotSupported.never(p)}}fromCall(p){const f=this.call(p);return!f||f.type!=="call"?null:n(p,f)}fromStatement(p){const f=this.select(p.statement);if(!f)return null;const w=p.join&&this.join(p.join);return n(p,{statement:f,join:w})}values(p){const f=m(p.values,w=>m(w,x=>this.expr(x)));return f!=null&&f.length?n(p,{values:f}):null}join(p){const f=p.on&&this.expr(p.on);return!f&&!p.using?p:n(p,{on:f})}fromTable(p){const f=this.tableRef(p.name);if(!f)return null;const w=p.join&&this.join(p.join);return n(p,{name:f,join:w})}selectionColumn(p){const f=this.expr(p.expr);return f?n(p,{expr:f}):null}expr(p){if(!p)return p;switch(p.type){case"binary":return this.binary(p);case"unary":return this.unary(p);case"ref":return this.ref(p);case"string":case"numeric":case"integer":case"boolean":case"constant":case"null":return this.constant(p);case"list":case"array":return this.array(p);case"array select":return this.arraySelect(p);case"call":return this.call(p);case"cast":return this.cast(p);case"case":return this.case(p);case"member":return this.member(p);case"arrayIndex":return this.arrayIndex(p);case"ternary":return this.ternary(p);case"select":case"union":case"union all":case"with":case"with recursive":return this.select(p);case"keyword":return this.valueKeyword(p);case"parameter":return this.parameter(p);case"extract":return this.extract(p);case"overlay":return this.callOverlay(p);case"substring":return this.callSubstring(p);case"values":return this.values(p);case"default":return this.default(p);default:throw r.NotSupported.never(p)}}arraySelect(p){const f=this.select(p.select);return f?n(p,{select:f}):null}extract(p){const f=this.expr(p.from);return f?n(p,{from:f}):null}valueKeyword(p){return p}ternary(p){const f=this.expr(p.value),w=this.expr(p.lo),x=this.expr(p.hi);return!f||!w||!x?null:n(p,{value:f,lo:w,hi:x})}parameter(p){return p}arrayIndex(p){const f=this.expr(p.array),w=this.expr(p.index);return!f||!w?null:n(p,{array:f,index:w})}member(p){const f=this.expr(p.operand);return f?n(p,{operand:f}):null}case(p){const f=p.value&&this.expr(p.value),w=m(p.whens,v=>{const A=this.expr(v.when),N=this.expr(v.value);return!A||!N?null:n(v,{value:N,when:A})});if(!(w!=null&&w.length))return null;const x=p.else&&this.expr(p.else);return n(p,{value:f,whens:w,else:x})}cast(p){const f=this.expr(p.operand);return f?n(p,{operand:f}):null}call(p){const f=m(p.args,v=>this.expr(v));if(!f)return null;const w=this.orderBy(p.orderBy),x=this.expr(p.filter);return n(p,{args:f,orderBy:w,filter:x})}callSubstring(p){return n(p,{value:this.expr(p.value),from:this.expr(p.from),for:this.expr(p.for)})}callOverlay(p){return n(p,{value:this.expr(p.value),placing:this.expr(p.placing),from:this.expr(p.from),for:this.expr(p.for)})}array(p){const f=m(p.expressions,w=>this.expr(w));return f?n(p,{expressions:f}):null}constant(p){return p}default(p){return p}ref(p){return p}unary(p){const f=this.expr(p.operand);return f?n(p,{operand:f}):null}binary(p){const f=this.expr(p.left),w=this.expr(p.right);return!f||!w?null:n(p,{left:f,right:w})}}a.AstDefaultMapper=y;const t=y.prototype;for(const $ of Object.getOwnPropertyNames(t)){const p=t[$];$==="constructor"||$==="super"||typeof p!="function"||Object.defineProperty(t,$,{configurable:!1,get(){return function(...f){var w;if(this.skipNext)return this.skipNext=!1,p.apply(this,f);const x=(w=this.wrapped)===null||w===void 0?void 0:w[$];return x?x.apply(this.wrapped,f):p.apply(this,f)}}})}class _ extends y{constructor(p){super(),this.parent=p}}for(const $ of Object.getOwnPropertyNames(t)){const p=t[$];$==="constructor"||$==="super"||typeof p!="function"||Object.defineProperty(_.prototype,$,{configurable:!1,get(){return function(...f){return this.parent.skipNext=!0,p.apply(this.parent,f)}}})}},function(i,a,c){Object.defineProperty(a,"__esModule",{value:!0}),a.sqlKeywords=void 0,a.sqlKeywords=["ALL","ANALYSE","ANALYZE","AND","ANY","ARRAY","AS","ASC","ASYMMETRIC","AUTHORIZATION","BINARY","BOTH","CASE","CAST","CHECK","COLLATE","COLLATION","CONCURRENTLY","CONSTRAINT","CREATE","CROSS","CURRENT_CATALOG","CURRENT_DATE","CURRENT_ROLE","CURRENT_SCHEMA","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","DEFAULT","DEFERRABLE","DESC","DISTINCT","DO","ELSE","END","EXCEPT","FALSE","FETCH","FOR","FOREIGN","FREEZE","FROM","FULL","GRANT","GROUP","HAVING","ILIKE","IN","INITIALLY","INNER","INTERSECT","INTO","IS","ISNULL","JOIN","LATERAL","LEADING","LEFT","LIKE","LIMIT","LOCALTIME","LOCALTIMESTAMP","NATURAL","NOT","NOTNULL","NULL","OFFSET","ON","ONLY","OR","ORDER","OUTER","OVERLAPS","PLACING","PRIMARY","REFERENCES","RETURNING","RIGHT","SELECT","SESSION_USER","SIMILAR","SOME","SYMMETRIC","TABLE","TABLESAMPLE","THEN","TO","TRAILING","TRUE","UNION","UNIQUE","USER","USING","VARIADIC","VERBOSE","WHEN","WHERE","WINDOW","WITH","PRECISION"]},function(i,a,c){Object.defineProperty(a,"__esModule",{value:!0}),a.intervalToString=a.normalizeInterval=a.buildInterval=void 0;const r=[["years",12],["months",30],["days",24],["hours",60],["minutes",60],["seconds",1e3],["milliseconds",0]];function*s(_){if(typeof _[1]=="number")yield _;else for(const $ of _)yield*s($)}function n(_,$){var p;const f={};if($==="invalid")throw new Error(`invalid input syntax for type interval: "${_}"`);for(const[w,x]of s($))f[w]=((p=f[w])!==null&&p!==void 0?p:0)+x;return f}a.buildInterval=n;function m(_){var $,p,f,w,x,v,A,N,h;const k={..._};for(let q=0;q<r.length;q++){const[e,u]=r[q],l=($=k[e])!==null&&$!==void 0?$:0,d=l>=0?Math.floor(l):Math.ceil(l);if(!l||d===l)continue;const g=(p=r[q+1])===null||p===void 0?void 0:p[0];g&&(k[g]=((f=k[g])!==null&&f!==void 0?f:0)+u*(l-d)),k[e]=d}if(k.months||k.years){const q=((w=k.months)!==null&&w!==void 0?w:0)+((x=k.years)!==null&&x!==void 0?x:0)*12;k.months=q%12,k.years=(q-k.months)/12}let O=((v=k.hours)!==null&&v!==void 0?v:0)*3600+((A=k.minutes)!==null&&A!==void 0?A:0)*60+((N=k.seconds)!==null&&N!==void 0?N:0)+((h=k.milliseconds)!==null&&h!==void 0?h:0)/1e3,C=1;O<0&&(C=-1,O=-O),O>=3600?(k.hours=C*Math.floor(O/3600),O-=C*k.hours*3600):delete k.hours,O>=60?(k.minutes=C*Math.floor(O/60),O-=C*k.minutes*60):delete k.minutes,O>0?(k.seconds=C*Math.floor(O),O-=C*k.seconds):delete k.seconds,O>0?k.milliseconds=C*Math.round(O*1e3):delete k.milliseconds;for(const[q]of r)k[q]||delete k[q];return k}a.normalizeInterval=m;function b(_){var $,p,f;_=m(_);const w=[];if(_.years&&w.push(_.years===1?"1 year":_.years+" years"),_.months&&w.push(_.months===1?"1 month":_.months+" months"),_.days&&w.push(_.days===1?"1 day":_.days+" days"),_.hours||_.minutes||_.seconds||_.milliseconds){let x=`${y(($=_.hours)!==null&&$!==void 0?$:0)}:${y((p=_.minutes)!==null&&p!==void 0?p:0)}:${y((f=_.seconds)!==null&&f!==void 0?f:0)}`;_.milliseconds&&(x=x+(_.milliseconds/1e3).toString().substr(1)),(t(_.hours)||t(_.minutes)||t(_.seconds)||t(_.milliseconds))&&(x="-"+x),w.push(x)}return w.join(" ")}a.intervalToString=b;function y(_){return _=Math.abs(_),_<10?"0"+_:_.toString()}function t(_){return _&&_<0}},function(i,a,c){Object.defineProperty(a,"__esModule",{value:!0}),a.astVisitor=void 0;const r=c(2);class s{super(){return new m(this)}}const n=r.AstDefaultMapper.prototype;for(const y of Object.getOwnPropertyNames(n)){const t=n[y];y==="constructor"||y==="super"||typeof t!="function"||Object.defineProperty(s.prototype,y,{configurable:!1,get(){return function(..._){const $=this.visitor[y];return $?($.apply(this.visitor,_),_[0]):t.apply(this,_)}}})}class m{constructor(t){this.parent=t}}for(const y of Object.getOwnPropertyNames(n)){const t=n[y];y==="constructor"||y==="super"||typeof t!="function"||Object.defineProperty(m.prototype,y,{configurable:!1,get(){return function(..._){return t.apply(this.parent,_)}}})}function b(y){return(0,r.astMapper)(t=>{const _=new s;return _.mapper=t,_.visitor=y(_),_})}a.astVisitor=b},function(i,a,c){Object.defineProperty(a,"__esModule",{value:!0}),a.trimNullish=a.NotSupported=void 0;class r extends Error{constructor(m){super("Not supported"+(m?": "+m:""))}static never(m,b){return new r(`${b??""} ${JSON.stringify(m)}`)}}a.NotSupported=r;function s(n,m=5){if(m<0||(n instanceof Array&&n.forEach(b=>s(b,m-1)),typeof n!="object"||n instanceof Date)||!n)return n;for(const b of Object.keys(n)){const y=n[b];y==null?delete n[b]:s(y,m-1)}return n}a.trimNullish=s},function(i,a,c){var r=this&&this.__createBinding||(Object.create?function(_,$,p,f){f===void 0&&(f=p);var w=Object.getOwnPropertyDescriptor($,p);(!w||("get"in w?!$.__esModule:w.writable||w.configurable))&&(w={enumerable:!0,get:function(){return $[p]}}),Object.defineProperty(_,f,w)}:function(_,$,p,f){f===void 0&&(f=p),_[f]=$[p]}),s=this&&this.__exportStar||function(_,$){for(var p in _)p!=="default"&&!Object.prototype.hasOwnProperty.call($,p)&&r($,_,p)};Object.defineProperty(a,"__esModule",{value:!0}),a.normalizeInterval=a.intervalToString=a.toSql=a.astMapper=a.assignChanged=a.arrayNilMap=a.astVisitor=a.parseWithComments=a.parseIntervalLiteral=a.parseGeometricLiteral=a.parseArrayLiteral=a.parseFirst=a.parse=void 0;var n=c(8);Object.defineProperty(a,"parse",{enumerable:!0,get:function(){return n.parse}}),Object.defineProperty(a,"parseFirst",{enumerable:!0,get:function(){return n.parseFirst}}),Object.defineProperty(a,"parseArrayLiteral",{enumerable:!0,get:function(){return n.parseArrayLiteral}}),Object.defineProperty(a,"parseGeometricLiteral",{enumerable:!0,get:function(){return n.parseGeometricLiteral}}),Object.defineProperty(a,"parseIntervalLiteral",{enumerable:!0,get:function(){return n.parseIntervalLiteral}}),Object.defineProperty(a,"parseWithComments",{enumerable:!0,get:function(){return n.parseWithComments}});var m=c(5);Object.defineProperty(a,"astVisitor",{enumerable:!0,get:function(){return m.astVisitor}});var b=c(2);Object.defineProperty(a,"arrayNilMap",{enumerable:!0,get:function(){return b.arrayNilMap}}),Object.defineProperty(a,"assignChanged",{enumerable:!0,get:function(){return b.assignChanged}}),Object.defineProperty(a,"astMapper",{enumerable:!0,get:function(){return b.astMapper}});var y=c(19);Object.defineProperty(a,"toSql",{enumerable:!0,get:function(){return y.toSql}}),s(c(21),a);var t=c(4);Object.defineProperty(a,"intervalToString",{enumerable:!0,get:function(){return t.intervalToString}}),Object.defineProperty(a,"normalizeInterval",{enumerable:!0,get:function(){return t.normalizeInterval}})},function(i,a,c){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(a,"__esModule",{value:!0}),a.parseGeometricLiteral=a.parseIntervalLiteral=a.parseArrayLiteral=a.parse=a.parseWithComments=a.parseFirst=void 0;const s=c(9),n=r(c(10)),m=r(c(11)),b=r(c(13)),y=r(c(15)),t=r(c(17)),_=c(4),$=c(1);let p,f,w,x,v;function A(e){return h(e)[0]}a.parseFirst=A;function N(e,u){return(0,$.trackingComments)(()=>h(e,u))}a.parseWithComments=N;function h(e,u){p||(p=s.Grammar.fromCompiled(n.default));const l=typeof u=="string"?u:u==null?void 0:u.entry,d=typeof u=="string"?null:u,g=()=>q(e,p,l);let E=d!=null&&d.locationTracking?(0,$.tracking)(g):g();return typeof u!="string"&&!Array.isArray(E)&&(E=[E]),E}a.parse=h;function k(e){return f||(f=s.Grammar.fromCompiled(m.default)),q(e,f)}a.parseArrayLiteral=k;function O(e){if(e.startsWith("P"))return v||(v=s.Grammar.fromCompiled(t.default)),(0,_.buildInterval)(e,q(e,v));{x||(x=s.Grammar.fromCompiled(y.default));const u=e.toLowerCase();return(0,_.buildInterval)(e,q(u,x))}}a.parseIntervalLiteral=O;function C(e,u){return w||(w=s.Grammar.fromCompiled(b.default)),q(e,w,u)}a.parseGeometricLiteral=C;function q(e,u,l){try{u.start=l??"main";const d=new s.Parser(u);d.feed(e);const g=d.finish();if(g.length){if(g.length!==1)throw new Error(`💀 Ambiguous SQL syntax: Please file an issue stating the request that has failed at https://github.com/oguimbal/pgsql-ast-parser:

        ${e}

        `)}else throw new Error("Unexpected end of input");return g[0]}catch(d){if(typeof(d==null?void 0:d.message)!="string")throw d;let g=d.message,E=null;const R=[],L=/A (.+) token based on:/g;let I;for(;I=L.exec(g);)E=E??g.substr(0,I.index),R.push(`    - A "${I[1]}" token`);throw E&&(g=E+R.join(`
`)+`

`),d.message=g,d}}},function(i,a){i.exports=cr()},function(i,a,c){Object.defineProperty(a,"__esModule",{value:!0});function r(e){return e[0]}const s=c(1),n=c(1);function m(e){return b(e,void 0)}function b(e,u){const l=x(e);return!u||u.length===0?(0,n.track)(e,{name:l}):(0,n.track)(e,{name:l,columns:u.map(d=>({name:x(d)}))})}function y(e){const u=x(e);return(0,n.track)(e,{value:u})}function t(e){return Array.isArray(e)&&e.length===1&&(e=t(e[0])),Array.isArray(e)&&!e.length?null:(0,n.unbox)(e)}const _=e=>u=>(0,n.track)(u,u[e]),$=e=>Array.isArray(e)?(0,n.track)(e[e.length-1],e[e.length-1]):e;function p(e){if(Array.isArray(e)){const u=[];for(const l of e)u.push(...p(l));return u}return e?[e]:[]}function f(e){var u;return e=(0,n.unbox)(e),(u=e==null?void 0:e.value)!==null&&u!==void 0?u:e}function w(e){return p((0,n.unbox)(e)).filter(l=>!!l).map(l=>f(l)).filter(l=>typeof l=="string").map(l=>l.trim()).filter(l=>!!l)}function x(e,u){return w(e).join(u||"")}function v(e){const u={};for(const[l,d]of e)u[l]=d;return u}const A={sensitivity:"accent"},N=(e,u)=>e.localeCompare(u,void 0,A)===0,h=e=>(u,l,d)=>{const g=f(u[0]);return N(g,e)?(0,n.box)(u,e):d},k=h,O=(...e)=>{const u=new Set(e);return(l,d,g)=>{const E=typeof l[0]=="string"?l[0]:l[0].value;return u.has(E)?E:g}};function C(e,u){const l=new Set,d=u.map(n.unbox);for(const[g,E]of d){if(l.has(g))throw new Error("conflicting or redundant options");l.add(g),e[g]=(0,n.unbox)(E)}}const q={Lexer:s.lexerAny,ParserRules:[{name:"lparen",symbols:[s.lexerAny.has("lparen")?{type:"lparen"}:lparen]},{name:"rparen",symbols:[s.lexerAny.has("rparen")?{type:"rparen"}:rparen]},{name:"number$subexpression$1",symbols:["float"]},{name:"number$subexpression$1",symbols:["int"]},{name:"number",symbols:["number$subexpression$1"],postprocess:t},{name:"dot",symbols:[s.lexerAny.has("dot")?{type:"dot"}:dot],postprocess:r},{name:"float",symbols:[s.lexerAny.has("float")?{type:"float"}:float],postprocess:e=>(0,n.box)(e,parseFloat(t(e)))},{name:"int",symbols:[s.lexerAny.has("int")?{type:"int"}:int],postprocess:e=>(0,n.box)(e,parseInt(t(e),10))},{name:"comma",symbols:[s.lexerAny.has("comma")?{type:"comma"}:comma],postprocess:r},{name:"star",symbols:[s.lexerAny.has("star")?{type:"star"}:star],postprocess:e=>(0,n.box)(e,e[0].value)},{name:"string$subexpression$1",symbols:[s.lexerAny.has("string")?{type:"string"}:string]},{name:"string$subexpression$1",symbols:[s.lexerAny.has("eString")?{type:"eString"}:eString]},{name:"string",symbols:["string$subexpression$1"],postprocess:e=>(0,n.box)(e,t(e[0]).value)},{name:"ident",symbols:["word"],postprocess:_(0)},{name:"word",symbols:[s.lexerAny.has("kw_primary")?{type:"kw_primary"}:kw_primary],postprocess:e=>(0,n.box)(e,"primary")},{name:"word",symbols:[s.lexerAny.has("kw_unique")?{type:"kw_unique"}:kw_unique],postprocess:e=>(0,n.box)(e,"unique")},{name:"word",symbols:[s.lexerAny.has("quoted_word")?{type:"quoted_word"}:quoted_word],postprocess:e=>(0,n.box)(e,e[0].value,!0)},{name:"word",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:e=>(0,n.box)(e,e[0].value)},{name:"collist_paren",symbols:["lparen","collist","rparen"],postprocess:_(1)},{name:"collist$ebnf$1",symbols:[]},{name:"collist$ebnf$1$subexpression$1",symbols:["comma","ident"],postprocess:$},{name:"collist$ebnf$1",symbols:["collist$ebnf$1","collist$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"collist",symbols:["ident","collist$ebnf$1"],postprocess:([e,u])=>[e,...u||[]]},{name:"kw_between",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("between")},{name:"kw_conflict",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("conflict")},{name:"kw_nothing",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("nothing")},{name:"kw_begin",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("begin")},{name:"kw_if",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("if")},{name:"kw_exists",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("exists")},{name:"kw_key",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("key")},{name:"kw_index",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("index")},{name:"kw_extension",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("extension")},{name:"kw_schema",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("schema")},{name:"kw_nulls",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("nulls")},{name:"kw_first",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("first")},{name:"kw_last",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("last")},{name:"kw_start",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("start")},{name:"kw_restart",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("restart")},{name:"kw_filter",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("filter")},{name:"kw_commit",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("commit")},{name:"kw_tablespace",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("tablespace")},{name:"kw_transaction",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("transaction")},{name:"kw_work",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("work")},{name:"kw_read",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("read")},{name:"kw_write",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("write")},{name:"kw_isolation",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("isolation")},{name:"kw_level",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("level")},{name:"kw_serializable",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("serializable")},{name:"kw_rollback",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("rollback")},{name:"kw_insert",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("insert")},{name:"kw_value",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("value")},{name:"kw_values",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("values")},{name:"kw_update",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("update")},{name:"kw_column",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("column")},{name:"kw_set",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("set")},{name:"kw_version",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("version")},{name:"kw_alter",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("alter")},{name:"kw_rename",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("rename")},{name:"kw_sequence",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("sequence")},{name:"kw_temp",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("temp")},{name:"kw_temporary",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("temporary")},{name:"kw_add",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("add")},{name:"kw_owner",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("owner")},{name:"kw_owned",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("owned")},{name:"kw_including",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("including")},{name:"kw_excluding",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("excluding")},{name:"kw_none",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("none")},{name:"kw_drop",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("drop")},{name:"kw_operator",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("operator")},{name:"kw_minvalue",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("minvalue")},{name:"kw_maxvalue",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("maxvalue")},{name:"kw_data",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("data")},{name:"kw_type",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("type")},{name:"kw_trigger",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("trigger")},{name:"kw_delete",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("delete")},{name:"kw_cache",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("cache")},{name:"kw_cascade",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("cascade")},{name:"kw_no",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("no")},{name:"kw_timestamp",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("timestamp")},{name:"kw_cycle",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("cycle")},{name:"kw_function",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("function")},{name:"kw_returns",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("returns")},{name:"kw_language",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("language")},{name:"kw_out",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("out")},{name:"kw_inout",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("inout")},{name:"kw_variadic",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("variadic")},{name:"kw_action",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("action")},{name:"kw_restrict",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("restrict")},{name:"kw_truncate",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("truncate")},{name:"kw_increment",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("increment")},{name:"kw_by",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("by")},{name:"kw_row",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("row")},{name:"kw_rows",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("rows")},{name:"kw_next",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("next")},{name:"kw_match",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("match")},{name:"kw_replace",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("replace")},{name:"kw_recursive",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("recursive")},{name:"kw_view",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("view")},{name:"kw_cascaded",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("cascaded")},{name:"kw_unlogged",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("unlogged")},{name:"kw_global",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("global")},{name:"kw_option",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("option")},{name:"kw_materialized",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("materialized")},{name:"kw_partial",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("partial")},{name:"kw_partition",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("partition")},{name:"kw_simple",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("simple")},{name:"kw_generated",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("generated")},{name:"kw_always",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("always")},{name:"kw_identity",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("identity")},{name:"kw_name",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("name")},{name:"kw_enum",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("enum")},{name:"kw_show",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("show")},{name:"kw_ordinality",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("ordinality")},{name:"kw_overriding",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("overriding")},{name:"kw_over",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("over")},{name:"kw_system",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("system")},{name:"kw_comment",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("comment")},{name:"kw_time",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("time")},{name:"kw_at",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("at")},{name:"kw_zone",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("zone")},{name:"kw_interval",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("interval")},{name:"kw_hour",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("hour")},{name:"kw_minute",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("minute")},{name:"kw_local",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("local")},{name:"kw_prepare",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("prepare")},{name:"kw_deallocate",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("deallocate")},{name:"kw_raise",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("raise")},{name:"kw_continue",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("continue")},{name:"kw_share",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("share")},{name:"kw_refresh",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("refresh")},{name:"kw_nowait",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("nowait")},{name:"kw_skip",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("skip")},{name:"kw_locked",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:h("locked")},{name:"kw_ifnotexists",symbols:["kw_if",s.lexerAny.has("kw_not")?{type:"kw_not"}:kw_not,"kw_exists"]},{name:"kw_ifexists",symbols:["kw_if","kw_exists"]},{name:"kw_withordinality",symbols:[s.lexerAny.has("kw_with")?{type:"kw_with"}:kw_with,"kw_ordinality"]},{name:"kw_not_null",symbols:[s.lexerAny.has("kw_not")?{type:"kw_not"}:kw_not,s.lexerAny.has("kw_null")?{type:"kw_null"}:kw_null]},{name:"kw_primary_key",symbols:[s.lexerAny.has("kw_primary")?{type:"kw_primary"}:kw_primary,"kw_key"]},{name:"data_type$ebnf$1$subexpression$1$macrocall$2",symbols:["int"]},{name:"data_type$ebnf$1$subexpression$1$macrocall$1$ebnf$1",symbols:[]},{name:"data_type$ebnf$1$subexpression$1$macrocall$1$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("comma")?{type:"comma"}:comma,"data_type$ebnf$1$subexpression$1$macrocall$2"],postprocess:$},{name:"data_type$ebnf$1$subexpression$1$macrocall$1$ebnf$1",symbols:["data_type$ebnf$1$subexpression$1$macrocall$1$ebnf$1","data_type$ebnf$1$subexpression$1$macrocall$1$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"data_type$ebnf$1$subexpression$1$macrocall$1",symbols:["data_type$ebnf$1$subexpression$1$macrocall$2","data_type$ebnf$1$subexpression$1$macrocall$1$ebnf$1"],postprocess:([e,u])=>[e,...u||[]]},{name:"data_type$ebnf$1$subexpression$1",symbols:["lparen","data_type$ebnf$1$subexpression$1$macrocall$1","rparen"],postprocess:_(1)},{name:"data_type$ebnf$1",symbols:["data_type$ebnf$1$subexpression$1"],postprocess:r},{name:"data_type$ebnf$1",symbols:[],postprocess:()=>null},{name:"data_type$ebnf$2$subexpression$1",symbols:[s.lexerAny.has("kw_array")?{type:"kw_array"}:kw_array]},{name:"data_type$ebnf$2$subexpression$1$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("lbracket")?{type:"lbracket"}:lbracket,s.lexerAny.has("rbracket")?{type:"rbracket"}:rbracket]},{name:"data_type$ebnf$2$subexpression$1$ebnf$1",symbols:["data_type$ebnf$2$subexpression$1$ebnf$1$subexpression$1"]},{name:"data_type$ebnf$2$subexpression$1$ebnf$1$subexpression$2",symbols:[s.lexerAny.has("lbracket")?{type:"lbracket"}:lbracket,s.lexerAny.has("rbracket")?{type:"rbracket"}:rbracket]},{name:"data_type$ebnf$2$subexpression$1$ebnf$1",symbols:["data_type$ebnf$2$subexpression$1$ebnf$1","data_type$ebnf$2$subexpression$1$ebnf$1$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"data_type$ebnf$2$subexpression$1",symbols:["data_type$ebnf$2$subexpression$1$ebnf$1"]},{name:"data_type$ebnf$2",symbols:["data_type$ebnf$2$subexpression$1"],postprocess:r},{name:"data_type$ebnf$2",symbols:[],postprocess:()=>null},{name:"data_type",symbols:["data_type_simple","data_type$ebnf$1","data_type$ebnf$2"],postprocess:e=>{let u=e[2];const l=t(e[0]);let d;if(d={...l,...Array.isArray(e[1])&&e[1].length?{config:e[1].map(t)}:{}},u){u[0].type==="kw_array"&&(u=[["array"]]);for(const g of u[0])d={kind:"array",arrayOf:d}}return(0,n.track)(e,d)}},{name:"data_type_list$ebnf$1",symbols:[]},{name:"data_type_list$ebnf$1$subexpression$1",symbols:["comma","data_type"],postprocess:$},{name:"data_type_list$ebnf$1",symbols:["data_type_list$ebnf$1","data_type_list$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"data_type_list",symbols:["data_type","data_type_list$ebnf$1"],postprocess:([e,u])=>[e,...u||[]]},{name:"data_type_simple",symbols:["data_type_text"],postprocess:e=>(0,n.track)(e,{name:x(e," ")})},{name:"data_type_simple",symbols:["data_type_numeric"],postprocess:e=>(0,n.track)(e,{name:x(e," ")})},{name:"data_type_simple",symbols:["data_type_date"]},{name:"data_type_simple",symbols:["qualified_name_mark_quotes"]},{name:"data_type_numeric$subexpression$1",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:k("double")},{name:"data_type_numeric",symbols:["data_type_numeric$subexpression$1",s.lexerAny.has("kw_precision")?{type:"kw_precision"}:kw_precision]},{name:"data_type_text$subexpression$1",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:O("character","bit")},{name:"data_type_text$subexpression$2",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:k("varying")},{name:"data_type_text",symbols:["data_type_text$subexpression$1","data_type_text$subexpression$2"]},{name:"data_type_date$subexpression$1",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:O("timestamp","time")},{name:"data_type_date$subexpression$2",symbols:[s.lexerAny.has("kw_with")?{type:"kw_with"}:kw_with]},{name:"data_type_date$subexpression$2",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:k("without")},{name:"data_type_date$subexpression$3",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:k("time")},{name:"data_type_date$subexpression$4",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:k("zone")},{name:"data_type_date",symbols:["data_type_date$subexpression$1","data_type_date$subexpression$2","data_type_date$subexpression$3","data_type_date$subexpression$4"],postprocess:e=>(0,n.track)(e,{name:x(e," ")})},{name:"data_type_date$subexpression$5",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:O("timestamp","time")},{name:"data_type_date$subexpression$6",symbols:["lparen","int","rparen"],postprocess:_(1)},{name:"data_type_date$subexpression$7",symbols:[s.lexerAny.has("kw_with")?{type:"kw_with"}:kw_with]},{name:"data_type_date$subexpression$7",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:k("without")},{name:"data_type_date$subexpression$8",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:k("time")},{name:"data_type_date$subexpression$9",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:k("zone")},{name:"data_type_date",symbols:["data_type_date$subexpression$5","data_type_date$subexpression$6","data_type_date$subexpression$7","data_type_date$subexpression$8","data_type_date$subexpression$9"],postprocess:e=>(0,n.track)(e,{name:`timestamp ${x(e[2])} time zone`,config:[(0,n.unbox)(e[1])]})},{name:"ident_aliased$subexpression$1",symbols:[s.lexerAny.has("kw_as")?{type:"kw_as"}:kw_as,"ident"],postprocess:$},{name:"ident_aliased",symbols:["ident_aliased$subexpression$1"]},{name:"ident_aliased",symbols:["ident"],postprocess:t},{name:"table_ref",symbols:["qualified_name"],postprocess:t},{name:"qcolumn$ebnf$1$subexpression$1",symbols:["dot","ident"],postprocess:$},{name:"qcolumn$ebnf$1",symbols:["qcolumn$ebnf$1$subexpression$1"],postprocess:r},{name:"qcolumn$ebnf$1",symbols:[],postprocess:()=>null},{name:"qcolumn",symbols:["ident","dot","ident","qcolumn$ebnf$1"],postprocess:e=>e[3]?(0,n.track)(e,{schema:(0,n.unbox)(e[0]),table:(0,n.unbox)(e[2]),column:(0,n.unbox)(e[3])}):(0,n.track)(e,{table:(0,n.unbox)(e[0]),column:(0,n.unbox)(e[2])})},{name:"table_ref_aliased$ebnf$1",symbols:["ident_aliased"],postprocess:r},{name:"table_ref_aliased$ebnf$1",symbols:[],postprocess:()=>null},{name:"table_ref_aliased",symbols:["table_ref","table_ref_aliased$ebnf$1"],postprocess:e=>{const u=t(e[1]);return(0,n.track)(e,{...t(e[0]),...u?{alias:u}:{}})}},{name:"qualified_name",symbols:["qname_ident"],postprocess:e=>(0,n.track)(e,{name:x(e)})},{name:"qualified_name",symbols:["ident","dot","ident_extended"],postprocess:e=>{const u=x(e[0]),l=x(e[2]);return(0,n.track)(e,{schema:u,name:l})}},{name:"qualified_name",symbols:[s.lexerAny.has("kw_current_schema")?{type:"kw_current_schema"}:kw_current_schema],postprocess:e=>(0,n.track)(e,{name:"current_schema"})},{name:"qualified_name_mark_quotes",symbols:["qname_ident"],postprocess:e=>(0,n.track)(e,{name:x(e),...(0,n.doubleQuoted)(e)})},{name:"qualified_name_mark_quotes",symbols:["ident","dot","ident_extended"],postprocess:e=>{const u=x(e[0]),l=x(e[2]);return(0,n.track)(e,{schema:u,name:l,...(0,n.doubleQuoted)(e[2])})}},{name:"qualified_name_mark_quotes",symbols:[s.lexerAny.has("kw_current_schema")?{type:"kw_current_schema"}:kw_current_schema],postprocess:e=>(0,n.track)(e,{name:"current_schema"})},{name:"qname_ident",symbols:["ident"]},{name:"qname_ident",symbols:[s.lexerAny.has("kw_precision")?{type:"kw_precision"}:kw_precision]},{name:"qname",symbols:["qualified_name"],postprocess:t},{name:"any_keyword",symbols:[s.lexerAny.has("kw_all")?{type:"kw_all"}:kw_all]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_analyse")?{type:"kw_analyse"}:kw_analyse]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_analyze")?{type:"kw_analyze"}:kw_analyze]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_and")?{type:"kw_and"}:kw_and]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_any")?{type:"kw_any"}:kw_any]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_array")?{type:"kw_array"}:kw_array]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_as")?{type:"kw_as"}:kw_as]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_asc")?{type:"kw_asc"}:kw_asc]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_asymmetric")?{type:"kw_asymmetric"}:kw_asymmetric]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_authorization")?{type:"kw_authorization"}:kw_authorization]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_binary")?{type:"kw_binary"}:kw_binary]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_both")?{type:"kw_both"}:kw_both]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_case")?{type:"kw_case"}:kw_case]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_cast")?{type:"kw_cast"}:kw_cast]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_check")?{type:"kw_check"}:kw_check]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_collate")?{type:"kw_collate"}:kw_collate]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_collation")?{type:"kw_collation"}:kw_collation]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_concurrently")?{type:"kw_concurrently"}:kw_concurrently]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_constraint")?{type:"kw_constraint"}:kw_constraint]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_create")?{type:"kw_create"}:kw_create]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_cross")?{type:"kw_cross"}:kw_cross]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_current_catalog")?{type:"kw_current_catalog"}:kw_current_catalog]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_current_date")?{type:"kw_current_date"}:kw_current_date]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_current_role")?{type:"kw_current_role"}:kw_current_role]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_current_schema")?{type:"kw_current_schema"}:kw_current_schema]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_current_time")?{type:"kw_current_time"}:kw_current_time]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_current_timestamp")?{type:"kw_current_timestamp"}:kw_current_timestamp]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_current_user")?{type:"kw_current_user"}:kw_current_user]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_default")?{type:"kw_default"}:kw_default]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_deferrable")?{type:"kw_deferrable"}:kw_deferrable]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_desc")?{type:"kw_desc"}:kw_desc]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_distinct")?{type:"kw_distinct"}:kw_distinct]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_do")?{type:"kw_do"}:kw_do]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_else")?{type:"kw_else"}:kw_else]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_end")?{type:"kw_end"}:kw_end]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_except")?{type:"kw_except"}:kw_except]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_false")?{type:"kw_false"}:kw_false]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_fetch")?{type:"kw_fetch"}:kw_fetch]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_for")?{type:"kw_for"}:kw_for]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_foreign")?{type:"kw_foreign"}:kw_foreign]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_freeze")?{type:"kw_freeze"}:kw_freeze]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_from")?{type:"kw_from"}:kw_from]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_full")?{type:"kw_full"}:kw_full]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_grant")?{type:"kw_grant"}:kw_grant]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_group")?{type:"kw_group"}:kw_group]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_having")?{type:"kw_having"}:kw_having]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_ilike")?{type:"kw_ilike"}:kw_ilike]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_in")?{type:"kw_in"}:kw_in]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_initially")?{type:"kw_initially"}:kw_initially]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_inner")?{type:"kw_inner"}:kw_inner]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_intersect")?{type:"kw_intersect"}:kw_intersect]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_into")?{type:"kw_into"}:kw_into]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_is")?{type:"kw_is"}:kw_is]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_isnull")?{type:"kw_isnull"}:kw_isnull]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_join")?{type:"kw_join"}:kw_join]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_lateral")?{type:"kw_lateral"}:kw_lateral]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_leading")?{type:"kw_leading"}:kw_leading]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_left")?{type:"kw_left"}:kw_left]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_like")?{type:"kw_like"}:kw_like]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_limit")?{type:"kw_limit"}:kw_limit]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_localtime")?{type:"kw_localtime"}:kw_localtime]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_localtimestamp")?{type:"kw_localtimestamp"}:kw_localtimestamp]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_natural")?{type:"kw_natural"}:kw_natural]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_not")?{type:"kw_not"}:kw_not]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_notnull")?{type:"kw_notnull"}:kw_notnull]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_null")?{type:"kw_null"}:kw_null]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_offset")?{type:"kw_offset"}:kw_offset]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_on")?{type:"kw_on"}:kw_on]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_only")?{type:"kw_only"}:kw_only]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_or")?{type:"kw_or"}:kw_or]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_order")?{type:"kw_order"}:kw_order]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_outer")?{type:"kw_outer"}:kw_outer]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_overlaps")?{type:"kw_overlaps"}:kw_overlaps]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_placing")?{type:"kw_placing"}:kw_placing]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_primary")?{type:"kw_primary"}:kw_primary]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_references")?{type:"kw_references"}:kw_references]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_returning")?{type:"kw_returning"}:kw_returning]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_right")?{type:"kw_right"}:kw_right]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_select")?{type:"kw_select"}:kw_select]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_session_user")?{type:"kw_session_user"}:kw_session_user]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_similar")?{type:"kw_similar"}:kw_similar]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_some")?{type:"kw_some"}:kw_some]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_symmetric")?{type:"kw_symmetric"}:kw_symmetric]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_table")?{type:"kw_table"}:kw_table]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_tablesample")?{type:"kw_tablesample"}:kw_tablesample]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_then")?{type:"kw_then"}:kw_then]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_to")?{type:"kw_to"}:kw_to]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_trailing")?{type:"kw_trailing"}:kw_trailing]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_true")?{type:"kw_true"}:kw_true]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_union")?{type:"kw_union"}:kw_union]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_unique")?{type:"kw_unique"}:kw_unique]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_user")?{type:"kw_user"}:kw_user]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_using")?{type:"kw_using"}:kw_using]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_variadic")?{type:"kw_variadic"}:kw_variadic]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_verbose")?{type:"kw_verbose"}:kw_verbose]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_when")?{type:"kw_when"}:kw_when]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_where")?{type:"kw_where"}:kw_where]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_window")?{type:"kw_window"}:kw_window]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_with")?{type:"kw_with"}:kw_with]},{name:"ident_extended",symbols:["ident"]},{name:"ident_extended",symbols:["any_keyword"]},{name:"select_statement$ebnf$1",symbols:["select_from"],postprocess:r},{name:"select_statement$ebnf$1",symbols:[],postprocess:()=>null},{name:"select_statement$ebnf$2",symbols:["select_where"],postprocess:r},{name:"select_statement$ebnf$2",symbols:[],postprocess:()=>null},{name:"select_statement$ebnf$3$subexpression$1$ebnf$1",symbols:["select_having"],postprocess:r},{name:"select_statement$ebnf$3$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"select_statement$ebnf$3$subexpression$1",symbols:["select_groupby","select_statement$ebnf$3$subexpression$1$ebnf$1"]},{name:"select_statement$ebnf$3",symbols:["select_statement$ebnf$3$subexpression$1"],postprocess:r},{name:"select_statement$ebnf$3",symbols:[],postprocess:()=>null},{name:"select_statement$ebnf$4",symbols:["select_order_by"],postprocess:r},{name:"select_statement$ebnf$4",symbols:[],postprocess:()=>null},{name:"select_statement$ebnf$5",symbols:["select_limit_offset"],postprocess:r},{name:"select_statement$ebnf$5",symbols:[],postprocess:()=>null},{name:"select_statement$ebnf$6$subexpression$1$ebnf$1",symbols:["select_skip"],postprocess:r},{name:"select_statement$ebnf$6$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"select_statement$ebnf$6$subexpression$1",symbols:["select_for","select_statement$ebnf$6$subexpression$1$ebnf$1"]},{name:"select_statement$ebnf$6",symbols:["select_statement$ebnf$6$subexpression$1"],postprocess:r},{name:"select_statement$ebnf$6",symbols:[],postprocess:()=>null},{name:"select_statement",symbols:["select_what","select_statement$ebnf$1","select_statement$ebnf$2","select_statement$ebnf$3","select_statement$ebnf$4","select_statement$ebnf$5","select_statement$ebnf$6"],postprocess:e=>{let[u,l,d,g,E,R,L]=e;l=t(l);let I=g&&g[0],B=g&&g[1];I=I&&(I.length===1&&I[0].type==="list"?I[0].expressions:I),B=B&&t(B);let F=L&&L[0],j=L&&L[1];return j=t(j),(0,n.track)(e,{...u,...l?{from:Array.isArray(l)?l:[l]}:{},...I?{groupBy:I}:{},...B?{having:B}:{},...R?{limit:t(R)}:{},...E?{orderBy:E}:{},...d?{where:d}:{},...F?{for:F[1]}:{},...j?{skip:j}:{},type:"select"})}},{name:"select_from",symbols:[s.lexerAny.has("kw_from")?{type:"kw_from"}:kw_from,"select_from_items"],postprocess:$},{name:"select_from_items$ebnf$1",symbols:[]},{name:"select_from_items$ebnf$1$subexpression$1",symbols:["comma","select_from_item"],postprocess:$},{name:"select_from_items$ebnf$1",symbols:["select_from_items$ebnf$1","select_from_items$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"select_from_items",symbols:["select_from_item","select_from_items$ebnf$1"],postprocess:([e,u])=>[...e,...p(u)||[]]},{name:"select_from_item",symbols:["select_from_subject"]},{name:"select_from_item",symbols:["select_from_item_joins"],postprocess:_(0)},{name:"select_from_item_joins$subexpression$1",symbols:["select_from_item"],postprocess:_(0)},{name:"select_from_item_joins",symbols:["select_from_item_joins$subexpression$1","select_table_join"],postprocess:p},{name:"select_from_item_joins",symbols:["lparen","select_from_item_joins","rparen"],postprocess:_(1)},{name:"select_from_subject",symbols:["stb_table"],postprocess:t},{name:"select_from_subject",symbols:["stb_statement"],postprocess:t},{name:"select_from_subject",symbols:["stb_call"],postprocess:t},{name:"stb_opts$ebnf$1",symbols:["collist_paren"],postprocess:r},{name:"stb_opts$ebnf$1",symbols:[],postprocess:()=>null},{name:"stb_opts",symbols:["ident_aliased","stb_opts$ebnf$1"],postprocess:e=>(0,n.track)(e,{alias:x(e[0]),...e[1]&&{columnNames:(0,n.unbox)(e[1]).map(m)}})},{name:"stb_table$ebnf$1",symbols:["stb_opts"],postprocess:r},{name:"stb_table$ebnf$1",symbols:[],postprocess:()=>null},{name:"stb_table",symbols:["table_ref","stb_table$ebnf$1"],postprocess:e=>(0,n.track)(e,{type:"table",name:(0,n.track)(e,{...e[0],...e[1]})})},{name:"stb_statement",symbols:["selection_paren","stb_opts"],postprocess:e=>(0,n.track)(e,{type:"statement",statement:t(e[0]),...e[1]})},{name:"select_values",symbols:["kw_values","insert_values"],postprocess:e=>(0,n.track)(e,{type:"values",values:e[1]})},{name:"stb_call$ebnf$1",symbols:["kw_withordinality"],postprocess:r},{name:"stb_call$ebnf$1",symbols:[],postprocess:()=>null},{name:"stb_call$ebnf$2",symbols:["stb_call_alias"],postprocess:r},{name:"stb_call$ebnf$2",symbols:[],postprocess:()=>null},{name:"stb_call",symbols:["expr_function_call","stb_call$ebnf$1","stb_call$ebnf$2"],postprocess:e=>{const u=e[1],l=e[2];return!u&&!l?e[0]:(0,n.track)(e,{...e[0],...u&&{withOrdinality:!0},alias:l?b(l[0],l[1]):void 0})}},{name:"stb_call_alias$subexpression$1$ebnf$1",symbols:[s.lexerAny.has("kw_as")?{type:"kw_as"}:kw_as],postprocess:r},{name:"stb_call_alias$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"stb_call_alias$subexpression$1",symbols:["stb_call_alias$subexpression$1$ebnf$1","ident"],postprocess:$},{name:"stb_call_alias$ebnf$1",symbols:["stb_call_alias_list"],postprocess:r},{name:"stb_call_alias$ebnf$1",symbols:[],postprocess:()=>null},{name:"stb_call_alias",symbols:["stb_call_alias$subexpression$1","stb_call_alias$ebnf$1"]},{name:"stb_call_alias_list",symbols:["lparen","stb_call_alias_list_raw","rparen"],postprocess:_(1)},{name:"stb_call_alias_list_raw$ebnf$1",symbols:[]},{name:"stb_call_alias_list_raw$ebnf$1$subexpression$1",symbols:["comma","ident"],postprocess:$},{name:"stb_call_alias_list_raw$ebnf$1",symbols:["stb_call_alias_list_raw$ebnf$1","stb_call_alias_list_raw$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"stb_call_alias_list_raw",symbols:["ident","stb_call_alias_list_raw$ebnf$1"],postprocess:([e,u])=>[e,...u||[]]},{name:"select_table_join$ebnf$1",symbols:["select_table_join_clause"],postprocess:r},{name:"select_table_join$ebnf$1",symbols:[],postprocess:()=>null},{name:"select_table_join",symbols:["select_join_op",s.lexerAny.has("kw_join")?{type:"kw_join"}:kw_join,"select_from_subject","select_table_join$ebnf$1"],postprocess:e=>(0,n.track)(e,{...t(e[2]),join:{type:x(e[0]," "),...e[3]&&t(e[3])}})},{name:"select_table_join_clause",symbols:[s.lexerAny.has("kw_on")?{type:"kw_on"}:kw_on,"expr"],postprocess:e=>(0,n.track)(e,{on:$(e)})},{name:"select_table_join_clause$macrocall$2",symbols:["ident"]},{name:"select_table_join_clause$macrocall$1$ebnf$1",symbols:[]},{name:"select_table_join_clause$macrocall$1$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("comma")?{type:"comma"}:comma,"select_table_join_clause$macrocall$2"],postprocess:$},{name:"select_table_join_clause$macrocall$1$ebnf$1",symbols:["select_table_join_clause$macrocall$1$ebnf$1","select_table_join_clause$macrocall$1$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"select_table_join_clause$macrocall$1",symbols:["select_table_join_clause$macrocall$2","select_table_join_clause$macrocall$1$ebnf$1"],postprocess:([e,u])=>[t(e),...u.map(t)||[]]},{name:"select_table_join_clause",symbols:[s.lexerAny.has("kw_using")?{type:"kw_using"}:kw_using,"lparen","select_table_join_clause$macrocall$1","rparen"],postprocess:e=>(0,n.track)(e,{using:e[2].map(m)})},{name:"select_join_op$subexpression$1$ebnf$1",symbols:[s.lexerAny.has("kw_inner")?{type:"kw_inner"}:kw_inner],postprocess:r},{name:"select_join_op$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"select_join_op$subexpression$1",symbols:["select_join_op$subexpression$1$ebnf$1"],postprocess:e=>(0,n.box)(e,"INNER JOIN")},{name:"select_join_op",symbols:["select_join_op$subexpression$1"]},{name:"select_join_op$subexpression$2",symbols:[s.lexerAny.has("kw_cross")?{type:"kw_cross"}:kw_cross],postprocess:e=>(0,n.box)(e,"CROSS JOIN")},{name:"select_join_op",symbols:["select_join_op$subexpression$2"]},{name:"select_join_op$subexpression$3$ebnf$1",symbols:[s.lexerAny.has("kw_outer")?{type:"kw_outer"}:kw_outer],postprocess:r},{name:"select_join_op$subexpression$3$ebnf$1",symbols:[],postprocess:()=>null},{name:"select_join_op$subexpression$3",symbols:[s.lexerAny.has("kw_left")?{type:"kw_left"}:kw_left,"select_join_op$subexpression$3$ebnf$1"],postprocess:e=>(0,n.box)(e,"LEFT JOIN")},{name:"select_join_op",symbols:["select_join_op$subexpression$3"]},{name:"select_join_op$subexpression$4$ebnf$1",symbols:[s.lexerAny.has("kw_outer")?{type:"kw_outer"}:kw_outer],postprocess:r},{name:"select_join_op$subexpression$4$ebnf$1",symbols:[],postprocess:()=>null},{name:"select_join_op$subexpression$4",symbols:[s.lexerAny.has("kw_right")?{type:"kw_right"}:kw_right,"select_join_op$subexpression$4$ebnf$1"],postprocess:e=>(0,n.box)(e,"RIGHT JOIN")},{name:"select_join_op",symbols:["select_join_op$subexpression$4"]},{name:"select_join_op$subexpression$5$ebnf$1",symbols:[s.lexerAny.has("kw_outer")?{type:"kw_outer"}:kw_outer],postprocess:r},{name:"select_join_op$subexpression$5$ebnf$1",symbols:[],postprocess:()=>null},{name:"select_join_op$subexpression$5",symbols:[s.lexerAny.has("kw_full")?{type:"kw_full"}:kw_full,"select_join_op$subexpression$5$ebnf$1"],postprocess:e=>(0,n.box)(e,"FULL JOIN")},{name:"select_join_op",symbols:["select_join_op$subexpression$5"]},{name:"select_what$ebnf$1",symbols:["select_distinct"],postprocess:r},{name:"select_what$ebnf$1",symbols:[],postprocess:()=>null},{name:"select_what$ebnf$2",symbols:["select_expr_list_aliased"],postprocess:r},{name:"select_what$ebnf$2",symbols:[],postprocess:()=>null},{name:"select_what",symbols:[s.lexerAny.has("kw_select")?{type:"kw_select"}:kw_select,"select_what$ebnf$1","select_what$ebnf$2"],postprocess:e=>(0,n.track)(e,{columns:e[2],...e[1]&&{distinct:(0,n.unbox)(e[1])}})},{name:"select_expr_list_aliased$ebnf$1",symbols:[]},{name:"select_expr_list_aliased$ebnf$1$subexpression$1",symbols:["comma","select_expr_list_item"],postprocess:$},{name:"select_expr_list_aliased$ebnf$1",symbols:["select_expr_list_aliased$ebnf$1","select_expr_list_aliased$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"select_expr_list_aliased",symbols:["select_expr_list_item","select_expr_list_aliased$ebnf$1"],postprocess:([e,u])=>[e,...u||[]]},{name:"select_expr_list_item$ebnf$1",symbols:["ident_aliased"],postprocess:r},{name:"select_expr_list_item$ebnf$1",symbols:[],postprocess:()=>null},{name:"select_expr_list_item",symbols:["expr","select_expr_list_item$ebnf$1"],postprocess:e=>(0,n.track)(e,{expr:e[0],...e[1]?{alias:m(e[1])}:{}})},{name:"select_distinct",symbols:[s.lexerAny.has("kw_all")?{type:"kw_all"}:kw_all],postprocess:e=>(0,n.box)(e,"all")},{name:"select_distinct$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("kw_on")?{type:"kw_on"}:kw_on,"lparen","expr_list_raw","rparen"],postprocess:_(2)},{name:"select_distinct$ebnf$1",symbols:["select_distinct$ebnf$1$subexpression$1"],postprocess:r},{name:"select_distinct$ebnf$1",symbols:[],postprocess:()=>null},{name:"select_distinct",symbols:[s.lexerAny.has("kw_distinct")?{type:"kw_distinct"}:kw_distinct,"select_distinct$ebnf$1"],postprocess:e=>(0,n.box)(e,e[1]||"distinct")},{name:"select_where",symbols:[s.lexerAny.has("kw_where")?{type:"kw_where"}:kw_where,"expr"],postprocess:$},{name:"select_groupby",symbols:[s.lexerAny.has("kw_group")?{type:"kw_group"}:kw_group,"kw_by","expr_list_raw"],postprocess:$},{name:"select_having",symbols:[s.lexerAny.has("kw_having")?{type:"kw_having"}:kw_having,"expr"],postprocess:$},{name:"select_limit_offset$ebnf$1$subexpression$1",symbols:["select_offset"]},{name:"select_limit_offset$ebnf$1$subexpression$1",symbols:["select_limit"]},{name:"select_limit_offset$ebnf$1",symbols:["select_limit_offset$ebnf$1$subexpression$1"]},{name:"select_limit_offset$ebnf$1$subexpression$2",symbols:["select_offset"]},{name:"select_limit_offset$ebnf$1$subexpression$2",symbols:["select_limit"]},{name:"select_limit_offset$ebnf$1",symbols:["select_limit_offset$ebnf$1","select_limit_offset$ebnf$1$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"select_limit_offset",symbols:["select_limit_offset$ebnf$1"],postprocess:(e,u)=>{const l=t(e);if(!Array.isArray(l))return(0,n.track)(e,l);if(l.length!=2)return u;const d=t(l[0]),g=t(l[1]);return d.offset&&g.offset||d.limit&&g.limit?u:(0,n.track)(e,{...d,...g})}},{name:"select_offset$ebnf$1$subexpression$1",symbols:["kw_row"]},{name:"select_offset$ebnf$1$subexpression$1",symbols:["kw_rows"]},{name:"select_offset$ebnf$1",symbols:["select_offset$ebnf$1$subexpression$1"],postprocess:r},{name:"select_offset$ebnf$1",symbols:[],postprocess:()=>null},{name:"select_offset",symbols:[s.lexerAny.has("kw_offset")?{type:"kw_offset"}:kw_offset,"expr_nostar","select_offset$ebnf$1"],postprocess:e=>(0,n.track)(e,{offset:t(e[1])})},{name:"select_limit$subexpression$1",symbols:["select_limit_1"]},{name:"select_limit$subexpression$1",symbols:["select_limit_2"]},{name:"select_limit",symbols:["select_limit$subexpression$1"],postprocess:e=>(0,n.track)(e,{limit:t(e)})},{name:"select_limit_1",symbols:[s.lexerAny.has("kw_limit")?{type:"kw_limit"}:kw_limit,"expr_nostar"],postprocess:$},{name:"select_limit_2$ebnf$1$subexpression$1",symbols:["kw_first"]},{name:"select_limit_2$ebnf$1$subexpression$1",symbols:["kw_next"]},{name:"select_limit_2$ebnf$1",symbols:["select_limit_2$ebnf$1$subexpression$1"],postprocess:r},{name:"select_limit_2$ebnf$1",symbols:[],postprocess:()=>null},{name:"select_limit_2$subexpression$1",symbols:["kw_row"]},{name:"select_limit_2$subexpression$1",symbols:["kw_rows"]},{name:"select_limit_2",symbols:[s.lexerAny.has("kw_fetch")?{type:"kw_fetch"}:kw_fetch,"select_limit_2$ebnf$1","expr_nostar","select_limit_2$subexpression$1",s.lexerAny.has("kw_only")?{type:"kw_only"}:kw_only],postprocess:_(2)},{name:"select_for$subexpression$1",symbols:["kw_update"],postprocess:e=>(0,n.track)(e,{type:"update"})},{name:"select_for$subexpression$1",symbols:["kw_no","kw_key","kw_update"],postprocess:e=>(0,n.track)(e,{type:"no key update"})},{name:"select_for$subexpression$1",symbols:["kw_share"],postprocess:e=>(0,n.track)(e,{type:"share"})},{name:"select_for$subexpression$1",symbols:["kw_key","kw_share"],postprocess:e=>(0,n.track)(e,{type:"key share"})},{name:"select_for",symbols:[s.lexerAny.has("kw_for")?{type:"kw_for"}:kw_for,"select_for$subexpression$1"]},{name:"select_skip$subexpression$1",symbols:["kw_nowait"],postprocess:e=>(0,n.track)(e,{type:"nowait"})},{name:"select_skip$subexpression$1",symbols:["kw_skip","kw_locked"],postprocess:e=>(0,n.track)(e,{type:"skip locked"})},{name:"select_skip",symbols:["select_skip$subexpression$1"]},{name:"select_order_by$subexpression$1",symbols:[s.lexerAny.has("kw_order")?{type:"kw_order"}:kw_order,"kw_by"]},{name:"select_order_by$ebnf$1",symbols:[]},{name:"select_order_by$ebnf$1$subexpression$1",symbols:["comma","select_order_by_expr"],postprocess:$},{name:"select_order_by$ebnf$1",symbols:["select_order_by$ebnf$1","select_order_by$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"select_order_by",symbols:["select_order_by$subexpression$1","select_order_by_expr","select_order_by$ebnf$1"],postprocess:([e,u,l])=>[u,...l||[]]},{name:"select_order_by_expr$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("kw_asc")?{type:"kw_asc"}:kw_asc]},{name:"select_order_by_expr$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("kw_desc")?{type:"kw_desc"}:kw_desc]},{name:"select_order_by_expr$ebnf$1",symbols:["select_order_by_expr$ebnf$1$subexpression$1"],postprocess:r},{name:"select_order_by_expr$ebnf$1",symbols:[],postprocess:()=>null},{name:"select_order_by_expr$ebnf$2$subexpression$1$subexpression$1",symbols:["kw_first"]},{name:"select_order_by_expr$ebnf$2$subexpression$1$subexpression$1",symbols:["kw_last"]},{name:"select_order_by_expr$ebnf$2$subexpression$1",symbols:["kw_nulls","select_order_by_expr$ebnf$2$subexpression$1$subexpression$1"],postprocess:$},{name:"select_order_by_expr$ebnf$2",symbols:["select_order_by_expr$ebnf$2$subexpression$1"],postprocess:r},{name:"select_order_by_expr$ebnf$2",symbols:[],postprocess:()=>null},{name:"select_order_by_expr",symbols:["expr","select_order_by_expr$ebnf$1","select_order_by_expr$ebnf$2"],postprocess:e=>(0,n.track)(e,{by:e[0],...e[1]&&{order:x(e[1]).toUpperCase()},...e[2]&&{nulls:x(e[2]).toUpperCase()}})},{name:"expr",symbols:["expr_nostar"],postprocess:t},{name:"expr",symbols:["expr_star"],postprocess:t},{name:"expr_nostar",symbols:["expr_paren"],postprocess:t},{name:"expr_nostar",symbols:["expr_or"],postprocess:t},{name:"expr_paren$subexpression$1",symbols:["expr_or_select"]},{name:"expr_paren$subexpression$1",symbols:["expr_list_many"]},{name:"expr_paren",symbols:["lparen","expr_paren$subexpression$1","rparen"],postprocess:_(1)},{name:"expr_or$macrocall$2$macrocall$2",symbols:[s.lexerAny.has("kw_or")?{type:"kw_or"}:kw_or]},{name:"expr_or$macrocall$2$macrocall$1",symbols:["expr_or$macrocall$2$macrocall$2"],postprocess:e=>(0,n.track)(e,{op:(x(e," ")||"<error>").toUpperCase()})},{name:"expr_or$macrocall$2",symbols:["expr_or$macrocall$2$macrocall$1"]},{name:"expr_or$macrocall$3",symbols:["expr_or"]},{name:"expr_or$macrocall$4",symbols:["expr_and"]},{name:"expr_or$macrocall$1$subexpression$1",symbols:["expr_or$macrocall$3"]},{name:"expr_or$macrocall$1$subexpression$1",symbols:["expr_paren"]},{name:"expr_or$macrocall$1$subexpression$2",symbols:["expr_or$macrocall$4"]},{name:"expr_or$macrocall$1$subexpression$2",symbols:["expr_paren"]},{name:"expr_or$macrocall$1",symbols:["expr_or$macrocall$1$subexpression$1","expr_or$macrocall$2","expr_or$macrocall$1$subexpression$2"],postprocess:e=>(0,n.track)(e,{type:"binary",left:t(e[0]),right:t(e[2]),...t(e[1])})},{name:"expr_or$macrocall$1",symbols:["expr_or$macrocall$4"],postprocess:t},{name:"expr_or",symbols:["expr_or$macrocall$1"]},{name:"expr_and$macrocall$2$macrocall$2",symbols:[s.lexerAny.has("kw_and")?{type:"kw_and"}:kw_and]},{name:"expr_and$macrocall$2$macrocall$1",symbols:["expr_and$macrocall$2$macrocall$2"],postprocess:e=>(0,n.track)(e,{op:(x(e," ")||"<error>").toUpperCase()})},{name:"expr_and$macrocall$2",symbols:["expr_and$macrocall$2$macrocall$1"]},{name:"expr_and$macrocall$3",symbols:["expr_and"]},{name:"expr_and$macrocall$4",symbols:["expr_not"]},{name:"expr_and$macrocall$1$subexpression$1",symbols:["expr_and$macrocall$3"]},{name:"expr_and$macrocall$1$subexpression$1",symbols:["expr_paren"]},{name:"expr_and$macrocall$1$subexpression$2",symbols:["expr_and$macrocall$4"]},{name:"expr_and$macrocall$1$subexpression$2",symbols:["expr_paren"]},{name:"expr_and$macrocall$1",symbols:["expr_and$macrocall$1$subexpression$1","expr_and$macrocall$2","expr_and$macrocall$1$subexpression$2"],postprocess:e=>(0,n.track)(e,{type:"binary",left:t(e[0]),right:t(e[2]),...t(e[1])})},{name:"expr_and$macrocall$1",symbols:["expr_and$macrocall$4"],postprocess:t},{name:"expr_and",symbols:["expr_and$macrocall$1"]},{name:"expr_not$macrocall$2$macrocall$2",symbols:[s.lexerAny.has("kw_not")?{type:"kw_not"}:kw_not]},{name:"expr_not$macrocall$2$macrocall$1",symbols:["expr_not$macrocall$2$macrocall$2"],postprocess:e=>(0,n.track)(e,{op:(x(e," ")||"<error>").toUpperCase()})},{name:"expr_not$macrocall$2",symbols:["expr_not$macrocall$2$macrocall$1"]},{name:"expr_not$macrocall$3",symbols:["expr_not"]},{name:"expr_not$macrocall$4",symbols:["expr_eq"]},{name:"expr_not$macrocall$1$subexpression$1",symbols:["expr_not$macrocall$3"]},{name:"expr_not$macrocall$1$subexpression$1",symbols:["expr_paren"]},{name:"expr_not$macrocall$1",symbols:["expr_not$macrocall$2","expr_not$macrocall$1$subexpression$1"],postprocess:e=>(0,n.track)(e,{type:"unary",...t(e[0]),operand:t(e[1])})},{name:"expr_not$macrocall$1",symbols:["expr_not$macrocall$4"],postprocess:t},{name:"expr_not",symbols:["expr_not$macrocall$1"]},{name:"expr_eq$macrocall$2$macrocall$2$subexpression$1",symbols:[s.lexerAny.has("op_eq")?{type:"op_eq"}:op_eq]},{name:"expr_eq$macrocall$2$macrocall$2$subexpression$1",symbols:[s.lexerAny.has("op_neq")?{type:"op_neq"}:op_neq]},{name:"expr_eq$macrocall$2$macrocall$2",symbols:["expr_eq$macrocall$2$macrocall$2$subexpression$1"]},{name:"expr_eq$macrocall$2$macrocall$1$macrocall$2",symbols:["expr_eq$macrocall$2$macrocall$2"]},{name:"expr_eq$macrocall$2$macrocall$1$macrocall$1",symbols:["expr_eq$macrocall$2$macrocall$1$macrocall$2"],postprocess:e=>(0,n.track)(e,{op:(x(e," ")||"<error>").toUpperCase()})},{name:"expr_eq$macrocall$2$macrocall$1",symbols:["expr_eq$macrocall$2$macrocall$1$macrocall$1"],postprocess:t},{name:"expr_eq$macrocall$2$macrocall$1",symbols:["kw_operator","lparen","ident","dot","expr_eq$macrocall$2$macrocall$2","rparen"],postprocess:e=>(0,n.track)(e,{op:(x(e[4]," ")||"<error>").toUpperCase(),opSchema:x(e[2])})},{name:"expr_eq$macrocall$2",symbols:["expr_eq$macrocall$2$macrocall$1"]},{name:"expr_eq$macrocall$3",symbols:["expr_eq"]},{name:"expr_eq$macrocall$4",symbols:["expr_is"]},{name:"expr_eq$macrocall$1$subexpression$1",symbols:["expr_eq$macrocall$3"]},{name:"expr_eq$macrocall$1$subexpression$1",symbols:["expr_paren"]},{name:"expr_eq$macrocall$1$subexpression$2",symbols:["expr_eq$macrocall$4"]},{name:"expr_eq$macrocall$1$subexpression$2",symbols:["expr_paren"]},{name:"expr_eq$macrocall$1",symbols:["expr_eq$macrocall$1$subexpression$1","expr_eq$macrocall$2","expr_eq$macrocall$1$subexpression$2"],postprocess:e=>(0,n.track)(e,{type:"binary",left:t(e[0]),right:t(e[2]),...t(e[1])})},{name:"expr_eq$macrocall$1",symbols:["expr_eq$macrocall$4"],postprocess:t},{name:"expr_eq",symbols:["expr_eq$macrocall$1"]},{name:"expr_star",symbols:["star"],postprocess:e=>(0,n.track)(e,{type:"ref",name:"*"})},{name:"expr_is$subexpression$1",symbols:["expr_is"]},{name:"expr_is$subexpression$1",symbols:["expr_paren"]},{name:"expr_is$subexpression$2",symbols:[s.lexerAny.has("kw_isnull")?{type:"kw_isnull"}:kw_isnull]},{name:"expr_is$subexpression$2",symbols:[s.lexerAny.has("kw_is")?{type:"kw_is"}:kw_is,s.lexerAny.has("kw_null")?{type:"kw_null"}:kw_null]},{name:"expr_is",symbols:["expr_is$subexpression$1","expr_is$subexpression$2"],postprocess:e=>(0,n.track)(e,{type:"unary",op:"IS NULL",operand:t(e[0])})},{name:"expr_is$subexpression$3",symbols:["expr_is"]},{name:"expr_is$subexpression$3",symbols:["expr_paren"]},{name:"expr_is$subexpression$4",symbols:[s.lexerAny.has("kw_notnull")?{type:"kw_notnull"}:kw_notnull]},{name:"expr_is$subexpression$4",symbols:[s.lexerAny.has("kw_is")?{type:"kw_is"}:kw_is,"kw_not_null"]},{name:"expr_is",symbols:["expr_is$subexpression$3","expr_is$subexpression$4"],postprocess:e=>(0,n.track)(e,{type:"unary",op:"IS NOT NULL",operand:t(e[0])})},{name:"expr_is$subexpression$5",symbols:["expr_is"]},{name:"expr_is$subexpression$5",symbols:["expr_paren"]},{name:"expr_is$ebnf$1",symbols:[s.lexerAny.has("kw_not")?{type:"kw_not"}:kw_not],postprocess:r},{name:"expr_is$ebnf$1",symbols:[],postprocess:()=>null},{name:"expr_is$subexpression$6",symbols:[s.lexerAny.has("kw_true")?{type:"kw_true"}:kw_true]},{name:"expr_is$subexpression$6",symbols:[s.lexerAny.has("kw_false")?{type:"kw_false"}:kw_false]},{name:"expr_is",symbols:["expr_is$subexpression$5",s.lexerAny.has("kw_is")?{type:"kw_is"}:kw_is,"expr_is$ebnf$1","expr_is$subexpression$6"],postprocess:e=>(0,n.track)(e,{type:"unary",op:"IS "+w([e[2],e[3]]).join(" ").toUpperCase(),operand:t(e[0])})},{name:"expr_is",symbols:["expr_compare"],postprocess:t},{name:"expr_compare$macrocall$2$macrocall$2",symbols:[s.lexerAny.has("op_compare")?{type:"op_compare"}:op_compare]},{name:"expr_compare$macrocall$2$macrocall$1$macrocall$2",symbols:["expr_compare$macrocall$2$macrocall$2"]},{name:"expr_compare$macrocall$2$macrocall$1$macrocall$1",symbols:["expr_compare$macrocall$2$macrocall$1$macrocall$2"],postprocess:e=>(0,n.track)(e,{op:(x(e," ")||"<error>").toUpperCase()})},{name:"expr_compare$macrocall$2$macrocall$1",symbols:["expr_compare$macrocall$2$macrocall$1$macrocall$1"],postprocess:t},{name:"expr_compare$macrocall$2$macrocall$1",symbols:["kw_operator","lparen","ident","dot","expr_compare$macrocall$2$macrocall$2","rparen"],postprocess:e=>(0,n.track)(e,{op:(x(e[4]," ")||"<error>").toUpperCase(),opSchema:x(e[2])})},{name:"expr_compare$macrocall$2",symbols:["expr_compare$macrocall$2$macrocall$1"]},{name:"expr_compare$macrocall$3",symbols:["expr_compare"]},{name:"expr_compare$macrocall$4",symbols:["expr_range"]},{name:"expr_compare$macrocall$1$subexpression$1",symbols:["expr_compare$macrocall$3"]},{name:"expr_compare$macrocall$1$subexpression$1",symbols:["expr_paren"]},{name:"expr_compare$macrocall$1$subexpression$2",symbols:["expr_compare$macrocall$4"]},{name:"expr_compare$macrocall$1$subexpression$2",symbols:["expr_paren"]},{name:"expr_compare$macrocall$1",symbols:["expr_compare$macrocall$1$subexpression$1","expr_compare$macrocall$2","expr_compare$macrocall$1$subexpression$2"],postprocess:e=>(0,n.track)(e,{type:"binary",left:t(e[0]),right:t(e[2]),...t(e[1])})},{name:"expr_compare$macrocall$1",symbols:["expr_compare$macrocall$4"],postprocess:t},{name:"expr_compare",symbols:["expr_compare$macrocall$1"]},{name:"expr_range$macrocall$2",symbols:["ops_between"]},{name:"expr_range$macrocall$3",symbols:[s.lexerAny.has("kw_and")?{type:"kw_and"}:kw_and]},{name:"expr_range$macrocall$4",symbols:["expr_range"]},{name:"expr_range$macrocall$5",symbols:["expr_others"]},{name:"expr_range$macrocall$1$subexpression$1",symbols:["expr_range$macrocall$4"]},{name:"expr_range$macrocall$1$subexpression$1",symbols:["expr_paren"]},{name:"expr_range$macrocall$1$subexpression$2",symbols:["expr_range$macrocall$4"]},{name:"expr_range$macrocall$1$subexpression$2",symbols:["expr_paren"]},{name:"expr_range$macrocall$1$subexpression$3",symbols:["expr_range$macrocall$5"]},{name:"expr_range$macrocall$1$subexpression$3",symbols:["expr_paren"]},{name:"expr_range$macrocall$1",symbols:["expr_range$macrocall$1$subexpression$1","expr_range$macrocall$2","expr_range$macrocall$1$subexpression$2","expr_range$macrocall$3","expr_range$macrocall$1$subexpression$3"],postprocess:e=>(0,n.track)(e,{type:"ternary",value:t(e[0]),lo:t(e[2]),hi:t(e[4]),op:(w(e[1]).join(" ")||"<error>").toUpperCase()})},{name:"expr_range$macrocall$1",symbols:["expr_range$macrocall$5"],postprocess:t},{name:"expr_range",symbols:["expr_range$macrocall$1"]},{name:"expr_others$macrocall$2$macrocall$2",symbols:[s.lexerAny.has("ops_others")?{type:"ops_others"}:ops_others]},{name:"expr_others$macrocall$2$macrocall$1$macrocall$2",symbols:["expr_others$macrocall$2$macrocall$2"]},{name:"expr_others$macrocall$2$macrocall$1$macrocall$1",symbols:["expr_others$macrocall$2$macrocall$1$macrocall$2"],postprocess:e=>(0,n.track)(e,{op:(x(e," ")||"<error>").toUpperCase()})},{name:"expr_others$macrocall$2$macrocall$1",symbols:["expr_others$macrocall$2$macrocall$1$macrocall$1"],postprocess:t},{name:"expr_others$macrocall$2$macrocall$1",symbols:["kw_operator","lparen","ident","dot","expr_others$macrocall$2$macrocall$2","rparen"],postprocess:e=>(0,n.track)(e,{op:(x(e[4]," ")||"<error>").toUpperCase(),opSchema:x(e[2])})},{name:"expr_others$macrocall$2",symbols:["expr_others$macrocall$2$macrocall$1"]},{name:"expr_others$macrocall$3",symbols:["expr_others"]},{name:"expr_others$macrocall$4",symbols:["expr_like"]},{name:"expr_others$macrocall$1$subexpression$1",symbols:["expr_others$macrocall$3"]},{name:"expr_others$macrocall$1$subexpression$1",symbols:["expr_paren"]},{name:"expr_others$macrocall$1$subexpression$2",symbols:["expr_others$macrocall$4"]},{name:"expr_others$macrocall$1$subexpression$2",symbols:["expr_paren"]},{name:"expr_others$macrocall$1",symbols:["expr_others$macrocall$1$subexpression$1","expr_others$macrocall$2","expr_others$macrocall$1$subexpression$2"],postprocess:e=>(0,n.track)(e,{type:"binary",left:t(e[0]),right:t(e[2]),...t(e[1])})},{name:"expr_others$macrocall$1",symbols:["expr_others$macrocall$4"],postprocess:t},{name:"expr_others",symbols:["expr_others$macrocall$1"]},{name:"expr_like$macrocall$2$macrocall$2",symbols:["ops_like"]},{name:"expr_like$macrocall$2$macrocall$1",symbols:["expr_like$macrocall$2$macrocall$2"],postprocess:e=>(0,n.track)(e,{op:(x(e," ")||"<error>").toUpperCase()})},{name:"expr_like$macrocall$2",symbols:["expr_like$macrocall$2$macrocall$1"]},{name:"expr_like$macrocall$3",symbols:["expr_like"]},{name:"expr_like$macrocall$4",symbols:["expr_in"]},{name:"expr_like$macrocall$1$subexpression$1",symbols:["expr_like$macrocall$3"]},{name:"expr_like$macrocall$1$subexpression$1",symbols:["expr_paren"]},{name:"expr_like$macrocall$1$subexpression$2",symbols:["expr_like$macrocall$4"]},{name:"expr_like$macrocall$1$subexpression$2",symbols:["expr_paren"]},{name:"expr_like$macrocall$1",symbols:["expr_like$macrocall$1$subexpression$1","expr_like$macrocall$2","expr_like$macrocall$1$subexpression$2"],postprocess:e=>(0,n.track)(e,{type:"binary",left:t(e[0]),right:t(e[2]),...t(e[1])})},{name:"expr_like$macrocall$1",symbols:["expr_like$macrocall$4"],postprocess:t},{name:"expr_like",symbols:["expr_like$macrocall$1"]},{name:"expr_in$macrocall$2$macrocall$2",symbols:["ops_in"]},{name:"expr_in$macrocall$2$macrocall$1",symbols:["expr_in$macrocall$2$macrocall$2"],postprocess:e=>(0,n.track)(e,{op:(x(e," ")||"<error>").toUpperCase()})},{name:"expr_in$macrocall$2",symbols:["expr_in$macrocall$2$macrocall$1"]},{name:"expr_in$macrocall$3",symbols:["expr_in"]},{name:"expr_in$macrocall$4",symbols:["expr_add"]},{name:"expr_in$macrocall$1$subexpression$1",symbols:["expr_in$macrocall$3"]},{name:"expr_in$macrocall$1$subexpression$1",symbols:["expr_paren"]},{name:"expr_in$macrocall$1$subexpression$2",symbols:["expr_in$macrocall$4"]},{name:"expr_in$macrocall$1$subexpression$2",symbols:["expr_paren"]},{name:"expr_in$macrocall$1",symbols:["expr_in$macrocall$1$subexpression$1","expr_in$macrocall$2","expr_in$macrocall$1$subexpression$2"],postprocess:e=>(0,n.track)(e,{type:"binary",left:t(e[0]),right:t(e[2]),...t(e[1])})},{name:"expr_in$macrocall$1",symbols:["expr_in$macrocall$4"],postprocess:t},{name:"expr_in",symbols:["expr_in$macrocall$1"]},{name:"expr_add$macrocall$2$macrocall$2$subexpression$1",symbols:[s.lexerAny.has("op_plus")?{type:"op_plus"}:op_plus]},{name:"expr_add$macrocall$2$macrocall$2$subexpression$1",symbols:[s.lexerAny.has("op_minus")?{type:"op_minus"}:op_minus]},{name:"expr_add$macrocall$2$macrocall$2$subexpression$1",symbols:[s.lexerAny.has("op_additive")?{type:"op_additive"}:op_additive]},{name:"expr_add$macrocall$2$macrocall$2",symbols:["expr_add$macrocall$2$macrocall$2$subexpression$1"]},{name:"expr_add$macrocall$2$macrocall$1$macrocall$2",symbols:["expr_add$macrocall$2$macrocall$2"]},{name:"expr_add$macrocall$2$macrocall$1$macrocall$1",symbols:["expr_add$macrocall$2$macrocall$1$macrocall$2"],postprocess:e=>(0,n.track)(e,{op:(x(e," ")||"<error>").toUpperCase()})},{name:"expr_add$macrocall$2$macrocall$1",symbols:["expr_add$macrocall$2$macrocall$1$macrocall$1"],postprocess:t},{name:"expr_add$macrocall$2$macrocall$1",symbols:["kw_operator","lparen","ident","dot","expr_add$macrocall$2$macrocall$2","rparen"],postprocess:e=>(0,n.track)(e,{op:(x(e[4]," ")||"<error>").toUpperCase(),opSchema:x(e[2])})},{name:"expr_add$macrocall$2",symbols:["expr_add$macrocall$2$macrocall$1"]},{name:"expr_add$macrocall$3",symbols:["expr_add"]},{name:"expr_add$macrocall$4",symbols:["expr_mult"]},{name:"expr_add$macrocall$1$subexpression$1",symbols:["expr_add$macrocall$3"]},{name:"expr_add$macrocall$1$subexpression$1",symbols:["expr_paren"]},{name:"expr_add$macrocall$1$subexpression$2",symbols:["expr_add$macrocall$4"]},{name:"expr_add$macrocall$1$subexpression$2",symbols:["expr_paren"]},{name:"expr_add$macrocall$1",symbols:["expr_add$macrocall$1$subexpression$1","expr_add$macrocall$2","expr_add$macrocall$1$subexpression$2"],postprocess:e=>(0,n.track)(e,{type:"binary",left:t(e[0]),right:t(e[2]),...t(e[1])})},{name:"expr_add$macrocall$1",symbols:["expr_add$macrocall$4"],postprocess:t},{name:"expr_add",symbols:["expr_add$macrocall$1"]},{name:"expr_mult$macrocall$2$macrocall$2$subexpression$1",symbols:[s.lexerAny.has("star")?{type:"star"}:star]},{name:"expr_mult$macrocall$2$macrocall$2$subexpression$1",symbols:[s.lexerAny.has("op_div")?{type:"op_div"}:op_div]},{name:"expr_mult$macrocall$2$macrocall$2$subexpression$1",symbols:[s.lexerAny.has("op_mod")?{type:"op_mod"}:op_mod]},{name:"expr_mult$macrocall$2$macrocall$2",symbols:["expr_mult$macrocall$2$macrocall$2$subexpression$1"]},{name:"expr_mult$macrocall$2$macrocall$1$macrocall$2",symbols:["expr_mult$macrocall$2$macrocall$2"]},{name:"expr_mult$macrocall$2$macrocall$1$macrocall$1",symbols:["expr_mult$macrocall$2$macrocall$1$macrocall$2"],postprocess:e=>(0,n.track)(e,{op:(x(e," ")||"<error>").toUpperCase()})},{name:"expr_mult$macrocall$2$macrocall$1",symbols:["expr_mult$macrocall$2$macrocall$1$macrocall$1"],postprocess:t},{name:"expr_mult$macrocall$2$macrocall$1",symbols:["kw_operator","lparen","ident","dot","expr_mult$macrocall$2$macrocall$2","rparen"],postprocess:e=>(0,n.track)(e,{op:(x(e[4]," ")||"<error>").toUpperCase(),opSchema:x(e[2])})},{name:"expr_mult$macrocall$2",symbols:["expr_mult$macrocall$2$macrocall$1"]},{name:"expr_mult$macrocall$3",symbols:["expr_mult"]},{name:"expr_mult$macrocall$4",symbols:["expr_exp"]},{name:"expr_mult$macrocall$1$subexpression$1",symbols:["expr_mult$macrocall$3"]},{name:"expr_mult$macrocall$1$subexpression$1",symbols:["expr_paren"]},{name:"expr_mult$macrocall$1$subexpression$2",symbols:["expr_mult$macrocall$4"]},{name:"expr_mult$macrocall$1$subexpression$2",symbols:["expr_paren"]},{name:"expr_mult$macrocall$1",symbols:["expr_mult$macrocall$1$subexpression$1","expr_mult$macrocall$2","expr_mult$macrocall$1$subexpression$2"],postprocess:e=>(0,n.track)(e,{type:"binary",left:t(e[0]),right:t(e[2]),...t(e[1])})},{name:"expr_mult$macrocall$1",symbols:["expr_mult$macrocall$4"],postprocess:t},{name:"expr_mult",symbols:["expr_mult$macrocall$1"]},{name:"expr_exp$macrocall$2$macrocall$2",symbols:[s.lexerAny.has("op_exp")?{type:"op_exp"}:op_exp]},{name:"expr_exp$macrocall$2$macrocall$1$macrocall$2",symbols:["expr_exp$macrocall$2$macrocall$2"]},{name:"expr_exp$macrocall$2$macrocall$1$macrocall$1",symbols:["expr_exp$macrocall$2$macrocall$1$macrocall$2"],postprocess:e=>(0,n.track)(e,{op:(x(e," ")||"<error>").toUpperCase()})},{name:"expr_exp$macrocall$2$macrocall$1",symbols:["expr_exp$macrocall$2$macrocall$1$macrocall$1"],postprocess:t},{name:"expr_exp$macrocall$2$macrocall$1",symbols:["kw_operator","lparen","ident","dot","expr_exp$macrocall$2$macrocall$2","rparen"],postprocess:e=>(0,n.track)(e,{op:(x(e[4]," ")||"<error>").toUpperCase(),opSchema:x(e[2])})},{name:"expr_exp$macrocall$2",symbols:["expr_exp$macrocall$2$macrocall$1"]},{name:"expr_exp$macrocall$3",symbols:["expr_exp"]},{name:"expr_exp$macrocall$4",symbols:["expr_unary_add"]},{name:"expr_exp$macrocall$1$subexpression$1",symbols:["expr_exp$macrocall$3"]},{name:"expr_exp$macrocall$1$subexpression$1",symbols:["expr_paren"]},{name:"expr_exp$macrocall$1$subexpression$2",symbols:["expr_exp$macrocall$4"]},{name:"expr_exp$macrocall$1$subexpression$2",symbols:["expr_paren"]},{name:"expr_exp$macrocall$1",symbols:["expr_exp$macrocall$1$subexpression$1","expr_exp$macrocall$2","expr_exp$macrocall$1$subexpression$2"],postprocess:e=>(0,n.track)(e,{type:"binary",left:t(e[0]),right:t(e[2]),...t(e[1])})},{name:"expr_exp$macrocall$1",symbols:["expr_exp$macrocall$4"],postprocess:t},{name:"expr_exp",symbols:["expr_exp$macrocall$1"]},{name:"expr_unary_add$macrocall$2$macrocall$2$subexpression$1",symbols:[s.lexerAny.has("op_plus")?{type:"op_plus"}:op_plus]},{name:"expr_unary_add$macrocall$2$macrocall$2$subexpression$1",symbols:[s.lexerAny.has("op_minus")?{type:"op_minus"}:op_minus]},{name:"expr_unary_add$macrocall$2$macrocall$2",symbols:["expr_unary_add$macrocall$2$macrocall$2$subexpression$1"]},{name:"expr_unary_add$macrocall$2$macrocall$1$macrocall$2",symbols:["expr_unary_add$macrocall$2$macrocall$2"]},{name:"expr_unary_add$macrocall$2$macrocall$1$macrocall$1",symbols:["expr_unary_add$macrocall$2$macrocall$1$macrocall$2"],postprocess:e=>(0,n.track)(e,{op:(x(e," ")||"<error>").toUpperCase()})},{name:"expr_unary_add$macrocall$2$macrocall$1",symbols:["expr_unary_add$macrocall$2$macrocall$1$macrocall$1"],postprocess:t},{name:"expr_unary_add$macrocall$2$macrocall$1",symbols:["kw_operator","lparen","ident","dot","expr_unary_add$macrocall$2$macrocall$2","rparen"],postprocess:e=>(0,n.track)(e,{op:(x(e[4]," ")||"<error>").toUpperCase(),opSchema:x(e[2])})},{name:"expr_unary_add$macrocall$2",symbols:["expr_unary_add$macrocall$2$macrocall$1"]},{name:"expr_unary_add$macrocall$3",symbols:["expr_unary_add"]},{name:"expr_unary_add$macrocall$4",symbols:["expr_various_constructs"]},{name:"expr_unary_add$macrocall$1$subexpression$1",symbols:["expr_unary_add$macrocall$3"]},{name:"expr_unary_add$macrocall$1$subexpression$1",symbols:["expr_paren"]},{name:"expr_unary_add$macrocall$1",symbols:["expr_unary_add$macrocall$2","expr_unary_add$macrocall$1$subexpression$1"],postprocess:e=>(0,n.track)(e,{type:"unary",...t(e[0]),operand:t(e[1])})},{name:"expr_unary_add$macrocall$1",symbols:["expr_unary_add$macrocall$4"],postprocess:t},{name:"expr_unary_add",symbols:["expr_unary_add$macrocall$1"]},{name:"expr_various_constructs$macrocall$2$macrocall$2",symbols:["various_binaries"]},{name:"expr_various_constructs$macrocall$2$macrocall$1",symbols:["expr_various_constructs$macrocall$2$macrocall$2"],postprocess:e=>(0,n.track)(e,{op:(x(e," ")||"<error>").toUpperCase()})},{name:"expr_various_constructs$macrocall$2",symbols:["expr_various_constructs$macrocall$2$macrocall$1"]},{name:"expr_various_constructs$macrocall$3",symbols:["expr_various_constructs"]},{name:"expr_various_constructs$macrocall$4",symbols:["expr_array_index"]},{name:"expr_various_constructs$macrocall$1$subexpression$1",symbols:["expr_various_constructs$macrocall$3"]},{name:"expr_various_constructs$macrocall$1$subexpression$1",symbols:["expr_paren"]},{name:"expr_various_constructs$macrocall$1$subexpression$2",symbols:["expr_various_constructs$macrocall$4"]},{name:"expr_various_constructs$macrocall$1$subexpression$2",symbols:["expr_paren"]},{name:"expr_various_constructs$macrocall$1",symbols:["expr_various_constructs$macrocall$1$subexpression$1","expr_various_constructs$macrocall$2","expr_various_constructs$macrocall$1$subexpression$2"],postprocess:e=>(0,n.track)(e,{type:"binary",left:t(e[0]),right:t(e[2]),...t(e[1])})},{name:"expr_various_constructs$macrocall$1",symbols:["expr_various_constructs$macrocall$4"],postprocess:t},{name:"expr_various_constructs",symbols:["expr_various_constructs$macrocall$1"]},{name:"expr_array_index$subexpression$1",symbols:["expr_array_index"]},{name:"expr_array_index$subexpression$1",symbols:["expr_paren"]},{name:"expr_array_index",symbols:["expr_array_index$subexpression$1",s.lexerAny.has("lbracket")?{type:"lbracket"}:lbracket,"expr_nostar",s.lexerAny.has("rbracket")?{type:"rbracket"}:rbracket],postprocess:e=>(0,n.track)(e,{type:"arrayIndex",array:t(e[0]),index:t(e[2])})},{name:"expr_array_index",symbols:["expr_member"],postprocess:t},{name:"expr_member$subexpression$1",symbols:["expr_member"]},{name:"expr_member$subexpression$1",symbols:["expr_paren"]},{name:"expr_member$subexpression$2",symbols:["string"]},{name:"expr_member$subexpression$2",symbols:["int"]},{name:"expr_member",symbols:["expr_member$subexpression$1","ops_member","expr_member$subexpression$2"],postprocess:e=>(0,n.track)(e,{type:"member",operand:t(e[0]),op:e[1],member:t(e[2])})},{name:"expr_member$subexpression$3",symbols:["expr_member"]},{name:"expr_member$subexpression$3",symbols:["expr_paren"]},{name:"expr_member",symbols:["expr_member$subexpression$3",s.lexerAny.has("op_cast")?{type:"op_cast"}:op_cast,"data_type"],postprocess:e=>(0,n.track)(e,{type:"cast",operand:t(e[0]),to:e[2]})},{name:"expr_member",symbols:[s.lexerAny.has("kw_cast")?{type:"kw_cast"}:kw_cast,"lparen","expr_nostar",s.lexerAny.has("kw_as")?{type:"kw_as"}:kw_as,"data_type","rparen"],postprocess:e=>(0,n.track)(e,{type:"cast",operand:t(e[2]),to:e[4]})},{name:"expr_member",symbols:["data_type","string"],postprocess:e=>(0,n.track)(e,{type:"cast",operand:(0,n.track)(e[1],{type:"string",value:(0,n.unbox)(e[1])}),to:(0,n.unbox)(e[0])})},{name:"expr_member",symbols:["expr_dot"],postprocess:t},{name:"expr_dot$subexpression$1",symbols:["word"]},{name:"expr_dot$subexpression$1",symbols:["star"]},{name:"expr_dot",symbols:["qname",s.lexerAny.has("dot")?{type:"dot"}:dot,"expr_dot$subexpression$1"],postprocess:e=>(0,n.track)(e,{type:"ref",table:t(e[0]),name:x(e[2])})},{name:"expr_dot",symbols:["expr_final"],postprocess:t},{name:"expr_final",symbols:["expr_basic"]},{name:"expr_final",symbols:["expr_primary"]},{name:"expr_basic",symbols:["expr_special_calls"]},{name:"expr_basic",symbols:["expr_call"]},{name:"expr_basic",symbols:["expr_array"]},{name:"expr_basic",symbols:["expr_case"]},{name:"expr_basic",symbols:["expr_extract"]},{name:"expr_basic",symbols:["word"],postprocess:e=>(0,n.track)(e,{type:"ref",name:t(e[0])})},{name:"expr_array$ebnf$1",symbols:["expr_subarray_items"],postprocess:r},{name:"expr_array$ebnf$1",symbols:[],postprocess:()=>null},{name:"expr_array",symbols:[s.lexerAny.has("kw_array")?{type:"kw_array"}:kw_array,s.lexerAny.has("lbracket")?{type:"lbracket"}:lbracket,"expr_array$ebnf$1",s.lexerAny.has("rbracket")?{type:"rbracket"}:rbracket],postprocess:e=>(0,n.track)(e,{type:"array",expressions:e[2]||[]})},{name:"expr_array",symbols:[s.lexerAny.has("kw_array")?{type:"kw_array"}:kw_array,"lparen","selection","rparen"],postprocess:e=>(0,n.track)(e,{type:"array select",select:t(e[2])})},{name:"expr_subarray$ebnf$1",symbols:["expr_subarray_items"],postprocess:r},{name:"expr_subarray$ebnf$1",symbols:[],postprocess:()=>null},{name:"expr_subarray",symbols:[s.lexerAny.has("lbracket")?{type:"lbracket"}:lbracket,"expr_subarray$ebnf$1",s.lexerAny.has("rbracket")?{type:"rbracket"}:rbracket],postprocess:_(1)},{name:"expr_subarray_items$macrocall$2",symbols:["expr_list_item"]},{name:"expr_subarray_items$macrocall$1$ebnf$1",symbols:[]},{name:"expr_subarray_items$macrocall$1$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("comma")?{type:"comma"}:comma,"expr_subarray_items$macrocall$2"],postprocess:$},{name:"expr_subarray_items$macrocall$1$ebnf$1",symbols:["expr_subarray_items$macrocall$1$ebnf$1","expr_subarray_items$macrocall$1$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"expr_subarray_items$macrocall$1",symbols:["expr_subarray_items$macrocall$2","expr_subarray_items$macrocall$1$ebnf$1"],postprocess:([e,u])=>[e,...u||[]]},{name:"expr_subarray_items",symbols:["expr_subarray_items$macrocall$1"],postprocess:e=>e[0].map(t)},{name:"expr_subarray_items$macrocall$4",symbols:["expr_subarray"]},{name:"expr_subarray_items$macrocall$3$ebnf$1",symbols:[]},{name:"expr_subarray_items$macrocall$3$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("comma")?{type:"comma"}:comma,"expr_subarray_items$macrocall$4"],postprocess:$},{name:"expr_subarray_items$macrocall$3$ebnf$1",symbols:["expr_subarray_items$macrocall$3$ebnf$1","expr_subarray_items$macrocall$3$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"expr_subarray_items$macrocall$3",symbols:["expr_subarray_items$macrocall$4","expr_subarray_items$macrocall$3$ebnf$1"],postprocess:([e,u])=>[e,...u||[]]},{name:"expr_subarray_items",symbols:["expr_subarray_items$macrocall$3"],postprocess:e=>e[0].map(u=>(0,n.track)(u,{type:"array",expressions:u[0].map(t)}))},{name:"expr_function_call$ebnf$1",symbols:["expr_list_raw"],postprocess:r},{name:"expr_function_call$ebnf$1",symbols:[],postprocess:()=>null},{name:"expr_function_call",symbols:["expr_fn_name","lparen","expr_function_call$ebnf$1","rparen"],postprocess:e=>(0,n.track)(e,{type:"call",function:t(e[0]),args:e[2]||[]})},{name:"expr_call$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("kw_all")?{type:"kw_all"}:kw_all]},{name:"expr_call$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("kw_distinct")?{type:"kw_distinct"}:kw_distinct]},{name:"expr_call$ebnf$1",symbols:["expr_call$ebnf$1$subexpression$1"],postprocess:r},{name:"expr_call$ebnf$1",symbols:[],postprocess:()=>null},{name:"expr_call$ebnf$2",symbols:["expr_list_raw"],postprocess:r},{name:"expr_call$ebnf$2",symbols:[],postprocess:()=>null},{name:"expr_call$ebnf$3",symbols:["select_order_by"],postprocess:r},{name:"expr_call$ebnf$3",symbols:[],postprocess:()=>null},{name:"expr_call$ebnf$4$subexpression$1",symbols:["kw_filter","lparen",s.lexerAny.has("kw_where")?{type:"kw_where"}:kw_where,"expr","rparen"],postprocess:_(3)},{name:"expr_call$ebnf$4",symbols:["expr_call$ebnf$4$subexpression$1"],postprocess:r},{name:"expr_call$ebnf$4",symbols:[],postprocess:()=>null},{name:"expr_call$ebnf$5",symbols:["expr_call_over"],postprocess:r},{name:"expr_call$ebnf$5",symbols:[],postprocess:()=>null},{name:"expr_call",symbols:["expr_fn_name","lparen","expr_call$ebnf$1","expr_call$ebnf$2","expr_call$ebnf$3","rparen","expr_call$ebnf$4","expr_call$ebnf$5"],postprocess:e=>(0,n.track)(e,{type:"call",function:t(e[0]),...e[2]&&{distinct:x(e[2])},args:e[3]||[],...e[4]&&{orderBy:e[4]},...e[6]&&{filter:t(e[6])},...e[7]&&{over:t(e[7])}})},{name:"expr_call_over$ebnf$1$subexpression$1",symbols:["kw_partition","kw_by","expr_list_raw"],postprocess:$},{name:"expr_call_over$ebnf$1",symbols:["expr_call_over$ebnf$1$subexpression$1"],postprocess:r},{name:"expr_call_over$ebnf$1",symbols:[],postprocess:()=>null},{name:"expr_call_over$ebnf$2",symbols:["select_order_by"],postprocess:r},{name:"expr_call_over$ebnf$2",symbols:[],postprocess:()=>null},{name:"expr_call_over",symbols:["kw_over","lparen","expr_call_over$ebnf$1","expr_call_over$ebnf$2","rparen"],postprocess:e=>(0,n.track)(e,{...e[2]&&{partitionBy:e[2]},...e[3]&&{orderBy:e[3]}})},{name:"expr_extract$subexpression$1",symbols:["word"],postprocess:k("extract")},{name:"expr_extract",symbols:["expr_extract$subexpression$1","lparen","word",s.lexerAny.has("kw_from")?{type:"kw_from"}:kw_from,"expr","rparen"],postprocess:e=>(0,n.track)(e,{type:"extract",field:m(e[2]),from:e[4]})},{name:"expr_primary",symbols:["float"],postprocess:e=>(0,n.track)(e,{type:"numeric",value:(0,n.unbox)(e[0])})},{name:"expr_primary",symbols:["int"],postprocess:e=>(0,n.track)(e,{type:"integer",value:(0,n.unbox)(e[0])})},{name:"expr_primary",symbols:["string"],postprocess:e=>(0,n.track)(e,{type:"string",value:(0,n.unbox)(e[0])})},{name:"expr_primary",symbols:[s.lexerAny.has("kw_true")?{type:"kw_true"}:kw_true],postprocess:e=>(0,n.track)(e,{type:"boolean",value:!0})},{name:"expr_primary",symbols:[s.lexerAny.has("kw_false")?{type:"kw_false"}:kw_false],postprocess:e=>(0,n.track)(e,{type:"boolean",value:!1})},{name:"expr_primary",symbols:[s.lexerAny.has("kw_null")?{type:"kw_null"}:kw_null],postprocess:e=>(0,n.track)(e,{type:"null"})},{name:"expr_primary",symbols:["value_keyword"],postprocess:e=>(0,n.track)(e,{type:"keyword",keyword:x(e)})},{name:"expr_primary",symbols:[s.lexerAny.has("qparam")?{type:"qparam"}:qparam],postprocess:e=>(0,n.track)(e,{type:"parameter",name:x(e[0])})},{name:"expr_primary",symbols:[s.lexerAny.has("kw_default")?{type:"kw_default"}:kw_default],postprocess:e=>(0,n.track)(e,{type:"default"})},{name:"ops_like",symbols:["ops_like_keywors"]},{name:"ops_like",symbols:["ops_like_operators"]},{name:"ops_like_keywors$ebnf$1",symbols:[s.lexerAny.has("kw_not")?{type:"kw_not"}:kw_not],postprocess:r},{name:"ops_like_keywors$ebnf$1",symbols:[],postprocess:()=>null},{name:"ops_like_keywors$subexpression$1",symbols:[s.lexerAny.has("kw_like")?{type:"kw_like"}:kw_like]},{name:"ops_like_keywors$subexpression$1",symbols:[s.lexerAny.has("kw_ilike")?{type:"kw_ilike"}:kw_ilike]},{name:"ops_like_keywors",symbols:["ops_like_keywors$ebnf$1","ops_like_keywors$subexpression$1"]},{name:"ops_like_operators$subexpression$1",symbols:[s.lexerAny.has("op_like")?{type:"op_like"}:op_like],postprocess:()=>"LIKE"},{name:"ops_like_operators",symbols:["ops_like_operators$subexpression$1"]},{name:"ops_like_operators$subexpression$2",symbols:[s.lexerAny.has("op_ilike")?{type:"op_ilike"}:op_ilike],postprocess:()=>"ILIKE"},{name:"ops_like_operators",symbols:["ops_like_operators$subexpression$2"]},{name:"ops_like_operators$subexpression$3",symbols:[s.lexerAny.has("op_not_like")?{type:"op_not_like"}:op_not_like],postprocess:()=>"NOT LIKE"},{name:"ops_like_operators",symbols:["ops_like_operators$subexpression$3"]},{name:"ops_like_operators$subexpression$4",symbols:[s.lexerAny.has("op_not_ilike")?{type:"op_not_ilike"}:op_not_ilike],postprocess:()=>"NOT ILIKE"},{name:"ops_like_operators",symbols:["ops_like_operators$subexpression$4"]},{name:"ops_in$ebnf$1",symbols:[s.lexerAny.has("kw_not")?{type:"kw_not"}:kw_not],postprocess:r},{name:"ops_in$ebnf$1",symbols:[],postprocess:()=>null},{name:"ops_in",symbols:["ops_in$ebnf$1",s.lexerAny.has("kw_in")?{type:"kw_in"}:kw_in]},{name:"ops_between$ebnf$1",symbols:[s.lexerAny.has("kw_not")?{type:"kw_not"}:kw_not],postprocess:r},{name:"ops_between$ebnf$1",symbols:[],postprocess:()=>null},{name:"ops_between",symbols:["ops_between$ebnf$1","kw_between"]},{name:"ops_member$subexpression$1",symbols:[s.lexerAny.has("op_member")?{type:"op_member"}:op_member]},{name:"ops_member$subexpression$1",symbols:[s.lexerAny.has("op_membertext")?{type:"op_membertext"}:op_membertext]},{name:"ops_member",symbols:["ops_member$subexpression$1"],postprocess:e=>{var u;return(u=t(e))===null||u===void 0?void 0:u.value}},{name:"expr_list_item",symbols:["expr_or_select"],postprocess:t},{name:"expr_list_item",symbols:["expr_star"],postprocess:t},{name:"expr_list_raw$macrocall$2",symbols:["expr_list_item"]},{name:"expr_list_raw$macrocall$1$ebnf$1",symbols:[]},{name:"expr_list_raw$macrocall$1$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("comma")?{type:"comma"}:comma,"expr_list_raw$macrocall$2"],postprocess:$},{name:"expr_list_raw$macrocall$1$ebnf$1",symbols:["expr_list_raw$macrocall$1$ebnf$1","expr_list_raw$macrocall$1$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"expr_list_raw$macrocall$1",symbols:["expr_list_raw$macrocall$2","expr_list_raw$macrocall$1$ebnf$1"],postprocess:([e,u])=>[e,...u||[]]},{name:"expr_list_raw",symbols:["expr_list_raw$macrocall$1"],postprocess:([e])=>e.map(t)},{name:"expr_list_raw_many$macrocall$2",symbols:["expr_list_item"]},{name:"expr_list_raw_many$macrocall$1$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("comma")?{type:"comma"}:comma,"expr_list_raw_many$macrocall$2"],postprocess:$},{name:"expr_list_raw_many$macrocall$1$ebnf$1",symbols:["expr_list_raw_many$macrocall$1$ebnf$1$subexpression$1"]},{name:"expr_list_raw_many$macrocall$1$ebnf$1$subexpression$2",symbols:[s.lexerAny.has("comma")?{type:"comma"}:comma,"expr_list_raw_many$macrocall$2"],postprocess:$},{name:"expr_list_raw_many$macrocall$1$ebnf$1",symbols:["expr_list_raw_many$macrocall$1$ebnf$1","expr_list_raw_many$macrocall$1$ebnf$1$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"expr_list_raw_many$macrocall$1",symbols:["expr_list_raw_many$macrocall$2","expr_list_raw_many$macrocall$1$ebnf$1"],postprocess:([e,u])=>[e,...u||[]]},{name:"expr_list_raw_many",symbols:["expr_list_raw_many$macrocall$1"],postprocess:([e])=>e.map(t)},{name:"expr_or_select",symbols:["expr_nostar"],postprocess:t},{name:"expr_or_select",symbols:["selection"],postprocess:t},{name:"expr_list_many",symbols:["expr_list_raw_many"],postprocess:e=>(0,n.track)(e,{type:"list",expressions:e[0]})},{name:"expr_case$ebnf$1",symbols:["expr_nostar"],postprocess:r},{name:"expr_case$ebnf$1",symbols:[],postprocess:()=>null},{name:"expr_case$ebnf$2",symbols:[]},{name:"expr_case$ebnf$2",symbols:["expr_case$ebnf$2","expr_case_whens"],postprocess:e=>e[0].concat([e[1]])},{name:"expr_case$ebnf$3",symbols:["expr_case_else"],postprocess:r},{name:"expr_case$ebnf$3",symbols:[],postprocess:()=>null},{name:"expr_case",symbols:[s.lexerAny.has("kw_case")?{type:"kw_case"}:kw_case,"expr_case$ebnf$1","expr_case$ebnf$2","expr_case$ebnf$3",s.lexerAny.has("kw_end")?{type:"kw_end"}:kw_end],postprocess:e=>(0,n.track)(e,{type:"case",value:e[1],whens:e[2],else:e[3]})},{name:"expr_case_whens",symbols:[s.lexerAny.has("kw_when")?{type:"kw_when"}:kw_when,"expr_nostar",s.lexerAny.has("kw_then")?{type:"kw_then"}:kw_then,"expr_nostar"],postprocess:e=>(0,n.track)(e,{when:e[1],value:e[3]})},{name:"expr_case_else",symbols:[s.lexerAny.has("kw_else")?{type:"kw_else"}:kw_else,"expr_nostar"],postprocess:$},{name:"expr_fn_name$subexpression$1$ebnf$1$subexpression$1",symbols:["word",s.lexerAny.has("dot")?{type:"dot"}:dot]},{name:"expr_fn_name$subexpression$1$ebnf$1",symbols:["expr_fn_name$subexpression$1$ebnf$1$subexpression$1"],postprocess:r},{name:"expr_fn_name$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"expr_fn_name$subexpression$1",symbols:["expr_fn_name$subexpression$1$ebnf$1","word_or_keyword"],postprocess:e=>(0,n.track)(e,{name:(0,n.unbox)(t(e[1])),...e[0]&&{schema:x(e[0][0])}})},{name:"expr_fn_name",symbols:["expr_fn_name$subexpression$1"]},{name:"expr_fn_name$subexpression$2$subexpression$1",symbols:[s.lexerAny.has("kw_any")?{type:"kw_any"}:kw_any]},{name:"expr_fn_name$subexpression$2$subexpression$1",symbols:[s.lexerAny.has("kw_some")?{type:"kw_some"}:kw_some]},{name:"expr_fn_name$subexpression$2$subexpression$1",symbols:[s.lexerAny.has("kw_all")?{type:"kw_all"}:kw_all]},{name:"expr_fn_name$subexpression$2",symbols:["expr_fn_name$subexpression$2$subexpression$1"],postprocess:e=>(0,n.track)(e,{name:x(t(e))})},{name:"expr_fn_name",symbols:["expr_fn_name$subexpression$2"]},{name:"word_or_keyword",symbols:["word"]},{name:"word_or_keyword",symbols:["value_keyword"],postprocess:e=>(0,n.box)(e,x(e))},{name:"value_keyword",symbols:[s.lexerAny.has("kw_current_catalog")?{type:"kw_current_catalog"}:kw_current_catalog]},{name:"value_keyword",symbols:[s.lexerAny.has("kw_current_date")?{type:"kw_current_date"}:kw_current_date]},{name:"value_keyword",symbols:[s.lexerAny.has("kw_current_role")?{type:"kw_current_role"}:kw_current_role]},{name:"value_keyword",symbols:[s.lexerAny.has("kw_current_schema")?{type:"kw_current_schema"}:kw_current_schema]},{name:"value_keyword",symbols:[s.lexerAny.has("kw_current_timestamp")?{type:"kw_current_timestamp"}:kw_current_timestamp]},{name:"value_keyword",symbols:[s.lexerAny.has("kw_current_time")?{type:"kw_current_time"}:kw_current_time]},{name:"value_keyword",symbols:[s.lexerAny.has("kw_localtimestamp")?{type:"kw_localtimestamp"}:kw_localtimestamp]},{name:"value_keyword",symbols:[s.lexerAny.has("kw_localtime")?{type:"kw_localtime"}:kw_localtime]},{name:"value_keyword",symbols:[s.lexerAny.has("kw_session_user")?{type:"kw_session_user"}:kw_session_user]},{name:"value_keyword",symbols:[s.lexerAny.has("kw_user")?{type:"kw_user"}:kw_user]},{name:"value_keyword",symbols:[s.lexerAny.has("kw_current_user")?{type:"kw_current_user"}:kw_current_user]},{name:"expr_special_calls",symbols:["spe_overlay"]},{name:"expr_special_calls",symbols:["spe_substring"]},{name:"spe_overlay$subexpression$1",symbols:["word"],postprocess:k("overlay")},{name:"spe_overlay$subexpression$2",symbols:[s.lexerAny.has("lparen")?{type:"lparen"}:lparen,"expr_nostar"]},{name:"spe_overlay$subexpression$3",symbols:[s.lexerAny.has("kw_placing")?{type:"kw_placing"}:kw_placing,"expr_nostar"]},{name:"spe_overlay$subexpression$4",symbols:[s.lexerAny.has("kw_from")?{type:"kw_from"}:kw_from,"expr_nostar"]},{name:"spe_overlay$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("kw_for")?{type:"kw_for"}:kw_for,"expr_nostar"]},{name:"spe_overlay$ebnf$1",symbols:["spe_overlay$ebnf$1$subexpression$1"],postprocess:r},{name:"spe_overlay$ebnf$1",symbols:[],postprocess:()=>null},{name:"spe_overlay",symbols:["spe_overlay$subexpression$1","spe_overlay$subexpression$2","spe_overlay$subexpression$3","spe_overlay$subexpression$4","spe_overlay$ebnf$1",s.lexerAny.has("rparen")?{type:"rparen"}:rparen],postprocess:e=>(0,n.track)(e,{type:"overlay",value:e[1][1],placing:e[2][1],from:e[3][1],...e[4]&&{for:e[4][1]}})},{name:"spe_substring$subexpression$1",symbols:["word"],postprocess:k("substring")},{name:"spe_substring$subexpression$2",symbols:[s.lexerAny.has("lparen")?{type:"lparen"}:lparen,"expr_nostar"]},{name:"spe_substring$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("kw_from")?{type:"kw_from"}:kw_from,"expr_nostar"]},{name:"spe_substring$ebnf$1",symbols:["spe_substring$ebnf$1$subexpression$1"],postprocess:r},{name:"spe_substring$ebnf$1",symbols:[],postprocess:()=>null},{name:"spe_substring$ebnf$2$subexpression$1",symbols:[s.lexerAny.has("kw_for")?{type:"kw_for"}:kw_for,"expr_nostar"]},{name:"spe_substring$ebnf$2",symbols:["spe_substring$ebnf$2$subexpression$1"],postprocess:r},{name:"spe_substring$ebnf$2",symbols:[],postprocess:()=>null},{name:"spe_substring",symbols:["spe_substring$subexpression$1","spe_substring$subexpression$2","spe_substring$ebnf$1","spe_substring$ebnf$2",s.lexerAny.has("rparen")?{type:"rparen"}:rparen],postprocess:e=>(0,n.track)(e,{type:"substring",value:e[1][1],...e[2]&&{from:e[2][1]},...e[3]&&{for:e[3][1]}})},{name:"various_binaries",symbols:["kw_at","kw_time","kw_zone"],postprocess:()=>"AT TIME ZONE"},{name:"createtable_statement$ebnf$1",symbols:["createtable_modifiers"],postprocess:r},{name:"createtable_statement$ebnf$1",symbols:[],postprocess:()=>null},{name:"createtable_statement$ebnf$2",symbols:["kw_ifnotexists"],postprocess:r},{name:"createtable_statement$ebnf$2",symbols:[],postprocess:()=>null},{name:"createtable_statement$ebnf$3",symbols:["createtable_opts"],postprocess:r},{name:"createtable_statement$ebnf$3",symbols:[],postprocess:()=>null},{name:"createtable_statement",symbols:[s.lexerAny.has("kw_create")?{type:"kw_create"}:kw_create,"createtable_statement$ebnf$1",s.lexerAny.has("kw_table")?{type:"kw_table"}:kw_table,"createtable_statement$ebnf$2","qname","lparen","createtable_declarationlist","rparen","createtable_statement$ebnf$3"],postprocess:e=>{const u=e[6].filter(d=>"kind"in d),l=e[6].filter(d=>!("kind"in d));return(0,n.track)(e,{type:"create table",...e[3]?{ifNotExists:!0}:{},name:e[4],columns:u,...t(e[1]),...l.length?{constraints:l}:{},...$(e)})}},{name:"createtable_modifiers",symbols:["kw_unlogged"],postprocess:e=>e[0]?{unlogged:!0}:{}},{name:"createtable_modifiers",symbols:["m_locglob"]},{name:"createtable_modifiers",symbols:["m_tmp"]},{name:"createtable_modifiers",symbols:["m_locglob","m_tmp"],postprocess:([e,u])=>({...e,...u})},{name:"m_locglob$subexpression$1",symbols:["kw_local"]},{name:"m_locglob$subexpression$1",symbols:["kw_global"]},{name:"m_locglob",symbols:["m_locglob$subexpression$1"],postprocess:e=>({locality:x(e)})},{name:"m_tmp$subexpression$1",symbols:["kw_temp"]},{name:"m_tmp$subexpression$1",symbols:["kw_temporary"]},{name:"m_tmp",symbols:["m_tmp$subexpression$1"],postprocess:e=>({temporary:!0})},{name:"createtable_declarationlist$ebnf$1",symbols:[]},{name:"createtable_declarationlist$ebnf$1$subexpression$1",symbols:["comma","createtable_declaration"],postprocess:$},{name:"createtable_declarationlist$ebnf$1",symbols:["createtable_declarationlist$ebnf$1","createtable_declarationlist$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"createtable_declarationlist",symbols:["createtable_declaration","createtable_declarationlist$ebnf$1"],postprocess:([e,u])=>[e,...u||[]]},{name:"createtable_declaration$subexpression$1",symbols:["createtable_constraint"]},{name:"createtable_declaration$subexpression$1",symbols:["createtable_column"]},{name:"createtable_declaration$subexpression$1",symbols:["createtable_like"]},{name:"createtable_declaration",symbols:["createtable_declaration$subexpression$1"],postprocess:t},{name:"createtable_constraint$macrocall$2",symbols:["createtable_constraint_def"]},{name:"createtable_constraint$macrocall$1$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("kw_constraint")?{type:"kw_constraint"}:kw_constraint,"word"]},{name:"createtable_constraint$macrocall$1$ebnf$1",symbols:["createtable_constraint$macrocall$1$ebnf$1$subexpression$1"],postprocess:r},{name:"createtable_constraint$macrocall$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"createtable_constraint$macrocall$1",symbols:["createtable_constraint$macrocall$1$ebnf$1","createtable_constraint$macrocall$2"],postprocess:e=>{const u=e[0]&&m(e[0][1]);return u?(0,n.track)(e,{constraintName:u,...t(e[1])}):(0,n.track)(e,t(e[1]))}},{name:"createtable_constraint",symbols:["createtable_constraint$macrocall$1"],postprocess:t},{name:"createtable_constraint_def",symbols:["createtable_constraint_def_unique"]},{name:"createtable_constraint_def",symbols:["createtable_constraint_def_check"]},{name:"createtable_constraint_def",symbols:["createtable_constraint_foreignkey"]},{name:"createtable_constraint_def_unique$subexpression$1",symbols:[s.lexerAny.has("kw_unique")?{type:"kw_unique"}:kw_unique]},{name:"createtable_constraint_def_unique$subexpression$1",symbols:["kw_primary_key"]},{name:"createtable_constraint_def_unique",symbols:["createtable_constraint_def_unique$subexpression$1","lparen","createtable_collist","rparen"],postprocess:e=>(0,n.track)(e,{type:x(e[0]," "),columns:e[2].map(m)})},{name:"createtable_constraint_def_check",symbols:[s.lexerAny.has("kw_check")?{type:"kw_check"}:kw_check,"expr_paren"],postprocess:e=>(0,n.track)(e,{type:"check",expr:t(e[1])})},{name:"createtable_constraint_foreignkey",symbols:[s.lexerAny.has("kw_foreign")?{type:"kw_foreign"}:kw_foreign,"kw_key","collist_paren","createtable_references"],postprocess:e=>(0,n.track)(e,{type:"foreign key",localColumns:e[2].map(m),...e[3]})},{name:"createtable_references$ebnf$1",symbols:[]},{name:"createtable_references$ebnf$1",symbols:["createtable_references$ebnf$1","createtable_constraint_foreignkey_onsometing"],postprocess:e=>e[0].concat([e[1]])},{name:"createtable_references",symbols:[s.lexerAny.has("kw_references")?{type:"kw_references"}:kw_references,"table_ref","collist_paren","createtable_references$ebnf$1"],postprocess:e=>(0,n.track)(e,{foreignTable:t(e[1]),foreignColumns:e[2].map(m),...e[3].reduce((u,l)=>({...u,...l}),{})})},{name:"createtable_constraint_foreignkey_onsometing",symbols:[s.lexerAny.has("kw_on")?{type:"kw_on"}:kw_on,"kw_delete","createtable_constraint_on_action"],postprocess:e=>(0,n.track)(e,{onDelete:$(e)})},{name:"createtable_constraint_foreignkey_onsometing",symbols:[s.lexerAny.has("kw_on")?{type:"kw_on"}:kw_on,"kw_update","createtable_constraint_on_action"],postprocess:e=>(0,n.track)(e,{onUpdate:$(e)})},{name:"createtable_constraint_foreignkey_onsometing$subexpression$1",symbols:[s.lexerAny.has("kw_full")?{type:"kw_full"}:kw_full]},{name:"createtable_constraint_foreignkey_onsometing$subexpression$1",symbols:["kw_partial"]},{name:"createtable_constraint_foreignkey_onsometing$subexpression$1",symbols:["kw_simple"]},{name:"createtable_constraint_foreignkey_onsometing",symbols:["kw_match","createtable_constraint_foreignkey_onsometing$subexpression$1"],postprocess:e=>(0,n.track)(e,{match:x($(e))})},{name:"createtable_constraint_on_action$subexpression$1",symbols:["kw_cascade"]},{name:"createtable_constraint_on_action$subexpression$1$subexpression$1",symbols:["kw_no","kw_action"]},{name:"createtable_constraint_on_action$subexpression$1",symbols:["createtable_constraint_on_action$subexpression$1$subexpression$1"]},{name:"createtable_constraint_on_action$subexpression$1",symbols:["kw_restrict"]},{name:"createtable_constraint_on_action$subexpression$1$subexpression$2",symbols:[s.lexerAny.has("kw_null")?{type:"kw_null"}:kw_null]},{name:"createtable_constraint_on_action$subexpression$1$subexpression$2",symbols:[s.lexerAny.has("kw_default")?{type:"kw_default"}:kw_default]},{name:"createtable_constraint_on_action$subexpression$1",symbols:["kw_set","createtable_constraint_on_action$subexpression$1$subexpression$2"]},{name:"createtable_constraint_on_action",symbols:["createtable_constraint_on_action$subexpression$1"],postprocess:e=>x(e," ")},{name:"createtable_collist$ebnf$1",symbols:[]},{name:"createtable_collist$ebnf$1$subexpression$1",symbols:["comma","ident"],postprocess:$},{name:"createtable_collist$ebnf$1",symbols:["createtable_collist$ebnf$1","createtable_collist$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"createtable_collist",symbols:["ident","createtable_collist$ebnf$1"],postprocess:([e,u])=>[e,...u||[]]},{name:"createtable_column$ebnf$1",symbols:["createtable_collate"],postprocess:r},{name:"createtable_column$ebnf$1",symbols:[],postprocess:()=>null},{name:"createtable_column$ebnf$2",symbols:[]},{name:"createtable_column$ebnf$2",symbols:["createtable_column$ebnf$2","createtable_column_constraint"],postprocess:e=>e[0].concat([e[1]])},{name:"createtable_column",symbols:["word","data_type","createtable_column$ebnf$1","createtable_column$ebnf$2"],postprocess:e=>(0,n.track)(e,{kind:"column",name:m(e[0]),dataType:e[1],...e[2]?{collate:e[2][1]}:{},...e[3]&&e[3].length?{constraints:e[3]}:{}})},{name:"createtable_like$ebnf$1",symbols:[]},{name:"createtable_like$ebnf$1",symbols:["createtable_like$ebnf$1","createtable_like_opt"],postprocess:e=>e[0].concat([e[1]])},{name:"createtable_like",symbols:[s.lexerAny.has("kw_like")?{type:"kw_like"}:kw_like,"qname","createtable_like$ebnf$1"],postprocess:e=>(0,n.track)(e,{kind:"like table",like:e[1],options:e[2]})},{name:"createtable_like_opt$subexpression$1",symbols:["kw_including"]},{name:"createtable_like_opt$subexpression$1",symbols:["kw_excluding"]},{name:"createtable_like_opt",symbols:["createtable_like_opt$subexpression$1","createtable_like_opt_val"],postprocess:e=>(0,n.track)(e,{verb:x(e[0]),option:x(e[1])})},{name:"createtable_like_opt_val",symbols:["word"],postprocess:O("defaults","constraints","indexes","storage","comments")},{name:"createtable_like_opt_val",symbols:[s.lexerAny.has("kw_all")?{type:"kw_all"}:kw_all]},{name:"createtable_column_constraint$macrocall$2",symbols:["createtable_column_constraint_def"]},{name:"createtable_column_constraint$macrocall$1$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("kw_constraint")?{type:"kw_constraint"}:kw_constraint,"word"]},{name:"createtable_column_constraint$macrocall$1$ebnf$1",symbols:["createtable_column_constraint$macrocall$1$ebnf$1$subexpression$1"],postprocess:r},{name:"createtable_column_constraint$macrocall$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"createtable_column_constraint$macrocall$1",symbols:["createtable_column_constraint$macrocall$1$ebnf$1","createtable_column_constraint$macrocall$2"],postprocess:e=>{const u=e[0]&&m(e[0][1]);return u?(0,n.track)(e,{constraintName:u,...t(e[1])}):(0,n.track)(e,t(e[1]))}},{name:"createtable_column_constraint",symbols:["createtable_column_constraint$macrocall$1"],postprocess:t},{name:"createtable_column_constraint_def",symbols:[s.lexerAny.has("kw_unique")?{type:"kw_unique"}:kw_unique],postprocess:e=>(0,n.track)(e,{type:"unique"})},{name:"createtable_column_constraint_def",symbols:["kw_primary_key"],postprocess:e=>(0,n.track)(e,{type:"primary key"})},{name:"createtable_column_constraint_def",symbols:["kw_not_null"],postprocess:e=>(0,n.track)(e,{type:"not null"})},{name:"createtable_column_constraint_def",symbols:[s.lexerAny.has("kw_null")?{type:"kw_null"}:kw_null],postprocess:e=>(0,n.track)(e,{type:"null"})},{name:"createtable_column_constraint_def",symbols:[s.lexerAny.has("kw_default")?{type:"kw_default"}:kw_default,"expr"],postprocess:e=>(0,n.track)(e,{type:"default",default:t(e[1])})},{name:"createtable_column_constraint_def",symbols:[s.lexerAny.has("kw_check")?{type:"kw_check"}:kw_check,"expr_paren"],postprocess:e=>(0,n.track)(e,{type:"check",expr:t(e[1])})},{name:"createtable_column_constraint_def",symbols:["createtable_references"],postprocess:e=>(0,n.track)(e,{type:"reference",...t(e)})},{name:"createtable_column_constraint_def",symbols:["altercol_generated"]},{name:"createtable_collate",symbols:[s.lexerAny.has("kw_collate")?{type:"kw_collate"}:kw_collate,"qualified_name"]},{name:"createtable_opts$subexpression$1",symbols:["word"],postprocess:k("inherits")},{name:"createtable_opts$macrocall$2",symbols:["qname"]},{name:"createtable_opts$macrocall$1$ebnf$1",symbols:[]},{name:"createtable_opts$macrocall$1$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("comma")?{type:"comma"}:comma,"createtable_opts$macrocall$2"],postprocess:$},{name:"createtable_opts$macrocall$1$ebnf$1",symbols:["createtable_opts$macrocall$1$ebnf$1","createtable_opts$macrocall$1$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"createtable_opts$macrocall$1",symbols:["createtable_opts$macrocall$2","createtable_opts$macrocall$1$ebnf$1"],postprocess:([e,u])=>[t(e),...u.map(t)||[]]},{name:"createtable_opts",symbols:["createtable_opts$subexpression$1","lparen","createtable_opts$macrocall$1","rparen"],postprocess:e=>(0,n.track)(e,{inherits:e[2]})},{name:"createindex_statement$ebnf$1",symbols:[s.lexerAny.has("kw_unique")?{type:"kw_unique"}:kw_unique],postprocess:r},{name:"createindex_statement$ebnf$1",symbols:[],postprocess:()=>null},{name:"createindex_statement$ebnf$2",symbols:["kw_ifnotexists"],postprocess:r},{name:"createindex_statement$ebnf$2",symbols:[],postprocess:()=>null},{name:"createindex_statement$ebnf$3",symbols:["word"],postprocess:r},{name:"createindex_statement$ebnf$3",symbols:[],postprocess:()=>null},{name:"createindex_statement$ebnf$4$subexpression$1",symbols:[s.lexerAny.has("kw_using")?{type:"kw_using"}:kw_using,"ident"],postprocess:$},{name:"createindex_statement$ebnf$4",symbols:["createindex_statement$ebnf$4$subexpression$1"],postprocess:r},{name:"createindex_statement$ebnf$4",symbols:[],postprocess:()=>null},{name:"createindex_statement$ebnf$5",symbols:["createindex_with"],postprocess:r},{name:"createindex_statement$ebnf$5",symbols:[],postprocess:()=>null},{name:"createindex_statement$ebnf$6",symbols:["createindex_tblspace"],postprocess:r},{name:"createindex_statement$ebnf$6",symbols:[],postprocess:()=>null},{name:"createindex_statement$ebnf$7",symbols:["createindex_predicate"],postprocess:r},{name:"createindex_statement$ebnf$7",symbols:[],postprocess:()=>null},{name:"createindex_statement",symbols:[s.lexerAny.has("kw_create")?{type:"kw_create"}:kw_create,"createindex_statement$ebnf$1","kw_index","createindex_statement$ebnf$2","createindex_statement$ebnf$3",s.lexerAny.has("kw_on")?{type:"kw_on"}:kw_on,"table_ref","createindex_statement$ebnf$4","lparen","createindex_expressions","rparen","createindex_statement$ebnf$5","createindex_statement$ebnf$6","createindex_statement$ebnf$7"],postprocess:e=>(0,n.track)(e,{type:"create index",...e[1]&&{unique:!0},...e[3]&&{ifNotExists:!0},...e[4]&&{indexName:m(e[4])},table:e[6],...e[7]&&{using:m(e[7])},expressions:e[9],...e[11]&&{with:e[11]},...e[12]&&{tablespace:t(e[12])},...e[13]&&{where:t(e[13])}})},{name:"createindex_expressions$ebnf$1",symbols:[]},{name:"createindex_expressions$ebnf$1$subexpression$1",symbols:["comma","createindex_expression"],postprocess:$},{name:"createindex_expressions$ebnf$1",symbols:["createindex_expressions$ebnf$1","createindex_expressions$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"createindex_expressions",symbols:["createindex_expression","createindex_expressions$ebnf$1"],postprocess:([e,u])=>[e,...u||[]]},{name:"createindex_expression$subexpression$1",symbols:["expr_basic"]},{name:"createindex_expression$subexpression$1",symbols:["expr_paren"]},{name:"createindex_expression$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("kw_collate")?{type:"kw_collate"}:kw_collate,"qualified_name"],postprocess:$},{name:"createindex_expression$ebnf$1",symbols:["createindex_expression$ebnf$1$subexpression$1"],postprocess:r},{name:"createindex_expression$ebnf$1",symbols:[],postprocess:()=>null},{name:"createindex_expression$ebnf$2",symbols:["qualified_name"],postprocess:r},{name:"createindex_expression$ebnf$2",symbols:[],postprocess:()=>null},{name:"createindex_expression$ebnf$3$subexpression$1",symbols:[s.lexerAny.has("kw_asc")?{type:"kw_asc"}:kw_asc]},{name:"createindex_expression$ebnf$3$subexpression$1",symbols:[s.lexerAny.has("kw_desc")?{type:"kw_desc"}:kw_desc]},{name:"createindex_expression$ebnf$3",symbols:["createindex_expression$ebnf$3$subexpression$1"],postprocess:r},{name:"createindex_expression$ebnf$3",symbols:[],postprocess:()=>null},{name:"createindex_expression$ebnf$4$subexpression$1$subexpression$1",symbols:["kw_first"]},{name:"createindex_expression$ebnf$4$subexpression$1$subexpression$1",symbols:["kw_last"]},{name:"createindex_expression$ebnf$4$subexpression$1",symbols:["kw_nulls","createindex_expression$ebnf$4$subexpression$1$subexpression$1"],postprocess:$},{name:"createindex_expression$ebnf$4",symbols:["createindex_expression$ebnf$4$subexpression$1"],postprocess:r},{name:"createindex_expression$ebnf$4",symbols:[],postprocess:()=>null},{name:"createindex_expression",symbols:["createindex_expression$subexpression$1","createindex_expression$ebnf$1","createindex_expression$ebnf$2","createindex_expression$ebnf$3","createindex_expression$ebnf$4"],postprocess:e=>(0,n.track)(e,{expression:t(e[0]),...e[1]&&{collate:t(e[1])},...e[2]&&{opclass:t(e[2])},...e[3]&&{order:t(e[3]).value},...e[4]&&{nulls:t(e[4])}})},{name:"createindex_predicate",symbols:[s.lexerAny.has("kw_where")?{type:"kw_where"}:kw_where,"expr"],postprocess:$},{name:"createindex_with$macrocall$2",symbols:["createindex_with_item"]},{name:"createindex_with$macrocall$1$ebnf$1",symbols:[]},{name:"createindex_with$macrocall$1$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("comma")?{type:"comma"}:comma,"createindex_with$macrocall$2"],postprocess:$},{name:"createindex_with$macrocall$1$ebnf$1",symbols:["createindex_with$macrocall$1$ebnf$1","createindex_with$macrocall$1$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"createindex_with$macrocall$1",symbols:["createindex_with$macrocall$2","createindex_with$macrocall$1$ebnf$1"],postprocess:([e,u])=>[t(e),...u.map(t)||[]]},{name:"createindex_with",symbols:[s.lexerAny.has("kw_with")?{type:"kw_with"}:kw_with,"lparen","createindex_with$macrocall$1","rparen"],postprocess:_(2)},{name:"createindex_with_item$subexpression$1",symbols:["string"]},{name:"createindex_with_item$subexpression$1",symbols:["int"]},{name:"createindex_with_item",symbols:["ident",s.lexerAny.has("op_eq")?{type:"op_eq"}:op_eq,"createindex_with_item$subexpression$1"],postprocess:e=>(0,n.track)(e,{parameter:x(e[0]),value:t(e[2]).toString()})},{name:"createindex_tblspace",symbols:["kw_tablespace","ident"],postprocess:$},{name:"createextension_statement$ebnf$1",symbols:["kw_ifnotexists"],postprocess:r},{name:"createextension_statement$ebnf$1",symbols:[],postprocess:()=>null},{name:"createextension_statement$ebnf$2",symbols:[s.lexerAny.has("kw_with")?{type:"kw_with"}:kw_with],postprocess:r},{name:"createextension_statement$ebnf$2",symbols:[],postprocess:()=>null},{name:"createextension_statement$ebnf$3$subexpression$1",symbols:["kw_schema","word"],postprocess:$},{name:"createextension_statement$ebnf$3",symbols:["createextension_statement$ebnf$3$subexpression$1"],postprocess:r},{name:"createextension_statement$ebnf$3",symbols:[],postprocess:()=>null},{name:"createextension_statement$ebnf$4$subexpression$1",symbols:["kw_version","string"],postprocess:$},{name:"createextension_statement$ebnf$4",symbols:["createextension_statement$ebnf$4$subexpression$1"],postprocess:r},{name:"createextension_statement$ebnf$4",symbols:[],postprocess:()=>null},{name:"createextension_statement$ebnf$5$subexpression$1",symbols:[s.lexerAny.has("kw_from")?{type:"kw_from"}:kw_from,"string"],postprocess:$},{name:"createextension_statement$ebnf$5",symbols:["createextension_statement$ebnf$5$subexpression$1"],postprocess:r},{name:"createextension_statement$ebnf$5",symbols:[],postprocess:()=>null},{name:"createextension_statement",symbols:[s.lexerAny.has("kw_create")?{type:"kw_create"}:kw_create,"kw_extension","createextension_statement$ebnf$1","word","createextension_statement$ebnf$2","createextension_statement$ebnf$3","createextension_statement$ebnf$4","createextension_statement$ebnf$5"],postprocess:e=>(0,n.track)(e,{type:"create extension",...e[2]?{ifNotExists:!0}:{},extension:m(e[3]),...e[5]?{schema:m(e[5])}:{},...e[6]?{version:y(e[6])}:{},...e[7]?{from:y(e[7])}:{}})},{name:"simplestatements_all",symbols:["simplestatements_start_transaction"]},{name:"simplestatements_all",symbols:["simplestatements_commit"]},{name:"simplestatements_all",symbols:["simplestatements_rollback"]},{name:"simplestatements_all",symbols:["simplestatements_tablespace"]},{name:"simplestatements_all",symbols:["simplestatements_set"]},{name:"simplestatements_all",symbols:["simplestatements_show"]},{name:"simplestatements_all",symbols:["simplestatements_begin"]},{name:"simplestatements_start_transaction$subexpression$1",symbols:["kw_start","kw_transaction"]},{name:"simplestatements_start_transaction",symbols:["simplestatements_start_transaction$subexpression$1"],postprocess:e=>(0,n.track)(e,{type:"start transaction"})},{name:"simplestatements_commit",symbols:["kw_commit"],postprocess:e=>(0,n.track)(e,{type:"commit"})},{name:"simplestatements_rollback",symbols:["kw_rollback"],postprocess:e=>(0,n.track)(e,{type:"rollback"})},{name:"simplestatements_tablespace",symbols:["kw_tablespace","word"],postprocess:e=>(0,n.track)(e,{type:"tablespace",tablespace:m(e[1])})},{name:"simplestatements_set$subexpression$1",symbols:["simplestatements_set_simple"]},{name:"simplestatements_set$subexpression$1",symbols:["simplestatements_set_timezone"]},{name:"simplestatements_set",symbols:["kw_set","simplestatements_set$subexpression$1"],postprocess:$},{name:"simplestatements_set_timezone",symbols:["kw_time","kw_zone","simplestatements_set_timezone_val"],postprocess:e=>(0,n.track)(e,{type:"set timezone",to:e[2]})},{name:"simplestatements_set_timezone_val$subexpression$1",symbols:["string"]},{name:"simplestatements_set_timezone_val$subexpression$1",symbols:["int"]},{name:"simplestatements_set_timezone_val",symbols:["simplestatements_set_timezone_val$subexpression$1"],postprocess:e=>(0,n.track)(e,{type:"value",value:t(e[0])})},{name:"simplestatements_set_timezone_val",symbols:["kw_local"],postprocess:e=>(0,n.track)(e,{type:"local"})},{name:"simplestatements_set_timezone_val",symbols:[s.lexerAny.has("kw_default")?{type:"kw_default"}:kw_default],postprocess:e=>(0,n.track)(e,{type:"default"})},{name:"simplestatements_set_timezone_val",symbols:["kw_interval","string","kw_hour",s.lexerAny.has("kw_to")?{type:"kw_to"}:kw_to,"kw_minute"],postprocess:e=>(0,n.track)(e,{type:"interval",value:(0,n.unbox)(e[1])})},{name:"simplestatements_set_simple$subexpression$1",symbols:[s.lexerAny.has("op_eq")?{type:"op_eq"}:op_eq]},{name:"simplestatements_set_simple$subexpression$1",symbols:[s.lexerAny.has("kw_to")?{type:"kw_to"}:kw_to]},{name:"simplestatements_set_simple",symbols:["ident","simplestatements_set_simple$subexpression$1","simplestatements_set_val"],postprocess:e=>(0,n.track)(e,{type:"set",variable:m(e[0]),set:(0,n.unbox)(e[2])})},{name:"simplestatements_set_val",symbols:["simplestatements_set_val_raw"],postprocess:t},{name:"simplestatements_set_val",symbols:[s.lexerAny.has("kw_default")?{type:"kw_default"}:kw_default],postprocess:e=>(0,n.track)(e,{type:"default"})},{name:"simplestatements_set_val$ebnf$1$subexpression$1",symbols:["comma","simplestatements_set_val_raw"]},{name:"simplestatements_set_val$ebnf$1",symbols:["simplestatements_set_val$ebnf$1$subexpression$1"]},{name:"simplestatements_set_val$ebnf$1$subexpression$2",symbols:["comma","simplestatements_set_val_raw"]},{name:"simplestatements_set_val$ebnf$1",symbols:["simplestatements_set_val$ebnf$1","simplestatements_set_val$ebnf$1$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"simplestatements_set_val",symbols:["simplestatements_set_val_raw","simplestatements_set_val$ebnf$1"],postprocess:e=>(0,n.track)(e,{type:"list",values:[e[0],...e[1]||[]]})},{name:"simplestatements_set_val_raw$subexpression$1",symbols:["string"]},{name:"simplestatements_set_val_raw$subexpression$1",symbols:["int"]},{name:"simplestatements_set_val_raw",symbols:["simplestatements_set_val_raw$subexpression$1"],postprocess:e=>(0,n.track)(e,{type:"value",value:t(e)})},{name:"simplestatements_set_val_raw$subexpression$2",symbols:[s.lexerAny.has("word")?{type:"word"}:word]},{name:"simplestatements_set_val_raw$subexpression$2",symbols:[s.lexerAny.has("kw_on")?{type:"kw_on"}:kw_on]},{name:"simplestatements_set_val_raw$subexpression$2",symbols:[s.lexerAny.has("kw_true")?{type:"kw_true"}:kw_true]},{name:"simplestatements_set_val_raw$subexpression$2",symbols:[s.lexerAny.has("kw_false")?{type:"kw_false"}:kw_false]},{name:"simplestatements_set_val_raw",symbols:["simplestatements_set_val_raw$subexpression$2"],postprocess:e=>(0,n.track)(e,{type:"identifier",name:t(e).value})},{name:"simplestatements_set_val_raw",symbols:[s.lexerAny.has("quoted_word")?{type:"quoted_word"}:quoted_word],postprocess:e=>(0,n.track)(e,{type:"identifier",doubleQuoted:!0,name:t(e).value})},{name:"simplestatements_show",symbols:["kw_show","ident"],postprocess:e=>(0,n.track)(e,{type:"show",variable:m(e[1])})},{name:"create_schema$subexpression$1",symbols:[s.lexerAny.has("kw_create")?{type:"kw_create"}:kw_create,"kw_schema"]},{name:"create_schema$ebnf$1",symbols:["kw_ifnotexists"],postprocess:r},{name:"create_schema$ebnf$1",symbols:[],postprocess:()=>null},{name:"create_schema",symbols:["create_schema$subexpression$1","create_schema$ebnf$1","ident"],postprocess:e=>(0,n.track)(e,{type:"create schema",name:m(e[2]),...e[1]?{ifNotExists:!0}:{}})},{name:"raise_statement$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:O("debug","log","info","notice","warning","exception")},{name:"raise_statement$ebnf$1",symbols:["raise_statement$ebnf$1$subexpression$1"],postprocess:r},{name:"raise_statement$ebnf$1",symbols:[],postprocess:()=>null},{name:"raise_statement$ebnf$2$subexpression$1",symbols:["comma","expr_list_raw"],postprocess:$},{name:"raise_statement$ebnf$2",symbols:["raise_statement$ebnf$2$subexpression$1"],postprocess:r},{name:"raise_statement$ebnf$2",symbols:[],postprocess:()=>null},{name:"raise_statement$ebnf$3",symbols:["raise_using"],postprocess:r},{name:"raise_statement$ebnf$3",symbols:[],postprocess:()=>null},{name:"raise_statement",symbols:["kw_raise","raise_statement$ebnf$1","string","raise_statement$ebnf$2","raise_statement$ebnf$3"],postprocess:e=>(0,n.track)(e,{type:"raise",format:x(e[2]),...e[1]&&{level:x(e[1])},...e[3]&&e[3].length&&{formatExprs:e[3]},...e[4]&&e[4].length&&{using:e[4]}})},{name:"raise_using$macrocall$2",symbols:["raise_using_one"]},{name:"raise_using$macrocall$1$ebnf$1",symbols:[]},{name:"raise_using$macrocall$1$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("comma")?{type:"comma"}:comma,"raise_using$macrocall$2"],postprocess:$},{name:"raise_using$macrocall$1$ebnf$1",symbols:["raise_using$macrocall$1$ebnf$1","raise_using$macrocall$1$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"raise_using$macrocall$1",symbols:["raise_using$macrocall$2","raise_using$macrocall$1$ebnf$1"],postprocess:([e,u])=>[t(e),...u.map(t)||[]]},{name:"raise_using",symbols:[s.lexerAny.has("kw_using")?{type:"kw_using"}:kw_using,"raise_using$macrocall$1"],postprocess:$},{name:"raise_using_one",symbols:["raise_using_what",s.lexerAny.has("op_eq")?{type:"op_eq"}:op_eq,"expr"],postprocess:e=>(0,n.track)(e,{type:x(e[0]),value:e[2]})},{name:"raise_using_what",symbols:[s.lexerAny.has("kw_table")?{type:"kw_table"}:kw_table]},{name:"raise_using_what",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:O("message","detail","hint","errcode","column","constraint","datatype","schema")},{name:"comment_statement",symbols:["kw_comment",s.lexerAny.has("kw_on")?{type:"kw_on"}:kw_on,"comment_what",s.lexerAny.has("kw_is")?{type:"kw_is"}:kw_is,"string"],postprocess:e=>(0,n.track)(e,{type:"comment",comment:(0,n.unbox)($(e)),on:t(e[2])})},{name:"comment_what",symbols:["comment_what_col"]},{name:"comment_what",symbols:["comment_what_nm"]},{name:"comment_what_nm$subexpression$1",symbols:[s.lexerAny.has("kw_table")?{type:"kw_table"}:kw_table]},{name:"comment_what_nm$subexpression$1",symbols:["kw_materialized","kw_view"]},{name:"comment_what_nm$subexpression$1",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:O("database","index","trigger","type","view")},{name:"comment_what_nm",symbols:["comment_what_nm$subexpression$1","qualified_name"],postprocess:e=>(0,n.track)(e,{type:x(e[0]),name:e[1]})},{name:"comment_what_col",symbols:["kw_column","qcolumn"],postprocess:e=>(0,n.track)(e,{type:"column",column:$(e)})},{name:"simplestatements_begin$ebnf$1$subexpression$1",symbols:["kw_transaction"]},{name:"simplestatements_begin$ebnf$1$subexpression$1",symbols:["kw_work"]},{name:"simplestatements_begin$ebnf$1",symbols:["simplestatements_begin$ebnf$1$subexpression$1"],postprocess:r},{name:"simplestatements_begin$ebnf$1",symbols:[],postprocess:()=>null},{name:"simplestatements_begin$ebnf$2",symbols:[]},{name:"simplestatements_begin$ebnf$2$subexpression$1",symbols:["simplestatements_begin_isol"]},{name:"simplestatements_begin$ebnf$2$subexpression$1",symbols:["simplestatements_begin_writ"]},{name:"simplestatements_begin$ebnf$2$subexpression$1",symbols:["simplestatements_begin_def"]},{name:"simplestatements_begin$ebnf$2",symbols:["simplestatements_begin$ebnf$2","simplestatements_begin$ebnf$2$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"simplestatements_begin",symbols:["kw_begin","simplestatements_begin$ebnf$1","simplestatements_begin$ebnf$2"],postprocess:e=>(0,n.track)(e,{type:"begin",...e[2].reduce((u,l)=>({...t(u),...t(l)}),{})})},{name:"simplestatements_begin_isol$subexpression$1",symbols:["kw_isolation","kw_level"]},{name:"simplestatements_begin_isol$subexpression$2",symbols:["kw_serializable"]},{name:"simplestatements_begin_isol$subexpression$2$subexpression$1",symbols:["word"],postprocess:k("repeatable")},{name:"simplestatements_begin_isol$subexpression$2",symbols:["simplestatements_begin_isol$subexpression$2$subexpression$1","kw_read"]},{name:"simplestatements_begin_isol$subexpression$2$subexpression$2",symbols:["word"],postprocess:k("committed")},{name:"simplestatements_begin_isol$subexpression$2",symbols:["kw_read","simplestatements_begin_isol$subexpression$2$subexpression$2"]},{name:"simplestatements_begin_isol$subexpression$2$subexpression$3",symbols:["word"],postprocess:k("uncommitted")},{name:"simplestatements_begin_isol$subexpression$2",symbols:["kw_read","simplestatements_begin_isol$subexpression$2$subexpression$3"]},{name:"simplestatements_begin_isol",symbols:["simplestatements_begin_isol$subexpression$1","simplestatements_begin_isol$subexpression$2"],postprocess:e=>(0,n.track)(e,{isolationLevel:x(e[1]," ")})},{name:"simplestatements_begin_writ$subexpression$1",symbols:["kw_read","kw_write"]},{name:"simplestatements_begin_writ$subexpression$1",symbols:["kw_read",s.lexerAny.has("kw_only")?{type:"kw_only"}:kw_only]},{name:"simplestatements_begin_writ",symbols:["simplestatements_begin_writ$subexpression$1"],postprocess:e=>(0,n.track)(e,{writeable:x(e," ")})},{name:"simplestatements_begin_def$ebnf$1",symbols:[s.lexerAny.has("kw_not")?{type:"kw_not"}:kw_not],postprocess:r},{name:"simplestatements_begin_def$ebnf$1",symbols:[],postprocess:()=>null},{name:"simplestatements_begin_def",symbols:["simplestatements_begin_def$ebnf$1",s.lexerAny.has("kw_deferrable")?{type:"kw_deferrable"}:kw_deferrable],postprocess:e=>(0,n.track)(e,{deferrable:!e[0]})},{name:"insert_statement$subexpression$1",symbols:["kw_insert",s.lexerAny.has("kw_into")?{type:"kw_into"}:kw_into]},{name:"insert_statement$ebnf$1",symbols:["collist_paren"],postprocess:r},{name:"insert_statement$ebnf$1",symbols:[],postprocess:()=>null},{name:"insert_statement$ebnf$2$subexpression$1$subexpression$1",symbols:["kw_system"]},{name:"insert_statement$ebnf$2$subexpression$1$subexpression$1",symbols:[s.lexerAny.has("kw_user")?{type:"kw_user"}:kw_user]},{name:"insert_statement$ebnf$2$subexpression$1",symbols:["kw_overriding","insert_statement$ebnf$2$subexpression$1$subexpression$1","kw_value"],postprocess:_(1)},{name:"insert_statement$ebnf$2",symbols:["insert_statement$ebnf$2$subexpression$1"],postprocess:r},{name:"insert_statement$ebnf$2",symbols:[],postprocess:()=>null},{name:"insert_statement$ebnf$3$subexpression$1",symbols:["selection"]},{name:"insert_statement$ebnf$3$subexpression$1",symbols:["selection_paren"]},{name:"insert_statement$ebnf$3",symbols:["insert_statement$ebnf$3$subexpression$1"],postprocess:r},{name:"insert_statement$ebnf$3",symbols:[],postprocess:()=>null},{name:"insert_statement$ebnf$4$subexpression$1",symbols:[s.lexerAny.has("kw_on")?{type:"kw_on"}:kw_on,"kw_conflict","insert_on_conflict"],postprocess:$},{name:"insert_statement$ebnf$4",symbols:["insert_statement$ebnf$4$subexpression$1"],postprocess:r},{name:"insert_statement$ebnf$4",symbols:[],postprocess:()=>null},{name:"insert_statement$ebnf$5$subexpression$1",symbols:[s.lexerAny.has("kw_returning")?{type:"kw_returning"}:kw_returning,"select_expr_list_aliased"],postprocess:$},{name:"insert_statement$ebnf$5",symbols:["insert_statement$ebnf$5$subexpression$1"],postprocess:r},{name:"insert_statement$ebnf$5",symbols:[],postprocess:()=>null},{name:"insert_statement",symbols:["insert_statement$subexpression$1","table_ref_aliased","insert_statement$ebnf$1","insert_statement$ebnf$2","insert_statement$ebnf$3","insert_statement$ebnf$4","insert_statement$ebnf$5"],postprocess:e=>{const u=e[2]&&e[2].map(m),l=x(e[3]),d=t(e[4]),g=e[5],E=e[6];return(0,n.track)(e,{type:"insert",into:t(e[1]),insert:d,...l&&{overriding:l},...u&&{columns:u},...E&&{returning:E},...g&&{onConflict:g}})}},{name:"insert_values$ebnf$1",symbols:[]},{name:"insert_values$ebnf$1$subexpression$1",symbols:["comma","insert_value"],postprocess:$},{name:"insert_values$ebnf$1",symbols:["insert_values$ebnf$1","insert_values$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"insert_values",symbols:["insert_value","insert_values$ebnf$1"],postprocess:([e,u])=>[e,...u||[]]},{name:"insert_value",symbols:["lparen","insert_expr_list_raw","rparen"],postprocess:_(1)},{name:"insert_expr_list_raw$ebnf$1",symbols:[]},{name:"insert_expr_list_raw$ebnf$1$subexpression$1",symbols:["comma","expr_or_select"],postprocess:$},{name:"insert_expr_list_raw$ebnf$1",symbols:["insert_expr_list_raw$ebnf$1","insert_expr_list_raw$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"insert_expr_list_raw",symbols:["expr_or_select","insert_expr_list_raw$ebnf$1"],postprocess:([e,u])=>[e,...u||[]]},{name:"insert_on_conflict$ebnf$1",symbols:["insert_on_conflict_what"],postprocess:r},{name:"insert_on_conflict$ebnf$1",symbols:[],postprocess:()=>null},{name:"insert_on_conflict",symbols:["insert_on_conflict$ebnf$1","insert_on_conflict_do"],postprocess:e=>(0,n.track)(e,{...e[0]?{on:t(e[0])}:{},...e[1]})},{name:"insert_on_conflict_what",symbols:["lparen","expr_list_raw","rparen"],postprocess:e=>(0,n.track)(e,{type:"on expr",exprs:e[1]})},{name:"insert_on_conflict_what",symbols:[s.lexerAny.has("kw_on")?{type:"kw_on"}:kw_on,s.lexerAny.has("kw_constraint")?{type:"kw_constraint"}:kw_constraint,"qname"],postprocess:e=>(0,n.track)(e,{type:"on constraint",constraint:$(e)})},{name:"insert_on_conflict_do",symbols:[s.lexerAny.has("kw_do")?{type:"kw_do"}:kw_do,"kw_nothing"],postprocess:e=>({do:"do nothing"})},{name:"insert_on_conflict_do$subexpression$1",symbols:[s.lexerAny.has("kw_do")?{type:"kw_do"}:kw_do,"kw_update","kw_set"]},{name:"insert_on_conflict_do$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("kw_where")?{type:"kw_where"}:kw_where,"expr"],postprocess:$},{name:"insert_on_conflict_do$ebnf$1",symbols:["insert_on_conflict_do$ebnf$1$subexpression$1"],postprocess:r},{name:"insert_on_conflict_do$ebnf$1",symbols:[],postprocess:()=>null},{name:"insert_on_conflict_do",symbols:["insert_on_conflict_do$subexpression$1","update_set_list","insert_on_conflict_do$ebnf$1"],postprocess:e=>({do:{sets:e[1]},...e[2]&&{where:e[2]}})},{name:"update_statement$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("kw_from")?{type:"kw_from"}:kw_from,"select_from_subject"],postprocess:$},{name:"update_statement$ebnf$1",symbols:["update_statement$ebnf$1$subexpression$1"],postprocess:r},{name:"update_statement$ebnf$1",symbols:[],postprocess:()=>null},{name:"update_statement$ebnf$2",symbols:["select_where"],postprocess:r},{name:"update_statement$ebnf$2",symbols:[],postprocess:()=>null},{name:"update_statement$ebnf$3$subexpression$1",symbols:[s.lexerAny.has("kw_returning")?{type:"kw_returning"}:kw_returning,"select_expr_list_aliased"],postprocess:$},{name:"update_statement$ebnf$3",symbols:["update_statement$ebnf$3$subexpression$1"],postprocess:r},{name:"update_statement$ebnf$3",symbols:[],postprocess:()=>null},{name:"update_statement",symbols:["kw_update","table_ref_aliased","kw_set","update_set_list","update_statement$ebnf$1","update_statement$ebnf$2","update_statement$ebnf$3"],postprocess:e=>{const u=t(e[4]),l=t(e[5]),d=e[6];return(0,n.track)(e,{type:"update",table:t(e[1]),sets:e[3],...l?{where:l}:{},...u?{from:u}:{},...d?{returning:d}:{}})}},{name:"update_set_list$ebnf$1",symbols:[]},{name:"update_set_list$ebnf$1$subexpression$1",symbols:["comma","update_set"],postprocess:$},{name:"update_set_list$ebnf$1",symbols:["update_set_list$ebnf$1","update_set_list$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"update_set_list",symbols:["update_set","update_set_list$ebnf$1"],postprocess:([e,u])=>{const l=[];for(const d of[e,...u||[]]){const g=t(d);Array.isArray(g)?l.push(...g):l.push(g)}return l}},{name:"update_set",symbols:["update_set_one"]},{name:"update_set",symbols:["update_set_multiple"]},{name:"update_set_one",symbols:["ident",s.lexerAny.has("op_eq")?{type:"op_eq"}:op_eq,"expr"],postprocess:e=>(0,n.box)(e,{column:m(e[0]),value:t(e[2])})},{name:"update_set_multiple$subexpression$1",symbols:["lparen","expr_list_raw","rparen"],postprocess:_(1)},{name:"update_set_multiple",symbols:["collist_paren",s.lexerAny.has("op_eq")?{type:"op_eq"}:op_eq,"update_set_multiple$subexpression$1"],postprocess:e=>{const u=e[0],l=e[2];if(u.length!==l.length)throw new Error("number of columns does not match number of values");return(0,n.box)(e,u.map((d,g)=>({column:m(d),value:t(l[g])})))}},{name:"altertable_statement$ebnf$1",symbols:["kw_ifexists"],postprocess:r},{name:"altertable_statement$ebnf$1",symbols:[],postprocess:()=>null},{name:"altertable_statement$ebnf$2",symbols:[s.lexerAny.has("kw_only")?{type:"kw_only"}:kw_only],postprocess:r},{name:"altertable_statement$ebnf$2",symbols:[],postprocess:()=>null},{name:"altertable_statement",symbols:["kw_alter",s.lexerAny.has("kw_table")?{type:"kw_table"}:kw_table,"altertable_statement$ebnf$1","altertable_statement$ebnf$2","table_ref","altertable_actions"],postprocess:e=>(0,n.track)(e,{type:"alter table",...e[2]?{ifExists:!0}:{},...e[3]?{only:!0}:{},table:t(e[4]),changes:(0,n.unbox)(e[5]).map(t)})},{name:"altertable_actions$ebnf$1",symbols:[]},{name:"altertable_actions$ebnf$1$subexpression$1",symbols:["comma","altertable_action"],postprocess:$},{name:"altertable_actions$ebnf$1",symbols:["altertable_actions$ebnf$1","altertable_actions$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"altertable_actions",symbols:["altertable_action","altertable_actions$ebnf$1"],postprocess:([e,u])=>[e,...u||[]]},{name:"altertable_action",symbols:["altertable_rename_table"]},{name:"altertable_action",symbols:["altertable_rename_column"]},{name:"altertable_action",symbols:["altertable_rename_constraint"]},{name:"altertable_action",symbols:["altertable_add_column"]},{name:"altertable_action",symbols:["altertable_drop_column"]},{name:"altertable_action",symbols:["altertable_alter_column"]},{name:"altertable_action",symbols:["altertable_add_constraint"]},{name:"altertable_action",symbols:["altertable_drop_constraint"]},{name:"altertable_action",symbols:["altertable_owner"]},{name:"altertable_rename_table",symbols:["kw_rename",s.lexerAny.has("kw_to")?{type:"kw_to"}:kw_to,"word"],postprocess:e=>(0,n.track)(e,{type:"rename",to:m($(e))})},{name:"altertable_rename_column$ebnf$1",symbols:["kw_column"],postprocess:r},{name:"altertable_rename_column$ebnf$1",symbols:[],postprocess:()=>null},{name:"altertable_rename_column",symbols:["kw_rename","altertable_rename_column$ebnf$1","ident",s.lexerAny.has("kw_to")?{type:"kw_to"}:kw_to,"ident"],postprocess:e=>(0,n.track)(e,{type:"rename column",column:m(e[2]),to:m($(e))})},{name:"altertable_rename_constraint",symbols:["kw_rename",s.lexerAny.has("kw_constraint")?{type:"kw_constraint"}:kw_constraint,"ident",s.lexerAny.has("kw_to")?{type:"kw_to"}:kw_to,"ident"],postprocess:e=>(0,n.track)(e,{type:"rename constraint",constraint:m(e[2]),to:m($(e))})},{name:"altertable_add_column$ebnf$1",symbols:["kw_column"],postprocess:r},{name:"altertable_add_column$ebnf$1",symbols:[],postprocess:()=>null},{name:"altertable_add_column$ebnf$2",symbols:["kw_ifnotexists"],postprocess:r},{name:"altertable_add_column$ebnf$2",symbols:[],postprocess:()=>null},{name:"altertable_add_column",symbols:["kw_add","altertable_add_column$ebnf$1","altertable_add_column$ebnf$2","createtable_column"],postprocess:e=>(0,n.track)(e,{type:"add column",...e[2]?{ifNotExists:!0}:{},column:t(e[3])})},{name:"altertable_drop_column$ebnf$1",symbols:["kw_column"],postprocess:r},{name:"altertable_drop_column$ebnf$1",symbols:[],postprocess:()=>null},{name:"altertable_drop_column$ebnf$2",symbols:["kw_ifexists"],postprocess:r},{name:"altertable_drop_column$ebnf$2",symbols:[],postprocess:()=>null},{name:"altertable_drop_column$ebnf$3$subexpression$1",symbols:["kw_restrict"]},{name:"altertable_drop_column$ebnf$3$subexpression$1",symbols:["kw_cascade"]},{name:"altertable_drop_column$ebnf$3",symbols:["altertable_drop_column$ebnf$3$subexpression$1"],postprocess:r},{name:"altertable_drop_column$ebnf$3",symbols:[],postprocess:()=>null},{name:"altertable_drop_column",symbols:["kw_drop","altertable_drop_column$ebnf$1","altertable_drop_column$ebnf$2","ident","altertable_drop_column$ebnf$3"],postprocess:e=>(0,n.track)(e,{type:"drop column",...e[2]?{ifExists:!0}:{},column:m(e[3]),...e[4]?{behaviour:x(e[4]," ")}:{}})},{name:"altertable_alter_column$ebnf$1",symbols:["kw_column"],postprocess:r},{name:"altertable_alter_column$ebnf$1",symbols:[],postprocess:()=>null},{name:"altertable_alter_column",symbols:["kw_alter","altertable_alter_column$ebnf$1","ident","altercol"],postprocess:e=>(0,n.track)(e,{type:"alter column",column:m(e[2]),alter:t(e[3])})},{name:"altercol$ebnf$1$subexpression$1",symbols:["kw_set","kw_data"]},{name:"altercol$ebnf$1",symbols:["altercol$ebnf$1$subexpression$1"],postprocess:r},{name:"altercol$ebnf$1",symbols:[],postprocess:()=>null},{name:"altercol",symbols:["altercol$ebnf$1","kw_type","data_type"],postprocess:e=>(0,n.track)(e,{type:"set type",dataType:t($(e))})},{name:"altercol",symbols:["kw_set",s.lexerAny.has("kw_default")?{type:"kw_default"}:kw_default,"expr"],postprocess:e=>(0,n.track)(e,{type:"set default",default:t($(e))})},{name:"altercol",symbols:["kw_drop",s.lexerAny.has("kw_default")?{type:"kw_default"}:kw_default],postprocess:e=>(0,n.track)(e,{type:"drop default"})},{name:"altercol$subexpression$1",symbols:["kw_set"]},{name:"altercol$subexpression$1",symbols:["kw_drop"]},{name:"altercol",symbols:["altercol$subexpression$1","kw_not_null"],postprocess:e=>(0,n.track)(e,{type:x(e," ")})},{name:"altercol",symbols:["altercol_generated_add"],postprocess:t},{name:"altertable_add_constraint",symbols:["kw_add","createtable_constraint"],postprocess:e=>(0,n.track)(e,{type:"add constraint",constraint:t($(e))})},{name:"altertable_drop_constraint$ebnf$1",symbols:["kw_ifexists"],postprocess:r},{name:"altertable_drop_constraint$ebnf$1",symbols:[],postprocess:()=>null},{name:"altertable_drop_constraint$ebnf$2$subexpression$1",symbols:["kw_restrict"]},{name:"altertable_drop_constraint$ebnf$2$subexpression$1",symbols:["kw_cascade"]},{name:"altertable_drop_constraint$ebnf$2",symbols:["altertable_drop_constraint$ebnf$2$subexpression$1"],postprocess:r},{name:"altertable_drop_constraint$ebnf$2",symbols:[],postprocess:()=>null},{name:"altertable_drop_constraint",symbols:["kw_drop",s.lexerAny.has("kw_constraint")?{type:"kw_constraint"}:kw_constraint,"altertable_drop_constraint$ebnf$1","ident","altertable_drop_constraint$ebnf$2"],postprocess:e=>(0,n.track)(e,{type:"drop constraint",...e[2]?{ifExists:!0}:{},constraint:m(e[3]),...e[4]?{behaviour:x(e[4]," ")}:{}})},{name:"altertable_owner",symbols:["kw_owner",s.lexerAny.has("kw_to")?{type:"kw_to"}:kw_to,"ident"],postprocess:e=>(0,n.track)(e,{type:"owner",to:m($(e))})},{name:"altercol_generated_add",symbols:["kw_add","altercol_generated"],postprocess:$},{name:"altercol_generated$ebnf$1$subexpression$1",symbols:["kw_always"]},{name:"altercol_generated$ebnf$1$subexpression$1",symbols:["kw_by",s.lexerAny.has("kw_default")?{type:"kw_default"}:kw_default]},{name:"altercol_generated$ebnf$1",symbols:["altercol_generated$ebnf$1$subexpression$1"],postprocess:r},{name:"altercol_generated$ebnf$1",symbols:[],postprocess:()=>null},{name:"altercol_generated$subexpression$1",symbols:[s.lexerAny.has("kw_as")?{type:"kw_as"}:kw_as,"kw_identity"]},{name:"altercol_generated$ebnf$2$subexpression$1",symbols:["lparen","altercol_generated_seq","rparen"],postprocess:_(1)},{name:"altercol_generated$ebnf$2",symbols:["altercol_generated$ebnf$2$subexpression$1"],postprocess:r},{name:"altercol_generated$ebnf$2",symbols:[],postprocess:()=>null},{name:"altercol_generated",symbols:["kw_generated","altercol_generated$ebnf$1","altercol_generated$subexpression$1","altercol_generated$ebnf$2"],postprocess:e=>(0,n.track)(e,{type:"add generated",...e[1]&&{always:x(e[1]," ")},...e[3]&&{sequence:t(e[3])}})},{name:"altercol_generated_seq$ebnf$1$subexpression$1",symbols:["kw_sequence","kw_name","qualified_name"]},{name:"altercol_generated_seq$ebnf$1",symbols:["altercol_generated_seq$ebnf$1$subexpression$1"],postprocess:r},{name:"altercol_generated_seq$ebnf$1",symbols:[],postprocess:()=>null},{name:"altercol_generated_seq$ebnf$2",symbols:[]},{name:"altercol_generated_seq$ebnf$2",symbols:["altercol_generated_seq$ebnf$2","create_sequence_option"],postprocess:e=>e[0].concat([e[1]])},{name:"altercol_generated_seq",symbols:["altercol_generated_seq$ebnf$1","altercol_generated_seq$ebnf$2"],postprocess:e=>{const u={...e[0]&&{name:t($(e[0]))}};return C(u,e[1]),(0,n.track)(e,u)}},{name:"alterindex_statement$ebnf$1",symbols:["kw_ifexists"],postprocess:r},{name:"alterindex_statement$ebnf$1",symbols:[],postprocess:()=>null},{name:"alterindex_statement",symbols:["kw_alter","kw_index","alterindex_statement$ebnf$1","table_ref","alterindex_action"],postprocess:e=>(0,n.track)(e,{type:"alter index",...e[2]?{ifExists:!0}:{},index:t(e[3]),change:t(e[4])})},{name:"alterindex_action",symbols:["alterindex_rename"]},{name:"alterindex_action",symbols:["alterindex_set_tablespace"]},{name:"alterindex_rename",symbols:["kw_rename",s.lexerAny.has("kw_to")?{type:"kw_to"}:kw_to,"word"],postprocess:e=>(0,n.track)(e,{type:"rename",to:m($(e))})},{name:"alterindex_set_tablespace",symbols:["kw_set","kw_tablespace","word"],postprocess:e=>(0,n.track)(e,{type:"set tablespace",tablespace:m($(e))})},{name:"delete_statement",symbols:["delete_delete"]},{name:"delete_statement",symbols:["delete_truncate"]},{name:"delete_delete$subexpression$1",symbols:["kw_delete",s.lexerAny.has("kw_from")?{type:"kw_from"}:kw_from]},{name:"delete_delete$ebnf$1",symbols:["select_where"],postprocess:r},{name:"delete_delete$ebnf$1",symbols:[],postprocess:()=>null},{name:"delete_delete$ebnf$2$subexpression$1",symbols:[s.lexerAny.has("kw_returning")?{type:"kw_returning"}:kw_returning,"select_expr_list_aliased"],postprocess:$},{name:"delete_delete$ebnf$2",symbols:["delete_delete$ebnf$2$subexpression$1"],postprocess:r},{name:"delete_delete$ebnf$2",symbols:[],postprocess:()=>null},{name:"delete_delete",symbols:["delete_delete$subexpression$1","table_ref_aliased","delete_delete$ebnf$1","delete_delete$ebnf$2"],postprocess:e=>{const u=e[2],l=e[3];return(0,n.track)(e,{type:"delete",from:t(e[1]),...u?{where:u}:{},...l?{returning:l}:{}})}},{name:"delete_truncate$subexpression$1$ebnf$1",symbols:[s.lexerAny.has("kw_table")?{type:"kw_table"}:kw_table],postprocess:r},{name:"delete_truncate$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"delete_truncate$subexpression$1",symbols:["kw_truncate","delete_truncate$subexpression$1$ebnf$1"]},{name:"delete_truncate$macrocall$2",symbols:["table_ref"]},{name:"delete_truncate$macrocall$1$ebnf$1",symbols:[]},{name:"delete_truncate$macrocall$1$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("comma")?{type:"comma"}:comma,"delete_truncate$macrocall$2"],postprocess:$},{name:"delete_truncate$macrocall$1$ebnf$1",symbols:["delete_truncate$macrocall$1$ebnf$1","delete_truncate$macrocall$1$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"delete_truncate$macrocall$1",symbols:["delete_truncate$macrocall$2","delete_truncate$macrocall$1$ebnf$1"],postprocess:([e,u])=>[t(e),...u.map(t)||[]]},{name:"delete_truncate$ebnf$1$subexpression$1$subexpression$1",symbols:["kw_restart"]},{name:"delete_truncate$ebnf$1$subexpression$1$subexpression$1",symbols:["kw_continue"]},{name:"delete_truncate$ebnf$1$subexpression$1",symbols:["delete_truncate$ebnf$1$subexpression$1$subexpression$1","kw_identity"]},{name:"delete_truncate$ebnf$1",symbols:["delete_truncate$ebnf$1$subexpression$1"],postprocess:r},{name:"delete_truncate$ebnf$1",symbols:[],postprocess:()=>null},{name:"delete_truncate$ebnf$2$subexpression$1",symbols:["kw_restrict"]},{name:"delete_truncate$ebnf$2$subexpression$1",symbols:["kw_cascade"]},{name:"delete_truncate$ebnf$2",symbols:["delete_truncate$ebnf$2$subexpression$1"],postprocess:r},{name:"delete_truncate$ebnf$2",symbols:[],postprocess:()=>null},{name:"delete_truncate",symbols:["delete_truncate$subexpression$1","delete_truncate$macrocall$1","delete_truncate$ebnf$1","delete_truncate$ebnf$2"],postprocess:e=>(0,n.track)(e,{type:"truncate table",tables:e[1],...e[2]&&{identity:x(e[2][0])},...e[3]&&{cascade:x(e[3])}})},{name:"create_sequence_statement$ebnf$1$subexpression$1",symbols:["kw_temp"]},{name:"create_sequence_statement$ebnf$1$subexpression$1",symbols:["kw_temporary"]},{name:"create_sequence_statement$ebnf$1",symbols:["create_sequence_statement$ebnf$1$subexpression$1"],postprocess:r},{name:"create_sequence_statement$ebnf$1",symbols:[],postprocess:()=>null},{name:"create_sequence_statement$ebnf$2",symbols:["kw_ifnotexists"],postprocess:r},{name:"create_sequence_statement$ebnf$2",symbols:[],postprocess:()=>null},{name:"create_sequence_statement$ebnf$3",symbols:[]},{name:"create_sequence_statement$ebnf$3",symbols:["create_sequence_statement$ebnf$3","create_sequence_option"],postprocess:e=>e[0].concat([e[1]])},{name:"create_sequence_statement",symbols:[s.lexerAny.has("kw_create")?{type:"kw_create"}:kw_create,"create_sequence_statement$ebnf$1","kw_sequence","create_sequence_statement$ebnf$2","qualified_name","create_sequence_statement$ebnf$3"],postprocess:e=>{const u={type:"create sequence",...e[1]&&{temp:!0},...e[3]&&{ifNotExists:!0},name:t(e[4]),options:{}};return C(u.options,e[5]),(0,n.track)(e,u)}},{name:"create_sequence_option",symbols:[s.lexerAny.has("kw_as")?{type:"kw_as"}:kw_as,"data_type"],postprocess:e=>(0,n.box)(e,["as",e[1]])},{name:"create_sequence_option$ebnf$1",symbols:["kw_by"],postprocess:r},{name:"create_sequence_option$ebnf$1",symbols:[],postprocess:()=>null},{name:"create_sequence_option",symbols:["kw_increment","create_sequence_option$ebnf$1","int"],postprocess:e=>(0,n.box)(e,["incrementBy",e[2]])},{name:"create_sequence_option",symbols:["create_sequence_minvalue"],postprocess:e=>(0,n.box)(e,["minValue",e[0]])},{name:"create_sequence_option",symbols:["create_sequence_maxvalue"],postprocess:e=>(0,n.box)(e,["maxValue",e[0]])},{name:"create_sequence_option$ebnf$2",symbols:[s.lexerAny.has("kw_with")?{type:"kw_with"}:kw_with],postprocess:r},{name:"create_sequence_option$ebnf$2",symbols:[],postprocess:()=>null},{name:"create_sequence_option",symbols:["kw_start","create_sequence_option$ebnf$2","int"],postprocess:e=>(0,n.box)(e,["startWith",e[2]])},{name:"create_sequence_option",symbols:["kw_cache","int"],postprocess:e=>(0,n.box)(e,["cache",e[1]])},{name:"create_sequence_option$ebnf$3",symbols:["kw_no"],postprocess:r},{name:"create_sequence_option$ebnf$3",symbols:[],postprocess:()=>null},{name:"create_sequence_option",symbols:["create_sequence_option$ebnf$3","kw_cycle"],postprocess:e=>(0,n.box)(e,["cycle",x(e," ")])},{name:"create_sequence_option",symbols:["create_sequence_owned_by"],postprocess:e=>(0,n.box)(e,["ownedBy",t(e)])},{name:"create_sequence_minvalue",symbols:["kw_minvalue","int"],postprocess:$},{name:"create_sequence_minvalue",symbols:["kw_no","kw_minvalue"],postprocess:e=>(0,n.box)(e,"no minvalue")},{name:"create_sequence_maxvalue",symbols:["kw_maxvalue","int"],postprocess:$},{name:"create_sequence_maxvalue",symbols:["kw_no","kw_maxvalue"],postprocess:e=>(0,n.box)(e,"no maxvalue")},{name:"create_sequence_owned_by$subexpression$1",symbols:["kw_none"]},{name:"create_sequence_owned_by$subexpression$1",symbols:["qcolumn"]},{name:"create_sequence_owned_by",symbols:["kw_owned","kw_by","create_sequence_owned_by$subexpression$1"],postprocess:e=>(0,n.box)(e,t($(e)))},{name:"alter_sequence_statement$ebnf$1",symbols:["kw_ifexists"],postprocess:r},{name:"alter_sequence_statement$ebnf$1",symbols:[],postprocess:()=>null},{name:"alter_sequence_statement",symbols:["kw_alter","kw_sequence","alter_sequence_statement$ebnf$1","qualified_name","alter_sequence_statement_body"],postprocess:e=>{const u={type:"alter sequence",...e[2]&&{ifExists:!0},name:t(e[3]),change:e[4]};return(0,n.track)(e,u)}},{name:"alter_sequence_statement_body$ebnf$1",symbols:["alter_sequence_option"]},{name:"alter_sequence_statement_body$ebnf$1",symbols:["alter_sequence_statement_body$ebnf$1","alter_sequence_option"],postprocess:e=>e[0].concat([e[1]])},{name:"alter_sequence_statement_body",symbols:["alter_sequence_statement_body$ebnf$1"],postprocess:e=>{const u={type:"set options"};return C(u,e[0]),(0,n.track)(e,u)}},{name:"alter_sequence_statement_body$subexpression$1",symbols:["ident"]},{name:"alter_sequence_statement_body$subexpression$1",symbols:[s.lexerAny.has("kw_session_user")?{type:"kw_session_user"}:kw_session_user]},{name:"alter_sequence_statement_body$subexpression$1",symbols:[s.lexerAny.has("kw_current_user")?{type:"kw_current_user"}:kw_current_user]},{name:"alter_sequence_statement_body",symbols:["kw_owner",s.lexerAny.has("kw_to")?{type:"kw_to"}:kw_to,"alter_sequence_statement_body$subexpression$1"],postprocess:e=>(0,n.track)(e,{type:"owner to",owner:m($(e))})},{name:"alter_sequence_statement_body",symbols:["kw_rename",s.lexerAny.has("kw_to")?{type:"kw_to"}:kw_to,"ident"],postprocess:e=>(0,n.track)(e,{type:"rename",newName:m($(e))})},{name:"alter_sequence_statement_body",symbols:["kw_set","kw_schema","ident"],postprocess:e=>(0,n.track)(e,{type:"set schema",newSchema:m($(e))})},{name:"alter_sequence_option",symbols:["create_sequence_option"],postprocess:t},{name:"alter_sequence_option$ebnf$1$subexpression$1$ebnf$1",symbols:[s.lexerAny.has("kw_with")?{type:"kw_with"}:kw_with],postprocess:r},{name:"alter_sequence_option$ebnf$1$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"alter_sequence_option$ebnf$1$subexpression$1",symbols:["alter_sequence_option$ebnf$1$subexpression$1$ebnf$1","int"],postprocess:$},{name:"alter_sequence_option$ebnf$1",symbols:["alter_sequence_option$ebnf$1$subexpression$1"],postprocess:r},{name:"alter_sequence_option$ebnf$1",symbols:[],postprocess:()=>null},{name:"alter_sequence_option",symbols:["kw_restart","alter_sequence_option$ebnf$1"],postprocess:e=>(0,n.box)(e,["restart",typeof(0,n.unbox)(e[1])=="number"?(0,n.unbox)(e[1]):!0])},{name:"drop_statement$ebnf$1",symbols:["kw_ifexists"],postprocess:r},{name:"drop_statement$ebnf$1",symbols:[],postprocess:()=>null},{name:"drop_statement$macrocall$2",symbols:["qualified_name"]},{name:"drop_statement$macrocall$1$ebnf$1",symbols:[]},{name:"drop_statement$macrocall$1$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("comma")?{type:"comma"}:comma,"drop_statement$macrocall$2"],postprocess:$},{name:"drop_statement$macrocall$1$ebnf$1",symbols:["drop_statement$macrocall$1$ebnf$1","drop_statement$macrocall$1$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"drop_statement$macrocall$1",symbols:["drop_statement$macrocall$2","drop_statement$macrocall$1$ebnf$1"],postprocess:([e,u])=>[t(e),...u.map(t)||[]]},{name:"drop_statement$ebnf$2$subexpression$1",symbols:["kw_cascade"]},{name:"drop_statement$ebnf$2$subexpression$1",symbols:["kw_restrict"]},{name:"drop_statement$ebnf$2",symbols:["drop_statement$ebnf$2$subexpression$1"],postprocess:r},{name:"drop_statement$ebnf$2",symbols:[],postprocess:()=>null},{name:"drop_statement",symbols:["kw_drop","drop_what","drop_statement$ebnf$1","drop_statement$macrocall$1","drop_statement$ebnf$2"],postprocess:(e,u)=>{const l=t(e[1]);return(0,n.track)(e,{...l,...e[2]&&{ifExists:!0},names:e[3],...e[4]&&{cascade:x(e[4])}})}},{name:"drop_what",symbols:[s.lexerAny.has("kw_table")?{type:"kw_table"}:kw_table],postprocess:e=>(0,n.track)(e,{type:"drop table"})},{name:"drop_what",symbols:["kw_sequence"],postprocess:e=>(0,n.track)(e,{type:"drop sequence"})},{name:"drop_what",symbols:["kw_type"],postprocess:e=>(0,n.track)(e,{type:"drop type"})},{name:"drop_what",symbols:["kw_trigger"],postprocess:e=>(0,n.track)(e,{type:"drop trigger"})},{name:"drop_what$ebnf$1",symbols:[s.lexerAny.has("kw_concurrently")?{type:"kw_concurrently"}:kw_concurrently],postprocess:r},{name:"drop_what$ebnf$1",symbols:[],postprocess:()=>null},{name:"drop_what",symbols:["kw_index","drop_what$ebnf$1"],postprocess:e=>(0,n.track)(e,{type:"drop index",...e[1]&&{concurrently:!0}})},{name:"with_statement",symbols:[s.lexerAny.has("kw_with")?{type:"kw_with"}:kw_with,"with_statement_bindings","with_statement_statement"],postprocess:e=>(0,n.track)(e,{type:"with",bind:e[1],in:t(e[2])})},{name:"with_recursive_statement$subexpression$1",symbols:[s.lexerAny.has("kw_with")?{type:"kw_with"}:kw_with,"kw_recursive"]},{name:"with_recursive_statement",symbols:["with_recursive_statement$subexpression$1","ident","collist_paren",s.lexerAny.has("kw_as")?{type:"kw_as"}:kw_as,"lparen","union_statement","rparen","with_statement_statement"],postprocess:e=>(0,n.track)(e,{type:"with recursive",alias:m(e[1]),columnNames:e[2].map(m),bind:e[5],in:t(e[7])})},{name:"with_statement_bindings$ebnf$1",symbols:[]},{name:"with_statement_bindings$ebnf$1$subexpression$1",symbols:["comma","with_statement_binding"],postprocess:$},{name:"with_statement_bindings$ebnf$1",symbols:["with_statement_bindings$ebnf$1","with_statement_bindings$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"with_statement_bindings",symbols:["with_statement_binding","with_statement_bindings$ebnf$1"],postprocess:([e,u])=>[e,...u||[]]},{name:"with_statement_binding",symbols:["word",s.lexerAny.has("kw_as")?{type:"kw_as"}:kw_as,"lparen","with_statement_statement","rparen"],postprocess:e=>(0,n.track)(e,{alias:m(e[0]),statement:t(e[3])})},{name:"with_statement_statement",symbols:["selection"]},{name:"with_statement_statement",symbols:["insert_statement"]},{name:"with_statement_statement",symbols:["update_statement"]},{name:"with_statement_statement",symbols:["delete_statement"]},{name:"createtype_statement$subexpression$1",symbols:["createtype_enum"]},{name:"createtype_statement$subexpression$1",symbols:["createtype_composite"]},{name:"createtype_statement",symbols:[s.lexerAny.has("kw_create")?{type:"kw_create"}:kw_create,"kw_type","qualified_name","createtype_statement$subexpression$1"],postprocess:e=>(0,n.track)(e,{name:e[2],...t(e[3])})},{name:"createtype_enum$macrocall$2",symbols:["enum_value"]},{name:"createtype_enum$macrocall$1$ebnf$1",symbols:[]},{name:"createtype_enum$macrocall$1$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("comma")?{type:"comma"}:comma,"createtype_enum$macrocall$2"],postprocess:$},{name:"createtype_enum$macrocall$1$ebnf$1",symbols:["createtype_enum$macrocall$1$ebnf$1","createtype_enum$macrocall$1$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"createtype_enum$macrocall$1",symbols:["createtype_enum$macrocall$2","createtype_enum$macrocall$1$ebnf$1"],postprocess:([e,u])=>[t(e),...u.map(t)||[]]},{name:"createtype_enum",symbols:[s.lexerAny.has("kw_as")?{type:"kw_as"}:kw_as,"kw_enum","lparen","createtype_enum$macrocall$1","rparen"],postprocess:e=>(0,n.track)(e,{type:"create enum",values:e[3]})},{name:"enum_value",symbols:["string"],postprocess:e=>(0,n.track)(e,{value:x(e)})},{name:"createtype_composite$macrocall$2",symbols:["createtype_composite_attr"]},{name:"createtype_composite$macrocall$1$ebnf$1",symbols:[]},{name:"createtype_composite$macrocall$1$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("comma")?{type:"comma"}:comma,"createtype_composite$macrocall$2"],postprocess:$},{name:"createtype_composite$macrocall$1$ebnf$1",symbols:["createtype_composite$macrocall$1$ebnf$1","createtype_composite$macrocall$1$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"createtype_composite$macrocall$1",symbols:["createtype_composite$macrocall$2","createtype_composite$macrocall$1$ebnf$1"],postprocess:([e,u])=>[t(e),...u.map(t)||[]]},{name:"createtype_composite",symbols:[s.lexerAny.has("kw_as")?{type:"kw_as"}:kw_as,"lparen","createtype_composite$macrocall$1","rparen"],postprocess:e=>(0,n.track)(e,{type:"create composite type",attributes:e[2]})},{name:"createtype_composite_attr$ebnf$1",symbols:["createtable_collate"],postprocess:r},{name:"createtype_composite_attr$ebnf$1",symbols:[],postprocess:()=>null},{name:"createtype_composite_attr",symbols:["word","data_type","createtype_composite_attr$ebnf$1"],postprocess:e=>(0,n.track)(e,{name:m(e[0]),dataType:e[1],...e[2]?{collate:e[2][1]}:{}})},{name:"union_left",symbols:["select_statement"]},{name:"union_left",symbols:["select_values"]},{name:"union_left",symbols:["selection_paren"]},{name:"union_right",symbols:["selection"]},{name:"union_right",symbols:["selection_paren"]},{name:"union_statement$subexpression$1$ebnf$1",symbols:[s.lexerAny.has("kw_all")?{type:"kw_all"}:kw_all],postprocess:r},{name:"union_statement$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"union_statement$subexpression$1",symbols:[s.lexerAny.has("kw_union")?{type:"kw_union"}:kw_union,"union_statement$subexpression$1$ebnf$1"]},{name:"union_statement",symbols:["union_left","union_statement$subexpression$1","union_right"],postprocess:e=>(0,n.track)(e,{type:x(e[1]," "),left:t(e[0]),right:t(e[2])})},{name:"prepare$ebnf$1$subexpression$1",symbols:["lparen","data_type_list","rparen"],postprocess:_(1)},{name:"prepare$ebnf$1",symbols:["prepare$ebnf$1$subexpression$1"],postprocess:r},{name:"prepare$ebnf$1",symbols:[],postprocess:()=>null},{name:"prepare",symbols:["kw_prepare","ident","prepare$ebnf$1",s.lexerAny.has("kw_as")?{type:"kw_as"}:kw_as,"statement_noprep"],postprocess:e=>(0,n.track)(e,{type:"prepare",name:m(e[1]),...e[2]&&{args:e[2]},statement:t($(e))})},{name:"deallocate$ebnf$1",symbols:["kw_prepare"],postprocess:r},{name:"deallocate$ebnf$1",symbols:[],postprocess:()=>null},{name:"deallocate",symbols:["kw_deallocate","deallocate$ebnf$1","deallocate_target"],postprocess:e=>(0,n.track)(e,{type:"deallocate",target:e[2]})},{name:"deallocate_target",symbols:["deallocate_all"],postprocess:t},{name:"deallocate_target",symbols:["deallocate_name"],postprocess:t},{name:"deallocate_name",symbols:["ident"],postprocess:e=>(0,n.track)(e,m(e[0]))},{name:"deallocate_all",symbols:[s.lexerAny.has("kw_all")?{type:"kw_all"}:kw_all],postprocess:e=>(0,n.track)(e,{option:"all"})},{name:"create_view_statements",symbols:["create_view"]},{name:"create_view_statements",symbols:["create_materialized_view"]},{name:"create_view$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("kw_or")?{type:"kw_or"}:kw_or,"kw_replace"]},{name:"create_view$ebnf$1",symbols:["create_view$ebnf$1$subexpression$1"],postprocess:r},{name:"create_view$ebnf$1",symbols:[],postprocess:()=>null},{name:"create_view$ebnf$2$subexpression$1",symbols:["kw_temp"]},{name:"create_view$ebnf$2$subexpression$1",symbols:["kw_temporary"]},{name:"create_view$ebnf$2",symbols:["create_view$ebnf$2$subexpression$1"],postprocess:r},{name:"create_view$ebnf$2",symbols:[],postprocess:()=>null},{name:"create_view$ebnf$3",symbols:["kw_recursive"],postprocess:r},{name:"create_view$ebnf$3",symbols:[],postprocess:()=>null},{name:"create_view$ebnf$4$subexpression$1$macrocall$2",symbols:["ident"]},{name:"create_view$ebnf$4$subexpression$1$macrocall$1$ebnf$1",symbols:[]},{name:"create_view$ebnf$4$subexpression$1$macrocall$1$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("comma")?{type:"comma"}:comma,"create_view$ebnf$4$subexpression$1$macrocall$2"],postprocess:$},{name:"create_view$ebnf$4$subexpression$1$macrocall$1$ebnf$1",symbols:["create_view$ebnf$4$subexpression$1$macrocall$1$ebnf$1","create_view$ebnf$4$subexpression$1$macrocall$1$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"create_view$ebnf$4$subexpression$1$macrocall$1",symbols:["create_view$ebnf$4$subexpression$1$macrocall$2","create_view$ebnf$4$subexpression$1$macrocall$1$ebnf$1"],postprocess:([e,u])=>[t(e),...u.map(t)||[]]},{name:"create_view$ebnf$4$subexpression$1",symbols:["lparen","create_view$ebnf$4$subexpression$1$macrocall$1","rparen"],postprocess:_(1)},{name:"create_view$ebnf$4",symbols:["create_view$ebnf$4$subexpression$1"],postprocess:r},{name:"create_view$ebnf$4",symbols:[],postprocess:()=>null},{name:"create_view$ebnf$5",symbols:["create_view_opts"],postprocess:r},{name:"create_view$ebnf$5",symbols:[],postprocess:()=>null},{name:"create_view$ebnf$6$subexpression$1$subexpression$1",symbols:["kw_local"]},{name:"create_view$ebnf$6$subexpression$1$subexpression$1",symbols:["kw_cascaded"]},{name:"create_view$ebnf$6$subexpression$1",symbols:[s.lexerAny.has("kw_with")?{type:"kw_with"}:kw_with,"create_view$ebnf$6$subexpression$1$subexpression$1",s.lexerAny.has("kw_check")?{type:"kw_check"}:kw_check,"kw_option"],postprocess:_(1)},{name:"create_view$ebnf$6",symbols:["create_view$ebnf$6$subexpression$1"],postprocess:r},{name:"create_view$ebnf$6",symbols:[],postprocess:()=>null},{name:"create_view",symbols:[s.lexerAny.has("kw_create")?{type:"kw_create"}:kw_create,"create_view$ebnf$1","create_view$ebnf$2","create_view$ebnf$3","kw_view","qualified_name","create_view$ebnf$4","create_view$ebnf$5",s.lexerAny.has("kw_as")?{type:"kw_as"}:kw_as,"selection","create_view$ebnf$6"],postprocess:e=>(0,n.track)(e,{type:"create view",...e[1]&&{orReplace:!0},...e[2]&&{temp:!0},...e[3]&&{recursive:!0},name:e[5],...e[6]&&{columnNames:e[6].map(m)},...e[7]&&{parameters:v(e[7])},query:e[9],...e[10]&&{checkOption:x(e[10])}})},{name:"create_view_opt",symbols:["ident",s.lexerAny.has("op_eq")?{type:"op_eq"}:op_eq,"ident"],postprocess:([e,u,l])=>[x(e),x(l)]},{name:"create_view_opts$macrocall$2",symbols:["create_view_opt"]},{name:"create_view_opts$macrocall$1$ebnf$1",symbols:[]},{name:"create_view_opts$macrocall$1$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("comma")?{type:"comma"}:comma,"create_view_opts$macrocall$2"],postprocess:$},{name:"create_view_opts$macrocall$1$ebnf$1",symbols:["create_view_opts$macrocall$1$ebnf$1","create_view_opts$macrocall$1$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"create_view_opts$macrocall$1",symbols:["create_view_opts$macrocall$2","create_view_opts$macrocall$1$ebnf$1"],postprocess:([e,u])=>[t(e),...u.map(t)||[]]},{name:"create_view_opts",symbols:[s.lexerAny.has("kw_with")?{type:"kw_with"}:kw_with,"create_view_opts$macrocall$1"],postprocess:$},{name:"create_materialized_view$ebnf$1",symbols:["kw_ifnotexists"],postprocess:r},{name:"create_materialized_view$ebnf$1",symbols:[],postprocess:()=>null},{name:"create_materialized_view$ebnf$2$subexpression$1$macrocall$2",symbols:["ident"]},{name:"create_materialized_view$ebnf$2$subexpression$1$macrocall$1$ebnf$1",symbols:[]},{name:"create_materialized_view$ebnf$2$subexpression$1$macrocall$1$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("comma")?{type:"comma"}:comma,"create_materialized_view$ebnf$2$subexpression$1$macrocall$2"],postprocess:$},{name:"create_materialized_view$ebnf$2$subexpression$1$macrocall$1$ebnf$1",symbols:["create_materialized_view$ebnf$2$subexpression$1$macrocall$1$ebnf$1","create_materialized_view$ebnf$2$subexpression$1$macrocall$1$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"create_materialized_view$ebnf$2$subexpression$1$macrocall$1",symbols:["create_materialized_view$ebnf$2$subexpression$1$macrocall$2","create_materialized_view$ebnf$2$subexpression$1$macrocall$1$ebnf$1"],postprocess:([e,u])=>[t(e),...u.map(t)||[]]},{name:"create_materialized_view$ebnf$2$subexpression$1",symbols:["lparen","create_materialized_view$ebnf$2$subexpression$1$macrocall$1","rparen"],postprocess:_(1)},{name:"create_materialized_view$ebnf$2",symbols:["create_materialized_view$ebnf$2$subexpression$1"],postprocess:r},{name:"create_materialized_view$ebnf$2",symbols:[],postprocess:()=>null},{name:"create_materialized_view$ebnf$3",symbols:["create_view_opts"],postprocess:r},{name:"create_materialized_view$ebnf$3",symbols:[],postprocess:()=>null},{name:"create_materialized_view$ebnf$4$subexpression$1",symbols:["kw_tablespace","ident"],postprocess:$},{name:"create_materialized_view$ebnf$4",symbols:["create_materialized_view$ebnf$4$subexpression$1"],postprocess:r},{name:"create_materialized_view$ebnf$4",symbols:[],postprocess:()=>null},{name:"create_materialized_view$ebnf$5$subexpression$1$ebnf$1",symbols:["kw_no"],postprocess:r},{name:"create_materialized_view$ebnf$5$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"create_materialized_view$ebnf$5$subexpression$1",symbols:[s.lexerAny.has("kw_with")?{type:"kw_with"}:kw_with,"create_materialized_view$ebnf$5$subexpression$1$ebnf$1","kw_data"]},{name:"create_materialized_view$ebnf$5",symbols:["create_materialized_view$ebnf$5$subexpression$1"],postprocess:r},{name:"create_materialized_view$ebnf$5",symbols:[],postprocess:()=>null},{name:"create_materialized_view",symbols:[s.lexerAny.has("kw_create")?{type:"kw_create"}:kw_create,"kw_materialized","kw_view","create_materialized_view$ebnf$1","qualified_name","create_materialized_view$ebnf$2","create_materialized_view$ebnf$3","create_materialized_view$ebnf$4",s.lexerAny.has("kw_as")?{type:"kw_as"}:kw_as,"selection","create_materialized_view$ebnf$5"],postprocess:e=>(0,n.track)(e,{type:"create materialized view",...e[3]&&{ifNotExists:!0},name:e[4],...e[5]&&{columnNames:e[6].map(m)},...e[6]&&{parameters:v(e[6])},...e[7]&&{tablespace:m(e[7])},query:e[9],...e[10]&&{withData:x(e[10][1])!=="no"}})},{name:"refresh_view_statements$ebnf$1",symbols:[s.lexerAny.has("kw_concurrently")?{type:"kw_concurrently"}:kw_concurrently],postprocess:r},{name:"refresh_view_statements$ebnf$1",symbols:[],postprocess:()=>null},{name:"refresh_view_statements$ebnf$2$subexpression$1$ebnf$1",symbols:["kw_no"],postprocess:r},{name:"refresh_view_statements$ebnf$2$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"refresh_view_statements$ebnf$2$subexpression$1",symbols:[s.lexerAny.has("kw_with")?{type:"kw_with"}:kw_with,"refresh_view_statements$ebnf$2$subexpression$1$ebnf$1","kw_data"]},{name:"refresh_view_statements$ebnf$2",symbols:["refresh_view_statements$ebnf$2$subexpression$1"],postprocess:r},{name:"refresh_view_statements$ebnf$2",symbols:[],postprocess:()=>null},{name:"refresh_view_statements",symbols:["kw_refresh","kw_materialized","kw_view","refresh_view_statements$ebnf$1","qname","refresh_view_statements$ebnf$2"],postprocess:e=>(0,n.track)(e,{type:"refresh materialized view",...e[3]?{concurrently:!0}:{},name:e[4],...e[5]?{withData:x(e[5][1])!=="no"}:{}})},{name:"functions_statements",symbols:["create_func"]},{name:"functions_statements",symbols:["do_stm"]},{name:"functions_statements",symbols:["drop_func"]},{name:"create_func$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("kw_or")?{type:"kw_or"}:kw_or,"kw_replace"]},{name:"create_func$ebnf$1",symbols:["create_func$ebnf$1$subexpression$1"],postprocess:r},{name:"create_func$ebnf$1",symbols:[],postprocess:()=>null},{name:"create_func$subexpression$1$ebnf$1$macrocall$2",symbols:["func_argdef"]},{name:"create_func$subexpression$1$ebnf$1$macrocall$1$ebnf$1",symbols:[]},{name:"create_func$subexpression$1$ebnf$1$macrocall$1$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("comma")?{type:"comma"}:comma,"create_func$subexpression$1$ebnf$1$macrocall$2"],postprocess:$},{name:"create_func$subexpression$1$ebnf$1$macrocall$1$ebnf$1",symbols:["create_func$subexpression$1$ebnf$1$macrocall$1$ebnf$1","create_func$subexpression$1$ebnf$1$macrocall$1$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"create_func$subexpression$1$ebnf$1$macrocall$1",symbols:["create_func$subexpression$1$ebnf$1$macrocall$2","create_func$subexpression$1$ebnf$1$macrocall$1$ebnf$1"],postprocess:([e,u])=>[t(e),...u.map(t)||[]]},{name:"create_func$subexpression$1$ebnf$1",symbols:["create_func$subexpression$1$ebnf$1$macrocall$1"],postprocess:r},{name:"create_func$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"create_func$subexpression$1",symbols:["lparen","create_func$subexpression$1$ebnf$1","rparen"],postprocess:_(1)},{name:"create_func$ebnf$2",symbols:["func_spec"]},{name:"create_func$ebnf$2",symbols:["create_func$ebnf$2","func_spec"],postprocess:e=>e[0].concat([e[1]])},{name:"create_func",symbols:[s.lexerAny.has("kw_create")?{type:"kw_create"}:kw_create,"create_func$ebnf$1","kw_function","qname","create_func$subexpression$1","create_func$ebnf$2"],postprocess:(e,u)=>{var l;const d={};for(const g of e[5]){for(const E in g)if(E[0]!=="_"&&E in d)throw new Error("conflicting or redundant options "+E);Object.assign(d,g)}return(0,n.track)(e,{type:"create function",...e[1]&&{orReplace:!0},name:e[3],arguments:(l=e[4])!==null&&l!==void 0?l:[],...d})}},{name:"func_argdef$ebnf$1",symbols:["func_argopts"],postprocess:r},{name:"func_argdef$ebnf$1",symbols:[],postprocess:()=>null},{name:"func_argdef$ebnf$2",symbols:["func_argdefault"],postprocess:r},{name:"func_argdef$ebnf$2",symbols:[],postprocess:()=>null},{name:"func_argdef",symbols:["func_argdef$ebnf$1","data_type","func_argdef$ebnf$2"],postprocess:e=>(0,n.track)(e,{default:e[2],type:e[1],...e[0]})},{name:"func_argdefault",symbols:[s.lexerAny.has("kw_default")?{type:"kw_default"}:kw_default,"expr"],postprocess:e=>e[1]},{name:"func_argdefault",symbols:[s.lexerAny.has("op_eq")?{type:"op_eq"}:op_eq,"expr"],postprocess:e=>e[1]},{name:"func_argopts$ebnf$1",symbols:["word"],postprocess:r},{name:"func_argopts$ebnf$1",symbols:[],postprocess:()=>null},{name:"func_argopts",symbols:["func_argmod","func_argopts$ebnf$1"],postprocess:e=>(0,n.track)(e,{mode:x(e[0]),...e[1]&&{name:m(e[1])}})},{name:"func_argopts",symbols:["word"],postprocess:(e,u)=>{const l=m(e);return l==="out"||l==="inout"||l==="variadic"?u:(0,n.track)(e,{name:l})}},{name:"func_argmod",symbols:[s.lexerAny.has("kw_in")?{type:"kw_in"}:kw_in]},{name:"func_argmod",symbols:["kw_out"]},{name:"func_argmod",symbols:["kw_inout"]},{name:"func_argmod",symbols:["kw_variadic"]},{name:"func_spec",symbols:["kw_language","word"],postprocess:e=>(0,n.track)(e,{language:m($(e))})},{name:"func_spec",symbols:["func_purity"],postprocess:e=>(0,n.track)(e,{purity:x(e)})},{name:"func_spec$subexpression$1",symbols:[s.lexerAny.has("codeblock")?{type:"codeblock"}:codeblock]},{name:"func_spec$subexpression$1",symbols:["string"]},{name:"func_spec",symbols:[s.lexerAny.has("kw_as")?{type:"kw_as"}:kw_as,"func_spec$subexpression$1"],postprocess:e=>({code:x($(e))})},{name:"func_spec$ebnf$1",symbols:[s.lexerAny.has("kw_not")?{type:"kw_not"}:kw_not],postprocess:r},{name:"func_spec$ebnf$1",symbols:[],postprocess:()=>null},{name:"func_spec$subexpression$2",symbols:["word"],postprocess:k("leakproof")},{name:"func_spec",symbols:["func_spec$ebnf$1","func_spec$subexpression$2"],postprocess:e=>(0,n.track)(e,{leakproof:!e[0]})},{name:"func_spec",symbols:["func_returns"],postprocess:e=>(0,n.track)(e,{returns:t(e)})},{name:"func_spec$subexpression$3",symbols:["word"],postprocess:k("called")},{name:"func_spec",symbols:["func_spec$subexpression$3","oninp"],postprocess:()=>({onNullInput:"call"})},{name:"func_spec$subexpression$4",symbols:["word"],postprocess:k("returns")},{name:"func_spec",symbols:["func_spec$subexpression$4",s.lexerAny.has("kw_null")?{type:"kw_null"}:kw_null,"oninp"],postprocess:()=>({onNullInput:"null"})},{name:"func_spec$subexpression$5",symbols:["word"],postprocess:k("strict")},{name:"func_spec",symbols:["func_spec$subexpression$5"],postprocess:()=>({onNullInput:"strict"})},{name:"func_purity",symbols:["word"],postprocess:k("immutable")},{name:"func_purity",symbols:["word"],postprocess:k("stable")},{name:"func_purity",symbols:["word"],postprocess:k("volatile")},{name:"oninp$subexpression$1",symbols:["word"],postprocess:k("input")},{name:"oninp",symbols:[s.lexerAny.has("kw_on")?{type:"kw_on"}:kw_on,s.lexerAny.has("kw_null")?{type:"kw_null"}:kw_null,"oninp$subexpression$1"]},{name:"func_returns",symbols:["kw_returns","data_type"],postprocess:$},{name:"func_returns$macrocall$2",symbols:["func_ret_table_col"]},{name:"func_returns$macrocall$1$ebnf$1",symbols:[]},{name:"func_returns$macrocall$1$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("comma")?{type:"comma"}:comma,"func_returns$macrocall$2"],postprocess:$},{name:"func_returns$macrocall$1$ebnf$1",symbols:["func_returns$macrocall$1$ebnf$1","func_returns$macrocall$1$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"func_returns$macrocall$1",symbols:["func_returns$macrocall$2","func_returns$macrocall$1$ebnf$1"],postprocess:([e,u])=>[t(e),...u.map(t)||[]]},{name:"func_returns",symbols:["kw_returns",s.lexerAny.has("kw_table")?{type:"kw_table"}:kw_table,"lparen","func_returns$macrocall$1","rparen"],postprocess:e=>(0,n.track)(e,{kind:"table",columns:e[3]})},{name:"func_ret_table_col",symbols:["word","data_type"],postprocess:e=>(0,n.track)(e,{name:m(e[0]),type:e[1]})},{name:"do_stm$ebnf$1$subexpression$1",symbols:["kw_language","word"],postprocess:$},{name:"do_stm$ebnf$1",symbols:["do_stm$ebnf$1$subexpression$1"],postprocess:r},{name:"do_stm$ebnf$1",symbols:[],postprocess:()=>null},{name:"do_stm",symbols:[s.lexerAny.has("kw_do")?{type:"kw_do"}:kw_do,"do_stm$ebnf$1",s.lexerAny.has("codeblock")?{type:"codeblock"}:codeblock],postprocess:e=>(0,n.track)(e,{type:"do",...e[1]&&{language:m(e[1])},code:e[2].value})},{name:"drop_func$ebnf$1$subexpression$1",symbols:["kw_if","kw_exists"]},{name:"drop_func$ebnf$1",symbols:["drop_func$ebnf$1$subexpression$1"],postprocess:r},{name:"drop_func$ebnf$1",symbols:[],postprocess:()=>null},{name:"drop_func$ebnf$2",symbols:["drop_func_overload"],postprocess:r},{name:"drop_func$ebnf$2",symbols:[],postprocess:()=>null},{name:"drop_func",symbols:["kw_drop","kw_function","drop_func$ebnf$1","qname","drop_func$ebnf$2"],postprocess:e=>(0,n.track)(e,{type:"drop function",...e[2]&&{ifExists:!0},name:e[3],...e[4]&&{arguments:e[4]}})},{name:"drop_func_overload$macrocall$2",symbols:["drop_func_overload_col"]},{name:"drop_func_overload$macrocall$1$ebnf$1",symbols:[]},{name:"drop_func_overload$macrocall$1$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("comma")?{type:"comma"}:comma,"drop_func_overload$macrocall$2"],postprocess:$},{name:"drop_func_overload$macrocall$1$ebnf$1",symbols:["drop_func_overload$macrocall$1$ebnf$1","drop_func_overload$macrocall$1$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"drop_func_overload$macrocall$1",symbols:["drop_func_overload$macrocall$2","drop_func_overload$macrocall$1$ebnf$1"],postprocess:([e,u])=>[t(e),...u.map(t)||[]]},{name:"drop_func_overload",symbols:["lparen","drop_func_overload$macrocall$1","rparen"],postprocess:_(1)},{name:"drop_func_overload_col$ebnf$1",symbols:["word"],postprocess:r},{name:"drop_func_overload_col$ebnf$1",symbols:[],postprocess:()=>null},{name:"drop_func_overload_col",symbols:["drop_func_overload_col$ebnf$1","qname"],postprocess:e=>(0,n.track)(e,{type:e[1],...e[0]&&{name:m(e[0])}})},{name:"main$ebnf$1",symbols:[]},{name:"main$ebnf$1",symbols:["main$ebnf$1","statement_separator"],postprocess:e=>e[0].concat([e[1]])},{name:"main$ebnf$2",symbols:[]},{name:"main$ebnf$2$subexpression$1$ebnf$1",symbols:["statement_separator"]},{name:"main$ebnf$2$subexpression$1$ebnf$1",symbols:["main$ebnf$2$subexpression$1$ebnf$1","statement_separator"],postprocess:e=>e[0].concat([e[1]])},{name:"main$ebnf$2$subexpression$1",symbols:["main$ebnf$2$subexpression$1$ebnf$1","statement"]},{name:"main$ebnf$2",symbols:["main$ebnf$2","main$ebnf$2$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"main$ebnf$3",symbols:[]},{name:"main$ebnf$3",symbols:["main$ebnf$3","statement_separator"],postprocess:e=>e[0].concat([e[1]])},{name:"main",symbols:["main$ebnf$1","statement","main$ebnf$2","main$ebnf$3"],postprocess:([e,u,l])=>{const d=l,g=[t(u),...d.map(E=>t(E[1]))];return g.length===1?g[0]:g}},{name:"statement_separator",symbols:[s.lexerAny.has("semicolon")?{type:"semicolon"}:semicolon]},{name:"statement",symbols:["statement_noprep"]},{name:"statement",symbols:["prepare"]},{name:"statement",symbols:["deallocate"]},{name:"statement_noprep",symbols:["selection"]},{name:"statement_noprep",symbols:["createtable_statement"]},{name:"statement_noprep",symbols:["createextension_statement"]},{name:"statement_noprep",symbols:["createindex_statement"]},{name:"statement_noprep",symbols:["simplestatements_all"]},{name:"statement_noprep",symbols:["insert_statement"]},{name:"statement_noprep",symbols:["update_statement"]},{name:"statement_noprep",symbols:["altertable_statement"]},{name:"statement_noprep",symbols:["alterindex_statement"]},{name:"statement_noprep",symbols:["delete_statement"]},{name:"statement_noprep",symbols:["create_sequence_statement"]},{name:"statement_noprep",symbols:["alter_sequence_statement"]},{name:"statement_noprep",symbols:["drop_statement"]},{name:"statement_noprep",symbols:["createtype_statement"]},{name:"statement_noprep",symbols:["create_view_statements"]},{name:"statement_noprep",symbols:["refresh_view_statements"]},{name:"statement_noprep",symbols:["create_schema"]},{name:"statement_noprep",symbols:["raise_statement"]},{name:"statement_noprep",symbols:["comment_statement"]},{name:"statement_noprep",symbols:["functions_statements"]},{name:"selection",symbols:["select_statement"],postprocess:t},{name:"selection",symbols:["select_values"],postprocess:t},{name:"selection",symbols:["with_statement"],postprocess:t},{name:"selection",symbols:["with_recursive_statement"],postprocess:t},{name:"selection",symbols:["union_statement"],postprocess:t},{name:"selection_paren",symbols:["lparen","selection","rparen"],postprocess:_(1)}],ParserStart:"main"};a.default=q},function(i,a,c){Object.defineProperty(a,"__esModule",{value:!0});function r(b){return b[0]}const s=c(12),n=b=>b&&b[b.length-1],m={Lexer:s.lexerAny,ParserRules:[{name:"main$ebnf$1",symbols:["elements"],postprocess:r},{name:"main$ebnf$1",symbols:[],postprocess:()=>null},{name:"main",symbols:[s.lexerAny.has("start_list")?{type:"start_list"}:start_list,"main$ebnf$1",s.lexerAny.has("end_list")?{type:"end_list"}:end_list],postprocess:b=>b[1]||[]},{name:"elements$ebnf$1",symbols:[]},{name:"elements$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("comma")?{type:"comma"}:comma,"elt"],postprocess:n},{name:"elements$ebnf$1",symbols:["elements$ebnf$1","elements$ebnf$1$subexpression$1"],postprocess:b=>b[0].concat([b[1]])},{name:"elements",symbols:["elt","elements$ebnf$1"],postprocess:([b,y])=>[b,...y||[]]},{name:"elt",symbols:[s.lexerAny.has("value")?{type:"value"}:value],postprocess:b=>b[0].value},{name:"elt",symbols:["main"],postprocess:b=>b[0]}],ParserStart:"main"};a.default=m},function(i,a,c){Object.defineProperty(a,"__esModule",{value:!0}),a.lexerAny=a.lexer=void 0;const r=c(0);a.lexer=(0,r.compile)({valueString:{match:/"(?:\\["\\]|[^\n"\\])*"/,value:s=>JSON.parse(s),type:s=>"value"},valueRaw:{match:/[^\s,\{\}"](?:[^,\{\}"]*[^\s,\{\}"])?/,type:()=>"value"},comma:",",space:{match:/[\s\t\n\v\f\r]+/,lineBreaks:!0},start_list:"{",end_list:"}"}),a.lexer.next=(s=>()=>{let n;for(;(n=s.call(a.lexer))&&n.type==="space";);return n})(a.lexer.next),a.lexerAny=a.lexer},function(i,a,c){Object.defineProperty(a,"__esModule",{value:!0});function r(t){return t[0]}const s=c(14),n=t=>_=>_[t],m=t=>t&&t[t.length-1];function b(t){return Array.isArray(t)&&t.length===1&&(t=b(t[0])),Array.isArray(t)&&!t.length?null:t}const y={Lexer:s.lexerAny,ParserRules:[{name:"number$subexpression$1",symbols:["float"]},{name:"number$subexpression$1",symbols:["int"]},{name:"number",symbols:["number$subexpression$1"],postprocess:b},{name:"float",symbols:[s.lexerAny.has("float")?{type:"float"}:float],postprocess:t=>parseFloat(b(t))},{name:"int",symbols:[s.lexerAny.has("int")?{type:"int"}:int],postprocess:t=>parseInt(b(t),10)},{name:"comma",symbols:[s.lexerAny.has("comma")?{type:"comma"}:comma],postprocess:r},{name:"point$macrocall$2",symbols:["point_content"]},{name:"point$macrocall$1$subexpression$1",symbols:["point$macrocall$2"]},{name:"point$macrocall$1$subexpression$1",symbols:[s.lexerAny.has("lparen")?{type:"lparen"}:lparen,"point$macrocall$2",s.lexerAny.has("rparen")?{type:"rparen"}:rparen],postprocess:n(1)},{name:"point$macrocall$1",symbols:["point$macrocall$1$subexpression$1"],postprocess:b},{name:"point",symbols:["point$macrocall$1"],postprocess:b},{name:"point_content",symbols:["number","comma","number"],postprocess:t=>({x:t[0],y:t[2]})},{name:"line",symbols:[s.lexerAny.has("lcurl")?{type:"lcurl"}:lcurl,"number","comma","number","comma","number",s.lexerAny.has("rcurl")?{type:"rcurl"}:rcurl],postprocess:t=>({a:t[1],b:t[3],c:t[5]})},{name:"box",symbols:["closed_path"],postprocess:([t],_)=>t.length!==2?_:t},{name:"lseg",symbols:["path"],postprocess:([t],_)=>t.path.length!==2?_:t.path},{name:"path",symbols:["open_path"],postprocess:([t])=>({closed:!1,path:t})},{name:"path",symbols:["closed_path"],postprocess:([t])=>({closed:!0,path:t})},{name:"open_path$macrocall$2",symbols:[s.lexerAny.has("lbracket")?{type:"lbracket"}:lbracket]},{name:"open_path$macrocall$3",symbols:[s.lexerAny.has("rbracket")?{type:"rbracket"}:rbracket]},{name:"open_path$macrocall$1$macrocall$2",symbols:["point"]},{name:"open_path$macrocall$1$macrocall$1$ebnf$1",symbols:[]},{name:"open_path$macrocall$1$macrocall$1$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("comma")?{type:"comma"}:comma,"open_path$macrocall$1$macrocall$2"],postprocess:m},{name:"open_path$macrocall$1$macrocall$1$ebnf$1",symbols:["open_path$macrocall$1$macrocall$1$ebnf$1","open_path$macrocall$1$macrocall$1$ebnf$1$subexpression$1"],postprocess:t=>t[0].concat([t[1]])},{name:"open_path$macrocall$1$macrocall$1",symbols:["open_path$macrocall$1$macrocall$2","open_path$macrocall$1$macrocall$1$ebnf$1"],postprocess:([t,_])=>[b(t),..._.map(b)||[]]},{name:"open_path$macrocall$1",symbols:["open_path$macrocall$2","open_path$macrocall$1$macrocall$1","open_path$macrocall$3"],postprocess:n(1)},{name:"open_path",symbols:["open_path$macrocall$1"],postprocess:m},{name:"closed_path$subexpression$1$macrocall$2",symbols:[s.lexerAny.has("lparen")?{type:"lparen"}:lparen]},{name:"closed_path$subexpression$1$macrocall$3",symbols:[s.lexerAny.has("rparen")?{type:"rparen"}:rparen]},{name:"closed_path$subexpression$1$macrocall$1$macrocall$2",symbols:["point"]},{name:"closed_path$subexpression$1$macrocall$1$macrocall$1$ebnf$1",symbols:[]},{name:"closed_path$subexpression$1$macrocall$1$macrocall$1$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("comma")?{type:"comma"}:comma,"closed_path$subexpression$1$macrocall$1$macrocall$2"],postprocess:m},{name:"closed_path$subexpression$1$macrocall$1$macrocall$1$ebnf$1",symbols:["closed_path$subexpression$1$macrocall$1$macrocall$1$ebnf$1","closed_path$subexpression$1$macrocall$1$macrocall$1$ebnf$1$subexpression$1"],postprocess:t=>t[0].concat([t[1]])},{name:"closed_path$subexpression$1$macrocall$1$macrocall$1",symbols:["closed_path$subexpression$1$macrocall$1$macrocall$2","closed_path$subexpression$1$macrocall$1$macrocall$1$ebnf$1"],postprocess:([t,_])=>[b(t),..._.map(b)||[]]},{name:"closed_path$subexpression$1$macrocall$1",symbols:["closed_path$subexpression$1$macrocall$2","closed_path$subexpression$1$macrocall$1$macrocall$1","closed_path$subexpression$1$macrocall$3"],postprocess:n(1)},{name:"closed_path$subexpression$1",symbols:["closed_path$subexpression$1$macrocall$1"],postprocess:m},{name:"closed_path$subexpression$1$macrocall$5",symbols:["point"]},{name:"closed_path$subexpression$1$macrocall$4$ebnf$1",symbols:[]},{name:"closed_path$subexpression$1$macrocall$4$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("comma")?{type:"comma"}:comma,"closed_path$subexpression$1$macrocall$5"],postprocess:m},{name:"closed_path$subexpression$1$macrocall$4$ebnf$1",symbols:["closed_path$subexpression$1$macrocall$4$ebnf$1","closed_path$subexpression$1$macrocall$4$ebnf$1$subexpression$1"],postprocess:t=>t[0].concat([t[1]])},{name:"closed_path$subexpression$1$macrocall$4",symbols:["closed_path$subexpression$1$macrocall$5","closed_path$subexpression$1$macrocall$4$ebnf$1"],postprocess:([t,_])=>[b(t),..._.map(b)||[]]},{name:"closed_path$subexpression$1",symbols:["closed_path$subexpression$1$macrocall$4"],postprocess:m},{name:"closed_path",symbols:["closed_path$subexpression$1"],postprocess:n(0)},{name:"polygon",symbols:["closed_path"],postprocess:n(0)},{name:"circle_body",symbols:["point","comma","number"],postprocess:t=>({c:t[0],r:t[2]})},{name:"circle$subexpression$1$macrocall$2",symbols:[s.lexerAny.has("lcomp")?{type:"lcomp"}:lcomp]},{name:"circle$subexpression$1$macrocall$3",symbols:[s.lexerAny.has("rcomp")?{type:"rcomp"}:rcomp]},{name:"circle$subexpression$1$macrocall$1",symbols:["circle$subexpression$1$macrocall$2","circle_body","circle$subexpression$1$macrocall$3"],postprocess:n(1)},{name:"circle$subexpression$1",symbols:["circle$subexpression$1$macrocall$1"]},{name:"circle$subexpression$1$macrocall$5",symbols:[s.lexerAny.has("lparen")?{type:"lparen"}:lparen]},{name:"circle$subexpression$1$macrocall$6",symbols:[s.lexerAny.has("rparen")?{type:"rparen"}:rparen]},{name:"circle$subexpression$1$macrocall$4",symbols:["circle$subexpression$1$macrocall$5","circle_body","circle$subexpression$1$macrocall$6"],postprocess:n(1)},{name:"circle$subexpression$1",symbols:["circle$subexpression$1$macrocall$4"]},{name:"circle$subexpression$1",symbols:["circle_body"]},{name:"circle",symbols:["circle$subexpression$1"],postprocess:b}],ParserStart:"number"};a.default=y},function(i,a,c){Object.defineProperty(a,"__esModule",{value:!0}),a.lexerAny=a.lexer=void 0;const r=c(0);a.lexer=(0,r.compile)({comma:",",space:{match:/[\s\t\n\v\f\r]+/,lineBreaks:!0},int:/\-?\d+(?![\.\d])/,float:/\-?(?:(?:\d*\.\d+)|(?:\d+\.\d*))/,lcurl:"{",rcurl:"}",lparen:"(",rparen:")",lbracket:"[",rbracket:"]",lcomp:"<",rcomp:">"}),a.lexer.next=(s=>()=>{let n;for(;(n=s.call(a.lexer))&&n.type==="space";);return n})(a.lexer.next),a.lexerAny=a.lexer},function(i,a,c){Object.defineProperty(a,"__esModule",{value:!0});function r(m){return m[0]}const s=c(16),n={Lexer:s.lexerAny,ParserRules:[{name:"main$ebnf$1",symbols:["elt"]},{name:"main$ebnf$1",symbols:["main$ebnf$1","elt"],postprocess:m=>m[0].concat([m[1]])},{name:"main",symbols:["main$ebnf$1"],postprocess:([m])=>{const b=new Set;for(const y of m){const t=typeof y[1]=="number"?y[0]:"time";if(b.has(t))return"invalid";b.add(t)}return m}},{name:"elt",symbols:["time"]},{name:"elt",symbols:["num","unit"],postprocess:([[m],b])=>(b=b[0].type,[b,m])},{name:"unit",symbols:[s.lexerAny.has("years")?{type:"years"}:years]},{name:"unit",symbols:[s.lexerAny.has("months")?{type:"months"}:months]},{name:"unit",symbols:[s.lexerAny.has("days")?{type:"days"}:days]},{name:"unit",symbols:[s.lexerAny.has("hours")?{type:"hours"}:hours]},{name:"unit",symbols:[s.lexerAny.has("minutes")?{type:"minutes"}:minutes]},{name:"unit",symbols:[s.lexerAny.has("seconds")?{type:"seconds"}:seconds]},{name:"unit",symbols:[s.lexerAny.has("milliseconds")?{type:"milliseconds"}:milliseconds]},{name:"num",symbols:["int"]},{name:"num",symbols:["float"]},{name:"uint",symbols:[s.lexerAny.has("int")?{type:"int"}:int],postprocess:([m])=>parseInt(m,10)},{name:"int$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("neg")?{type:"neg"}:neg]},{name:"int$ebnf$1",symbols:["int$ebnf$1$subexpression$1"],postprocess:r},{name:"int$ebnf$1",symbols:[],postprocess:()=>null},{name:"int",symbols:["int$ebnf$1",s.lexerAny.has("int")?{type:"int"}:int],postprocess:([m,b])=>parseInt(b,10)*(m?-1:1)},{name:"float$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("neg")?{type:"neg"}:neg]},{name:"float$ebnf$1",symbols:["float$ebnf$1$subexpression$1"],postprocess:r},{name:"float$ebnf$1",symbols:[],postprocess:()=>null},{name:"float$ebnf$2",symbols:[s.lexerAny.has("int")?{type:"int"}:int],postprocess:r},{name:"float$ebnf$2",symbols:[],postprocess:()=>null},{name:"float",symbols:["float$ebnf$1","float$ebnf$2",s.lexerAny.has("dot")?{type:"dot"}:dot,s.lexerAny.has("int")?{type:"int"}:int],postprocess:([m,...b])=>parseFloat(b.map(y=>y?y.text:"0").join(""))*(m?-1:1)},{name:"time$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("colon")?{type:"colon"}:colon,"uint"]},{name:"time$ebnf$1",symbols:["time$ebnf$1$subexpression$1"],postprocess:r},{name:"time$ebnf$1",symbols:[],postprocess:()=>null},{name:"time$ebnf$2$subexpression$1",symbols:[s.lexerAny.has("dot")?{type:"dot"}:dot,s.lexerAny.has("int")?{type:"int"}:int]},{name:"time$ebnf$2",symbols:["time$ebnf$2$subexpression$1"],postprocess:r},{name:"time$ebnf$2",symbols:[],postprocess:()=>null},{name:"time",symbols:["uint",s.lexerAny.has("colon")?{type:"colon"}:colon,"uint","time$ebnf$1","time$ebnf$2"],postprocess:([m,b,y,t,_])=>{t=t&&t[1],_=_&&_[1];const $=typeof t=="number"?[["hours",m],["minutes",y],["seconds",t]]:[["minutes",m],["seconds",y]];return _&&$.push(["milliseconds",parseFloat("0."+_)*1e3]),$}}],ParserStart:"main"};a.default=n},function(i,a,c){Object.defineProperty(a,"__esModule",{value:!0}),a.lexerAny=a.lexer=void 0;const r=c(0);a.lexer=(0,r.compile)({int:/\d+/,neg:"-",dot:".",years:/(?:y|yrs?|years?)\b/,months:/(?:mon(?:th)?s?)\b/,days:/(?:d|days?)\b/,hours:/(?:h|hrs?|hours?)\b/,minutes:/(?:m|mins?|minutes?)\b/,seconds:/(?:s|secs?|seconds?)\b/,milliseconds:/(?:ms|milliseconds?)\b/,space:{match:/[\s\t\n\v\f\r]+/,lineBreaks:!0},colon:":"}),a.lexer.next=(s=>()=>{let n;for(;(n=s.call(a.lexer))&&n.type==="space";);return n})(a.lexer.next),a.lexerAny=a.lexer},function(i,a,c){Object.defineProperty(a,"__esModule",{value:!0});function r(m){return m[0]}const s=c(18),n={Lexer:s.lexerAny,ParserRules:[{name:"num",symbols:[s.lexerAny.has("int")?{type:"int"}:int]},{name:"num",symbols:[s.lexerAny.has("float")?{type:"float"}:float]},{name:"main$ebnf$1",symbols:[]},{name:"main$ebnf$1",symbols:["main$ebnf$1","long"],postprocess:m=>m[0].concat([m[1]])},{name:"main$ebnf$2$subexpression$1$ebnf$1",symbols:["short"]},{name:"main$ebnf$2$subexpression$1$ebnf$1",symbols:["main$ebnf$2$subexpression$1$ebnf$1","short"],postprocess:m=>m[0].concat([m[1]])},{name:"main$ebnf$2$subexpression$1",symbols:[s.lexerAny.has("T")?{type:"T"}:T,"main$ebnf$2$subexpression$1$ebnf$1"]},{name:"main$ebnf$2",symbols:["main$ebnf$2$subexpression$1"],postprocess:r},{name:"main$ebnf$2",symbols:[],postprocess:()=>null},{name:"main",symbols:[s.lexerAny.has("P")?{type:"P"}:P,"main$ebnf$1","main$ebnf$2"],postprocess:([m,b,y],t)=>(y=y?y[1]:[],!b.length&&!y.length?t:b.length?y.length?[...b,...y]:b:y)},{name:"long$subexpression$1",symbols:[s.lexerAny.has("Y")?{type:"Y"}:Y]},{name:"long$subexpression$1",symbols:[s.lexerAny.has("M")?{type:"M"}:M]},{name:"long$subexpression$1",symbols:[s.lexerAny.has("W")?{type:"W"}:W]},{name:"long$subexpression$1",symbols:[s.lexerAny.has("D")?{type:"D"}:D]},{name:"long",symbols:["num","long$subexpression$1"],postprocess:([m,b])=>{switch(m=parseFloat(m[0].value),b=b[0].type,b){case"Y":return["years",m];case"M":return["months",m];case"W":return["days",m*7];case"D":return["days",m];default:throw new Error("Unexpected unit "+b)}}},{name:"short$ebnf$1",symbols:[s.lexerAny.has("T")?{type:"T"}:T],postprocess:r},{name:"short$ebnf$1",symbols:[],postprocess:()=>null},{name:"short$subexpression$1",symbols:[s.lexerAny.has("H")?{type:"H"}:H]},{name:"short$subexpression$1",symbols:[s.lexerAny.has("M")?{type:"M"}:M]},{name:"short$subexpression$1",symbols:[s.lexerAny.has("S")?{type:"S"}:S]},{name:"short",symbols:["short$ebnf$1","num","short$subexpression$1"],postprocess:([m,b,y])=>{switch(b=parseFloat(b[0].value),y=y[0].type,y){case"H":return["hours",b];case"M":return["minutes",b];case"S":return["seconds",b];default:throw new Error("Unexpected unit "+y)}}}],ParserStart:"num"};a.default=n},function(i,a,c){Object.defineProperty(a,"__esModule",{value:!0}),a.lexerAny=a.lexer=void 0;const r=c(0);a.lexer=(0,r.compile)({int:/\-?\d+(?![\.\d])/,float:/\-?(?:(?:\d*\.\d+)|(?:\d+\.\d*))/,P:"P",Y:"Y",M:"M",W:"W",D:"D",H:"H",S:"S",T:"T"}),a.lexerAny=a.lexer},function(i,a,c){Object.defineProperty(a,"__esModule",{value:!0}),a.toSql=void 0;const r=c(2),s=c(5),n=c(6),m=c(20),b=c(3),y=new Set(b.sqlKeywords.map(u=>u.toLowerCase()));let t=[];function _(u){return $(u.name)}function $(u,l){if(!l){const d=u.toLowerCase();if(d===u&&!y.has(d)&&/^[a-z][a-z0-9_]*$/.test(d))return u}return'"'+u+'"'}function p(u,l,d){d&&t.push("(");let g=!0;for(const E of u)g||t.push(", "),g=!1,l(E);d&&t.push(")")}function f(u,l){switch(u.type){case"foreign key":t.push(" foreign key (",...u.localColumns.map(_).join(", "),")");case"reference":t.push(" REFERENCES "),l.tableRef(u.foreignTable),t.push("(",...u.foreignColumns.map(_).join(", "),") "),u.match&&t.push(" MATCH ",u.match.toUpperCase()),u.onDelete&&t.push(" ON DELETE ",u.onDelete),u.onUpdate&&t.push(" ON UPDATE ",u.onUpdate);break;case"primary key":case"unique":t.push(" ",u.type," "),"columns"in u&&t.push("(",...u.columns.map(_).join(", "),") ");break;case"check":t.push(" check "),l.expr(u.expr);break;case"not null":case"null":t.push(" ",u.type," ");break;case"default":t.push(" default "),l.expr(u.default);break;case"add generated":t.push(" GENERATED "),N(l,u);break;default:throw n.NotSupported.never(u)}t.push(" ")}function w(u,l){u.schema&&t.push($(u.schema),"."),t.push($(u.name,l)," ")}function x(u){w(u),u.alias&&t.push(" AS ",$(u.alias)," ")}function v(u,l){t.push(" ORDER BY "),p(l,d=>{u.expr(d.by),d.order&&t.push(" ",d.order," "),d.nulls&&t.push(" NULLS ",d.nulls," ")},!1)}function A(u){switch(u.type){case"default":t.push("DEFAULT ");break;case"identifier":t.push(u.name);break;case"list":let l=!0;for(const d of u.values)l||t.push(", "),l=!1,A(d);break;case"value":t.push(typeof u.value=="number"?u.value.toString():(0,m.literal)(u.value));break;default:throw n.NotSupported.never(u)}}function N(u,l){l.always&&t.push(l.always.toUpperCase()," "),t.push("AS IDENTITY "),l.sequence&&(t.push("("),l.sequence.name&&(t.push("SEQUENCE NAME "),w(l.sequence.name),t.push(" ")),h(u,l.sequence),t.push(") "))}function h(u,l){l.as&&(t.push("AS "),u.dataType(l.as),t.push(" ")),typeof l.incrementBy=="number"&&t.push("INCREMENT BY ",l.incrementBy.toString()," "),l.minValue==="no minvalue"&&t.push("NO MINVALUE "),typeof l.minValue=="number"&&t.push("MINVALUE ",l.minValue.toString()," "),l.maxValue==="no maxvalue"&&t.push("NO MAXVALUE "),typeof l.maxValue=="number"&&t.push("MAXVALUE ",l.maxValue.toString()," "),typeof l.startWith=="number"&&t.push("START WITH ",l.startWith.toString()," "),typeof l.cache=="number"&&t.push("CACHE ",l.cache.toString()," "),l.cycle&&t.push(l.cycle," "),l.ownedBy==="none"?t.push("OWNED BY NONE "):l.ownedBy&&(t.push("OWNED BY "),k(l.ownedBy)),"restart"in l&&(l.restart===!0?t.push("RESTART "):l.restart&&t.push("RESTART WITH ",l.restart.toString()," "))}function k(u){u.schema&&t.push($(u.schema),"."),t.push($(u.table),".",$(u.column)," ")}function O(u,l,d){if(!l){d();return}t.push(l.type," "),d(),l.on&&(t.push("ON "),u.expr(l.on)),l.using&&(t.push("USING ("),p(l.using,g=>t.push(_(g)),!1),t.push(") ")),t.push(" ")}function C(u){u.opSchema?t.push(" operator(",$(u.opSchema),".",u.op,") "):t.push(" ",u.op," ")}const q=(0,s.astVisitor)(u=>({addColumn:(...l)=>{t.push(" ADD COLUMN "),l[0].ifNotExists&&t.push("IF NOT EXISTS "),u.super().addColumn(...l)},createExtension:l=>{t.push("CREATE EXTENSION "),l.ifNotExists&&t.push(" IF NOT EXISTS "),t.push(_(l.extension)),!(!l.from&&!l.version&&!l.schema)&&(t.push(" WITH"),l.schema&&t.push(" SCHEMA ",_(l.schema)),l.version&&t.push(" VERSION ",(0,m.literal)(l.version.value)),l.from&&t.push(" FROM ",(0,m.literal)(l.from.value)))},tablespace:l=>{t.push("TABLESPACE ",_(l.tablespace))},addConstraint:l=>{t.push(" ADD ");const d=l.constraint.constraintName;d&&t.push(" CONSTRAINT ",_(d)," "),f(l.constraint,u)},alterColumn:(l,d)=>{t.push(" ALTER COLUMN ",_(l.column)," "),u.super().alterColumn(l,d)},setColumnDefault:(l,d,g)=>{if(t.push(" SET DEFAULT "),u.expr(l.default),l.updateExisting)throw new Error("Not implemented: updateExisting on set column default")},createEnum:l=>{t.push("CREATE TYPE "),w(l.name),t.push(" AS ENUM "),p(l.values,d=>t.push((0,m.literal)(d.value)),!0),t.push(" ")},createCompositeType:l=>{t.push("CREATE TYPE "),w(l.name),t.push(" AS "),p(l.attributes,d=>{t.push(_(d.name)," "),u.dataType(d.dataType),d.collate&&(t.push("COLLATE "),w(d.collate))},!0),t.push(" ")},setTableOwner:l=>{t.push(" OWNER TO ",_(l.to))},alterColumnSimple:l=>t.push(l.type),alterColumnAddGenerated:l=>{t.push(" ADD GENERATED "),N(u,l)},setColumnType:l=>{t.push(" SET DATA TYPE "),u.dataType(l.dataType),t.push(" ")},alterTable:l=>{t.push("ALTER TABLE "),l.ifExists&&t.push(" IF EXISTS "),l.only&&t.push(" ONLY "),x(l.table),p(l.changes,d=>u.tableAlteration(d,l.table),!1)},alterIndex:l=>{switch(t.push("ALTER INDEX "),l.ifExists&&t.push(" IF EXISTS "),x(l.index),l.change.type){case"rename":t.push(" RENAME TO "),w(l.change.to),t.push(" ");break;case"set tablespace":t.push(" SET TABLESPACE "),w(l.change.tablespace),t.push(" ");break;default:throw n.NotSupported.never(l.change,"Alter index type not supported: ")}},tableAlteration:(l,d)=>{switch(l.type){case"add column":return u.addColumn(l,d);case"add constraint":return u.addConstraint(l,d);case"alter column":return u.alterColumn(l,d);case"rename":return u.renameTable(l,d);case"rename column":return u.renameColumn(l,d);case"rename constraint":return u.renameConstraint(l,d);case"drop column":return u.dropColumn(l,d);case"drop constraint":return u.dropConstraint(l,d);case"owner":return u.setTableOwner(l,d);default:throw n.NotSupported.never(l)}},array:l=>{t.push(l.type==="array"?"ARRAY[":"("),p(l.expressions,d=>u.expr(d),!1),t.push(l.type==="array"?"]":")")},arrayIndex:l=>{u.expr(l.array),t.push("["),u.expr(l.index),t.push("] ")},expr:l=>{if(l.type==="ref"){u.ref(l);return}if(l.type==="list"){u.super().expr(l);return}t.push("("),u.super().expr(l),t.push(")")},callOverlay:l=>{t.push("OVERLAY("),u.expr(l.value),t.push(" PLACING "),u.expr(l.placing),t.push(" FROM "),u.expr(l.from),l.for&&(t.push(" FOR "),u.expr(l.for)),t.push(")")},callSubstring:l=>{t.push("SUBSTRING("),u.expr(l.value),l.from&&(t.push(" FROM "),u.expr(l.from)),l.for&&(t.push(" FOR "),u.expr(l.for)),t.push(")")},binary:l=>{u.expr(l.left),C(l),u.expr(l.right)},call:l=>{w(l.function),t.push("("),l.distinct&&t.push(l.distinct," "),p(l.args,d=>u.expr(d),!1),l.orderBy&&v(u,l.orderBy),t.push(") "),l.filter&&(t.push("filter (where "),u.expr(l.filter),t.push(") ")),l.over&&(t.push("over ("),l.over.partitionBy&&(t.push("PARTITION BY "),p(l.over.partitionBy,d=>u.expr(d),!1),t.push(" ")),l.over.orderBy&&(v(u,l.over.orderBy),t.push(" ")),t.push(") "))},case:l=>{t.push("CASE "),l.value&&u.expr(l.value);for(const d of l.whens)t.push(" WHEN "),u.expr(d.when),t.push(" THEN "),u.expr(d.value);l.else&&(t.push(" ELSE "),u.expr(l.else)),t.push(" END ")},cast:l=>{u.expr(l.operand),t.push("::"),u.dataType(l.to)},constant:l=>{switch(l.type){case"boolean":t.push(l.value?"true":"false");break;case"integer":t.push(l.value.toString(10));break;case"numeric":t.push(l.value.toString()),Number.isInteger(l.value)&&t.push(".");break;case"null":t.push("null");break;case"constant":break;case"string":t.push((0,m.literal)(l.value));break;default:throw n.NotSupported.never(l)}},valueKeyword:l=>{t.push(l.keyword," ")},comment:l=>{switch(t.push("COMMENT ON ",l.on.type.toUpperCase()," "),l.on.type){case"column":k(l.on.column);break;default:w(l.on.name);break}t.push(" IS ",(0,m.literal)(l.comment)," ")},extract:l=>{t.push("EXTRACT (",l.field.name.toUpperCase()," FROM "),u.expr(l.from),t.push(") ")},createColumn:l=>{var d;t.push(_(l.name)," "),u.dataType(l.dataType),t.push(" "),l.collate&&(t.push("COLLATE "),w(l.collate));for(const g of(d=l.constraints)!==null&&d!==void 0?d:[])u.constraint(g)},begin:l=>{t.push("BEGIN "),l.isolationLevel&&t.push("ISOLATION LEVEL ",l.isolationLevel.toUpperCase()," "),l.writeable&&t.push(l.writeable.toUpperCase()," "),typeof l.deferrable=="boolean"&&(l.deferrable||t.push("NOT "),t.push("DEFERRABLE "))},alterSequence:l=>{switch(t.push("ALTER SEQUENCE "),l.ifExists&&t.push("IF EXISTS "),w(l.name),l.change.type){case"set options":h(u,l.change);break;case"rename":t.push("RENAME TO ",_(l.change.newName)," ");break;case"set schema":t.push("SET SCHEMA ",_(l.change.newSchema)," ");break;case"owner to":l.change.owner,t.push("OWNER TO ",_(l.change.owner)," ");break;default:throw n.NotSupported.never(l.change)}},createSequence:l=>{t.push("CREATE "),l.temp&&t.push("TEMPORARY "),t.push("SEQUENCE "),l.ifNotExists&&t.push("IF NOT EXISTS "),w(l.name),h(u,l.options)},drop:l=>{t.push(l.type.toUpperCase()," "),l.concurrently&&t.push("CONCURRENTLY "),l.ifExists&&t.push("IF EXISTS "),p(l.names,d=>u.tableRef(d),!1),l.cascade&&t.push(l.cascade.toUpperCase()," ")},constraint:l=>{l.constraintName&&t.push(" CONSTRAINT ",_(l.constraintName)," "),f(l,u)},do:l=>{t.push("DO"),l.language&&t.push(" LANGUAGE ",l.language.name),t.push(" $$",l.code,"$$")},createFunction:l=>{var d;if(t.push(l.orReplace?"CREATE OR REPLACE FUNCTION ":"CREATE FUNCTION "),w(l.name),p(l.arguments,g=>{g.mode&&t.push(g.mode," "),g.name&&t.push(_(g.name)," "),u.dataType(g.type),g.default&&(t.push(" = "),u.expr(g.default))},!0),l.returns)switch(l.returns.kind){case"table":t.push(" RETURNS TABLE "),p(l.returns.columns,g=>{t.push(_(g.name)," "),u.dataType(g.type)},!0);break;case void 0:case null:case"array":t.push(" RETURNS "),u.dataType(l.returns);break;default:throw n.NotSupported.never(l.returns)}switch(t.push(" AS $$",(d=l.code)!==null&&d!==void 0?d:"","$$"),l.language&&t.push("LANGUAGE ",l.language.name," "),l.purity&&t.push(l.purity.toUpperCase()," "),typeof l.leakproof=="boolean"&&t.push(l.leakproof?"LEAKPROOF ":"NOT LEAKPROOF "),l.onNullInput){case"call":t.push("CALLED ON NULL INPUT ");break;case"null":t.push("RETURNS NULL ON NULL INPUT ");break;case"strict":t.push("STRICT ");break;case null:case void 0:break;default:throw n.NotSupported.never(l.onNullInput)}},dropFunction:l=>{t.push("DROP FUNCTION "),l.ifExists&&t.push("IF EXISTS "),w(l.name),l.arguments&&p(l.arguments,d=>{d.name&&(w(d.name),t.push(" ")),u.dataType(d.type)},!0),t.push(" ")},with:l=>{t.push("WITH "),p(l.bind,d=>{t.push(_(d.alias)," AS ("),u.statement(d.statement),t.push(") ")},!1),u.statement(l.in)},withRecursive:l=>{t.push("WITH RECURSIVE ",_(l.alias),"(",...l.columnNames.map(_).join(", "),") AS ("),u.union(l.bind),t.push(") "),u.statement(l.in)},setGlobal:l=>{t.push("SET ",_(l.variable)," = "),A(l.set)},setTimezone:l=>{switch(t.push("SET TIME ZONE "),l.to.type){case"default":case"local":t.push(l.to.type.toUpperCase()," ");break;case"value":t.push(typeof l.to.value=="string"?(0,m.literal)(l.to.value):l.to.value.toString(10));break;case"interval":t.push("INTERVAL ",(0,m.literal)(l.to.value)," HOUR TO MINUTE");break;default:throw n.NotSupported.never(l.to)}},dataType:l=>{var d,g;if((l==null?void 0:l.kind)==="array"){u.dataType(l.arrayOf),t.push("[]");return}if(!(l!=null&&l.name)){t.push("unkown");return}let E=!0;if(l.schema)w(l,l.doubleQuoted);else if(l.doubleQuoted)w(l,!0);else switch(l.name){case"double precision":case"character varying":case"bit varying":t.push(l.name," ");break;case"time without time zone":case"timestamp without time zone":case"time with time zone":case"timestamp with time zone":const R=l.name.split(" ");t.push(R.shift()),!((d=l.config)===null||d===void 0)&&d.length&&p(l.config,L=>t.push(L.toString(10)),!0),t.push(" "),t.push(R.join(" ")," "),E=!1;break;default:w(l);break}E&&(!((g=l.config)===null||g===void 0)&&g.length)&&p(l.config,R=>t.push(R.toString(10)),!0)},createIndex:l=>{t.push(l.unique?"CREATE UNIQUE INDEX ":"CREATE INDEX "),l.ifNotExists&&t.push(" IF NOT EXISTS "),l.indexName&&t.push(_(l.indexName)," "),t.push("ON "),u.tableRef(l.table),l.using&&t.push("USING ",_(l.using)," "),p(l.expressions,d=>{u.expr(d.expression),t.push(" "),d.collate&&(t.push("COLLATE "),w(d.collate)),d.opclass&&w(d.opclass),d.order&&t.push(d.order," "),d.nulls&&t.push("nulls ",d.nulls," ")},!0),l.with&&(t.push("WITH "),p(l.with,d=>{t.push(d.parameter," = ",(0,m.literal)(d.value))},!0)),l.tablespace&&t.push("TABLESPACE ",$(l.tablespace)),l.where&&(t.push(" WHERE "),u.expr(l.where)),t.push(" ")},createTable:l=>{var d;t.push("CREATE "),l.locality&&t.push(l.locality.toUpperCase()," "),l.temporary&&t.push("TEMPORARY "),l.unlogged&&t.push("UNLOGGED "),t.push(l.ifNotExists?"TABLE IF NOT EXISTS ":"TABLE "),u.tableRef(l.name),t.push("("),p(l.columns,g=>{switch(g.kind){case"column":return u.createColumn(g);case"like table":return u.likeTable(g);default:throw n.NotSupported.never(g)}},!1),l.constraints&&(t.push(", "),p(l.constraints,g=>{const E=g.constraintName;E&&t.push("CONSTRAINT ",_(E)," "),f(g,u)},!1)),t.push(") "),!((d=l.inherits)===null||d===void 0)&&d.length&&(t.push(" INHERITS "),p(l.inherits,g=>w(g),!0))},likeTable:l=>{t.push(" LIKE "),u.tableRef(l.like),t.push(" ");for(const{verb:d,option:g}of l.options)t.push(d.toUpperCase()," ",g.toUpperCase()," ")},createSchema:l=>{t.push(l.ifNotExists?"CREATE SCHEMA IF NOT EXISTS ":"CREATE SCHEMA "),t.push(_(l.name))},truncateTable:l=>{t.push("TRUNCATE TABLE ");let d=!0;for(const g of l.tables)d||t.push(", "),d=!1,u.tableRef(g);if(l.identity)switch(l.identity){case"restart":t.push(" RESTART IDENTITY ");break;case"continue":t.push(" CONTINUE IDENTITY ");break}l.cascade&&t.push(" ",l.cascade," ")},delete:l=>{t.push("DELETE FROM "),u.tableRef(l.from),l.where&&(t.push(" WHERE "),u.expr(l.where)),l.returning&&(t.push(" RETURNING "),p(l.returning,d=>u.selectionColumn(d),!1)),t.push(" ")},dropColumn:l=>{t.push(" DROP COLUMN "),l.ifExists&&t.push(" IF EXISTS "),t.push(_(l.column)),l.behaviour&&t.push(" ",l.behaviour),t.push(" ")},dropConstraint:l=>{t.push(" DROP CONSTRAINT "),l.ifExists&&t.push(" IF EXISTS "),t.push(_(l.constraint)),l.behaviour&&t.push(" ",l.behaviour.toUpperCase()," ")},from:l=>u.super().from(l),fromCall:l=>{O(u,l.join,()=>{var d,g;if(u.call(l),l.withOrdinality&&t.push(" WITH ORDINALITY"),l.alias){t.push(" AS ",_(l.alias)," ");const E=(g=(d=l.alias.columns)===null||d===void 0?void 0:d.length)!==null&&g!==void 0?g:0;if(E>0){t.push("(");for(let R=0;R<E;++R)R!==0&&t.push(", "),t.push(_(l.alias.columns[R]));t.push(")")}}}),t.push(" ")},fromStatement:l=>{O(u,l.join,()=>{t.push("("),u.select(l.statement),t.push(") "),l.alias&&(t.push(" AS ",$(l.alias)),l.columnNames&&p(l.columnNames,d=>t.push(_(d)),!0),t.push(" "))}),t.push(" ")},values:l=>{t.push("VALUES "),p(l.values,d=>{p(d,g=>{u.expr(g)},!0)},!1)},fromTable:l=>{O(u,l.join,()=>{if(u.tableRef(l.name),l.name.columnNames){if(!l.name.alias)throw new Error("Cannot specify aliased column names without an alias");p(l.name.columnNames,d=>t.push(_(d)),!0)}})},join:l=>{throw new Error("Should not happen 💀")},insert:l=>{if(t.push("INSERT INTO "),u.tableRef(l.into),l.columns&&t.push("(",l.columns.map(_).join(", "),")"),t.push(" "),l.overriding&&t.push("OVERRIDING ",l.overriding.toUpperCase()," VALUE "),u.select(l.insert),t.push(" "),l.onConflict){t.push("ON CONFLICT ");const d=l.onConflict.on;switch(d==null?void 0:d.type){case"on expr":p(d.exprs,g=>u.expr(g),!0);break;case"on constraint":t.push("ON CONSTRAINT "),w(d.constraint);case null:case void 0:break;default:throw n.NotSupported.never(d)}l.onConflict.do==="do nothing"?t.push(" DO NOTHING"):(t.push(" DO UPDATE SET "),p(l.onConflict.do.sets,g=>u.set(g),!1),l.onConflict.where&&(t.push(" WHERE "),u.expr(l.onConflict.where))),t.push(" ")}l.returning&&(t.push(" RETURNING "),p(l.returning,d=>u.selectionColumn(d),!1))},raise:l=>{var d,g;t.push("RAISE "),l.level&&t.push(l.level.toUpperCase()," "),t.push((0,m.literal)(l.format)," "),!((d=l.formatExprs)===null||d===void 0)&&d.length&&(t.push(", "),p(l.formatExprs,E=>u.expr(E),!1)),!((g=l.using)===null||g===void 0)&&g.length&&(t.push(" USING "),p(l.using,({type:E,value:R})=>{t.push(E.toUpperCase(),"="),u.expr(R)},!1)),t.push(" ")},default:()=>{t.push(" DEFAULT ")},member:l=>{u.expr(l.operand),t.push(l.op),t.push(typeof l.member=="number"?l.member.toString(10):(0,m.literal)(l.member))},ref:l=>{l.table&&(w(l.table),t.push(".")),t.push(l.name==="*"?"*":$(l.name))},parameter:l=>{t.push(l.name)},renameColumn:l=>{t.push(" RENAME COLUMN ",_(l.column)," TO ",_(l.to))},renameConstraint:l=>{t.push(" RENAME CONSTRAINT ",_(l.constraint)," TO ",_(l.to))},renameTable:l=>{t.push(" RENAME TO ",_(l.to))},createView:l=>{t.push("CREATE "),l.orReplace&&t.push("OR REPLACE "),l.temp&&t.push("TEMP "),l.recursive&&t.push("RECURSIVE "),t.push("VIEW "),u.tableRef(l.name),l.columnNames&&p(l.columnNames,g=>t.push(_(g)),!0);const d=l.parameters&&Object.entries(l.parameters);d!=null&&d.length&&(t.push(" WITH "),p(d,([g,E])=>t.push(g,"=",E),!1)),t.push(" AS "),u.select(l.query),l.checkOption&&t.push(" WITH ",l.checkOption.toUpperCase()," CHECK OPTION")},createMaterializedView:l=>{t.push("CREATE MATERIALIZED VIEW "),l.ifNotExists&&t.push("IF NOT EXISTS "),u.tableRef(l.name),l.columnNames&&p(l.columnNames,g=>t.push(_(g)),!0);const d=l.parameters&&Object.entries(l.parameters);d!=null&&d.length&&(t.push(" WITH "),p(d,([g,E])=>t.push(g,"=",E),!1)),l.tablespace&&t.push(" TABLESPACE ",_(l.tablespace)),t.push(" AS "),u.select(l.query),typeof l.withData=="boolean"&&t.push(l.withData?" WITH DATA":" WITH NO DATA")},refreshMaterializedView:l=>{t.push("REFRESH MATERIALIZED VIEW "),l.concurrently&&t.push("CONCURRENTLY "),u.tableRef(l.name),typeof l.withData=="boolean"&&t.push(l.withData?" WITH DATA":" WITH NO DATA")},select:l=>u.super().select(l),selection:l=>{if(t.push("SELECT "),l.distinct&&(typeof l.distinct=="string"?t.push(l.distinct.toUpperCase()):(t.push(" DISTINCT ON "),p(l.distinct,d=>u.expr(d),!0)),t.push(" ")),l.columns&&p(l.columns,d=>u.selectionColumn(d),!1),t.push(" "),l.from){t.push("FROM ");const d=l.from.length;for(let g=0;g<d;g++){const E=l.from[g];g>0&&!E.join&&t.push(","),u.from(E)}t.push(" ")}l.where&&(t.push("WHERE "),u.expr(l.where),t.push(" ")),l.groupBy&&(t.push("GROUP BY "),p(l.groupBy,d=>u.expr(d),!1),t.push(" "),l.having&&(t.push(" HAVING "),u.expr(l.having),t.push(" "))),l.orderBy&&(v(u,l.orderBy),t.push(" ")),l.limit&&(l.limit.offset&&(t.push("OFFSET "),u.expr(l.limit.offset)),l.limit.limit&&(t.push("LIMIT "),u.expr(l.limit.limit))),l.for&&(t.push("FOR ",l.for.type.toUpperCase()),l.skip&&t.push(" ",l.skip.type.toUpperCase()))},show:l=>{t.push("SHOW ",_(l.variable))},prepare:l=>{var d;t.push("PREPARE ",_(l.name)),!((d=l.args)===null||d===void 0)&&d.length&&p(l.args,g=>u.dataType(g),!0),t.push(" AS "),u.statement(l.statement)},deallocate:l=>{if(t.push("DEALLOCATE "),"name"in l.target){t.push(l.target.name);return}t.push("ALL")},arraySelect:l=>{t.push("array("),u.select(l.select),t.push(")")},union:l=>{t.push("("),u.statement(l.left),t.push(") ",l.type.toUpperCase()," "),l.right.type==="union"||l.right.type==="union all"?u.union(l.right):(t.push("("),u.statement(l.right),t.push(")"))},selectionColumn:l=>{u.expr(l.expr),l.alias&&t.push(" AS ",_(l.alias)),t.push(" ")},set:l=>{t.push(_(l.column)," = "),u.expr(l.value),t.push(" ")},statement:l=>u.super().statement(l),tableRef:l=>{w(l),l.alias&&t.push(" AS ",$(l.alias)),t.push(" ")},ternary:l=>{u.expr(l.value),t.push(" ",l.op," "),u.expr(l.lo),t.push(" AND "),u.expr(l.hi),t.push(" ")},transaction:l=>{t.push(l.type)},unary:l=>{switch(l.op){case"+":case"-":C(l),u.expr(l.operand);break;case"NOT":t.push(l.op),t.push(" "),u.expr(l.operand);break;default:u.expr(l.operand),t.push(" "),t.push(l.op)}},update:l=>{t.push("UPDATE "),u.tableRef(l.table),t.push(" SET "),p(l.sets,d=>u.set(d),!1),t.push(" "),l.from&&(t.push("FROM "),u.from(l.from),t.push(" ")),l.where&&(t.push("WHERE "),u.expr(l.where),t.push(" ")),l.returning&&(t.push(" RETURNING "),p(l.returning,d=>u.selectionColumn(d),!1),t.push(" "))}}));a.toSql={};const e=r.AstDefaultMapper.prototype;for(const u of Object.getOwnPropertyNames(e)){const l=e[u];u==="constructor"||u==="super"||typeof l!="function"||(a.toSql[u]=function(...d){try{return q[u].apply(q,d),t.join("").trim()}finally{t=[]}})}},function(i,a,c){Object.defineProperty(a,"__esModule",{value:!0}),a.literal=void 0;function r(s){if(s==null)return"NULL";if(Array.isArray(s)){var n=s.map(r);return"("+n.join(", ")+")"}var m=~s.indexOf("\\"),b=m?"E":"";return s=s.replace(/'/g,"''"),s=s.replace(/\\/g,"\\\\"),b+"'"+s+"'"}a.literal=r},function(i,a,c){Object.defineProperty(a,"__esModule",{value:!0}),a.locationOf=void 0;function r(s){const n=s._location;if(!n)throw new Error("This statement has not been parsed using location tracking (which has a small performance hit). ");return n}a.locationOf=r}]))})(Pe);function et(o){return Pe.parse(o,"expr")}const pr=new Set(["any_value","arg_max","max_by","arg_min","argMin","min_by","avg","mean","bit_and","bit_or","bit_xor","bitstring_agg","bool_and","bool_or","count","favg","first","arbitrary","fsum","kahan_sum","geomean","geometric_mean","histogram","last","list","array_agg","max","min","product","string_agg","group_concat","listagg","sum","approx_count_distinct","approx_quantile","reservoir_quantile","corr","covar_pop","covar_samp","entropy","kurtosis","mad","median","mode","quantile_cont","quantile_disc","quantile","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","skewness","stddev_pop","stddev_samp","stddev","var_pop","var_samp","variance"]);function mr(o,i){const a=new Map;i.forEach(r=>{a.set(r.name??r.fid,r)});const c=r=>{switch(r.type){case"integer":case"numeric":return["quantitative",!1];case"null":case"string":case"boolean":return["nominal",!1];case"unary":const[s,n]=c(r.operand);switch(r.op){case"+":case"-":return["quantitative",n];default:return["nominal",n]}case"ref":{const m=a.get(r.name);return m?[m.semanticType,!1]:["nominal",!1]}case"case":return r.else?c(r.else):c(r.whens[0].value);case"array":case"list":return r.expressions.length?c(r.expressions[0]):["nominal",!1];case"binary":return c(r.left);case"call":{if(r.function.name==="count")return["quantitative",!0];const[m]=c(r.args[0]);return[m,pr.has(r.function.name.toLowerCase())]}case"cast":{const[m,b]=c(r.operand);if("name"in r.to)switch(r.to.name.toLowerCase()){case"date":case"timestamp":case"timestamp with time zone":case"time":case"time with time zone":case"interval":return["temporal",b];case"smallint":case"integer":case"bigint":case"decimal":case"numeric":case"real":case"double precision":case"smallserial":case"serial":case"bigserial":return["quantitative",b]}return["nominal",b]}default:return["nominal",!1]}};return c(o)}function ur(o,i){const a=new Map;i.forEach(s=>{a.set((s.name??s.fid).toLowerCase(),s)});const c=et(o),r=Pe.astMapper(()=>({ref:s=>{var n;return Pe.assignChanged(s,{name:((n=a.get(s.name.toLowerCase()))==null?void 0:n.fid)||s.name})}}));return Pe.toSql.expr(r.expr(c))}function V(o){for(var i=arguments.length,a=Array(i>1?i-1:0),c=1;c<i;c++)a[c-1]=arguments[c];{var r=wr[o],s=r?typeof r=="function"?r.apply(null,a):r:"unknown error nr: "+o;throw Error("[Immer] "+s)}}function Te(o){return!!o&&!!o[Z]}function ve(o){var i;return!!o&&(function(a){if(!a||typeof a!="object")return!1;var c=Object.getPrototypeOf(a);if(c===null)return!0;var r=Object.hasOwnProperty.call(c,"constructor")&&c.constructor;return r===Object||typeof r=="function"&&Function.toString.call(r)===xr}(o)||Array.isArray(o)||!!o[pt]||!!(!((i=o.constructor)===null||i===void 0)&&i[pt])||as(o)||os(o))}function je(o,i,a){a===void 0&&(a=!1),Ne(o)===0?(a?Object.keys:ds)(o).forEach(function(c){a&&typeof c=="symbol"||i(c,o[c],o)}):o.forEach(function(c,r){return i(r,c,o)})}function Ne(o){var i=o[Z];return i?i.i>3?i.i-4:i.i:Array.isArray(o)?1:as(o)?2:os(o)?3:0}function ns(o,i){return Ne(o)===2?o.has(i):Object.prototype.hasOwnProperty.call(o,i)}function _r(o,i){return Ne(o)===2?o.get(i):o[i]}function st(o,i,a){var c=Ne(o);c===2?o.set(i,a):c===3?o.add(a):o[i]=a}function $r(o,i){return o===i?o!==0||1/o==1/i:o!=o&&i!=i}function as(o){return dr&&o instanceof Map}function os(o){return hr&&o instanceof Set}function Ae(o){return o.o||o.t}function ls(o){if(Array.isArray(o))return Array.prototype.slice.call(o);var i=kr(o);delete i[Z];for(var a=ds(i),c=0;c<a.length;c++){var r=a[c],s=i[r];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(i[r]={configurable:!0,writable:!0,enumerable:s.enumerable,value:o[r]})}return Object.create(Object.getPrototypeOf(o),i)}function is(o,i){return i===void 0&&(i=!1),cs(o)||Te(o)||!ve(o)||(Ne(o)>1&&(o.set=o.add=o.clear=o.delete=br),Object.freeze(o),i&&je(o,function(a,c){return is(c,!0)},!0)),o}function br(){V(2)}function cs(o){return o==null||typeof o!="object"||Object.isFrozen(o)}function ce(o){var i=gr[o];return i||V(18,o),i}function tt(){return Ce||V(0),Ce}function ps(o,i){i&&(ce("Patches"),o.u=[],o.s=[],o.v=i)}function Je(o){ms(o),o.p.forEach(fr),o.p=null}function ms(o){o===Ce&&(Ce=o.l)}function rt(o){return Ce={p:[],l:Ce,h:o,m:!0,_:0}}function fr(o){var i=o[Z];i.i===0||i.i===1?i.j():i.g=!0}function us(o,i){i._=i.p.length;var a=i.p[0],c=o!==void 0&&o!==a;return i.h.O||ce("ES5").S(i,o,c),c?(a[Z].P&&(Je(i),V(4)),ve(o)&&(o=Qe(i,o),i.l||Xe(i,o)),i.u&&ce("Patches").M(a[Z].t,o,i.u,i.s)):o=Qe(i,a,[]),Je(i),i.u&&i.v(i.u,i.s),o!==ct?o:void 0}function Qe(o,i,a){if(cs(i))return i;var c=i[Z];if(!c)return je(i,function(m,b){return nt(o,c,i,m,b,a)},!0),i;if(c.A!==o)return i;if(!c.P)return Xe(o,c.t,!0),c.t;if(!c.I){c.I=!0,c.A._--;var r=c.i===4||c.i===5?c.o=ls(c.k):c.o,s=r,n=!1;c.i===3&&(s=new Set(r),r.clear(),n=!0),je(s,function(m,b){return nt(o,c,r,m,b,a,n)}),Xe(o,r,!1),a&&o.u&&ce("Patches").N(c,a,o.u,o.s)}return c.o}function nt(o,i,a,c,r,s,n){if(r===a&&V(5),Te(r)){var m=Qe(o,r,s&&i&&i.i!==3&&!ns(i.R,c)?s.concat(c):void 0);if(st(a,c,m),!Te(m))return;o.m=!1}else n&&a.add(r);if(ve(r)&&!cs(r)){if(!o.h.D&&o._<1)return;Qe(o,r),i&&i.A.l||Xe(o,r)}}function Xe(o,i,a){a===void 0&&(a=!1),!o.l&&o.h.D&&o.m&&is(i,a)}function _s(o,i){var a=o[Z];return(a?Ae(a):o)[i]}function at(o,i){if(i in o)for(var a=Object.getPrototypeOf(o);a;){var c=Object.getOwnPropertyDescriptor(a,i);if(c)return c;a=Object.getPrototypeOf(a)}}function $s(o){o.P||(o.P=!0,o.l&&$s(o.l))}function bs(o){o.o||(o.o=ls(o.t))}function fs(o,i,a){var c=as(i)?ce("MapSet").F(i,a):os(i)?ce("MapSet").T(i,a):o.O?function(r,s){var n=Array.isArray(r),m={i:n?1:0,A:s?s.A:tt(),P:!1,I:!1,R:{},l:s,t:r,k:null,o:null,j:null,C:!1},b=m,y=hs;n&&(b=[m],y=qe);var t=Proxy.revocable(b,y),_=t.revoke,$=t.proxy;return m.k=$,m.j=_,$}(i,a):ce("ES5").J(i,a);return(a?a.A:tt()).p.push(c),c}function yr(o){return Te(o)||V(22,o),function i(a){if(!ve(a))return a;var c,r=a[Z],s=Ne(a);if(r){if(!r.P&&(r.i<4||!ce("ES5").K(r)))return r.t;r.I=!0,c=ot(a,s),r.I=!1}else c=ot(a,s);return je(c,function(n,m){r&&_r(r.t,n)===m||st(c,n,i(m))}),s===3?new Set(c):c}(o)}function ot(o,i){switch(i){case 2:return new Map(o);case 3:return Array.from(o)}return ls(o)}var lt,Ce,ys=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",dr=typeof Map<"u",hr=typeof Set<"u",it=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",ct=ys?Symbol.for("immer-nothing"):((lt={})["immer-nothing"]=!0,lt),pt=ys?Symbol.for("immer-draftable"):"__$immer_draftable",Z=ys?Symbol.for("immer-state"):"__$immer_state",wr={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(o){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+o},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(o){return"Cannot apply patch, path doesn't resolve: "+o},16:'Sets cannot have "replace" patches.',17:function(o){return"Unsupported patch operation: "+o},18:function(o){return"The plugin for '"+o+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+o+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(o){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+o+"'"},22:function(o){return"'current' expects a draft, got: "+o},23:function(o){return"'original' expects a draft, got: "+o},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},xr=""+Object.prototype.constructor,ds=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(o){return Object.getOwnPropertyNames(o).concat(Object.getOwnPropertySymbols(o))}:Object.getOwnPropertyNames,kr=Object.getOwnPropertyDescriptors||function(o){var i={};return ds(o).forEach(function(a){i[a]=Object.getOwnPropertyDescriptor(o,a)}),i},gr={},hs={get:function(o,i){if(i===Z)return o;var a=Ae(o);if(!ns(a,i))return function(r,s,n){var m,b=at(s,n);return b?"value"in b?b.value:(m=b.get)===null||m===void 0?void 0:m.call(r.k):void 0}(o,a,i);var c=a[i];return o.I||!ve(c)?c:c===_s(o.t,i)?(bs(o),o.o[i]=fs(o.A.h,c,o)):c},has:function(o,i){return i in Ae(o)},ownKeys:function(o){return Reflect.ownKeys(Ae(o))},set:function(o,i,a){var c=at(Ae(o),i);if(c!=null&&c.set)return c.set.call(o.k,a),!0;if(!o.P){var r=_s(Ae(o),i),s=r==null?void 0:r[Z];if(s&&s.t===a)return o.o[i]=a,o.R[i]=!1,!0;if($r(a,r)&&(a!==void 0||ns(o.t,i)))return!0;bs(o),$s(o)}return o.o[i]===a&&(a!==void 0||i in o.o)||Number.isNaN(a)&&Number.isNaN(o.o[i])||(o.o[i]=a,o.R[i]=!0),!0},deleteProperty:function(o,i){return _s(o.t,i)!==void 0||i in o.t?(o.R[i]=!1,bs(o),$s(o)):delete o.R[i],o.o&&delete o.o[i],!0},getOwnPropertyDescriptor:function(o,i){var a=Ae(o),c=Reflect.getOwnPropertyDescriptor(a,i);return c&&{writable:!0,configurable:o.i!==1||i!=="length",enumerable:c.enumerable,value:a[i]}},defineProperty:function(){V(11)},getPrototypeOf:function(o){return Object.getPrototypeOf(o.t)},setPrototypeOf:function(){V(12)}},qe={};je(hs,function(o,i){qe[o]=function(){return arguments[0]=arguments[0][0],i.apply(this,arguments)}}),qe.deleteProperty=function(o,i){return isNaN(parseInt(i))&&V(13),qe.set.call(this,o,i,void 0)},qe.set=function(o,i,a){return i!=="length"&&isNaN(parseInt(i))&&V(14),hs.set.call(this,o[0],i,a,o[0])};var vr=function(){function o(a){var c=this;this.O=it,this.D=!0,this.produce=function(r,s,n){if(typeof r=="function"&&typeof s!="function"){var m=s;s=r;var b=c;return function(w){var x=this;w===void 0&&(w=m);for(var v=arguments.length,A=Array(v>1?v-1:0),N=1;N<v;N++)A[N-1]=arguments[N];return b.produce(w,function(h){var k;return(k=s).call.apply(k,[x,h].concat(A))})}}var y;if(typeof s!="function"&&V(6),n!==void 0&&typeof n!="function"&&V(7),ve(r)){var t=rt(c),_=fs(c,r,void 0),$=!0;try{y=s(_),$=!1}finally{$?Je(t):ms(t)}return typeof Promise<"u"&&y instanceof Promise?y.then(function(w){return ps(t,n),us(w,t)},function(w){throw Je(t),w}):(ps(t,n),us(y,t))}if(!r||typeof r!="object"){if((y=s(r))===void 0&&(y=r),y===ct&&(y=void 0),c.D&&is(y,!0),n){var p=[],f=[];ce("Patches").M(r,y,p,f),n(p,f)}return y}V(21,r)},this.produceWithPatches=function(r,s){if(typeof r=="function")return function(y){for(var t=arguments.length,_=Array(t>1?t-1:0),$=1;$<t;$++)_[$-1]=arguments[$];return c.produceWithPatches(y,function(p){return r.apply(void 0,[p].concat(_))})};var n,m,b=c.produce(r,s,function(y,t){n=y,m=t});return typeof Promise<"u"&&b instanceof Promise?b.then(function(y){return[y,n,m]}):[b,n,m]},typeof(a==null?void 0:a.useProxies)=="boolean"&&this.setUseProxies(a.useProxies),typeof(a==null?void 0:a.autoFreeze)=="boolean"&&this.setAutoFreeze(a.autoFreeze)}var i=o.prototype;return i.createDraft=function(a){ve(a)||V(8),Te(a)&&(a=yr(a));var c=rt(this),r=fs(this,a,void 0);return r[Z].C=!0,ms(c),r},i.finishDraft=function(a,c){var r=a&&a[Z];r&&r.C||V(9),r.I&&V(10);var s=r.A;return ps(s,c),us(void 0,s)},i.setAutoFreeze=function(a){this.D=a},i.setUseProxies=function(a){a&&!it&&V(20),this.O=a},i.applyPatches=function(a,c){var r;for(r=c.length-1;r>=0;r--){var s=c[r];if(s.path.length===0&&s.op==="replace"){a=s.value;break}}r>-1&&(c=c.slice(r+1));var n=ce("Patches").$;return Te(a)?n(a,c):this.produce(a,function(m){return n(m,c)})},o}(),ee=new vr,Ar=ee.produce;ee.produceWithPatches.bind(ee),ee.setAutoFreeze.bind(ee),ee.setUseProxies.bind(ee),ee.applyPatches.bind(ee),ee.createDraft.bind(ee),ee.finishDraft.bind(ee);const Or=Ar;var z;(function(o){o[o.setConfig=0]="setConfig",o[o.removeField=1]="removeField",o[o.reorderField=2]="reorderField",o[o.moveField=3]="moveField",o[o.cloneField=4]="cloneField",o[o.createBinlogField=5]="createBinlogField",o[o.appendFilter=6]="appendFilter",o[o.modFilter=7]="modFilter",o[o.writeFilter=8]="writeFilter",o[o.setName=9]="setName",o[o.applySort=10]="applySort",o[o.transpose=11]="transpose",o[o.setLayout=12]="setLayout",o[o.setFieldAggregator=13]="setFieldAggregator",o[o.setGeoData=14]="setGeoData",o[o.setCoordSystem=15]="setCoordSystem",o[o.createDateDrillField=16]="createDateDrillField",o[o.createDateFeatureField=17]="createDateFeatureField",o[o.changeSemanticType=18]="changeSemanticType",o[o.setFilterAggregator=19]="setFilterAggregator",o[o.addFoldField=20]="addFoldField",o[o.upsertPaintField=21]="upsertPaintField",o[o.addSQLComputedField=22]="addSQLComputedField",o[o.removeAllField=23]="removeAllField",o[o.editAllField=24]="editAllField",o[o.replaceWithNLPQuery=25]="replaceWithNLPQuery"})(z||(z={}));const Ze={[z.setConfig]:(o,i,a)=>U(o,"config",c=>({...c,[i]:a})),[z.removeField]:(o,i,a)=>U(o,`encodings.${i}`,c=>Ys(c,a)),[z.reorderField]:(o,i,a,c)=>U(o,`encodings.${i}`,r=>r.map((s,n,m)=>n===a?m[c]:n===c?m[a]:s)),[z.moveField]:(o,i,a,c,r,s)=>{const n=o.encodings[i][a],m=c==="dimensions"?U(n,"analyticType",()=>"dimension"):c==="measures"?U(n,"analyticType",()=>"measure"):n;return U(o,"encodings",b=>({...b,[i]:Ys(o.encodings[i],a),[c]:Ve(o.encodings[c],m,r).slice(0,s??1/0)}))},[z.cloneField]:(o,i,a,c,r,s,n)=>{const m={...o.encodings[i][a]};return U(o,"encodings",b=>({...b,[c]:Ve(o.encodings[c],m,r).slice(0,n??1/0)}))},[z.createBinlogField]:(o,i,a,c,r,s)=>{const n=o.encodings[i][a],m=c.startsWith("bin"),b=m?"dimensions":i,y=m?`${c}${s}`:`log${s}`,t={fid:r,name:`${y}(${n.name})`,semanticType:m?"ordinal":"quantitative",analyticType:m?"dimension":n.analyticType,computed:!0,expression:{op:c,as:r,params:[{type:"field",value:n.fid}],num:s}};return m||(t.aggName="sum"),U(o,`encodings.${b}`,_=>_.concat(t))},[z.appendFilter]:(o,i,a,c,r)=>{const s=o.encodings[a][c];return U(o,"encodings.filters",n=>Ve(n,{...s,rule:null},i))},[z.modFilter]:(o,i,a,c)=>U(o,"encodings.filters",r=>{const s=o.encodings[a][c];return he(r,i,n=>({...s,rule:null}))}),[z.writeFilter]:(o,i,a)=>U(o,"encodings.filters",c=>he(c,i,r=>({...r,rule:a}))),[z.setName]:(o,i)=>({...o,name:i}),[z.applySort]:(o,i)=>{const{rows:a,columns:c}=o.encodings,r=a.length>0?a[a.length-1]:null,s=c.length>0?c[c.length-1]:null;return s!==null&&s.analyticType==="dimension"&&r!==null&&r.analyticType==="measure"?U(o,"encodings.columns",n=>he(n,n.length-1,m=>({...m,sort:i}))):s!==null&&s.analyticType==="measure"&&r!==null&&r.analyticType==="dimension"?U(o,"encodings.rows",n=>he(n,n.length-1,m=>({...m,sort:i}))):o},[z.transpose]:o=>U(o,"encodings",i=>({...i,columns:i.rows,rows:i.columns})),[z.setLayout]:(o,i)=>U(o,"layout",a=>Object.assign({},a,Object.fromEntries(i))),[z.setFieldAggregator]:(o,i,a,c)=>U(o,`encodings.${i}`,r=>he(r,a,s=>({...s,aggName:c}))),[z.setGeoData]:(o,i,a,c)=>U(o,"layout",r=>({...r,geojson:i,geoKey:a,geoUrl:c})),[z.setCoordSystem]:(o,i)=>U(o,"config",a=>({...a,coordSystem:i,geoms:[Vs.GEOM_TYPES[i][0]]})),[z.createDateDrillField]:(o,i,a,c,r,s,n,m)=>{const b=o.encodings[i][a],y={fid:r,name:s,semanticType:"temporal",analyticType:b.analyticType,aggName:"sum",computed:!0,timeUnit:c,expression:{op:"dateTimeDrill",as:r,params:[{type:"field",value:b.fid},{type:"value",value:c},...n?[{type:"format",value:n}]:[],...Hs(m)?[{type:"offset",value:m}]:[]]}};return U(o,`encodings.${i}`,t=>t.concat(y))},[z.createDateFeatureField]:(o,i,a,c,r,s,n,m)=>{const b=o.encodings[i][a],y={fid:r,name:s,semanticType:"ordinal",analyticType:b.analyticType,aggName:"sum",computed:!0,expression:{op:"dateTimeFeature",as:r,params:[{type:"field",value:b.fid},{type:"value",value:c},...n?[{type:"format",value:n}]:[],...Hs(m)?[{type:"offset",value:m}]:[]]}};return U(o,`encodings.${i}`,t=>t.concat(y))},[z.changeSemanticType]:(o,i,a,c)=>U(o,`encodings.${i}`,r=>he(r,a,s=>({...s,semanticType:c}))),[z.setFilterAggregator]:(o,i,a)=>U(o,"encodings.filters",c=>he(c,i,r=>({...r,aggName:a||"sum",enableAgg:!!a,rule:null}))),[z.addFoldField]:(o,i,a,c,r,s,n)=>{let m=o;const b=m.encodings[i][a];if(!m.config.folds){const y=[...m.encodings.measures,...m.encodings.details].filter(t=>t.analyticType==="measure"&&t.fid!==rs);m=Ze[z.setConfig](m,"folds",y.filter((t,_)=>_===0).map(t=>t.fid))}if(b.fid===rs){const y=Object.keys(m.encodings).filter(t=>t!=="filters").map(t=>[t,m.encodings[t].findIndex(_=>_.fid===Bs)]).filter(([t,_])=>_>=0);if(y.length===1){const[t,_]=y[0];m=Ze[z.cloneField](m,t,_,"details",0,`${s}_auto`,1/0)}}return Ze[z.cloneField](m,i,a,c,r,s,n)},[z.upsertPaintField]:(o,i,a)=>{if(!i)return U(o,"encodings",s=>Object.fromEntries(Object.entries(s).map(([n,m])=>[n,m.filter(b=>b.fid!==ge)])));const c="facets"in i?{op:"paint",as:ge,params:[{type:"newmap",value:i}]}:{op:"paint",as:ge,params:[{type:"map",value:i}]},r=i.usedColor.includes(255);return U(o,"encodings",s=>{let n=!1,m=!1;const b=Object.entries(s).map(([$,p])=>{const f=p.findIndex(w=>w.fid===ge);return f>-1?(n=!0,$==="filters"&&(m=!0),[$,he(p,f,w=>({...w,expression:c}))]):[$,p]}),y={fid:ge,analyticType:"dimension",name:a,semanticType:"nominal",computed:!0,expression:c,rule:{type:"not in",value:[""]}};if(n)return!m&&r?U(Object.fromEntries(b),"filters",$=>$.concat(y)):Object.fromEntries(b);const t={fid:ge,analyticType:"dimension",name:a,semanticType:"nominal",computed:!0,expression:c},_=U(U(s,"dimensions",$=>Ve($,t,$.length)),"color",()=>[{...t}]);return r?U(_,"filters",$=>$.concat(y)):_})},[z.addSQLComputedField]:(o,i,a,c)=>{const[r,s]=mr(et(c),o.encodings.dimensions.concat(o.encodings.measures)),n=r==="quantitative"?"measure":"dimension";return U(o,`encodings.${n}s`,m=>m.concat({analyticType:n,fid:i,name:a,semanticType:r,computed:!0,aggName:s?"expr":n==="dimension"?void 0:"sum",expression:{op:"expr",as:i,params:[{type:"sql",value:c}]}}))},[z.removeAllField]:(o,i)=>U(o,"encodings",a=>Object.fromEntries(Object.entries(a).map(([c,r])=>{const s=r.filter(n=>n.fid!==i);return r.length===s.length?[c,r]:[c,s]}))),[z.editAllField]:(o,i,a)=>{if(Object.keys(a).includes("name")){const c=o.encodings.dimensions.concat(o.encodings.measures).find(r=>r.fid===i);return Or(o,r=>{c&&Object.values(r.encodings).forEach(s=>s.forEach((n,m)=>{var b;if(n.fid===i)s[m]={...n,...a};else if(((b=n.expression)==null?void 0:b.op)==="expr"){const y=n.expression.params.find(t=>t.type==="sql");if(y){const t=ur(y.value,[{...c,fid:a.name,name:c.name??c.fid}]);t!==y.value&&(y.value=t)}}}))})}return U(o,"encodings",c=>Object.fromEntries(Object.entries(c).map(([r,s])=>s.find(m=>m.fid===i)?[r,s.map(m=>m.fid===i?{...m,...a}:m)]:[r,s])))},[z.replaceWithNLPQuery]:(o,i,a)=>({...JSON.parse(a),visId:o.visId,name:o.name})},Sr=(o,i)=>{const a={};return Object.keys(i.encodings).forEach(c=>{i.encodings[c]!==o.encodings[c]&&(a[c]=i.encodings[c])}),a};function mt(o,i){const a=[],c=new Array(i.length).fill(null).map(()=>[]);return o.forEach(r=>{const s=i.findIndex(n=>n(r));s>=0?c[s].push(r):a.push(r)}),a.concat(c.flat())}function ut(o){const i={};return o.dimensions&&o.dimensions.length>0&&(i.dimensions=mt(o.dimensions,[a=>a.fid===ge,a=>a.fid===Bs])),o.measures&&o.measures.length>0&&(i.measures=mt(o.measures,[a=>a.fid===sr,a=>a.fid===rs])),i}const Er=[(o,i)=>{const a=Sr(i,o),c=o.config.geoms[0];return Object.keys(a).length===0&&Gs(o.config.geoms,i.config.geoms)?o:Gs(o.config.geoms,i.config.geoms)?U(o,"encodings",r=>({...r,...Js(c,a),...ut(a)})):U(o,"encodings",r=>({...r,...Js(c,r),...ut(r)}))}];function Tr(o,i){const[a,...c]=i,r=Ze[a](o,...c);return Er.reduce((s,n)=>n(s,o),r)}const Nr=ar(Tr);Object.fromEntries(Object.keys(z).map(o=>[o,(i,...a)=>Nr(i,[z[o],...a])]));function Cr(o,i,a){return{config:a!=null&&a.config?{...Ks,...a.config}:Ks,encodings:tr,layout:a!=null&&a.layout?{...Ws,...a.layout}:Ws,visId:o,name:i}}function Rr(o){var a;const i=Cr(o.visId||rr(),o.name||"Chart");return i.config={...i.config,...o.config},i.encodings={...i.encodings,...o.encodings},i.layout={...i.layout,...o.layout,size:{...i.layout.size,...(a=o.layout)==null?void 0:a.size}},i}const Lr=new Set(["column","row","color","opacity","shape","size","details","theta","x","y","facet","order","radius"]),Ir=o=>Lr.has(o),Pr=new Set(["sum","count","max","min","mean","median","variance","stdev"]),jr=o=>!!o&&Pr.has(o),Fe={fid:"gw_count_fid",name:"Row count",analyticType:"measure",semanticType:"quantitative",aggName:"sum",computed:!0,expression:{op:"one",params:[],as:"gw_count_fid"}},qr=o=>o==="zero"||o===!0?"stack":o===null?"none":o;function _t(o){let i="none";if(typeof o=="string"?i=o:o&&o instanceof Object&&(i=o.order??"ascending"),i!=="none"){const a=["x","y","color","size","opacity"];if(i.startsWith("-")||i==="descending")return"descending";if(a.indexOf(i)>-1||i==="ascending")return"ascending"}}const Fr={row:"facetY",facet:"facetY",column:"facetX",x:"column",y:"row",opacity:"opacity",size:"size",shape:"shape",radius:"radius",theta:"theta",details:"details",text:"text",color:"color"},$t=new Set(["theta","x","y"]);function Dr(o){const i=`gw_${Oe(4)}`;return{fid:i,name:`bin(${o.name})`,semanticType:"ordinal",analyticType:"dimension",computed:!0,expression:{op:"bin",as:i,params:[{type:"field",value:o.fid}]}}}function Ur(o,i,a){switch(o){case"order":return{sort:_t(i.sort)};default:const c=$t.has(o),r=a.get(i.field)??Fe,s=i.bin?Dr(r):r,n=s===Fe?"count":jr(i.aggregate)&&c?i.aggregate:void 0;let m;return s===Fe||n?m="measure":s.analyticType==="measure"&&$t.has(o)?m="auto":m="dimension",{dimension:s,binDimension:i.bin?s:void 0,dimensionType:Fr[o],analyticType:m,aggregate:n,stack:qr(i.stack),sort:i.sort?_t(i.sort):void 0}}}const Re=o=>Object.keys(o).map(i=>({name:i,value:o[i]}));function De(o){function i(a){switch(a){case"interval":case"bar":return"bar";case"line":return"line";case"boxplot":return"boxplot";case"area":return"area";case"point":return"point";case"arc":return"arc";case"circle":return"circle";case"heatmap":return"circle";case"rect":return"rect";case"tick":default:return"tick"}}return i(typeof o=="string"?o:o.type)}const bt=o=>{switch(o){case"==":case"===":case"equal":case"oneOf":return"one of";case"!=":case"!==":return"not in";case">":case">=":case"<":case"<=":case"lt":case"lte":case"gt":case"gte":case"range":return"range"}return"one of"};function ft(o,i){const a=new Set,c=[];return o.forEach(r=>{const s=i(r);a.has(s)||(a.add(s),c.push(r))}),c}function Mr(o,i,a,c){let r="tick";const s=[];o.facet&&s.push(...Re(o.facet)),o.encoding&&s.push(...Re(o.encoding)),o.mark&&(r=De(o.mark)),o.spec&&(r=De(o.spec.mark),o.spec.encoding&&s.push(...Re(o.spec.encoding))),o.concat&&o.concat.forEach(h=>{r=De(h.mark),h.encoding&&s.push(...Re(h.encoding))}),o.hconcat&&o.hconcat.forEach(h=>{r=De(h.mark),h.encoding&&s.push(...Re(h.encoding))}),o.vconcat&&o.vconcat.forEach(h=>{r=De(h.mark),h.encoding&&s.push(...Re(h.encoding))});const n={},m=new Map,b=new Map;i.forEach(h=>{b.set(h.name,h)});const y=(h,k,O)=>{const C=`${h}|${bt(k)}`;m.has(C)||m.set(C,{field:h,rule:bt(k),value:[]}),k.startsWith(">")||k.startsWith("gt")?m.get(C).value=[O,m.get(C).value[1]??null]:k.startsWith("<")||k.startsWith("lt")?m.get(C).value=[m.get(C).value[0]??null,O]:k==="range"?m.get(C).value=O:k==="oneOf"?m.get(C).value.push(...O):m.get(C).value.push(O)};o.transform&&o.transform.forEach(h=>{if(h.fold&&(n.folds=h.fold.map(k=>{var O;return((O=b.get(k))==null?void 0:O.fid)??k})),h.filter&&(typeof h.filter=="string"&&h.filter.split(/[\&\&|\|\|]/g).forEach(O=>{const C=/datum(\.[A-z_]+|\[['"][A-z\s_]+['"]\])\s*((\!=|==|>|<)=?)\s*(.*)/.exec(O);if(C){const q=/(?:\.|\[["'])([A-z\s_]*)(?:["']\])?/.exec(C[1]),e=/["'](.*)["']/.exec(C[4]);if(!q||!e)return;const u=C[2];y(q[1],u,e[1])}}),typeof h.filter=="object"))if(h.filter.field==="rank")h.filter.lte?n.limit=h.filter.lte:h.filter.lt&&(n.limit=Math.floor(h.filter.lt),n.limit==h.filter.lt&&(n.limit-=1));else{const k=Object.keys(h.filter).find(O=>["equal","oneOf","lt","lte","gt","gte","range"].includes(O));k&&y(h.filter.field,k,h.filter[k])}});const t=Array.from(m.values()).map(({field:h,rule:k,value:O})=>({fid:h,rule:{type:k,value:O}})),_=s.flatMap(({name:h,value:k})=>Ir(h)?[Ur(h,k,b)]:[]),$=_.reduce((h,k)=>h||!!k.aggregate,!1),p=_.reduce((h,k)=>k.sort??h,"none"),f=_.reduce((h,k)=>k.stack??h,["bar","area","arc"].includes(r)?"stack":"none"),w=_.reduce((h,k)=>k.binDimension&&!h.has(k.binDimension.name)?h.set(k.binDimension.name,k.binDimension):h,new Map),x=_.flatMap(h=>{if(h.dimension&&h.dimensionType){if(h.binDimension)return[{name:h.dimensionType,value:w.get(h.binDimension.name)??h.binDimension}];const k=h.analyticType==="auto"?$?"dimension":"measure":h.analyticType;return[{name:h.dimensionType,value:{...h.dimension,analyticType:k,...h.aggregate?{aggName:h.aggregate}:{},...p&&p!=="none"&&(h.dimensionType==="column"||h.dimensionType==="row")&&k==="dimension"?{sort:p}:{}}}]}return[]}),v=h=>k=>k.name===h,A=h=>h.value,N=h=>ft(h,k=>k.fid);return Rr({visId:a,name:c,encodings:{dimensions:i.filter(h=>h.analyticType==="dimension").concat(...w.values()),measures:i.filter(h=>h.analyticType==="measure"&&h.fid!==Fe.fid).concat(Fe),columns:N(x.filter(v("facetX")).concat(x.filter(v("column"))).map(A)),rows:N(x.filter(v("facetY")).concat(x.filter(v("row"))).map(A)),details:N(x.filter(v("details")).map(A)),opacity:N(x.filter(v("opacity")).map(A)),radius:N(x.filter(v("radius")).map(A)),shape:N(x.filter(v("shape")).map(A)),size:N(x.filter(v("size")).map(A)),text:N(x.filter(v("text")).map(A)),theta:N(x.filter(v("theta")).map(A)),color:N(x.filter(v("color")).map(A)),filters:ft(t.map(h=>({...b.get(h.fid),rule:h.rule})),h=>{var k;return`${h.fid}_${(k=h.rule)==null?void 0:k.type}`})},layout:{stack:f},config:{defaultAggregated:$,geoms:[r],...n}})}function zr(o){const i=JSON.parse(o);return JSON.stringify(Mr(i.vl,i.allFields,i.visId,i.name))}return zr});
