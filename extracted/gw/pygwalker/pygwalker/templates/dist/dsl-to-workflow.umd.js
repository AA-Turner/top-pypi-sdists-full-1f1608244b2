(function(J,X){typeof exports=="object"&&typeof module<"u"?module.exports=X():typeof define=="function"&&define.amd?define(X):(J=typeof globalThis<"u"?globalThis:J||self,J.main=X())})(this,function(){"use strict";function J(a){return J=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},J(a)}function X(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function yt(a,i){if(J(a)!=="object"||a===null)return a;var o=a[Symbol.toPrimitive];if(o!==void 0){var c=o.call(a,i||"default");if(J(c)!=="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(a)}function xs(a){var i=yt(a,"string");return J(i)==="symbol"?i:String(i)}function gs(a,i){for(var o=0;o<i.length;o++){var c=i[o];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,xs(c.key),c)}}function ne(a,i,o){return i&&gs(a.prototype,i),o&&gs(a,o),Object.defineProperty(a,"prototype",{writable:!1}),a}function be(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Xe(a,i){return Xe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(c,r){return c.__proto__=r,c},Xe(a,i)}function qe(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(i&&i.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),i&&Xe(a,i)}function Re(a,i){if(i&&(J(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return be(a)}function ae(a){return ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},ae(a)}function fe(a,i,o){return i=xs(i),i in a?Object.defineProperty(a,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):a[i]=o,a}function dt(a){if(Array.isArray(a))return a}function ht(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function ks(a,i){(i==null||i>a.length)&&(i=a.length);for(var o=0,c=new Array(i);o<i;o++)c[o]=a[o];return c}function wt(a,i){if(a){if(typeof a=="string")return ks(a,i);var o=Object.prototype.toString.call(a).slice(8,-1);if(o==="Object"&&a.constructor&&(o=a.constructor.name),o==="Map"||o==="Set")return Array.from(a);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return ks(a,i)}}function xt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gt(a){return dt(a)||ht(a)||wt(a)||xt()}function vs(a,i){var o=Object.keys(a);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(a);i&&(c=c.filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable})),o.push.apply(o,c)}return o}function As(a){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?vs(Object(o),!0).forEach(function(c){fe(a,c,o[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(o)):vs(Object(o)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(o,c))})}return a}var kt={type:"logger",log:function(i){this.output("log",i)},warn:function(i){this.output("warn",i)},error:function(i){this.output("error",i)},output:function(i,o){console&&console[i]&&console[i].apply(console,o)}},vt=function(){function a(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};X(this,a),this.init(i,o)}return ne(a,[{key:"init",value:function(o){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=c.prefix||"i18next:",this.logger=o||kt,this.options=c,this.debug=c.debug}},{key:"setDebug",value:function(o){this.debug=o}},{key:"log",value:function(){for(var o=arguments.length,c=new Array(o),r=0;r<o;r++)c[r]=arguments[r];return this.forward(c,"log","",!0)}},{key:"warn",value:function(){for(var o=arguments.length,c=new Array(o),r=0;r<o;r++)c[r]=arguments[r];return this.forward(c,"warn","",!0)}},{key:"error",value:function(){for(var o=arguments.length,c=new Array(o),r=0;r<o;r++)c[r]=arguments[r];return this.forward(c,"error","")}},{key:"deprecate",value:function(){for(var o=arguments.length,c=new Array(o),r=0;r<o;r++)c[r]=arguments[r];return this.forward(c,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(o,c,r,s){return s&&!this.debug?null:(typeof o[0]=="string"&&(o[0]="".concat(r).concat(this.prefix," ").concat(o[0])),this.logger[c](o))}},{key:"create",value:function(o){return new a(this.logger,As(As({},{prefix:"".concat(this.prefix,":").concat(o,":")}),this.options))}},{key:"clone",value:function(o){return o=o||this.options,o.prefix=o.prefix||this.prefix,new a(this.logger,o)}}]),a}(),oe=new vt,ye=function(){function a(){X(this,a),this.observers={}}return ne(a,[{key:"on",value:function(o,c){var r=this;return o.split(" ").forEach(function(s){r.observers[s]=r.observers[s]||[],r.observers[s].push(c)}),this}},{key:"off",value:function(o,c){if(this.observers[o]){if(!c){delete this.observers[o];return}this.observers[o]=this.observers[o].filter(function(r){return r!==c})}}},{key:"emit",value:function(o){for(var c=arguments.length,r=new Array(c>1?c-1:0),s=1;s<c;s++)r[s-1]=arguments[s];if(this.observers[o]){var n=[].concat(this.observers[o]);n.forEach(function(f){f.apply(void 0,r)})}if(this.observers["*"]){var m=[].concat(this.observers["*"]);m.forEach(function(f){f.apply(f,[o].concat(r))})}}}]),a}();function Le(){var a,i,o=new Promise(function(c,r){a=c,i=r});return o.resolve=a,o.reject=i,o}function Ss(a){return a==null?"":""+a}function At(a,i,o){a.forEach(function(c){i[c]&&(o[c]=i[c])})}function Ze(a,i,o){function c(m){return m&&m.indexOf("###")>-1?m.replace(/###/g,"."):m}function r(){return!a||typeof a=="string"}for(var s=typeof i!="string"?[].concat(i):i.split(".");s.length>1;){if(r())return{};var n=c(s.shift());!a[n]&&o&&(a[n]=new o),Object.prototype.hasOwnProperty.call(a,n)?a=a[n]:a={}}return r()?{}:{obj:a,k:c(s.shift())}}function Os(a,i,o){var c=Ze(a,i,Object),r=c.obj,s=c.k;r[s]=o}function St(a,i,o,c){var r=Ze(a,i,Object),s=r.obj,n=r.k;s[n]=s[n]||[],c&&(s[n]=s[n].concat(o)),c||s[n].push(o)}function Fe(a,i){var o=Ze(a,i),c=o.obj,r=o.k;if(c)return c[r]}function Es(a,i,o){var c=Fe(a,o);return c!==void 0?c:Fe(i,o)}function Ts(a,i,o){for(var c in i)c!=="__proto__"&&c!=="constructor"&&(c in a?typeof a[c]=="string"||a[c]instanceof String||typeof i[c]=="string"||i[c]instanceof String?o&&(a[c]=i[c]):Ts(a[c],i[c],o):a[c]=i[c]);return a}function Se(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var Ot={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function Et(a){return typeof a=="string"?a.replace(/[&<>"'\/]/g,function(i){return Ot[i]}):a}var De=typeof window<"u"&&window.navigator&&typeof window.navigator.userAgentData>"u"&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,Tt=[" ",",","?","!",";"];function Nt(a,i,o){i=i||"",o=o||"";var c=Tt.filter(function(m){return i.indexOf(m)<0&&o.indexOf(m)<0});if(c.length===0)return!0;var r=new RegExp("(".concat(c.map(function(m){return m==="?"?"\\?":m}).join("|"),")")),s=!r.test(a);if(!s){var n=a.indexOf(o);n>0&&!r.test(a.substring(0,n))&&(s=!0)}return s}function Ns(a,i){var o=Object.keys(a);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(a);i&&(c=c.filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable})),o.push.apply(o,c)}return o}function Ue(a){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?Ns(Object(o),!0).forEach(function(c){fe(a,c,o[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(o)):Ns(Object(o)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(o,c))})}return a}function Ct(a){var i=Rt();return function(){var c=ae(a),r;if(i){var s=ae(this).constructor;r=Reflect.construct(c,arguments,s)}else r=c.apply(this,arguments);return Re(this,r)}}function Rt(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Cs(a,i){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(a){if(a[i])return a[i];for(var c=i.split(o),r=a,s=0;s<c.length;++s){if(!r||typeof r[c[s]]=="string"&&s+1<c.length)return;if(r[c[s]]===void 0){for(var n=2,m=c.slice(s,s+n).join(o),f=r[m];f===void 0&&c.length>s+n;)n++,m=c.slice(s,s+n).join(o),f=r[m];if(f===void 0)return;if(f===null)return null;if(i.endsWith(m)){if(typeof f=="string")return f;if(m&&typeof f[m]=="string")return f[m]}var y=c.slice(s+n).join(o);return y?Cs(f,y,o):void 0}r=r[c[s]]}return r}}var Lt=function(a){qe(o,a);var i=Ct(o);function o(c){var r,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};return X(this,o),r=i.call(this),De&&ye.call(be(r)),r.data=c||{},r.options=s,r.options.keySeparator===void 0&&(r.options.keySeparator="."),r.options.ignoreJSONStructure===void 0&&(r.options.ignoreJSONStructure=!0),r}return ne(o,[{key:"addNamespaces",value:function(r){this.options.ns.indexOf(r)<0&&this.options.ns.push(r)}},{key:"removeNamespaces",value:function(r){var s=this.options.ns.indexOf(r);s>-1&&this.options.ns.splice(s,1)}},{key:"getResource",value:function(r,s,n){var m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},f=m.keySeparator!==void 0?m.keySeparator:this.options.keySeparator,y=m.ignoreJSONStructure!==void 0?m.ignoreJSONStructure:this.options.ignoreJSONStructure,t=[r,s];n&&typeof n!="string"&&(t=t.concat(n)),n&&typeof n=="string"&&(t=t.concat(f?n.split(f):n)),r.indexOf(".")>-1&&(t=r.split("."));var _=Fe(this.data,t);return _||!y||typeof n!="string"?_:Cs(this.data&&this.data[r]&&this.data[r][s],n,f)}},{key:"addResource",value:function(r,s,n,m){var f=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1},y=this.options.keySeparator;y===void 0&&(y=".");var t=[r,s];n&&(t=t.concat(y?n.split(y):n)),r.indexOf(".")>-1&&(t=r.split("."),m=s,s=t[1]),this.addNamespaces(s),Os(this.data,t,m),f.silent||this.emit("added",r,s,n,m)}},{key:"addResources",value:function(r,s,n){var m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(var f in n)(typeof n[f]=="string"||Object.prototype.toString.apply(n[f])==="[object Array]")&&this.addResource(r,s,f,n[f],{silent:!0});m.silent||this.emit("added",r,s,n)}},{key:"addResourceBundle",value:function(r,s,n,m,f){var y=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},t=[r,s];r.indexOf(".")>-1&&(t=r.split("."),m=n,n=s,s=t[1]),this.addNamespaces(s);var _=Fe(this.data,t)||{};m?Ts(_,n,f):_=Ue(Ue({},_),n),Os(this.data,t,_),y.silent||this.emit("added",r,s,n)}},{key:"removeResourceBundle",value:function(r,s){this.hasResourceBundle(r,s)&&delete this.data[r][s],this.removeNamespaces(s),this.emit("removed",r,s)}},{key:"hasResourceBundle",value:function(r,s){return this.getResource(r,s)!==void 0}},{key:"getResourceBundle",value:function(r,s){return s||(s=this.options.defaultNS),this.options.compatibilityAPI==="v1"?Ue(Ue({},{}),this.getResource(r,s)):this.getResource(r,s)}},{key:"getDataByLanguage",value:function(r){return this.data[r]}},{key:"hasLanguageSomeTranslations",value:function(r){var s=this.getDataByLanguage(r),n=s&&Object.keys(s)||[];return!!n.find(function(m){return s[m]&&Object.keys(s[m]).length>0})}},{key:"toJSON",value:function(){return this.data}}]),o}(ye),Rs={processors:{},addPostProcessor:function(i){this.processors[i.name]=i},handle:function(i,o,c,r,s){var n=this;return i.forEach(function(m){n.processors[m]&&(o=n.processors[m].process(o,c,r,s))}),o}};function Ls(a,i){var o=Object.keys(a);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(a);i&&(c=c.filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable})),o.push.apply(o,c)}return o}function Q(a){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?Ls(Object(o),!0).forEach(function(c){fe(a,c,o[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(o)):Ls(Object(o)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(o,c))})}return a}function It(a){var i=Pt();return function(){var c=ae(a),r;if(i){var s=ae(this).constructor;r=Reflect.construct(c,arguments,s)}else r=c.apply(this,arguments);return Re(this,r)}}function Pt(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Is={},Ps=function(a){qe(o,a);var i=It(o);function o(c){var r,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return X(this,o),r=i.call(this),De&&ye.call(be(r)),At(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],c,be(r)),r.options=s,r.options.keySeparator===void 0&&(r.options.keySeparator="."),r.logger=oe.create("translator"),r}return ne(o,[{key:"changeLanguage",value:function(r){r&&(this.language=r)}},{key:"exists",value:function(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(r==null)return!1;var n=this.resolve(r,s);return n&&n.res!==void 0}},{key:"extractFromKey",value:function(r,s){var n=s.nsSeparator!==void 0?s.nsSeparator:this.options.nsSeparator;n===void 0&&(n=":");var m=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,f=s.ns||this.options.defaultNS||[],y=n&&r.indexOf(n)>-1,t=!this.options.userDefinedKeySeparator&&!s.keySeparator&&!this.options.userDefinedNsSeparator&&!s.nsSeparator&&!Nt(r,n,m);if(y&&!t){var _=r.match(this.interpolator.nestingRegexp);if(_&&_.length>0)return{key:r,namespaces:f};var b=r.split(n);(n!==m||n===m&&this.options.ns.indexOf(b[0])>-1)&&(f=b.shift()),r=b.join(m)}return typeof f=="string"&&(f=[f]),{key:r,namespaces:f}}},{key:"translate",value:function(r,s,n){var m=this;if(J(s)!=="object"&&this.options.overloadTranslationOptionHandler&&(s=this.options.overloadTranslationOptionHandler(arguments)),s||(s={}),r==null)return"";Array.isArray(r)||(r=[String(r)]);var f=s.returnDetails!==void 0?s.returnDetails:this.options.returnDetails,y=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,t=this.extractFromKey(r[r.length-1],s),_=t.key,b=t.namespaces,p=b[b.length-1],d=s.lng||this.language,h=s.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(d&&d.toLowerCase()==="cimode"){if(h){var w=s.nsSeparator||this.options.nsSeparator;return f?(v.res="".concat(p).concat(w).concat(_),v):"".concat(p).concat(w).concat(_)}return f?(v.res=_,v):_}var v=this.resolve(r,s),A=v&&v.res,N=v&&v.usedKey||_,x=v&&v.exactUsedKey||_,k=Object.prototype.toString.apply(A),E=["[object Number]","[object Function]","[object RegExp]"],C=s.joinArrays!==void 0?s.joinArrays:this.options.joinArrays,q=!this.i18nFormat||this.i18nFormat.handleAsObject,e=typeof A!="string"&&typeof A!="boolean"&&typeof A!="number";if(q&&A&&e&&E.indexOf(k)<0&&!(typeof C=="string"&&k==="[object Array]")){if(!s.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");var u=this.options.returnedObjectHandler?this.options.returnedObjectHandler(N,A,Q(Q({},s),{},{ns:b})):"key '".concat(_," (").concat(this.language,")' returned an object instead of string.");return f?(v.res=u,v):u}if(y){var l=k==="[object Array]",$=l?[]:{},g=l?x:N;for(var O in A)if(Object.prototype.hasOwnProperty.call(A,O)){var R="".concat(g).concat(y).concat(O);$[O]=this.translate(R,Q(Q({},s),{joinArrays:!1,ns:b})),$[O]===R&&($[O]=A[O])}A=$}}else if(q&&typeof C=="string"&&k==="[object Array]")A=A.join(C),A&&(A=this.extendTranslation(A,r,s,n));else{var L=!1,I=!1,B=s.count!==void 0&&typeof s.count!="string",F=o.hasDefaultValue(s),j=B?this.pluralResolver.getSuffix(d,s.count,s):"",G=s["defaultValue".concat(j)]||s.defaultValue;!this.isValidLookup(A)&&F&&(L=!0,A=G),this.isValidLookup(A)||(I=!0,A=_);var ue=s.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,_e=ue&&I?void 0:A,te=F&&G!==A&&this.options.updateMissing;if(I||L||te){if(this.logger.log(te?"updateKey":"missingKey",d,p,_,te?G:A),y){var $e=this.resolve(_,Q(Q({},s),{},{keySeparator:!1}));$e&&$e.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var K=[],pe=this.languageUtils.getFallbackCodes(this.options.fallbackLng,s.lng||this.language);if(this.options.saveMissingTo==="fallback"&&pe&&pe[0])for(var me=0;me<pe.length;me++)K.push(pe[me]);else this.options.saveMissingTo==="all"?K=this.languageUtils.toResolveHierarchy(s.lng||this.language):K.push(s.lng||this.language);var we=function(ge,ws,bt){var ft=F&&bt!==A?bt:_e;m.options.missingKeyHandler?m.options.missingKeyHandler(ge,p,ws,ft,te,s):m.backendConnector&&m.backendConnector.saveMissing&&m.backendConnector.saveMissing(ge,p,ws,ft,te,s),m.emit("missingKey",ge,p,ws,A)};this.options.saveMissing&&(this.options.saveMissingPlurals&&B?K.forEach(function(xe){m.pluralResolver.getSuffixes(xe,s).forEach(function(ge){we([xe],_+ge,s["defaultValue".concat(ge)]||G)})}):we(K,_,G))}A=this.extendTranslation(A,r,s,v,n),I&&A===_&&this.options.appendNamespaceToMissingKey&&(A="".concat(p,":").concat(_)),(I||L)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?A=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(p,":").concat(_):_,L?A:void 0):A=this.options.parseMissingKeyHandler(A))}return f?(v.res=A,v):A}},{key:"extendTranslation",value:function(r,s,n,m,f){var y=this;if(this.i18nFormat&&this.i18nFormat.parse)r=this.i18nFormat.parse(r,Q(Q({},this.options.interpolation.defaultVariables),n),m.usedLng,m.usedNS,m.usedKey,{resolved:m});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init(Q(Q({},n),{interpolation:Q(Q({},this.options.interpolation),n.interpolation)}));var t=typeof r=="string"&&(n&&n.interpolation&&n.interpolation.skipOnVariables!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables),_;if(t){var b=r.match(this.interpolator.nestingRegexp);_=b&&b.length}var p=n.replace&&typeof n.replace!="string"?n.replace:n;if(this.options.interpolation.defaultVariables&&(p=Q(Q({},this.options.interpolation.defaultVariables),p)),r=this.interpolator.interpolate(r,p,n.lng||this.language,n),t){var d=r.match(this.interpolator.nestingRegexp),h=d&&d.length;_<h&&(n.nest=!1)}n.nest!==!1&&(r=this.interpolator.nest(r,function(){for(var A=arguments.length,N=new Array(A),x=0;x<A;x++)N[x]=arguments[x];return f&&f[0]===N[0]&&!n.context?(y.logger.warn("It seems you are nesting recursively key: ".concat(N[0]," in key: ").concat(s[0])),null):y.translate.apply(y,N.concat([s]))},n)),n.interpolation&&this.interpolator.reset()}var w=n.postProcess||this.options.postProcess,v=typeof w=="string"?[w]:w;return r!=null&&v&&v.length&&n.applyPostProcessor!==!1&&(r=Rs.handle(v,r,s,this.options&&this.options.postProcessPassResolved?Q({i18nResolved:m},n):n,this)),r}},{key:"resolve",value:function(r){var s=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},m,f,y,t,_;return typeof r=="string"&&(r=[r]),r.forEach(function(b){if(!s.isValidLookup(m)){var p=s.extractFromKey(b,n),d=p.key;f=d;var h=p.namespaces;s.options.fallbackNS&&(h=h.concat(s.options.fallbackNS));var w=n.count!==void 0&&typeof n.count!="string",v=w&&!n.ordinal&&n.count===0&&s.pluralResolver.shouldUseIntlApi(),A=n.context!==void 0&&(typeof n.context=="string"||typeof n.context=="number")&&n.context!=="",N=n.lngs?n.lngs:s.languageUtils.toResolveHierarchy(n.lng||s.language,n.fallbackLng);h.forEach(function(x){s.isValidLookup(m)||(_=x,!Is["".concat(N[0],"-").concat(x)]&&s.utils&&s.utils.hasLoadedNamespace&&!s.utils.hasLoadedNamespace(_)&&(Is["".concat(N[0],"-").concat(x)]=!0,s.logger.warn('key "'.concat(f,'" for languages "').concat(N.join(", "),`" won't get resolved as namespace "`).concat(_,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),N.forEach(function(k){if(!s.isValidLookup(m)){t=k;var E=[d];if(s.i18nFormat&&s.i18nFormat.addLookupKeys)s.i18nFormat.addLookupKeys(E,d,k,x,n);else{var C;w&&(C=s.pluralResolver.getSuffix(k,n.count,n));var q="".concat(s.options.pluralSeparator,"zero");if(w&&(E.push(d+C),v&&E.push(d+q)),A){var e="".concat(d).concat(s.options.contextSeparator).concat(n.context);E.push(e),w&&(E.push(e+C),v&&E.push(e+q))}}for(var u;u=E.pop();)s.isValidLookup(m)||(y=u,m=s.getResource(k,x,u,n))}}))})}}),{res:m,usedKey:f,exactUsedKey:y,usedLng:t,usedNS:_}}},{key:"isValidLookup",value:function(r){return r!==void 0&&!(!this.options.returnNull&&r===null)&&!(!this.options.returnEmptyString&&r==="")}},{key:"getResource",value:function(r,s,n){var m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(r,s,n,m):this.resourceStore.getResource(r,s,n,m)}}],[{key:"hasDefaultValue",value:function(r){var s="defaultValue";for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)&&s===n.substring(0,s.length)&&r[n]!==void 0)return!0;return!1}}]),o}(ye);function es(a){return a.charAt(0).toUpperCase()+a.slice(1)}var jt=function(){function a(i){X(this,a),this.options=i,this.supportedLngs=this.options.supportedLngs||!1,this.logger=oe.create("languageUtils")}return ne(a,[{key:"getScriptPartFromCode",value:function(o){if(!o||o.indexOf("-")<0)return null;var c=o.split("-");return c.length===2||(c.pop(),c[c.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(c.join("-"))}},{key:"getLanguagePartFromCode",value:function(o){if(!o||o.indexOf("-")<0)return o;var c=o.split("-");return this.formatLanguageCode(c[0])}},{key:"formatLanguageCode",value:function(o){if(typeof o=="string"&&o.indexOf("-")>-1){var c=["hans","hant","latn","cyrl","cans","mong","arab"],r=o.split("-");return this.options.lowerCaseLng?r=r.map(function(s){return s.toLowerCase()}):r.length===2?(r[0]=r[0].toLowerCase(),r[1]=r[1].toUpperCase(),c.indexOf(r[1].toLowerCase())>-1&&(r[1]=es(r[1].toLowerCase()))):r.length===3&&(r[0]=r[0].toLowerCase(),r[1].length===2&&(r[1]=r[1].toUpperCase()),r[0]!=="sgn"&&r[2].length===2&&(r[2]=r[2].toUpperCase()),c.indexOf(r[1].toLowerCase())>-1&&(r[1]=es(r[1].toLowerCase())),c.indexOf(r[2].toLowerCase())>-1&&(r[2]=es(r[2].toLowerCase()))),r.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?o.toLowerCase():o}},{key:"isSupportedCode",value:function(o){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(o=this.getLanguagePartFromCode(o)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(o)>-1}},{key:"getBestMatchFromCodes",value:function(o){var c=this;if(!o)return null;var r;return o.forEach(function(s){if(!r){var n=c.formatLanguageCode(s);(!c.options.supportedLngs||c.isSupportedCode(n))&&(r=n)}}),!r&&this.options.supportedLngs&&o.forEach(function(s){if(!r){var n=c.getLanguagePartFromCode(s);if(c.isSupportedCode(n))return r=n;r=c.options.supportedLngs.find(function(m){if(m.indexOf(n)===0)return m})}}),r||(r=this.getFallbackCodes(this.options.fallbackLng)[0]),r}},{key:"getFallbackCodes",value:function(o,c){if(!o)return[];if(typeof o=="function"&&(o=o(c)),typeof o=="string"&&(o=[o]),Object.prototype.toString.apply(o)==="[object Array]")return o;if(!c)return o.default||[];var r=o[c];return r||(r=o[this.getScriptPartFromCode(c)]),r||(r=o[this.formatLanguageCode(c)]),r||(r=o[this.getLanguagePartFromCode(c)]),r||(r=o.default),r||[]}},{key:"toResolveHierarchy",value:function(o,c){var r=this,s=this.getFallbackCodes(c||this.options.fallbackLng||[],o),n=[],m=function(y){y&&(r.isSupportedCode(y)?n.push(y):r.logger.warn("rejecting language code not found in supportedLngs: ".concat(y)))};return typeof o=="string"&&o.indexOf("-")>-1?(this.options.load!=="languageOnly"&&m(this.formatLanguageCode(o)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&m(this.getScriptPartFromCode(o)),this.options.load!=="currentOnly"&&m(this.getLanguagePartFromCode(o))):typeof o=="string"&&m(this.formatLanguageCode(o)),s.forEach(function(f){n.indexOf(f)<0&&m(r.formatLanguageCode(f))}),n}}]),a}(),qt=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],Ft={1:function(i){return Number(i>1)},2:function(i){return Number(i!=1)},3:function(i){return 0},4:function(i){return Number(i%10==1&&i%100!=11?0:i%10>=2&&i%10<=4&&(i%100<10||i%100>=20)?1:2)},5:function(i){return Number(i==0?0:i==1?1:i==2?2:i%100>=3&&i%100<=10?3:i%100>=11?4:5)},6:function(i){return Number(i==1?0:i>=2&&i<=4?1:2)},7:function(i){return Number(i==1?0:i%10>=2&&i%10<=4&&(i%100<10||i%100>=20)?1:2)},8:function(i){return Number(i==1?0:i==2?1:i!=8&&i!=11?2:3)},9:function(i){return Number(i>=2)},10:function(i){return Number(i==1?0:i==2?1:i<7?2:i<11?3:4)},11:function(i){return Number(i==1||i==11?0:i==2||i==12?1:i>2&&i<20?2:3)},12:function(i){return Number(i%10!=1||i%100==11)},13:function(i){return Number(i!==0)},14:function(i){return Number(i==1?0:i==2?1:i==3?2:3)},15:function(i){return Number(i%10==1&&i%100!=11?0:i%10>=2&&(i%100<10||i%100>=20)?1:2)},16:function(i){return Number(i%10==1&&i%100!=11?0:i!==0?1:2)},17:function(i){return Number(i==1||i%10==1&&i%100!=11?0:1)},18:function(i){return Number(i==0?0:i==1?1:2)},19:function(i){return Number(i==1?0:i==0||i%100>1&&i%100<11?1:i%100>10&&i%100<20?2:3)},20:function(i){return Number(i==1?0:i==0||i%100>0&&i%100<20?1:2)},21:function(i){return Number(i%100==1?1:i%100==2?2:i%100==3||i%100==4?3:0)},22:function(i){return Number(i==1?0:i==2?1:(i<0||i>10)&&i%10==0?2:3)}},Dt=["v1","v2","v3"],js={zero:0,one:1,two:2,few:3,many:4,other:5};function Ut(){var a={};return qt.forEach(function(i){i.lngs.forEach(function(o){a[o]={numbers:i.nr,plurals:Ft[i.fc]}})}),a}var zt=function(){function a(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};X(this,a),this.languageUtils=i,this.options=o,this.logger=oe.create("pluralResolver"),(!this.options.compatibilityJSON||this.options.compatibilityJSON==="v4")&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=Ut()}return ne(a,[{key:"addRule",value:function(o,c){this.rules[o]=c}},{key:"getRule",value:function(o){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(o,{type:c.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[o]||this.rules[this.languageUtils.getLanguagePartFromCode(o)]}},{key:"needsPlural",value:function(o){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getRule(o,c);return this.shouldUseIntlApi()?r&&r.resolvedOptions().pluralCategories.length>1:r&&r.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(o,c){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(o,r).map(function(s){return"".concat(c).concat(s)})}},{key:"getSuffixes",value:function(o){var c=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.getRule(o,r);return s?this.shouldUseIntlApi()?s.resolvedOptions().pluralCategories.sort(function(n,m){return js[n]-js[m]}).map(function(n){return"".concat(c.options.prepend).concat(n)}):s.numbers.map(function(n){return c.getSuffix(o,n,r)}):[]}},{key:"getSuffix",value:function(o,c){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=this.getRule(o,r);return s?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(s.select(c)):this.getSuffixRetroCompatible(s,c):(this.logger.warn("no plural rule found for: ".concat(o)),"")}},{key:"getSuffixRetroCompatible",value:function(o,c){var r=this,s=o.noAbs?o.plurals(c):o.plurals(Math.abs(c)),n=o.numbers[s];this.options.simplifyPluralSuffix&&o.numbers.length===2&&o.numbers[0]===1&&(n===2?n="plural":n===1&&(n=""));var m=function(){return r.options.prepend&&n.toString()?r.options.prepend+n.toString():n.toString()};return this.options.compatibilityJSON==="v1"?n===1?"":typeof n=="number"?"_plural_".concat(n.toString()):m():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&o.numbers.length===2&&o.numbers[0]===1?m():this.options.prepend&&s.toString()?this.options.prepend+s.toString():s.toString()}},{key:"shouldUseIntlApi",value:function(){return!Dt.includes(this.options.compatibilityJSON)}}]),a}();function qs(a,i){var o=Object.keys(a);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(a);i&&(c=c.filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable})),o.push.apply(o,c)}return o}function re(a){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?qs(Object(o),!0).forEach(function(c){fe(a,c,o[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(o)):qs(Object(o)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(o,c))})}return a}var Mt=function(){function a(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};X(this,a),this.logger=oe.create("interpolator"),this.options=i,this.format=i.interpolation&&i.interpolation.format||function(o){return o},this.init(i)}return ne(a,[{key:"init",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};o.interpolation||(o.interpolation={escapeValue:!0});var c=o.interpolation;this.escape=c.escape!==void 0?c.escape:Et,this.escapeValue=c.escapeValue!==void 0?c.escapeValue:!0,this.useRawValueToEscape=c.useRawValueToEscape!==void 0?c.useRawValueToEscape:!1,this.prefix=c.prefix?Se(c.prefix):c.prefixEscaped||"{{",this.suffix=c.suffix?Se(c.suffix):c.suffixEscaped||"}}",this.formatSeparator=c.formatSeparator?c.formatSeparator:c.formatSeparator||",",this.unescapePrefix=c.unescapeSuffix?"":c.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":c.unescapeSuffix||"",this.nestingPrefix=c.nestingPrefix?Se(c.nestingPrefix):c.nestingPrefixEscaped||Se("$t("),this.nestingSuffix=c.nestingSuffix?Se(c.nestingSuffix):c.nestingSuffixEscaped||Se(")"),this.nestingOptionsSeparator=c.nestingOptionsSeparator?c.nestingOptionsSeparator:c.nestingOptionsSeparator||",",this.maxReplaces=c.maxReplaces?c.maxReplaces:1e3,this.alwaysFormat=c.alwaysFormat!==void 0?c.alwaysFormat:!1,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var o="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(o,"g");var c="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(c,"g");var r="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(r,"g")}},{key:"interpolate",value:function(o,c,r,s){var n=this,m,f,y,t=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function _(w){return w.replace(/\$/g,"$$$$")}var b=function(v){if(v.indexOf(n.formatSeparator)<0){var A=Es(c,t,v);return n.alwaysFormat?n.format(A,void 0,r,re(re(re({},s),c),{},{interpolationkey:v})):A}var N=v.split(n.formatSeparator),x=N.shift().trim(),k=N.join(n.formatSeparator).trim();return n.format(Es(c,t,x),k,r,re(re(re({},s),c),{},{interpolationkey:x}))};this.resetRegExp();var p=s&&s.missingInterpolationHandler||this.options.missingInterpolationHandler,d=s&&s.interpolation&&s.interpolation.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables,h=[{regex:this.regexpUnescape,safeValue:function(v){return _(v)}},{regex:this.regexp,safeValue:function(v){return n.escapeValue?_(n.escape(v)):_(v)}}];return h.forEach(function(w){for(y=0;m=w.regex.exec(o);){var v=m[1].trim();if(f=b(v),f===void 0)if(typeof p=="function"){var A=p(o,m,s);f=typeof A=="string"?A:""}else if(s&&s.hasOwnProperty(v))f="";else if(d){f=m[0];continue}else n.logger.warn("missed to pass in variable ".concat(v," for interpolating ").concat(o)),f="";else typeof f!="string"&&!n.useRawValueToEscape&&(f=Ss(f));var N=w.safeValue(f);if(o=o.replace(m[0],N),d?(w.regex.lastIndex+=f.length,w.regex.lastIndex-=m[0].length):w.regex.lastIndex=0,y++,y>=n.maxReplaces)break}}),o}},{key:"nest",value:function(o,c){var r=this,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n,m,f=re({},s);f.applyPostProcessor=!1,delete f.defaultValue;function y(p,d){var h=this.nestingOptionsSeparator;if(p.indexOf(h)<0)return p;var w=p.split(new RegExp("".concat(h,"[ ]*{"))),v="{".concat(w[1]);p=w[0],v=this.interpolate(v,f);var A=v.match(/'/g),N=v.match(/"/g);(A&&A.length%2===0&&!N||N.length%2!==0)&&(v=v.replace(/'/g,'"'));try{f=JSON.parse(v),d&&(f=re(re({},d),f))}catch(x){return this.logger.warn("failed parsing options string in nesting for key ".concat(p),x),"".concat(p).concat(h).concat(v)}return delete f.defaultValue,p}for(;n=this.nestingRegexp.exec(o);){var t=[],_=!1;if(n[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(n[1])){var b=n[1].split(this.formatSeparator).map(function(p){return p.trim()});n[1]=b.shift(),t=b,_=!0}if(m=c(y.call(this,n[1].trim(),f),f),m&&n[0]===o&&typeof m!="string")return m;typeof m!="string"&&(m=Ss(m)),m||(this.logger.warn("missed to resolve ".concat(n[1]," for nesting ").concat(o)),m=""),_&&(m=t.reduce(function(p,d){return r.format(p,d,s.lng,re(re({},s),{},{interpolationkey:n[1].trim()}))},m.trim())),o=o.replace(n[0],m),this.regexp.lastIndex=0}return o}}]),a}();function Fs(a,i){var o=Object.keys(a);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(a);i&&(c=c.filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable})),o.push.apply(o,c)}return o}function de(a){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?Fs(Object(o),!0).forEach(function(c){fe(a,c,o[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(o)):Fs(Object(o)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(o,c))})}return a}function Bt(a){var i=a.toLowerCase().trim(),o={};if(a.indexOf("(")>-1){var c=a.split("(");i=c[0].toLowerCase().trim();var r=c[1].substring(0,c[1].length-1);if(i==="currency"&&r.indexOf(":")<0)o.currency||(o.currency=r.trim());else if(i==="relativetime"&&r.indexOf(":")<0)o.range||(o.range=r.trim());else{var s=r.split(";");s.forEach(function(n){if(n){var m=n.split(":"),f=gt(m),y=f[0],t=f.slice(1),_=t.join(":").trim().replace(/^'+|'+$/g,"");o[y.trim()]||(o[y.trim()]=_),_==="false"&&(o[y.trim()]=!1),_==="true"&&(o[y.trim()]=!0),isNaN(_)||(o[y.trim()]=parseInt(_,10))}})}}return{formatName:i,formatOptions:o}}function Oe(a){var i={};return function(c,r,s){var n=r+JSON.stringify(s),m=i[n];return m||(m=a(r,s),i[n]=m),m(c)}}var Ht=function(){function a(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};X(this,a),this.logger=oe.create("formatter"),this.options=i,this.formats={number:Oe(function(o,c){var r=new Intl.NumberFormat(o,c);return function(s){return r.format(s)}}),currency:Oe(function(o,c){var r=new Intl.NumberFormat(o,de(de({},c),{},{style:"currency"}));return function(s){return r.format(s)}}),datetime:Oe(function(o,c){var r=new Intl.DateTimeFormat(o,de({},c));return function(s){return r.format(s)}}),relativetime:Oe(function(o,c){var r=new Intl.RelativeTimeFormat(o,de({},c));return function(s){return r.format(s,c.range||"day")}}),list:Oe(function(o,c){var r=new Intl.ListFormat(o,de({},c));return function(s){return r.format(s)}})},this.init(i)}return ne(a,[{key:"init",value:function(o){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}},r=c.interpolation;this.formatSeparator=r.formatSeparator?r.formatSeparator:r.formatSeparator||","}},{key:"add",value:function(o,c){this.formats[o.toLowerCase().trim()]=c}},{key:"addCached",value:function(o,c){this.formats[o.toLowerCase().trim()]=Oe(c)}},{key:"format",value:function(o,c,r,s){var n=this,m=c.split(this.formatSeparator),f=m.reduce(function(y,t){var _=Bt(t),b=_.formatName,p=_.formatOptions;if(n.formats[b]){var d=y;try{var h=s&&s.formatParams&&s.formatParams[s.interpolationkey]||{},w=h.locale||h.lng||s.locale||s.lng||r;d=n.formats[b](y,w,de(de(de({},p),s),h))}catch(v){n.logger.warn(v)}return d}else n.logger.warn("there was no format function for ".concat(b));return y},o);return f}}]),a}();function Ds(a,i){var o=Object.keys(a);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(a);i&&(c=c.filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable})),o.push.apply(o,c)}return o}function Us(a){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?Ds(Object(o),!0).forEach(function(c){fe(a,c,o[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(o)):Ds(Object(o)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(o,c))})}return a}function Gt(a){var i=Vt();return function(){var c=ae(a),r;if(i){var s=ae(this).constructor;r=Reflect.construct(c,arguments,s)}else r=c.apply(this,arguments);return Re(this,r)}}function Vt(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Kt(a,i){a.pending[i]!==void 0&&(delete a.pending[i],a.pendingCount--)}var Wt=function(a){qe(o,a);var i=Gt(o);function o(c,r,s){var n,m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return X(this,o),n=i.call(this),De&&ye.call(be(n)),n.backend=c,n.store=r,n.services=s,n.languageUtils=s.languageUtils,n.options=m,n.logger=oe.create("backendConnector"),n.waitingReads=[],n.maxParallelReads=m.maxParallelReads||10,n.readingCalls=0,n.maxRetries=m.maxRetries>=0?m.maxRetries:5,n.retryTimeout=m.retryTimeout>=1?m.retryTimeout:350,n.state={},n.queue=[],n.backend&&n.backend.init&&n.backend.init(s,m.backend,m),n}return ne(o,[{key:"queueLoad",value:function(r,s,n,m){var f=this,y={},t={},_={},b={};return r.forEach(function(p){var d=!0;s.forEach(function(h){var w="".concat(p,"|").concat(h);!n.reload&&f.store.hasResourceBundle(p,h)?f.state[w]=2:f.state[w]<0||(f.state[w]===1?t[w]===void 0&&(t[w]=!0):(f.state[w]=1,d=!1,t[w]===void 0&&(t[w]=!0),y[w]===void 0&&(y[w]=!0),b[h]===void 0&&(b[h]=!0)))}),d||(_[p]=!0)}),(Object.keys(y).length||Object.keys(t).length)&&this.queue.push({pending:t,pendingCount:Object.keys(t).length,loaded:{},errors:[],callback:m}),{toLoad:Object.keys(y),pending:Object.keys(t),toLoadLanguages:Object.keys(_),toLoadNamespaces:Object.keys(b)}}},{key:"loaded",value:function(r,s,n){var m=r.split("|"),f=m[0],y=m[1];s&&this.emit("failedLoading",f,y,s),n&&this.store.addResourceBundle(f,y,n),this.state[r]=s?-1:2;var t={};this.queue.forEach(function(_){St(_.loaded,[f],y),Kt(_,r),s&&_.errors.push(s),_.pendingCount===0&&!_.done&&(Object.keys(_.loaded).forEach(function(b){t[b]||(t[b]={});var p=_.loaded[b];p.length&&p.forEach(function(d){t[b][d]===void 0&&(t[b][d]=!0)})}),_.done=!0,_.errors.length?_.callback(_.errors):_.callback())}),this.emit("loaded",t),this.queue=this.queue.filter(function(_){return!_.done})}},{key:"read",value:function(r,s,n){var m=this,f=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,y=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,t=arguments.length>5?arguments[5]:void 0;if(!r.length)return t(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:r,ns:s,fcName:n,tried:f,wait:y,callback:t});return}return this.readingCalls++,this.backend[n](r,s,function(_,b){if(m.readingCalls--,m.waitingReads.length>0){var p=m.waitingReads.shift();m.read(p.lng,p.ns,p.fcName,p.tried,p.wait,p.callback)}if(_&&b&&f<m.maxRetries){setTimeout(function(){m.read.call(m,r,s,n,f+1,y*2,t)},y);return}t(_,b)})}},{key:"prepareLoading",value:function(r,s){var n=this,m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},f=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),f&&f();typeof r=="string"&&(r=this.languageUtils.toResolveHierarchy(r)),typeof s=="string"&&(s=[s]);var y=this.queueLoad(r,s,m,f);if(!y.toLoad.length)return y.pending.length||f(),null;y.toLoad.forEach(function(t){n.loadOne(t)})}},{key:"load",value:function(r,s,n){this.prepareLoading(r,s,{},n)}},{key:"reload",value:function(r,s,n){this.prepareLoading(r,s,{reload:!0},n)}},{key:"loadOne",value:function(r){var s=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",m=r.split("|"),f=m[0],y=m[1];this.read(f,y,"read",void 0,void 0,function(t,_){t&&s.logger.warn("".concat(n,"loading namespace ").concat(y," for language ").concat(f," failed"),t),!t&&_&&s.logger.log("".concat(n,"loaded namespace ").concat(y," for language ").concat(f),_),s.loaded(r,t,_)})}},{key:"saveMissing",value:function(r,s,n,m,f){var y=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(s)){this.logger.warn('did not save key "'.concat(n,'" as the namespace "').concat(s,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}n==null||n===""||(this.backend&&this.backend.create&&this.backend.create(r,s,n,m,null,Us(Us({},y),{},{isUpdate:f})),!(!r||!r[0])&&this.store.addResource(r[0],s,n,m))}}]),o}(ye);function Yt(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(i){var o={};if(J(i[1])==="object"&&(o=i[1]),typeof i[1]=="string"&&(o.defaultValue=i[1]),typeof i[2]=="string"&&(o.tDescription=i[2]),J(i[2])==="object"||J(i[3])==="object"){var c=i[3]||i[2];Object.keys(c).forEach(function(r){o[r]=c[r]})}return o},interpolation:{escapeValue:!0,format:function(i,o,c,r){return i},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function zs(a){return typeof a.ns=="string"&&(a.ns=[a.ns]),typeof a.fallbackLng=="string"&&(a.fallbackLng=[a.fallbackLng]),typeof a.fallbackNS=="string"&&(a.fallbackNS=[a.fallbackNS]),a.supportedLngs&&a.supportedLngs.indexOf("cimode")<0&&(a.supportedLngs=a.supportedLngs.concat(["cimode"])),a}function Ms(a,i){var o=Object.keys(a);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(a);i&&(c=c.filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable})),o.push.apply(o,c)}return o}function le(a){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?Ms(Object(o),!0).forEach(function(c){fe(a,c,o[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(o)):Ms(Object(o)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(o,c))})}return a}function Jt(a){var i=Qt();return function(){var c=ae(a),r;if(i){var s=ae(this).constructor;r=Reflect.construct(c,arguments,s)}else r=c.apply(this,arguments);return Re(this,r)}}function Qt(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ze(){}function Xt(a){var i=Object.getOwnPropertyNames(Object.getPrototypeOf(a));i.forEach(function(o){typeof a[o]=="function"&&(a[o]=a[o].bind(a))})}var Me=function(a){qe(o,a);var i=Jt(o);function o(){var c,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;if(X(this,o),c=i.call(this),De&&ye.call(be(c)),c.options=zs(r),c.services={},c.logger=oe,c.modules={external:[]},Xt(be(c)),s&&!c.isInitialized&&!r.isClone){if(!c.options.initImmediate)return c.init(r,s),Re(c,be(c));setTimeout(function(){c.init(r,s)},0)}return c}return ne(o,[{key:"init",value:function(){var r=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;typeof s=="function"&&(n=s,s={}),!s.defaultNS&&s.defaultNS!==!1&&s.ns&&(typeof s.ns=="string"?s.defaultNS=s.ns:s.ns.indexOf("translation")<0&&(s.defaultNS=s.ns[0]));var m=Yt();this.options=le(le(le({},m),this.options),zs(s)),this.options.compatibilityAPI!=="v1"&&(this.options.interpolation=le(le({},m.interpolation),this.options.interpolation)),s.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=s.keySeparator),s.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=s.nsSeparator);function f(v){return v?typeof v=="function"?new v:v:null}if(!this.options.isClone){this.modules.logger?oe.init(f(this.modules.logger),this.options):oe.init(null,this.options);var y;this.modules.formatter?y=this.modules.formatter:typeof Intl<"u"&&(y=Ht);var t=new jt(this.options);this.store=new Lt(this.options.resources,this.options);var _=this.services;_.logger=oe,_.resourceStore=this.store,_.languageUtils=t,_.pluralResolver=new zt(t,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),y&&(!this.options.interpolation.format||this.options.interpolation.format===m.interpolation.format)&&(_.formatter=f(y),_.formatter.init(_,this.options),this.options.interpolation.format=_.formatter.format.bind(_.formatter)),_.interpolator=new Mt(this.options),_.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},_.backendConnector=new Wt(f(this.modules.backend),_.resourceStore,_,this.options),_.backendConnector.on("*",function(v){for(var A=arguments.length,N=new Array(A>1?A-1:0),x=1;x<A;x++)N[x-1]=arguments[x];r.emit.apply(r,[v].concat(N))}),this.modules.languageDetector&&(_.languageDetector=f(this.modules.languageDetector),_.languageDetector.init(_,this.options.detection,this.options)),this.modules.i18nFormat&&(_.i18nFormat=f(this.modules.i18nFormat),_.i18nFormat.init&&_.i18nFormat.init(this)),this.translator=new Ps(this.services,this.options),this.translator.on("*",function(v){for(var A=arguments.length,N=new Array(A>1?A-1:0),x=1;x<A;x++)N[x-1]=arguments[x];r.emit.apply(r,[v].concat(N))}),this.modules.external.forEach(function(v){v.init&&v.init(r)})}if(this.format=this.options.interpolation.format,n||(n=ze),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var b=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);b.length>0&&b[0]!=="dev"&&(this.options.lng=b[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined");var p=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];p.forEach(function(v){r[v]=function(){var A;return(A=r.store)[v].apply(A,arguments)}});var d=["addResource","addResources","addResourceBundle","removeResourceBundle"];d.forEach(function(v){r[v]=function(){var A;return(A=r.store)[v].apply(A,arguments),r}});var h=Le(),w=function(){var A=function(x,k){r.isInitialized&&!r.initializedStoreOnce&&r.logger.warn("init: i18next is already initialized. You should call init just once!"),r.isInitialized=!0,r.options.isClone||r.logger.log("initialized",r.options),r.emit("initialized",r.options),h.resolve(k),n(x,k)};if(r.languages&&r.options.compatibilityAPI!=="v1"&&!r.isInitialized)return A(null,r.t.bind(r));r.changeLanguage(r.options.lng,A)};return this.options.resources||!this.options.initImmediate?w():setTimeout(w,0),h}},{key:"loadResources",value:function(r){var s=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ze,m=n,f=typeof r=="string"?r:this.language;if(typeof r=="function"&&(m=r),!this.options.resources||this.options.partialBundledLanguages){if(f&&f.toLowerCase()==="cimode")return m();var y=[],t=function(p){if(p){var d=s.services.languageUtils.toResolveHierarchy(p);d.forEach(function(h){y.indexOf(h)<0&&y.push(h)})}};if(f)t(f);else{var _=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);_.forEach(function(b){return t(b)})}this.options.preload&&this.options.preload.forEach(function(b){return t(b)}),this.services.backendConnector.load(y,this.options.ns,function(b){!b&&!s.resolvedLanguage&&s.language&&s.setResolvedLanguage(s.language),m(b)})}else m(null)}},{key:"reloadResources",value:function(r,s,n){var m=Le();return r||(r=this.languages),s||(s=this.options.ns),n||(n=ze),this.services.backendConnector.reload(r,s,function(f){m.resolve(),n(f)}),m}},{key:"use",value:function(r){if(!r)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!r.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return r.type==="backend"&&(this.modules.backend=r),(r.type==="logger"||r.log&&r.warn&&r.error)&&(this.modules.logger=r),r.type==="languageDetector"&&(this.modules.languageDetector=r),r.type==="i18nFormat"&&(this.modules.i18nFormat=r),r.type==="postProcessor"&&Rs.addPostProcessor(r),r.type==="formatter"&&(this.modules.formatter=r),r.type==="3rdParty"&&this.modules.external.push(r),this}},{key:"setResolvedLanguage",value:function(r){if(!(!r||!this.languages)&&!(["cimode","dev"].indexOf(r)>-1))for(var s=0;s<this.languages.length;s++){var n=this.languages[s];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}}},{key:"changeLanguage",value:function(r,s){var n=this;this.isLanguageChangingTo=r;var m=Le();this.emit("languageChanging",r);var f=function(b){n.language=b,n.languages=n.services.languageUtils.toResolveHierarchy(b),n.resolvedLanguage=void 0,n.setResolvedLanguage(b)},y=function(b,p){p?(f(p),n.translator.changeLanguage(p),n.isLanguageChangingTo=void 0,n.emit("languageChanged",p),n.logger.log("languageChanged",p)):n.isLanguageChangingTo=void 0,m.resolve(function(){return n.t.apply(n,arguments)}),s&&s(b,function(){return n.t.apply(n,arguments)})},t=function(b){!r&&!b&&n.services.languageDetector&&(b=[]);var p=typeof b=="string"?b:n.services.languageUtils.getBestMatchFromCodes(b);p&&(n.language||f(p),n.translator.language||n.translator.changeLanguage(p),n.services.languageDetector&&n.services.languageDetector.cacheUserLanguage(p)),n.loadResources(p,function(d){y(d,p)})};return!r&&this.services.languageDetector&&!this.services.languageDetector.async?t(this.services.languageDetector.detect()):!r&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(t):t(r),m}},{key:"getFixedT",value:function(r,s,n){var m=this,f=function y(t,_){var b;if(J(_)!=="object"){for(var p=arguments.length,d=new Array(p>2?p-2:0),h=2;h<p;h++)d[h-2]=arguments[h];b=m.options.overloadTranslationOptionHandler([t,_].concat(d))}else b=le({},_);b.lng=b.lng||y.lng,b.lngs=b.lngs||y.lngs,b.ns=b.ns||y.ns,b.keyPrefix=b.keyPrefix||n||y.keyPrefix;var w=m.options.keySeparator||".",v=b.keyPrefix?"".concat(b.keyPrefix).concat(w).concat(t):t;return m.t(v,b)};return typeof r=="string"?f.lng=r:f.lngs=r,f.ns=s,f.keyPrefix=n,f}},{key:"t",value:function(){var r;return this.translator&&(r=this.translator).translate.apply(r,arguments)}},{key:"exists",value:function(){var r;return this.translator&&(r=this.translator).exists.apply(r,arguments)}},{key:"setDefaultNamespace",value:function(r){this.options.defaultNS=r}},{key:"hasLoadedNamespace",value:function(r){var s=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var m=this.resolvedLanguage||this.languages[0],f=this.options?this.options.fallbackLng:!1,y=this.languages[this.languages.length-1];if(m.toLowerCase()==="cimode")return!0;var t=function(p,d){var h=s.services.backendConnector.state["".concat(p,"|").concat(d)];return h===-1||h===2};if(n.precheck){var _=n.precheck(this,t);if(_!==void 0)return _}return!!(this.hasResourceBundle(m,r)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||t(m,r)&&(!f||t(y,r)))}},{key:"loadNamespaces",value:function(r,s){var n=this,m=Le();return this.options.ns?(typeof r=="string"&&(r=[r]),r.forEach(function(f){n.options.ns.indexOf(f)<0&&n.options.ns.push(f)}),this.loadResources(function(f){m.resolve(),s&&s(f)}),m):(s&&s(),Promise.resolve())}},{key:"loadLanguages",value:function(r,s){var n=Le();typeof r=="string"&&(r=[r]);var m=this.options.preload||[],f=r.filter(function(y){return m.indexOf(y)<0});return f.length?(this.options.preload=m.concat(f),this.loadResources(function(y){n.resolve(),s&&s(y)}),n):(s&&s(),Promise.resolve())}},{key:"dir",value:function(r){if(r||(r=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!r)return"rtl";var s=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"];return s.indexOf(this.services.languageUtils.getLanguagePartFromCode(r))>-1||r.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}},{key:"cloneInstance",value:function(){var r=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ze,m=le(le(le({},this.options),s),{isClone:!0}),f=new o(m);(s.debug!==void 0||s.prefix!==void 0)&&(f.logger=f.logger.clone(s));var y=["store","services","language"];return y.forEach(function(t){f[t]=r[t]}),f.services=le({},this.services),f.services.utils={hasLoadedNamespace:f.hasLoadedNamespace.bind(f)},f.translator=new Ps(f.services,f.options),f.translator.on("*",function(t){for(var _=arguments.length,b=new Array(_>1?_-1:0),p=1;p<_;p++)b[p-1]=arguments[p];f.emit.apply(f,[t].concat(b))}),f.init(m,n),f.translator.options=f.options,f.translator.backendConnector.services.utils={hasLoadedNamespace:f.hasLoadedNamespace.bind(f)},f}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),o}(ye);fe(Me,"createInstance",function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;return new Me(a,i)});var Z=Me.createInstance();Z.createInstance=Me.createInstance,Z.createInstance,Z.init,Z.loadResources,Z.reloadResources,Z.use,Z.changeLanguage,Z.getFixedT,Z.t,Z.exists,Z.setDefaultNamespace,Z.hasLoadedNamespace,Z.loadNamespaces,Z.loadLanguages;const Zt="gw_count_fid",Be="gw_mea_key_fid",Ee="gw_mea_val_fid",ke="gw_paint_fid";function ss(a,i){return!i||i==="expr"?a:`${a}_${i}`}function er(a){return a.enableAgg&&a.aggName?ss(a.fid,a.aggName):a.fid}function sr({rows:a,columns:i}){return a.length&&!a.find(o=>o.analyticType==="measure")?a[a.length-1].sort||"none":i.length&&!i.find(o=>o.analyticType==="measure")&&i[i.length-1].sort||"none"}const Bs=a=>a!=null;function Hs(a,i){if(a.length!==i.length)return!1;for(let o=0;o<a.length;o++)if(a[o]!==i[o])return!1;return!0}const ts={AGGREGATOR_LIST:["sum","mean","median","count","min","max","variance","stdev"],CHART_LAYOUT_TYPE:["auto","fixed","full"],COORD_TYPES:["generic","geographic"],GEOM_TYPES:{generic:["auto","bar","line","area","trail","point","circle","tick","rect","arc","text","boxplot","table"],geographic:["poi","choropleth"]},MAX_HISTORY_SIZE:20,STACK_MODE:["none","stack","normalize","center"],META_FIELD_KEYS:["dimensions","measures"],CHANNEL_LIMIT:{rows:1/0,columns:1/0,color:1,opacity:1,size:1,shape:1,theta:1,radius:1,details:1/0,text:1},POSITION_CHANNEL_CONFIG_LIST:["x","y"],NON_POSITION_CHANNEL_CONFIG_LIST:["color","opacity","shape","size"],EMBEDED_MENU_LIST:["data_interpretation","data_view"],PAINT_MAP_SIZE:128,PAINT_SIZE_FACTOR:4,PAINT_MIN_BRUSH_SIZE:1,PAINT_DEFAULT_BRUSH_SIZE:9,PAINT_MAX_BRUSH_SIZE:36,KEYWORD_DEBOUNCE_SETTING:{timeout:300,leading:!0,trailing:!0}};function tr(){return{dimensions:[],measures:[],rows:[],columns:[],color:[],opacity:[],size:[],shape:[],radius:[],theta:[],longitude:[],latitude:[],geoId:[],details:[],filters:[],text:[]}}function rr(){const[a]=ts.GEOM_TYPES.generic;return{defaultAggregated:!0,geoms:[a],showTableSummary:!1,coordSystem:"generic",stack:"stack",showActions:!1,interactiveScale:!1,sorted:"none",zeroScale:!0,scaleIncludeUnmatchedChoropleth:!1,background:void 0,size:{mode:"auto",width:320,height:200},format:{numberFormat:void 0,timeFormat:void 0,normalizedNumberFormat:void 0},geoKey:"name",resolve:{x:!1,y:!1,color:!1,opacity:!1,shape:!1,size:!1},limit:-1}}const Gs={showActions:!1,showTableSummary:!1,stack:"stack",interactiveScale:!1,zeroScale:!0,background:void 0,size:{mode:"auto",width:320,height:200},format:{numberFormat:void 0,timeFormat:void 0,normalizedNumberFormat:void 0},geoKey:"name",resolve:{x:!1,y:!1,color:!1,opacity:!1,shape:!1,size:!1}},Vs={defaultAggregated:!0,geoms:[ts.GEOM_TYPES.generic[0]],coordSystem:"generic",limit:-1},nr={dimensions:[],measures:[],rows:[],columns:[],color:[],opacity:[],size:[],shape:[],radius:[],theta:[],longitude:[],latitude:[],geoId:[],details:[],filters:[],text:[]};function ar(a){return{...a,encodings:{...tr(),...a.encodings}}}const or=a=>({...a,config:{...rr(),...a.config}}),He=(a,i,o)=>o===a.length?a.concat([i]):a.flatMap((c,r)=>r===o?[i,c]:[c]),Ks=(a,i)=>a.filter((o,c)=>c!==i),he=(a,i,o)=>a.map((c,r)=>r===i?o(c):c);function U(a,i,o){const c=(r,s,n)=>{const[m,...f]=s;return f.length===0?{...r,[m]:n(r[m])}:{...r,[m]:c(r[m],f,n)}};return c(a,i.split("."),o)}const lr=a=>Math.floor(Math.sqrt(2*a));function ir(a){return(i,o)=>{const{base:c,cache:r,cursor:s,now:n,timeline:m}=i;return{base:c,now:a(n,o),cursor:s+1,cache:s-r.cursor>lr(s)?{value:a(r.value,m[r.cursor]),cursor:r.cursor+1}:r,timeline:m.slice(0,s).concat([o])}}}const ie={measureAfterDimension(a){return a.filter(i=>i.analyticType==="dimension").concat(a.filter(i=>i.analyticType==="measure"))},crossLimit(a){return function(i){let o=0;return i.reduce((c,r)=>(r.analyticType==="dimension"&&o<a&&(c.push(r),o++),r.analyticType==="measure"&&c.push(r),c),[])}},forceAnalyticType(a){return function(i){return i.map(o=>({...o,analyticType:a}))}},forceSemanticType(a){return function(i){return i.map(o=>({...o,semanticType:a}))}}};function Ge(a,i){return i.reduce((o,c)=>c(o),a)}function Ws(a,i){const o={};return i.rows&&i.rows.length>0&&(o.rows=Ge(i.rows,[ie.measureAfterDimension,ie.crossLimit(a==="table"?1/0:2)])),i.columns&&i.columns.length>0&&(o.columns=Ge(i.columns,[ie.measureAfterDimension,ie.crossLimit(a==="table"?1/0:2)])),i.latitude&&i.latitude.length>0&&(o.latitude=Ge(i.latitude,[ie.forceAnalyticType("dimension"),ie.forceSemanticType("quantitative"),ie.crossLimit(1)])),i.longitude&&i.longitude.length>0&&(o.longitude=Ge(i.longitude,[ie.forceAnalyticType("dimension"),ie.forceSemanticType("quantitative"),ie.crossLimit(1)])),o}var Ys=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ie={},Ve={},cr={get exports(){return Ve},set exports(a){Ve=a}},Js;function pr(){return Js||(Js=1,function(a){(function(i,o){a.exports?a.exports=o():i.moo=o()})(Ys,function(){var i=Object.prototype.hasOwnProperty,o=Object.prototype.toString,c=typeof new RegExp().sticky=="boolean";function r(l){return l&&o.call(l)==="[object RegExp]"}function s(l){return l&&typeof l=="object"&&!r(l)&&!Array.isArray(l)}function n(l){return l.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function m(l){var $=new RegExp("|"+l);return $.exec("").length-1}function f(l){return"("+l+")"}function y(l){if(!l.length)return"(?!)";var $=l.map(function(g){return"(?:"+g+")"}).join("|");return"(?:"+$+")"}function t(l){if(typeof l=="string")return"(?:"+n(l)+")";if(r(l)){if(l.ignoreCase)throw new Error("RegExp /i flag not allowed");if(l.global)throw new Error("RegExp /g flag is implied");if(l.sticky)throw new Error("RegExp /y flag is implied");if(l.multiline)throw new Error("RegExp /m flag is implied");return l.source}else throw new Error("Not a pattern: "+l)}function _(l,$){return l.length>$?l:Array($-l.length+1).join(" ")+l}function b(l,$){for(var g=l.length,O=0;;){var R=l.lastIndexOf(`
`,g-1);if(R===-1||(O++,g=R,O===$)||g===0)break}var L=O<$?0:g+1;return l.substring(L).split(`
`)}function p(l){for(var $=Object.getOwnPropertyNames(l),g=[],O=0;O<$.length;O++){var R=$[O],L=l[R],I=[].concat(L);if(R==="include"){for(var B=0;B<I.length;B++)g.push({include:I[B]});continue}var F=[];I.forEach(function(j){s(j)?(F.length&&g.push(h(R,F)),g.push(h(R,j)),F=[]):F.push(j)}),F.length&&g.push(h(R,F))}return g}function d(l){for(var $=[],g=0;g<l.length;g++){var O=l[g];if(O.include){for(var R=[].concat(O.include),L=0;L<R.length;L++)$.push({include:R[L]});continue}if(!O.type)throw new Error("Rule has no type: "+JSON.stringify(O));$.push(h(O.type,O))}return $}function h(l,$){if(s($)||($={match:$}),$.include)throw new Error("Matching rules cannot also include states");var g={defaultType:l,lineBreaks:!!$.error||!!$.fallback,pop:!1,next:null,push:null,error:!1,fallback:!1,value:null,type:null,shouldThrow:!1};for(var O in $)i.call($,O)&&(g[O]=$[O]);if(typeof g.type=="string"&&l!==g.type)throw new Error("Type transform cannot be a string (type '"+g.type+"' for token '"+l+"')");var R=g.match;return g.match=Array.isArray(R)?R:R?[R]:[],g.match.sort(function(L,I){return r(L)&&r(I)?0:r(I)?-1:r(L)?1:I.length-L.length}),g}function w(l){return Array.isArray(l)?d(l):p(l)}var v=h("error",{lineBreaks:!0,shouldThrow:!0});function A(l,$){for(var g=null,O=Object.create(null),R=!0,L=null,I=[],B=[],F=0;F<l.length;F++)l[F].fallback&&(R=!1);for(var F=0;F<l.length;F++){var j=l[F];if(j.include)throw new Error("Inheritance is not allowed in stateless lexers");if(j.error||j.fallback){if(g)throw!j.fallback==!g.fallback?new Error("Multiple "+(j.fallback?"fallback":"error")+" rules not allowed (for token '"+j.defaultType+"')"):new Error("fallback and error are mutually exclusive (for token '"+j.defaultType+"')");g=j}var G=j.match.slice();if(R)for(;G.length&&typeof G[0]=="string"&&G[0].length===1;){var ue=G.shift();O[ue.charCodeAt(0)]=j}if(j.pop||j.push||j.next){if(!$)throw new Error("State-switching options are not allowed in stateless lexers (for token '"+j.defaultType+"')");if(j.fallback)throw new Error("State-switching options are not allowed on fallback tokens (for token '"+j.defaultType+"')")}if(G.length!==0){R=!1,I.push(j);for(var _e=0;_e<G.length;_e++){var te=G[_e];if(r(te)){if(L===null)L=te.unicode;else if(L!==te.unicode&&j.fallback===!1)throw new Error("If one rule is /u then all must be")}}var $e=y(G.map(t)),K=new RegExp($e);if(K.test(""))throw new Error("RegExp matches empty string: "+K);var pe=m($e);if(pe>0)throw new Error("RegExp has capture groups: "+K+`
Use (?:  ) instead`);if(!j.lineBreaks&&K.test(`
`))throw new Error("Rule should declare lineBreaks: "+K);B.push(f($e))}}var me=g&&g.fallback,we=c&&!me?"ym":"gm",xe=c||me?"":"|";L===!0&&(we+="u");var ge=new RegExp(y(B)+xe,we);return{regexp:ge,groups:I,fast:O,error:g||v}}function N(l){var $=A(w(l));return new C({start:$},"start")}function x(l,$,g){var O=l&&(l.push||l.next);if(O&&!g[O])throw new Error("Missing state '"+O+"' (in token '"+l.defaultType+"' of state '"+$+"')");if(l&&l.pop&&+l.pop!=1)throw new Error("pop must be 1 (in token '"+l.defaultType+"' of state '"+$+"')")}function k(l,$){var g=l.$all?w(l.$all):[];delete l.$all;var O=Object.getOwnPropertyNames(l);$||($=O[0]);for(var R=Object.create(null),L=0;L<O.length;L++){var I=O[L];R[I]=w(l[I]).concat(g)}for(var L=0;L<O.length;L++)for(var I=O[L],B=R[I],F=Object.create(null),j=0;j<B.length;j++){var G=B[j];if(G.include){var ue=[j,1];if(G.include!==I&&!F[G.include]){F[G.include]=!0;var _e=R[G.include];if(!_e)throw new Error("Cannot include nonexistent state '"+G.include+"' (in state '"+I+"')");for(var te=0;te<_e.length;te++){var $e=_e[te];B.indexOf($e)===-1&&ue.push($e)}}B.splice.apply(B,ue),j--}}for(var K=Object.create(null),L=0;L<O.length;L++){var I=O[L];K[I]=A(R[I],!0)}for(var L=0;L<O.length;L++){for(var pe=O[L],me=K[pe],we=me.groups,j=0;j<we.length;j++)x(we[j],pe,K);for(var xe=Object.getOwnPropertyNames(me.fast),j=0;j<xe.length;j++)x(me.fast[xe[j]],pe,K)}return new C(K,$)}function E(l){for(var $=typeof Map<"u",g=$?new Map:Object.create(null),O=Object.getOwnPropertyNames(l),R=0;R<O.length;R++){var L=O[R],I=l[L],B=Array.isArray(I)?I:[I];B.forEach(function(F){if(typeof F!="string")throw new Error("keyword must be string (in keyword '"+L+"')");$?g.set(F,L):g[F]=L})}return function(F){return $?g.get(F):g[F]}}var C=function(l,$){this.startState=$,this.states=l,this.buffer="",this.stack=[],this.reset()};C.prototype.reset=function(l,$){return this.buffer=l||"",this.index=0,this.line=$?$.line:1,this.col=$?$.col:1,this.queuedToken=$?$.queuedToken:null,this.queuedText=$?$.queuedText:"",this.queuedThrow=$?$.queuedThrow:null,this.setState($?$.state:this.startState),this.stack=$&&$.stack?$.stack.slice():[],this},C.prototype.save=function(){return{line:this.line,col:this.col,state:this.state,stack:this.stack.slice(),queuedToken:this.queuedToken,queuedText:this.queuedText,queuedThrow:this.queuedThrow}},C.prototype.setState=function(l){if(!(!l||this.state===l)){this.state=l;var $=this.states[l];this.groups=$.groups,this.error=$.error,this.re=$.regexp,this.fast=$.fast}},C.prototype.popState=function(){this.setState(this.stack.pop())},C.prototype.pushState=function(l){this.stack.push(this.state),this.setState(l)};var q=c?function(l,$){return l.exec($)}:function(l,$){var g=l.exec($);return g[0].length===0?null:g};C.prototype._getGroup=function(l){for(var $=this.groups.length,g=0;g<$;g++)if(l[g+1]!==void 0)return this.groups[g];throw new Error("Cannot find token type for matched text")};function e(){return this.value}if(C.prototype.next=function(){var l=this.index;if(this.queuedGroup){var $=this._token(this.queuedGroup,this.queuedText,l);return this.queuedGroup=null,this.queuedText="",$}var g=this.buffer;if(l!==g.length){var I=this.fast[g.charCodeAt(l)];if(I)return this._token(I,g.charAt(l),l);var O=this.re;O.lastIndex=l;var R=q(O,g),L=this.error;if(R==null)return this._token(L,g.slice(l,g.length),l);var I=this._getGroup(R),B=R[0];return L.fallback&&R.index!==l?(this.queuedGroup=I,this.queuedText=B,this._token(L,g.slice(l,R.index),l)):this._token(I,B,l)}},C.prototype._token=function(l,$,g){var O=0;if(l.lineBreaks){var R=/\n/g,L=1;if($===`
`)O=1;else for(;R.exec($);)O++,L=R.lastIndex}var I={type:typeof l.type=="function"&&l.type($)||l.defaultType,value:typeof l.value=="function"?l.value($):$,text:$,toString:e,offset:g,lineBreaks:O,line:this.line,col:this.col},B=$.length;if(this.index+=B,this.line+=O,O!==0?this.col=B-L+1:this.col+=B,l.shouldThrow){var F=new Error(this.formatError(I,"invalid syntax"));throw F}return l.pop?this.popState():l.push?this.pushState(l.push):l.next&&this.setState(l.next),I},typeof Symbol<"u"&&Symbol.iterator){var u=function(l){this.lexer=l};u.prototype.next=function(){var l=this.lexer.next();return{value:l,done:!l}},u.prototype[Symbol.iterator]=function(){return this},C.prototype[Symbol.iterator]=function(){return new u(this)}}return C.prototype.formatError=function(l,$){if(l==null)var g=this.buffer.slice(this.index),l={text:g,offset:this.index,lineBreaks:g.indexOf(`
`)===-1?0:1,line:this.line,col:this.col};var O=2,R=Math.max(l.line-O,1),L=l.line+O,I=String(L).length,B=b(this.buffer,this.line-l.line+O+1).slice(0,5),F=[];F.push($+" at line "+l.line+" col "+l.col+":"),F.push("");for(var j=0;j<B.length;j++){var G=B[j],ue=R+j;F.push(_(String(ue),I)+"  "+G),ue===l.line&&F.push(_("",I+l.col+1)+"^")}return F.join(`
`)},C.prototype.clone=function(){return new C(this.states,this.state)},C.prototype.has=function(l){return!0},{compile:N,states:k,error:Object.freeze({error:!0}),fallback:Object.freeze({fallback:!0}),keywords:E}})}(cr)),Ve}var Ke={},mr={get exports(){return Ke},set exports(a){Ke=a}},Qs;function ur(){return Qs||(Qs=1,function(a){(function(i,o){a.exports?a.exports=o():i.nearley=o()})(Ys,function(){function i(y,t,_){return this.id=++i.highestId,this.name=y,this.symbols=t,this.postprocess=_,this}i.highestId=0,i.prototype.toString=function(y){var t=typeof y>"u"?this.symbols.map(f).join(" "):this.symbols.slice(0,y).map(f).join(" ")+"  "+this.symbols.slice(y).map(f).join(" ");return this.name+"  "+t};function o(y,t,_,b){this.rule=y,this.dot=t,this.reference=_,this.data=[],this.wantedBy=b,this.isComplete=this.dot===y.symbols.length}o.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},o.prototype.nextState=function(y){var t=new o(this.rule,this.dot+1,this.reference,this.wantedBy);return t.left=this,t.right=y,t.isComplete&&(t.data=t.build(),t.right=void 0),t},o.prototype.build=function(){var y=[],t=this;do y.push(t.right.data),t=t.left;while(t.left);return y.reverse(),y},o.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,n.fail))};function c(y,t){this.grammar=y,this.index=t,this.states=[],this.wants={},this.scannable=[],this.completed={}}c.prototype.process=function(y){for(var t=this.states,_=this.wants,b=this.completed,p=0;p<t.length;p++){var d=t[p];if(d.isComplete){if(d.finish(),d.data!==n.fail){for(var h=d.wantedBy,w=h.length;w--;){var v=h[w];this.complete(v,d)}if(d.reference===this.index){var A=d.rule.name;(this.completed[A]=this.completed[A]||[]).push(d)}}}else{var A=d.rule.symbols[d.dot];if(typeof A!="string"){this.scannable.push(d);continue}if(_[A]){if(_[A].push(d),b.hasOwnProperty(A))for(var N=b[A],w=0;w<N.length;w++){var x=N[w];this.complete(d,x)}}else _[A]=[d],this.predict(A)}}},c.prototype.predict=function(y){for(var t=this.grammar.byName[y]||[],_=0;_<t.length;_++){var b=t[_],p=this.wants[y],d=new o(b,0,this.index,p);this.states.push(d)}},c.prototype.complete=function(y,t){var _=y.nextState(t);this.states.push(_)};function r(y,t){this.rules=y,this.start=t||this.rules[0].name;var _=this.byName={};this.rules.forEach(function(b){_.hasOwnProperty(b.name)||(_[b.name]=[]),_[b.name].push(b)})}r.fromCompiled=function(b,t){var _=b.Lexer;b.ParserStart&&(t=b.ParserStart,b=b.ParserRules);var b=b.map(function(d){return new i(d.name,d.symbols,d.postprocess)}),p=new r(b,t);return p.lexer=_,p};function s(){this.reset("")}s.prototype.reset=function(y,t){this.buffer=y,this.index=0,this.line=t?t.line:1,this.lastLineBreak=t?-t.col:0},s.prototype.next=function(){if(this.index<this.buffer.length){var y=this.buffer[this.index++];return y===`
`&&(this.line+=1,this.lastLineBreak=this.index),{value:y}}},s.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},s.prototype.formatError=function(y,t){var _=this.buffer;if(typeof _=="string"){var b=_.split(`
`).slice(Math.max(0,this.line-5),this.line),p=_.indexOf(`
`,this.index);p===-1&&(p=_.length);var d=this.index-this.lastLineBreak,h=String(this.line).length;return t+=" at line "+this.line+" col "+d+`:

`,t+=b.map(function(v,A){return w(this.line-b.length+A+1,h)+" "+v},this).join(`
`),t+=`
`+w("",h+d)+`^
`,t}else return t+" at index "+(this.index-1);function w(v,A){var N=String(v);return Array(A-N.length+1).join(" ")+N}};function n(y,t,_){if(y instanceof r)var b=y,_=t;else var b=r.fromCompiled(y,t);this.grammar=b,this.options={keepHistory:!1,lexer:b.lexer||new s};for(var p in _||{})this.options[p]=_[p];this.lexer=this.options.lexer,this.lexerState=void 0;var d=new c(b,0);this.table=[d],d.wants[b.start]=[],d.predict(b.start),d.process(),this.current=0}n.fail={},n.prototype.feed=function(y){var t=this.lexer;t.reset(y,this.lexerState);for(var _;;){try{if(_=t.next(),!_)break}catch(C){var h=new c(this.grammar,this.current+1);this.table.push(h);var b=new Error(this.reportLexerError(C));throw b.offset=this.current,b.token=C.token,b}var p=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var d=this.current+1,h=new c(this.grammar,d);this.table.push(h);for(var w=_.text!==void 0?_.text:_.value,v=t.constructor===s?_.value:_,A=p.scannable,N=A.length;N--;){var x=A[N],k=x.rule.symbols[x.dot];if(k.test?k.test(v):k.type?k.type===_.type:k.literal===w){var E=x.nextState({data:v,token:_,isToken:!0,reference:d-1});h.states.push(E)}}if(h.process(),h.states.length===0){var b=new Error(this.reportError(_));throw b.offset=this.current,b.token=_,b}this.options.keepHistory&&(p.lexerState=t.save()),this.current++}return p&&(this.lexerState=t.save()),this.results=this.finish(),this},n.prototype.reportLexerError=function(y){var t,_,b=y.token;return b?(t="input "+JSON.stringify(b.text[0])+" (lexer error)",_=this.lexer.formatError(b,"Syntax error")):(t="input (lexer error)",_=y.message),this.reportErrorCommon(_,t)},n.prototype.reportError=function(y){var t=(y.type?y.type+" token: ":"")+JSON.stringify(y.value!==void 0?y.value:y),_=this.lexer.formatError(y,"Syntax error");return this.reportErrorCommon(_,t)},n.prototype.reportErrorCommon=function(y,t){var _=[];_.push(y);var b=this.table.length-2,p=this.table[b],d=p.states.filter(function(w){var v=w.rule.symbols[w.dot];return v&&typeof v!="string"});if(d.length===0)_.push("Unexpected "+t+`. I did not expect any more input. Here is the state of my parse table:
`),this.displayStateStack(p.states,_);else{_.push("Unexpected "+t+`. Instead, I was expecting to see one of the following:
`);var h=d.map(function(w){return this.buildFirstStateStack(w,[])||[w]},this);h.forEach(function(w){var v=w[0],A=v.rule.symbols[v.dot],N=this.getSymbolDisplay(A);_.push("A "+N+" based on:"),this.displayStateStack(w,_)},this)}return _.push(""),_.join(`
`)},n.prototype.displayStateStack=function(y,t){for(var _,b=0,p=0;p<y.length;p++){var d=y[p],h=d.rule.toString(d.dot);h===_?b++:(b>0&&t.push("    ^ "+b+" more lines identical to this"),b=0,t.push("    "+h)),_=h}},n.prototype.getSymbolDisplay=function(y){return m(y)},n.prototype.buildFirstStateStack=function(y,t){if(t.indexOf(y)!==-1)return null;if(y.wantedBy.length===0)return[y];var _=y.wantedBy[0],b=[y].concat(t),p=this.buildFirstStateStack(_,b);return p===null?null:[y].concat(p)},n.prototype.save=function(){var y=this.table[this.current];return y.lexerState=this.lexerState,y},n.prototype.restore=function(y){var t=y.index;this.current=t,this.table[t]=y,this.table.splice(t+1),this.lexerState=y.lexerState,this.results=this.finish()},n.prototype.rewind=function(y){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[y])},n.prototype.finish=function(){var y=[],t=this.grammar.start,_=this.table[this.table.length-1];return _.states.forEach(function(b){b.rule.name===t&&b.dot===b.rule.symbols.length&&b.reference===0&&b.data!==n.fail&&y.push(b)}),y.map(function(b){return b.data})};function m(y){var t=typeof y;if(t==="string")return y;if(t==="object"){if(y.literal)return JSON.stringify(y.literal);if(y instanceof RegExp)return"character matching "+y;if(y.type)return y.type+" token";if(y.test)return"token matching "+String(y.test);throw new Error("Unknown symbol type: "+y)}}function f(y){var t=typeof y;if(t==="string")return y;if(t==="object"){if(y.literal)return JSON.stringify(y.literal);if(y instanceof RegExp)return y.toString();if(y.type)return"%"+y.type;if(y.test)return"<"+String(y.test)+">";throw new Error("Unknown symbol type: "+y)}}return{Parser:n,Grammar:r,Rule:i}})}(mr)),Ke}(function(a){(function(i,o){for(var c in o)i[c]=o[c]})(a,function(i){var o={};function c(r){if(o[r])return o[r].exports;var s=o[r]={i:r,l:!1,exports:{}};return i[r].call(s.exports,s,s.exports,c),s.l=!0,s.exports}return c.m=i,c.c=o,c.d=function(r,s,n){c.o(r,s)||Object.defineProperty(r,s,{enumerable:!0,get:n})},c.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},c.t=function(r,s){if(s&1&&(r=c(r)),s&8||s&4&&typeof r=="object"&&r&&r.__esModule)return r;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:r}),s&2&&typeof r!="string")for(var m in r)c.d(n,m,function(f){return r[f]}.bind(null,m));return n},c.n=function(r){var s=r&&r.__esModule?function(){return r.default}:function(){return r};return c.d(s,"a",s),s},c.o=function(r,s){return Object.prototype.hasOwnProperty.call(r,s)},c.p="",c(c.s=7)}([function(i,o){i.exports=pr()},function(i,o,c){Object.defineProperty(o,"__esModule",{value:!0}),o.unbox=o.doubleQuoted=o.box=o.track=o.tracking=o.trackingComments=o.lexerAny=o.lexer=void 0;const r=c(0),s=c(3),n={};for(const k of s.sqlKeywords)n["kw_"+k.toLowerCase()]=k;const m=k=>{const E=(0,r.keywords)(k);return C=>E(C.toUpperCase())};o.lexer=(0,r.compile)({word:{match:/[eE](?!')[A-Za-z0-9_]*|[a-df-zA-DF-Z_][A-Za-z0-9_]*/,type:m(n),value:k=>k.toLowerCase()},wordQuoted:{match:/"(?:[^"\*]|"")+"/,type:()=>"quoted_word",value:k=>k.substring(1,k.length-1)},string:{match:/'(?:[^']|\'\')*'/,value:k=>k.substring(1,k.length-1).replace(/''/g,"'")},eString:{match:/\b(?:e|E)'(?:[^'\\]|[\r\n\s]|(?:\\\s)|(?:\\\n)|(?:\\.)|(?:\'\'))+'/,value:k=>k.substring(2,k.length-1).replace(/''/g,"'").replace(/\\([\s\n])/g,(E,C)=>C).replace(/\\./g,E=>JSON.parse('"'+E+'"'))},qparam:{match:/\$\d+/},commentLine:/\-\-.*?$[\s\r\n]*/,commentFullOpen:/\/\*/,commentFullClose:/\*\/[\s\r\n]*/,star:"*",comma:",",space:{match:/[\s\t\n\v\f\r]+/,lineBreaks:!0},int:/\-?\d+(?![\.\d])/,float:/\-?(?:(?:\d*\.\d+)|(?:\d+\.\d*))/,lparen:"(",rparen:")",lbracket:"[",rbracket:"]",semicolon:";",dot:/\.(?!\d)/,op_cast:"::",op_colon:":",op_plus:"+",op_eq:"=",op_neq:{match:/(?:!=)|(?:\<\>)/,value:()=>"!="},op_membertext:"->>",op_member:"->",op_minus:"-",op_div:/\//,op_not_ilike:/\!~~\*/,op_not_like:/\!~~/,op_ilike:/~~\*/,op_like:/~~/,op_mod:"%",op_exp:"^",op_additive:{match:["||","-","#-","&&"]},op_compare:{match:[">",">=","<","<=","@>","<@","?","?|","?&","#>>",">>","<<","~","~*","!~","!~*","@@"]},ops_others:{match:["|","&","^","#"]},codeblock:{match:/\$\$(?:.|[\s\t\n\v\f\r])*?\$\$/s,lineBreaks:!0,value:k=>k.substring(2,k.length-2)}}),o.lexer.next=(k=>()=>{let E,C=null;for(;E=k.call(o.lexer);){if(E.type==="commentFullOpen"){if(C===null){C={nested:0,offset:E.offset,text:E.text};continue}C.nested++}if(C!=null){if(C.text+=E.text,E.type==="commentFullClose"){if(C.nested===0){f==null||f.push(y(C)),C=null;continue}C.nested--}continue}if(E.type!=="space"){if(E.type==="commentLine"){f==null||f.push(y(E));continue}break}}if(_&&E){const q=E.offset,e={start:q,end:q+E.text.length};E._location=e}return E})(o.lexer.next),o.lexerAny=o.lexer;let f=null;const y=({offset:k,text:E})=>({_location:{start:k,end:k+E.length},comment:E});function t(k){if(f)throw new Error("WAT ? Recursive comments tracking  ?");try{f=[];const E=k();return{comments:f,ast:E}}finally{f=null}}o.trackingComments=t;let _=!1;function b(k){if(_)return k();try{return _=!0,k()}finally{_=!1}}o.tracking=b;function p(k,E){if(!_||!E||typeof E!="object")return E;const C=x(k,!0),q=x(k,!1);if(!C||!q)return E;if(C===q)E._location=C;else{const e={start:C.start,end:q.end};E._location=e}return E}o.track=p;const d=Symbol("_literal"),h=Symbol("_doublequoted");function w(k,E,C){return!_&&!C?E:p(k,{[d]:E,[h]:C})}o.box=w;function v(k){return Array.isArray(k)&&k.length===1&&(k=v(k[0])),Array.isArray(k)&&!k.length?null:k}function A(k){const E=v(k);if(typeof k=="object"&&(E!=null&&E[h]))return{doubleQuoted:!0}}o.doubleQuoted=A;function N(k){var E;return typeof k=="object"&&(E=k==null?void 0:k[d])!==null&&E!==void 0?E:k}o.unbox=N;function x(k,E){if(!k)return null;if(Array.isArray(k)){const C=E?1:-1;for(let q=E?0:k.length-1;q>=0&&q<k.length;q+=C){const e=x(k[q],E);if(e)return e}return null}return typeof k!="object"?null:k._location}},function(i,o,c){Object.defineProperty(o,"__esModule",{value:!0}),o.AstDefaultMapper=o.arrayNilMap=o.assignChanged=o.astMapper=void 0;const r=c(6);function s(b){const p=new y;return p.wrapped=b(p),p}o.astMapper=s;function n(b,p){if(!b)return b;let d=!1;for(const h of Object.keys(p))if(b[h]!==p[h]){d=!0;break}return d?(0,r.trimNullish)({...b,...p},0):b}o.assignChanged=n;function m(b,p){if(!(b!=null&&b.length))return b;let d=!1,h=b;for(let w=0;w<b.length;w++){const v=b[w],A=p(v);!d&&(!A||A!==v)&&(d=!0,h=b.slice(0,w)),A&&d&&h.push(A)}return h}o.arrayNilMap=m;function f(b){switch(b==null?void 0:b.type){case"select":case"delete":case"insert":case"update":case"union":case"union all":case"with":return!0;default:return!1}}class y{super(){return new _(this)}statement(p){switch(p.type){case"alter table":return this.alterTable(p);case"alter index":return this.alterIndex(p);case"commit":case"start transaction":case"rollback":return this.transaction(p);case"create index":return this.createIndex(p);case"create table":return this.createTable(p);case"truncate table":return this.truncateTable(p);case"delete":return this.delete(p);case"insert":return this.insert(p);case"with":return this.with(p);case"with recursive":return this.withRecursive(p);case"select":return this.selection(p);case"update":return this.update(p);case"create extension":return this.createExtension(p);case"tablespace":return this.tablespace(p);case"set":return this.setGlobal(p);case"set timezone":return this.setTimezone(p);case"create sequence":return this.createSequence(p);case"alter sequence":return this.alterSequence(p);case"begin":return this.begin(p);case"drop table":case"drop index":case"drop sequence":case"drop type":case"drop trigger":return this.drop(p);case"create enum":return this.createEnum(p);case"create composite type":return this.createCompositeType(p);case"union":case"union all":return this.union(p);case"show":return this.show(p);case"prepare":return this.prepare(p);case"deallocate":return this.deallocate(p);case"create view":return this.createView(p);case"create materialized view":return this.createMaterializedView(p);case"refresh materialized view":return this.refreshMaterializedView(p);case"create schema":return this.createSchema(p);case"raise":return this.raise(p);case"comment":return this.comment(p);case"do":return this.do(p);case"create function":return this.createFunction(p);case"drop function":return this.dropFunction(p);case"values":return this.values(p);default:throw r.NotSupported.never(p)}}comment(p){return p}createView(p){const d=this.select(p.query);if(!d)return null;const h=this.tableRef(p.name);return h?n(p,{query:d,name:h}):null}createMaterializedView(p){const d=this.select(p.query);if(!d)return null;const h=this.tableRef(p.name);return h?n(p,{query:d,name:h}):null}refreshMaterializedView(p){return p}do(p){return p}createFunction(p){const d=m(p.arguments,w=>{const v=this.dataType(w.type);return n(w,{type:v})});let h;if(p.returns)switch(p.returns.kind){case"table":h=n(p.returns,{columns:m(p.returns.columns,w=>{const v=this.dataType(w.type);return v&&n(w,{type:v})})});break;case void 0:case null:case"array":h=this.dataType(p.returns);break;default:throw r.NotSupported.never(p.returns)}return n(p,{returns:h,arguments:d})}dropFunction(p){const d=m(p.arguments,h=>{const w=this.dataType(h.type);return n(h,{type:w})});return n(p,{arguments:d})}show(p){return p}createEnum(p){return p}createCompositeType(p){const d=m(p.attributes,h=>n(h,{dataType:this.dataType(h.dataType)}));return n(p,{attributes:d})}drop(p){return p}alterSequence(p){return p.change.type==="set options"&&p.change.as&&this.dataType(p.change.as),p}begin(p){return p}createSequence(p){return p.options.as&&this.dataType(p.options.as),p}tablespace(p){return p}setGlobal(p){return p}setTimezone(p){return p}update(p){if(!p)return p;const d=this.tableRef(p.table);if(!d)return null;const h=p.from&&this.from(p.from),w=p.where&&this.expr(p.where),v=m(p.sets,N=>this.set(N));if(!(v!=null&&v.length))return null;const A=m(p.returning,N=>this.selectionColumn(N));return n(p,{table:d,where:w,sets:v,from:h,returning:A})}insert(p){var d,h;const w=this.tableRef(p.into);if(!w)return null;const v=p.insert&&this.select(p.insert);if(!v)return null;const A=m(p.returning,k=>this.selectionColumn(k));let N=(d=p.onConflict)===null||d===void 0?void 0:d.on;switch(N==null?void 0:N.type){case"on constraint":break;case"on expr":N=n(N,{exprs:m(N.exprs,k=>this.expr(k))});break;case null:case void 0:break;default:throw r.NotSupported.never(N)}let x=(h=p.onConflict)===null||h===void 0?void 0:h.do;if(x&&x!=="do nothing"){const k=m(x.sets,E=>this.set(E));k!=null&&k.length?x.sets!==k&&(x={sets:k}):x="do nothing"}return n(p,{into:w,insert:v,returning:A,onConflict:x?n(p.onConflict,{do:x,on:N}):p.onConflict})}raise(p){return n(p,{formatExprs:p.formatExprs&&m(p.formatExprs,d=>this.expr(d)),using:p.using&&m(p.using,d=>n(d,{value:this.expr(d.value)}))})}delete(p){const d=this.tableRef(p.from);if(!d)return null;const h=p.where&&this.expr(p.where),w=m(p.returning,v=>this.selectionColumn(v));return n(p,{where:h,returning:w,from:d})}createSchema(p){return p}createTable(p){const d=m(p.columns,h=>{switch(h.kind){case"column":return this.createColumn(h);case"like table":return this.likeTable(h);default:throw r.NotSupported.never(h)}});return d!=null&&d.length?n(p,{columns:d}):null}likeTable(p){const d=this.tableRef(p.like);return d?n(p,{like:d}):null}truncateTable(p){return p}constraint(p){switch(p.type){case"not null":case"null":case"primary key":case"unique":case"add generated":return p;case"default":{const d=this.expr(p.default);return d?n(p,{default:d}):null}case"check":{const d=this.expr(p.expr);return d?n(p,{expr:d}):null}case"reference":{const d=this.tableRef(p.foreignTable);return d?n(p,{foreignTable:d}):null}default:throw r.NotSupported.never(p)}}set(p){const d=this.expr(p.value);return d?n(p,{value:d}):null}dataType(p){return p}tableRef(p){return p}transaction(p){return p}createExtension(p){return p}createIndex(p){const d=m(p.expressions,h=>{const w=this.expr(h.expression);return w===h.expression?h:w?{...h,expression:w}:null});return d!=null&&d.length?n(p,{expressions:d}):null}prepare(p){const d=this.statement(p.statement);return d?n(p,{args:m(p.args,h=>this.dataType(h)),statement:d}):null}deallocate(p){return p}alterIndex(p){return p}alterTable(p){var d;const h=this.tableRef(p.table);if(!h)return null;let w=[],v=!1;for(let A=0;A<(((d=p.changes)===null||d===void 0?void 0:d.length)||0);A++){const N=p.changes[A],x=this.tableAlteration(N,p.table);v=v||x!=N,x&&w.push(x)}return w.length?v?n(p,{table:h,changes:w}):p:null}tableAlteration(p,d){switch(p.type){case"add column":return this.addColumn(p,d);case"add constraint":return this.addConstraint(p,d);case"alter column":return this.alterColumn(p,d);case"rename":return this.renameTable(p,d);case"rename column":return this.renameColumn(p,d);case"rename constraint":return this.renameConstraint(p,d);case"drop column":return this.dropColumn(p,d);case"drop constraint":return this.dropConstraint(p,d);case"owner":return this.setTableOwner(p,d);default:throw r.NotSupported.never(p)}}dropColumn(p,d){return p}dropConstraint(p,d){return p}setTableOwner(p,d){return p}renameConstraint(p,d){return p}renameColumn(p,d){return p}renameTable(p,d){return p}alterColumn(p,d){let h;switch(p.alter.type){case"set default":h=this.setColumnDefault(p.alter,d,p.column);break;case"set type":h=this.setColumnType(p.alter,d,p.column);break;case"drop default":case"set not null":case"drop not null":h=this.alterColumnSimple(p.alter,d,p.column);break;case"add generated":h=this.alterColumnAddGenerated(p.alter,d,p.column);break;default:throw r.NotSupported.never(p.alter)}return h?n(p,{alter:h}):null}setColumnType(p,d,h){const w=this.dataType(p.dataType);return n(p,{dataType:w})}alterColumnAddGenerated(p,d,h){return p}alterColumnSimple(p,d,h){return p}setColumnDefault(p,d,h){const w=this.expr(p.default);return w?n(p,{default:w}):null}addConstraint(p,d){return p}addColumn(p,d){const h=this.createColumn(p.column);return h?n(p,{column:h}):null}createColumn(p){var d;const h=this.dataType(p.dataType);if(!h)return null;const w=(d=m(p.constraints,v=>this.constraint(v)))!==null&&d!==void 0?d:void 0;return n(p,{dataType:h,constraints:w})}select(p){switch(p.type){case"select":return this.selection(p);case"union":case"union all":return this.union(p);case"with":return this.with(p);case"values":return this.values(p);case"with recursive":return this.withRecursive(p);default:throw r.NotSupported.never(p)}}selection(p){var d,h;const w=m(p.from,C=>this.from(C)),v=m(p.columns,C=>this.selectionColumn(C)),A=p.where&&this.expr(p.where),N=m(p.groupBy,C=>this.expr(C)),x=p.having&&this.expr(p.having),k=this.orderBy(p.orderBy),E=n(p.limit,{limit:this.expr((d=p.limit)===null||d===void 0?void 0:d.limit),offset:this.expr((h=p.limit)===null||h===void 0?void 0:h.offset)});return n(p,{from:w,columns:v,where:A,groupBy:N,having:x,orderBy:k,limit:E})}orderBy(p){return m(p,d=>{const h=this.expr(d.by);return h?h===d.by?d:{...d,by:h}:null})}union(p){const d=this.select(p.left),h=this.select(p.right);return!d||!h?d??h:n(p,{left:d,right:h})}with(p){const d=m(p.bind,w=>{const v=this.statement(w.statement);return f(v)?n(w,{statement:v}):null});if(!d)return null;const h=this.statement(p.in);return f(h)?n(p,{bind:d,in:h}):null}withRecursive(p){const d=this.union(p.bind);if(!d||d.type!=="union"&&d.type!=="union all")return null;const h=this.statement(p.in);return f(h)?n(p,{bind:d,in:h}):null}from(p){switch(p.type){case"table":return this.fromTable(p);case"statement":return this.fromStatement(p);case"call":return this.fromCall(p);default:throw r.NotSupported.never(p)}}fromCall(p){const d=this.call(p);return!d||d.type!=="call"?null:n(p,d)}fromStatement(p){const d=this.select(p.statement);if(!d)return null;const h=p.join&&this.join(p.join);return n(p,{statement:d,join:h})}values(p){const d=m(p.values,h=>m(h,w=>this.expr(w)));return d!=null&&d.length?n(p,{values:d}):null}join(p){const d=p.on&&this.expr(p.on);return!d&&!p.using?p:n(p,{on:d})}fromTable(p){const d=this.tableRef(p.name);if(!d)return null;const h=p.join&&this.join(p.join);return n(p,{name:d,join:h})}selectionColumn(p){const d=this.expr(p.expr);return d?n(p,{expr:d}):null}expr(p){if(!p)return p;switch(p.type){case"binary":return this.binary(p);case"unary":return this.unary(p);case"ref":return this.ref(p);case"string":case"numeric":case"integer":case"boolean":case"constant":case"null":return this.constant(p);case"list":case"array":return this.array(p);case"array select":return this.arraySelect(p);case"call":return this.call(p);case"cast":return this.cast(p);case"case":return this.case(p);case"member":return this.member(p);case"arrayIndex":return this.arrayIndex(p);case"ternary":return this.ternary(p);case"select":case"union":case"union all":case"with":case"with recursive":return this.select(p);case"keyword":return this.valueKeyword(p);case"parameter":return this.parameter(p);case"extract":return this.extract(p);case"overlay":return this.callOverlay(p);case"substring":return this.callSubstring(p);case"values":return this.values(p);case"default":return this.default(p);default:throw r.NotSupported.never(p)}}arraySelect(p){const d=this.select(p.select);return d?n(p,{select:d}):null}extract(p){const d=this.expr(p.from);return d?n(p,{from:d}):null}valueKeyword(p){return p}ternary(p){const d=this.expr(p.value),h=this.expr(p.lo),w=this.expr(p.hi);return!d||!h||!w?null:n(p,{value:d,lo:h,hi:w})}parameter(p){return p}arrayIndex(p){const d=this.expr(p.array),h=this.expr(p.index);return!d||!h?null:n(p,{array:d,index:h})}member(p){const d=this.expr(p.operand);return d?n(p,{operand:d}):null}case(p){const d=p.value&&this.expr(p.value),h=m(p.whens,v=>{const A=this.expr(v.when),N=this.expr(v.value);return!A||!N?null:n(v,{value:N,when:A})});if(!(h!=null&&h.length))return null;const w=p.else&&this.expr(p.else);return n(p,{value:d,whens:h,else:w})}cast(p){const d=this.expr(p.operand);return d?n(p,{operand:d}):null}call(p){const d=m(p.args,v=>this.expr(v));if(!d)return null;const h=this.orderBy(p.orderBy),w=this.expr(p.filter);return n(p,{args:d,orderBy:h,filter:w})}callSubstring(p){return n(p,{value:this.expr(p.value),from:this.expr(p.from),for:this.expr(p.for)})}callOverlay(p){return n(p,{value:this.expr(p.value),placing:this.expr(p.placing),from:this.expr(p.from),for:this.expr(p.for)})}array(p){const d=m(p.expressions,h=>this.expr(h));return d?n(p,{expressions:d}):null}constant(p){return p}default(p){return p}ref(p){return p}unary(p){const d=this.expr(p.operand);return d?n(p,{operand:d}):null}binary(p){const d=this.expr(p.left),h=this.expr(p.right);return!d||!h?null:n(p,{left:d,right:h})}}o.AstDefaultMapper=y;const t=y.prototype;for(const b of Object.getOwnPropertyNames(t)){const p=t[b];b==="constructor"||b==="super"||typeof p!="function"||Object.defineProperty(t,b,{configurable:!1,get(){return function(...d){var h;if(this.skipNext)return this.skipNext=!1,p.apply(this,d);const w=(h=this.wrapped)===null||h===void 0?void 0:h[b];return w?w.apply(this.wrapped,d):p.apply(this,d)}}})}class _ extends y{constructor(p){super(),this.parent=p}}for(const b of Object.getOwnPropertyNames(t)){const p=t[b];b==="constructor"||b==="super"||typeof p!="function"||Object.defineProperty(_.prototype,b,{configurable:!1,get(){return function(...d){return this.parent.skipNext=!0,p.apply(this.parent,d)}}})}},function(i,o,c){Object.defineProperty(o,"__esModule",{value:!0}),o.sqlKeywords=void 0,o.sqlKeywords=["ALL","ANALYSE","ANALYZE","AND","ANY","ARRAY","AS","ASC","ASYMMETRIC","AUTHORIZATION","BINARY","BOTH","CASE","CAST","CHECK","COLLATE","COLLATION","CONCURRENTLY","CONSTRAINT","CREATE","CROSS","CURRENT_CATALOG","CURRENT_DATE","CURRENT_ROLE","CURRENT_SCHEMA","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","DEFAULT","DEFERRABLE","DESC","DISTINCT","DO","ELSE","END","EXCEPT","FALSE","FETCH","FOR","FOREIGN","FREEZE","FROM","FULL","GRANT","GROUP","HAVING","ILIKE","IN","INITIALLY","INNER","INTERSECT","INTO","IS","ISNULL","JOIN","LATERAL","LEADING","LEFT","LIKE","LIMIT","LOCALTIME","LOCALTIMESTAMP","NATURAL","NOT","NOTNULL","NULL","OFFSET","ON","ONLY","OR","ORDER","OUTER","OVERLAPS","PLACING","PRIMARY","REFERENCES","RETURNING","RIGHT","SELECT","SESSION_USER","SIMILAR","SOME","SYMMETRIC","TABLE","TABLESAMPLE","THEN","TO","TRAILING","TRUE","UNION","UNIQUE","USER","USING","VARIADIC","VERBOSE","WHEN","WHERE","WINDOW","WITH","PRECISION"]},function(i,o,c){Object.defineProperty(o,"__esModule",{value:!0}),o.intervalToString=o.normalizeInterval=o.buildInterval=void 0;const r=[["years",12],["months",30],["days",24],["hours",60],["minutes",60],["seconds",1e3],["milliseconds",0]];function*s(_){if(typeof _[1]=="number")yield _;else for(const b of _)yield*s(b)}function n(_,b){var p;const d={};if(b==="invalid")throw new Error(`invalid input syntax for type interval: "${_}"`);for(const[h,w]of s(b))d[h]=((p=d[h])!==null&&p!==void 0?p:0)+w;return d}o.buildInterval=n;function m(_){var b,p,d,h,w,v,A,N,x;const k={..._};for(let q=0;q<r.length;q++){const[e,u]=r[q],l=(b=k[e])!==null&&b!==void 0?b:0,$=l>=0?Math.floor(l):Math.ceil(l);if(!l||$===l)continue;const g=(p=r[q+1])===null||p===void 0?void 0:p[0];g&&(k[g]=((d=k[g])!==null&&d!==void 0?d:0)+u*(l-$)),k[e]=$}if(k.months||k.years){const q=((h=k.months)!==null&&h!==void 0?h:0)+((w=k.years)!==null&&w!==void 0?w:0)*12;k.months=q%12,k.years=(q-k.months)/12}let E=((v=k.hours)!==null&&v!==void 0?v:0)*3600+((A=k.minutes)!==null&&A!==void 0?A:0)*60+((N=k.seconds)!==null&&N!==void 0?N:0)+((x=k.milliseconds)!==null&&x!==void 0?x:0)/1e3,C=1;E<0&&(C=-1,E=-E),E>=3600?(k.hours=C*Math.floor(E/3600),E-=C*k.hours*3600):delete k.hours,E>=60?(k.minutes=C*Math.floor(E/60),E-=C*k.minutes*60):delete k.minutes,E>0?(k.seconds=C*Math.floor(E),E-=C*k.seconds):delete k.seconds,E>0?k.milliseconds=C*Math.round(E*1e3):delete k.milliseconds;for(const[q]of r)k[q]||delete k[q];return k}o.normalizeInterval=m;function f(_){var b,p,d;_=m(_);const h=[];if(_.years&&h.push(_.years===1?"1 year":_.years+" years"),_.months&&h.push(_.months===1?"1 month":_.months+" months"),_.days&&h.push(_.days===1?"1 day":_.days+" days"),_.hours||_.minutes||_.seconds||_.milliseconds){let w=`${y((b=_.hours)!==null&&b!==void 0?b:0)}:${y((p=_.minutes)!==null&&p!==void 0?p:0)}:${y((d=_.seconds)!==null&&d!==void 0?d:0)}`;_.milliseconds&&(w=w+(_.milliseconds/1e3).toString().substr(1)),(t(_.hours)||t(_.minutes)||t(_.seconds)||t(_.milliseconds))&&(w="-"+w),h.push(w)}return h.join(" ")}o.intervalToString=f;function y(_){return _=Math.abs(_),_<10?"0"+_:_.toString()}function t(_){return _&&_<0}},function(i,o,c){Object.defineProperty(o,"__esModule",{value:!0}),o.astVisitor=void 0;const r=c(2);class s{super(){return new m(this)}}const n=r.AstDefaultMapper.prototype;for(const y of Object.getOwnPropertyNames(n)){const t=n[y];y==="constructor"||y==="super"||typeof t!="function"||Object.defineProperty(s.prototype,y,{configurable:!1,get(){return function(..._){const b=this.visitor[y];return b?(b.apply(this.visitor,_),_[0]):t.apply(this,_)}}})}class m{constructor(t){this.parent=t}}for(const y of Object.getOwnPropertyNames(n)){const t=n[y];y==="constructor"||y==="super"||typeof t!="function"||Object.defineProperty(m.prototype,y,{configurable:!1,get(){return function(..._){return t.apply(this.parent,_)}}})}function f(y){return(0,r.astMapper)(t=>{const _=new s;return _.mapper=t,_.visitor=y(_),_})}o.astVisitor=f},function(i,o,c){Object.defineProperty(o,"__esModule",{value:!0}),o.trimNullish=o.NotSupported=void 0;class r extends Error{constructor(m){super("Not supported"+(m?": "+m:""))}static never(m,f){return new r(`${f??""} ${JSON.stringify(m)}`)}}o.NotSupported=r;function s(n,m=5){if(m<0||(n instanceof Array&&n.forEach(f=>s(f,m-1)),typeof n!="object"||n instanceof Date)||!n)return n;for(const f of Object.keys(n)){const y=n[f];y==null?delete n[f]:s(y,m-1)}return n}o.trimNullish=s},function(i,o,c){var r=this&&this.__createBinding||(Object.create?function(_,b,p,d){d===void 0&&(d=p);var h=Object.getOwnPropertyDescriptor(b,p);(!h||("get"in h?!b.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return b[p]}}),Object.defineProperty(_,d,h)}:function(_,b,p,d){d===void 0&&(d=p),_[d]=b[p]}),s=this&&this.__exportStar||function(_,b){for(var p in _)p!=="default"&&!Object.prototype.hasOwnProperty.call(b,p)&&r(b,_,p)};Object.defineProperty(o,"__esModule",{value:!0}),o.normalizeInterval=o.intervalToString=o.toSql=o.astMapper=o.assignChanged=o.arrayNilMap=o.astVisitor=o.parseWithComments=o.parseIntervalLiteral=o.parseGeometricLiteral=o.parseArrayLiteral=o.parseFirst=o.parse=void 0;var n=c(8);Object.defineProperty(o,"parse",{enumerable:!0,get:function(){return n.parse}}),Object.defineProperty(o,"parseFirst",{enumerable:!0,get:function(){return n.parseFirst}}),Object.defineProperty(o,"parseArrayLiteral",{enumerable:!0,get:function(){return n.parseArrayLiteral}}),Object.defineProperty(o,"parseGeometricLiteral",{enumerable:!0,get:function(){return n.parseGeometricLiteral}}),Object.defineProperty(o,"parseIntervalLiteral",{enumerable:!0,get:function(){return n.parseIntervalLiteral}}),Object.defineProperty(o,"parseWithComments",{enumerable:!0,get:function(){return n.parseWithComments}});var m=c(5);Object.defineProperty(o,"astVisitor",{enumerable:!0,get:function(){return m.astVisitor}});var f=c(2);Object.defineProperty(o,"arrayNilMap",{enumerable:!0,get:function(){return f.arrayNilMap}}),Object.defineProperty(o,"assignChanged",{enumerable:!0,get:function(){return f.assignChanged}}),Object.defineProperty(o,"astMapper",{enumerable:!0,get:function(){return f.astMapper}});var y=c(19);Object.defineProperty(o,"toSql",{enumerable:!0,get:function(){return y.toSql}}),s(c(21),o);var t=c(4);Object.defineProperty(o,"intervalToString",{enumerable:!0,get:function(){return t.intervalToString}}),Object.defineProperty(o,"normalizeInterval",{enumerable:!0,get:function(){return t.normalizeInterval}})},function(i,o,c){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(o,"__esModule",{value:!0}),o.parseGeometricLiteral=o.parseIntervalLiteral=o.parseArrayLiteral=o.parse=o.parseWithComments=o.parseFirst=void 0;const s=c(9),n=r(c(10)),m=r(c(11)),f=r(c(13)),y=r(c(15)),t=r(c(17)),_=c(4),b=c(1);let p,d,h,w,v;function A(e){return x(e)[0]}o.parseFirst=A;function N(e,u){return(0,b.trackingComments)(()=>x(e,u))}o.parseWithComments=N;function x(e,u){p||(p=s.Grammar.fromCompiled(n.default));const l=typeof u=="string"?u:u==null?void 0:u.entry,$=typeof u=="string"?null:u,g=()=>q(e,p,l);let O=$!=null&&$.locationTracking?(0,b.tracking)(g):g();return typeof u!="string"&&!Array.isArray(O)&&(O=[O]),O}o.parse=x;function k(e){return d||(d=s.Grammar.fromCompiled(m.default)),q(e,d)}o.parseArrayLiteral=k;function E(e){if(e.startsWith("P"))return v||(v=s.Grammar.fromCompiled(t.default)),(0,_.buildInterval)(e,q(e,v));{w||(w=s.Grammar.fromCompiled(y.default));const u=e.toLowerCase();return(0,_.buildInterval)(e,q(u,w))}}o.parseIntervalLiteral=E;function C(e,u){return h||(h=s.Grammar.fromCompiled(f.default)),q(e,h,u)}o.parseGeometricLiteral=C;function q(e,u,l){try{u.start=l??"main";const $=new s.Parser(u);$.feed(e);const g=$.finish();if(g.length){if(g.length!==1)throw new Error(` Ambiguous SQL syntax: Please file an issue stating the request that has failed at https://github.com/oguimbal/pgsql-ast-parser:

        ${e}

        `)}else throw new Error("Unexpected end of input");return g[0]}catch($){if(typeof($==null?void 0:$.message)!="string")throw $;let g=$.message,O=null;const R=[],L=/A (.+) token based on:/g;let I;for(;I=L.exec(g);)O=O??g.substr(0,I.index),R.push(`    - A "${I[1]}" token`);throw O&&(g=O+R.join(`
`)+`

`),$.message=g,$}}},function(i,o){i.exports=ur()},function(i,o,c){Object.defineProperty(o,"__esModule",{value:!0});function r(e){return e[0]}const s=c(1),n=c(1);function m(e){return f(e,void 0)}function f(e,u){const l=w(e);return!u||u.length===0?(0,n.track)(e,{name:l}):(0,n.track)(e,{name:l,columns:u.map($=>({name:w($)}))})}function y(e){const u=w(e);return(0,n.track)(e,{value:u})}function t(e){return Array.isArray(e)&&e.length===1&&(e=t(e[0])),Array.isArray(e)&&!e.length?null:(0,n.unbox)(e)}const _=e=>u=>(0,n.track)(u,u[e]),b=e=>Array.isArray(e)?(0,n.track)(e[e.length-1],e[e.length-1]):e;function p(e){if(Array.isArray(e)){const u=[];for(const l of e)u.push(...p(l));return u}return e?[e]:[]}function d(e){var u;return e=(0,n.unbox)(e),(u=e==null?void 0:e.value)!==null&&u!==void 0?u:e}function h(e){return p((0,n.unbox)(e)).filter(l=>!!l).map(l=>d(l)).filter(l=>typeof l=="string").map(l=>l.trim()).filter(l=>!!l)}function w(e,u){return h(e).join(u||"")}function v(e){const u={};for(const[l,$]of e)u[l]=$;return u}const A={sensitivity:"accent"},N=(e,u)=>e.localeCompare(u,void 0,A)===0,x=e=>(u,l,$)=>{const g=d(u[0]);return N(g,e)?(0,n.box)(u,e):$},k=x,E=(...e)=>{const u=new Set(e);return(l,$,g)=>{const O=typeof l[0]=="string"?l[0]:l[0].value;return u.has(O)?O:g}};function C(e,u){const l=new Set,$=u.map(n.unbox);for(const[g,O]of $){if(l.has(g))throw new Error("conflicting or redundant options");l.add(g),e[g]=(0,n.unbox)(O)}}const q={Lexer:s.lexerAny,ParserRules:[{name:"lparen",symbols:[s.lexerAny.has("lparen")?{type:"lparen"}:lparen]},{name:"rparen",symbols:[s.lexerAny.has("rparen")?{type:"rparen"}:rparen]},{name:"number$subexpression$1",symbols:["float"]},{name:"number$subexpression$1",symbols:["int"]},{name:"number",symbols:["number$subexpression$1"],postprocess:t},{name:"dot",symbols:[s.lexerAny.has("dot")?{type:"dot"}:dot],postprocess:r},{name:"float",symbols:[s.lexerAny.has("float")?{type:"float"}:float],postprocess:e=>(0,n.box)(e,parseFloat(t(e)))},{name:"int",symbols:[s.lexerAny.has("int")?{type:"int"}:int],postprocess:e=>(0,n.box)(e,parseInt(t(e),10))},{name:"comma",symbols:[s.lexerAny.has("comma")?{type:"comma"}:comma],postprocess:r},{name:"star",symbols:[s.lexerAny.has("star")?{type:"star"}:star],postprocess:e=>(0,n.box)(e,e[0].value)},{name:"string$subexpression$1",symbols:[s.lexerAny.has("string")?{type:"string"}:string]},{name:"string$subexpression$1",symbols:[s.lexerAny.has("eString")?{type:"eString"}:eString]},{name:"string",symbols:["string$subexpression$1"],postprocess:e=>(0,n.box)(e,t(e[0]).value)},{name:"ident",symbols:["word"],postprocess:_(0)},{name:"word",symbols:[s.lexerAny.has("kw_primary")?{type:"kw_primary"}:kw_primary],postprocess:e=>(0,n.box)(e,"primary")},{name:"word",symbols:[s.lexerAny.has("kw_unique")?{type:"kw_unique"}:kw_unique],postprocess:e=>(0,n.box)(e,"unique")},{name:"word",symbols:[s.lexerAny.has("quoted_word")?{type:"quoted_word"}:quoted_word],postprocess:e=>(0,n.box)(e,e[0].value,!0)},{name:"word",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:e=>(0,n.box)(e,e[0].value)},{name:"collist_paren",symbols:["lparen","collist","rparen"],postprocess:_(1)},{name:"collist$ebnf$1",symbols:[]},{name:"collist$ebnf$1$subexpression$1",symbols:["comma","ident"],postprocess:b},{name:"collist$ebnf$1",symbols:["collist$ebnf$1","collist$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"collist",symbols:["ident","collist$ebnf$1"],postprocess:([e,u])=>[e,...u||[]]},{name:"kw_between",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("between")},{name:"kw_conflict",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("conflict")},{name:"kw_nothing",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("nothing")},{name:"kw_begin",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("begin")},{name:"kw_if",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("if")},{name:"kw_exists",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("exists")},{name:"kw_key",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("key")},{name:"kw_index",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("index")},{name:"kw_extension",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("extension")},{name:"kw_schema",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("schema")},{name:"kw_nulls",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("nulls")},{name:"kw_first",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("first")},{name:"kw_last",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("last")},{name:"kw_start",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("start")},{name:"kw_restart",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("restart")},{name:"kw_filter",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("filter")},{name:"kw_commit",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("commit")},{name:"kw_tablespace",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("tablespace")},{name:"kw_transaction",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("transaction")},{name:"kw_work",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("work")},{name:"kw_read",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("read")},{name:"kw_write",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("write")},{name:"kw_isolation",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("isolation")},{name:"kw_level",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("level")},{name:"kw_serializable",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("serializable")},{name:"kw_rollback",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("rollback")},{name:"kw_insert",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("insert")},{name:"kw_value",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("value")},{name:"kw_values",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("values")},{name:"kw_update",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("update")},{name:"kw_column",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("column")},{name:"kw_set",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("set")},{name:"kw_version",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("version")},{name:"kw_alter",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("alter")},{name:"kw_rename",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("rename")},{name:"kw_sequence",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("sequence")},{name:"kw_temp",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("temp")},{name:"kw_temporary",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("temporary")},{name:"kw_add",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("add")},{name:"kw_owner",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("owner")},{name:"kw_owned",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("owned")},{name:"kw_including",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("including")},{name:"kw_excluding",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("excluding")},{name:"kw_none",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("none")},{name:"kw_drop",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("drop")},{name:"kw_operator",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("operator")},{name:"kw_minvalue",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("minvalue")},{name:"kw_maxvalue",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("maxvalue")},{name:"kw_data",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("data")},{name:"kw_type",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("type")},{name:"kw_trigger",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("trigger")},{name:"kw_delete",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("delete")},{name:"kw_cache",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("cache")},{name:"kw_cascade",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("cascade")},{name:"kw_no",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("no")},{name:"kw_timestamp",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("timestamp")},{name:"kw_cycle",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("cycle")},{name:"kw_function",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("function")},{name:"kw_returns",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("returns")},{name:"kw_language",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("language")},{name:"kw_out",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("out")},{name:"kw_inout",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("inout")},{name:"kw_variadic",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("variadic")},{name:"kw_action",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("action")},{name:"kw_restrict",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("restrict")},{name:"kw_truncate",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("truncate")},{name:"kw_increment",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("increment")},{name:"kw_by",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("by")},{name:"kw_row",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("row")},{name:"kw_rows",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("rows")},{name:"kw_next",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("next")},{name:"kw_match",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("match")},{name:"kw_replace",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("replace")},{name:"kw_recursive",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("recursive")},{name:"kw_view",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("view")},{name:"kw_cascaded",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("cascaded")},{name:"kw_unlogged",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("unlogged")},{name:"kw_global",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("global")},{name:"kw_option",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("option")},{name:"kw_materialized",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("materialized")},{name:"kw_partial",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("partial")},{name:"kw_partition",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("partition")},{name:"kw_simple",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("simple")},{name:"kw_generated",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("generated")},{name:"kw_always",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("always")},{name:"kw_identity",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("identity")},{name:"kw_name",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("name")},{name:"kw_enum",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("enum")},{name:"kw_show",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("show")},{name:"kw_ordinality",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("ordinality")},{name:"kw_overriding",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("overriding")},{name:"kw_over",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("over")},{name:"kw_system",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("system")},{name:"kw_comment",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("comment")},{name:"kw_time",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("time")},{name:"kw_at",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("at")},{name:"kw_zone",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("zone")},{name:"kw_interval",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("interval")},{name:"kw_hour",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("hour")},{name:"kw_minute",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("minute")},{name:"kw_local",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("local")},{name:"kw_prepare",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("prepare")},{name:"kw_deallocate",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("deallocate")},{name:"kw_raise",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("raise")},{name:"kw_continue",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("continue")},{name:"kw_share",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("share")},{name:"kw_refresh",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("refresh")},{name:"kw_nowait",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("nowait")},{name:"kw_skip",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("skip")},{name:"kw_locked",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:x("locked")},{name:"kw_ifnotexists",symbols:["kw_if",s.lexerAny.has("kw_not")?{type:"kw_not"}:kw_not,"kw_exists"]},{name:"kw_ifexists",symbols:["kw_if","kw_exists"]},{name:"kw_withordinality",symbols:[s.lexerAny.has("kw_with")?{type:"kw_with"}:kw_with,"kw_ordinality"]},{name:"kw_not_null",symbols:[s.lexerAny.has("kw_not")?{type:"kw_not"}:kw_not,s.lexerAny.has("kw_null")?{type:"kw_null"}:kw_null]},{name:"kw_primary_key",symbols:[s.lexerAny.has("kw_primary")?{type:"kw_primary"}:kw_primary,"kw_key"]},{name:"data_type$ebnf$1$subexpression$1$macrocall$2",symbols:["int"]},{name:"data_type$ebnf$1$subexpression$1$macrocall$1$ebnf$1",symbols:[]},{name:"data_type$ebnf$1$subexpression$1$macrocall$1$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("comma")?{type:"comma"}:comma,"data_type$ebnf$1$subexpression$1$macrocall$2"],postprocess:b},{name:"data_type$ebnf$1$subexpression$1$macrocall$1$ebnf$1",symbols:["data_type$ebnf$1$subexpression$1$macrocall$1$ebnf$1","data_type$ebnf$1$subexpression$1$macrocall$1$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"data_type$ebnf$1$subexpression$1$macrocall$1",symbols:["data_type$ebnf$1$subexpression$1$macrocall$2","data_type$ebnf$1$subexpression$1$macrocall$1$ebnf$1"],postprocess:([e,u])=>[e,...u||[]]},{name:"data_type$ebnf$1$subexpression$1",symbols:["lparen","data_type$ebnf$1$subexpression$1$macrocall$1","rparen"],postprocess:_(1)},{name:"data_type$ebnf$1",symbols:["data_type$ebnf$1$subexpression$1"],postprocess:r},{name:"data_type$ebnf$1",symbols:[],postprocess:()=>null},{name:"data_type$ebnf$2$subexpression$1",symbols:[s.lexerAny.has("kw_array")?{type:"kw_array"}:kw_array]},{name:"data_type$ebnf$2$subexpression$1$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("lbracket")?{type:"lbracket"}:lbracket,s.lexerAny.has("rbracket")?{type:"rbracket"}:rbracket]},{name:"data_type$ebnf$2$subexpression$1$ebnf$1",symbols:["data_type$ebnf$2$subexpression$1$ebnf$1$subexpression$1"]},{name:"data_type$ebnf$2$subexpression$1$ebnf$1$subexpression$2",symbols:[s.lexerAny.has("lbracket")?{type:"lbracket"}:lbracket,s.lexerAny.has("rbracket")?{type:"rbracket"}:rbracket]},{name:"data_type$ebnf$2$subexpression$1$ebnf$1",symbols:["data_type$ebnf$2$subexpression$1$ebnf$1","data_type$ebnf$2$subexpression$1$ebnf$1$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"data_type$ebnf$2$subexpression$1",symbols:["data_type$ebnf$2$subexpression$1$ebnf$1"]},{name:"data_type$ebnf$2",symbols:["data_type$ebnf$2$subexpression$1"],postprocess:r},{name:"data_type$ebnf$2",symbols:[],postprocess:()=>null},{name:"data_type",symbols:["data_type_simple","data_type$ebnf$1","data_type$ebnf$2"],postprocess:e=>{let u=e[2];const l=t(e[0]);let $;if($={...l,...Array.isArray(e[1])&&e[1].length?{config:e[1].map(t)}:{}},u){u[0].type==="kw_array"&&(u=[["array"]]);for(const g of u[0])$={kind:"array",arrayOf:$}}return(0,n.track)(e,$)}},{name:"data_type_list$ebnf$1",symbols:[]},{name:"data_type_list$ebnf$1$subexpression$1",symbols:["comma","data_type"],postprocess:b},{name:"data_type_list$ebnf$1",symbols:["data_type_list$ebnf$1","data_type_list$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"data_type_list",symbols:["data_type","data_type_list$ebnf$1"],postprocess:([e,u])=>[e,...u||[]]},{name:"data_type_simple",symbols:["data_type_text"],postprocess:e=>(0,n.track)(e,{name:w(e," ")})},{name:"data_type_simple",symbols:["data_type_numeric"],postprocess:e=>(0,n.track)(e,{name:w(e," ")})},{name:"data_type_simple",symbols:["data_type_date"]},{name:"data_type_simple",symbols:["qualified_name_mark_quotes"]},{name:"data_type_numeric$subexpression$1",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:k("double")},{name:"data_type_numeric",symbols:["data_type_numeric$subexpression$1",s.lexerAny.has("kw_precision")?{type:"kw_precision"}:kw_precision]},{name:"data_type_text$subexpression$1",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:E("character","bit")},{name:"data_type_text$subexpression$2",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:k("varying")},{name:"data_type_text",symbols:["data_type_text$subexpression$1","data_type_text$subexpression$2"]},{name:"data_type_date$subexpression$1",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:E("timestamp","time")},{name:"data_type_date$subexpression$2",symbols:[s.lexerAny.has("kw_with")?{type:"kw_with"}:kw_with]},{name:"data_type_date$subexpression$2",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:k("without")},{name:"data_type_date$subexpression$3",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:k("time")},{name:"data_type_date$subexpression$4",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:k("zone")},{name:"data_type_date",symbols:["data_type_date$subexpression$1","data_type_date$subexpression$2","data_type_date$subexpression$3","data_type_date$subexpression$4"],postprocess:e=>(0,n.track)(e,{name:w(e," ")})},{name:"data_type_date$subexpression$5",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:E("timestamp","time")},{name:"data_type_date$subexpression$6",symbols:["lparen","int","rparen"],postprocess:_(1)},{name:"data_type_date$subexpression$7",symbols:[s.lexerAny.has("kw_with")?{type:"kw_with"}:kw_with]},{name:"data_type_date$subexpression$7",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:k("without")},{name:"data_type_date$subexpression$8",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:k("time")},{name:"data_type_date$subexpression$9",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:k("zone")},{name:"data_type_date",symbols:["data_type_date$subexpression$5","data_type_date$subexpression$6","data_type_date$subexpression$7","data_type_date$subexpression$8","data_type_date$subexpression$9"],postprocess:e=>(0,n.track)(e,{name:`timestamp ${w(e[2])} time zone`,config:[(0,n.unbox)(e[1])]})},{name:"ident_aliased$subexpression$1",symbols:[s.lexerAny.has("kw_as")?{type:"kw_as"}:kw_as,"ident"],postprocess:b},{name:"ident_aliased",symbols:["ident_aliased$subexpression$1"]},{name:"ident_aliased",symbols:["ident"],postprocess:t},{name:"table_ref",symbols:["qualified_name"],postprocess:t},{name:"qcolumn$ebnf$1$subexpression$1",symbols:["dot","ident"],postprocess:b},{name:"qcolumn$ebnf$1",symbols:["qcolumn$ebnf$1$subexpression$1"],postprocess:r},{name:"qcolumn$ebnf$1",symbols:[],postprocess:()=>null},{name:"qcolumn",symbols:["ident","dot","ident","qcolumn$ebnf$1"],postprocess:e=>e[3]?(0,n.track)(e,{schema:(0,n.unbox)(e[0]),table:(0,n.unbox)(e[2]),column:(0,n.unbox)(e[3])}):(0,n.track)(e,{table:(0,n.unbox)(e[0]),column:(0,n.unbox)(e[2])})},{name:"table_ref_aliased$ebnf$1",symbols:["ident_aliased"],postprocess:r},{name:"table_ref_aliased$ebnf$1",symbols:[],postprocess:()=>null},{name:"table_ref_aliased",symbols:["table_ref","table_ref_aliased$ebnf$1"],postprocess:e=>{const u=t(e[1]);return(0,n.track)(e,{...t(e[0]),...u?{alias:u}:{}})}},{name:"qualified_name",symbols:["qname_ident"],postprocess:e=>(0,n.track)(e,{name:w(e)})},{name:"qualified_name",symbols:["ident","dot","ident_extended"],postprocess:e=>{const u=w(e[0]),l=w(e[2]);return(0,n.track)(e,{schema:u,name:l})}},{name:"qualified_name",symbols:[s.lexerAny.has("kw_current_schema")?{type:"kw_current_schema"}:kw_current_schema],postprocess:e=>(0,n.track)(e,{name:"current_schema"})},{name:"qualified_name_mark_quotes",symbols:["qname_ident"],postprocess:e=>(0,n.track)(e,{name:w(e),...(0,n.doubleQuoted)(e)})},{name:"qualified_name_mark_quotes",symbols:["ident","dot","ident_extended"],postprocess:e=>{const u=w(e[0]),l=w(e[2]);return(0,n.track)(e,{schema:u,name:l,...(0,n.doubleQuoted)(e[2])})}},{name:"qualified_name_mark_quotes",symbols:[s.lexerAny.has("kw_current_schema")?{type:"kw_current_schema"}:kw_current_schema],postprocess:e=>(0,n.track)(e,{name:"current_schema"})},{name:"qname_ident",symbols:["ident"]},{name:"qname_ident",symbols:[s.lexerAny.has("kw_precision")?{type:"kw_precision"}:kw_precision]},{name:"qname",symbols:["qualified_name"],postprocess:t},{name:"any_keyword",symbols:[s.lexerAny.has("kw_all")?{type:"kw_all"}:kw_all]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_analyse")?{type:"kw_analyse"}:kw_analyse]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_analyze")?{type:"kw_analyze"}:kw_analyze]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_and")?{type:"kw_and"}:kw_and]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_any")?{type:"kw_any"}:kw_any]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_array")?{type:"kw_array"}:kw_array]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_as")?{type:"kw_as"}:kw_as]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_asc")?{type:"kw_asc"}:kw_asc]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_asymmetric")?{type:"kw_asymmetric"}:kw_asymmetric]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_authorization")?{type:"kw_authorization"}:kw_authorization]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_binary")?{type:"kw_binary"}:kw_binary]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_both")?{type:"kw_both"}:kw_both]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_case")?{type:"kw_case"}:kw_case]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_cast")?{type:"kw_cast"}:kw_cast]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_check")?{type:"kw_check"}:kw_check]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_collate")?{type:"kw_collate"}:kw_collate]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_collation")?{type:"kw_collation"}:kw_collation]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_concurrently")?{type:"kw_concurrently"}:kw_concurrently]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_constraint")?{type:"kw_constraint"}:kw_constraint]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_create")?{type:"kw_create"}:kw_create]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_cross")?{type:"kw_cross"}:kw_cross]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_current_catalog")?{type:"kw_current_catalog"}:kw_current_catalog]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_current_date")?{type:"kw_current_date"}:kw_current_date]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_current_role")?{type:"kw_current_role"}:kw_current_role]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_current_schema")?{type:"kw_current_schema"}:kw_current_schema]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_current_time")?{type:"kw_current_time"}:kw_current_time]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_current_timestamp")?{type:"kw_current_timestamp"}:kw_current_timestamp]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_current_user")?{type:"kw_current_user"}:kw_current_user]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_default")?{type:"kw_default"}:kw_default]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_deferrable")?{type:"kw_deferrable"}:kw_deferrable]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_desc")?{type:"kw_desc"}:kw_desc]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_distinct")?{type:"kw_distinct"}:kw_distinct]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_do")?{type:"kw_do"}:kw_do]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_else")?{type:"kw_else"}:kw_else]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_end")?{type:"kw_end"}:kw_end]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_except")?{type:"kw_except"}:kw_except]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_false")?{type:"kw_false"}:kw_false]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_fetch")?{type:"kw_fetch"}:kw_fetch]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_for")?{type:"kw_for"}:kw_for]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_foreign")?{type:"kw_foreign"}:kw_foreign]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_freeze")?{type:"kw_freeze"}:kw_freeze]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_from")?{type:"kw_from"}:kw_from]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_full")?{type:"kw_full"}:kw_full]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_grant")?{type:"kw_grant"}:kw_grant]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_group")?{type:"kw_group"}:kw_group]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_having")?{type:"kw_having"}:kw_having]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_ilike")?{type:"kw_ilike"}:kw_ilike]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_in")?{type:"kw_in"}:kw_in]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_initially")?{type:"kw_initially"}:kw_initially]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_inner")?{type:"kw_inner"}:kw_inner]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_intersect")?{type:"kw_intersect"}:kw_intersect]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_into")?{type:"kw_into"}:kw_into]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_is")?{type:"kw_is"}:kw_is]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_isnull")?{type:"kw_isnull"}:kw_isnull]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_join")?{type:"kw_join"}:kw_join]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_lateral")?{type:"kw_lateral"}:kw_lateral]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_leading")?{type:"kw_leading"}:kw_leading]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_left")?{type:"kw_left"}:kw_left]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_like")?{type:"kw_like"}:kw_like]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_limit")?{type:"kw_limit"}:kw_limit]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_localtime")?{type:"kw_localtime"}:kw_localtime]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_localtimestamp")?{type:"kw_localtimestamp"}:kw_localtimestamp]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_natural")?{type:"kw_natural"}:kw_natural]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_not")?{type:"kw_not"}:kw_not]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_notnull")?{type:"kw_notnull"}:kw_notnull]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_null")?{type:"kw_null"}:kw_null]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_offset")?{type:"kw_offset"}:kw_offset]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_on")?{type:"kw_on"}:kw_on]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_only")?{type:"kw_only"}:kw_only]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_or")?{type:"kw_or"}:kw_or]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_order")?{type:"kw_order"}:kw_order]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_outer")?{type:"kw_outer"}:kw_outer]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_overlaps")?{type:"kw_overlaps"}:kw_overlaps]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_placing")?{type:"kw_placing"}:kw_placing]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_primary")?{type:"kw_primary"}:kw_primary]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_references")?{type:"kw_references"}:kw_references]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_returning")?{type:"kw_returning"}:kw_returning]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_right")?{type:"kw_right"}:kw_right]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_select")?{type:"kw_select"}:kw_select]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_session_user")?{type:"kw_session_user"}:kw_session_user]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_similar")?{type:"kw_similar"}:kw_similar]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_some")?{type:"kw_some"}:kw_some]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_symmetric")?{type:"kw_symmetric"}:kw_symmetric]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_table")?{type:"kw_table"}:kw_table]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_tablesample")?{type:"kw_tablesample"}:kw_tablesample]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_then")?{type:"kw_then"}:kw_then]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_to")?{type:"kw_to"}:kw_to]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_trailing")?{type:"kw_trailing"}:kw_trailing]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_true")?{type:"kw_true"}:kw_true]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_union")?{type:"kw_union"}:kw_union]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_unique")?{type:"kw_unique"}:kw_unique]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_user")?{type:"kw_user"}:kw_user]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_using")?{type:"kw_using"}:kw_using]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_variadic")?{type:"kw_variadic"}:kw_variadic]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_verbose")?{type:"kw_verbose"}:kw_verbose]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_when")?{type:"kw_when"}:kw_when]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_where")?{type:"kw_where"}:kw_where]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_window")?{type:"kw_window"}:kw_window]},{name:"any_keyword",symbols:[s.lexerAny.has("kw_with")?{type:"kw_with"}:kw_with]},{name:"ident_extended",symbols:["ident"]},{name:"ident_extended",symbols:["any_keyword"]},{name:"select_statement$ebnf$1",symbols:["select_from"],postprocess:r},{name:"select_statement$ebnf$1",symbols:[],postprocess:()=>null},{name:"select_statement$ebnf$2",symbols:["select_where"],postprocess:r},{name:"select_statement$ebnf$2",symbols:[],postprocess:()=>null},{name:"select_statement$ebnf$3$subexpression$1$ebnf$1",symbols:["select_having"],postprocess:r},{name:"select_statement$ebnf$3$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"select_statement$ebnf$3$subexpression$1",symbols:["select_groupby","select_statement$ebnf$3$subexpression$1$ebnf$1"]},{name:"select_statement$ebnf$3",symbols:["select_statement$ebnf$3$subexpression$1"],postprocess:r},{name:"select_statement$ebnf$3",symbols:[],postprocess:()=>null},{name:"select_statement$ebnf$4",symbols:["select_order_by"],postprocess:r},{name:"select_statement$ebnf$4",symbols:[],postprocess:()=>null},{name:"select_statement$ebnf$5",symbols:["select_limit_offset"],postprocess:r},{name:"select_statement$ebnf$5",symbols:[],postprocess:()=>null},{name:"select_statement$ebnf$6$subexpression$1$ebnf$1",symbols:["select_skip"],postprocess:r},{name:"select_statement$ebnf$6$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"select_statement$ebnf$6$subexpression$1",symbols:["select_for","select_statement$ebnf$6$subexpression$1$ebnf$1"]},{name:"select_statement$ebnf$6",symbols:["select_statement$ebnf$6$subexpression$1"],postprocess:r},{name:"select_statement$ebnf$6",symbols:[],postprocess:()=>null},{name:"select_statement",symbols:["select_what","select_statement$ebnf$1","select_statement$ebnf$2","select_statement$ebnf$3","select_statement$ebnf$4","select_statement$ebnf$5","select_statement$ebnf$6"],postprocess:e=>{let[u,l,$,g,O,R,L]=e;l=t(l);let I=g&&g[0],B=g&&g[1];I=I&&(I.length===1&&I[0].type==="list"?I[0].expressions:I),B=B&&t(B);let F=L&&L[0],j=L&&L[1];return j=t(j),(0,n.track)(e,{...u,...l?{from:Array.isArray(l)?l:[l]}:{},...I?{groupBy:I}:{},...B?{having:B}:{},...R?{limit:t(R)}:{},...O?{orderBy:O}:{},...$?{where:$}:{},...F?{for:F[1]}:{},...j?{skip:j}:{},type:"select"})}},{name:"select_from",symbols:[s.lexerAny.has("kw_from")?{type:"kw_from"}:kw_from,"select_from_items"],postprocess:b},{name:"select_from_items$ebnf$1",symbols:[]},{name:"select_from_items$ebnf$1$subexpression$1",symbols:["comma","select_from_item"],postprocess:b},{name:"select_from_items$ebnf$1",symbols:["select_from_items$ebnf$1","select_from_items$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"select_from_items",symbols:["select_from_item","select_from_items$ebnf$1"],postprocess:([e,u])=>[...e,...p(u)||[]]},{name:"select_from_item",symbols:["select_from_subject"]},{name:"select_from_item",symbols:["select_from_item_joins"],postprocess:_(0)},{name:"select_from_item_joins$subexpression$1",symbols:["select_from_item"],postprocess:_(0)},{name:"select_from_item_joins",symbols:["select_from_item_joins$subexpression$1","select_table_join"],postprocess:p},{name:"select_from_item_joins",symbols:["lparen","select_from_item_joins","rparen"],postprocess:_(1)},{name:"select_from_subject",symbols:["stb_table"],postprocess:t},{name:"select_from_subject",symbols:["stb_statement"],postprocess:t},{name:"select_from_subject",symbols:["stb_call"],postprocess:t},{name:"stb_opts$ebnf$1",symbols:["collist_paren"],postprocess:r},{name:"stb_opts$ebnf$1",symbols:[],postprocess:()=>null},{name:"stb_opts",symbols:["ident_aliased","stb_opts$ebnf$1"],postprocess:e=>(0,n.track)(e,{alias:w(e[0]),...e[1]&&{columnNames:(0,n.unbox)(e[1]).map(m)}})},{name:"stb_table$ebnf$1",symbols:["stb_opts"],postprocess:r},{name:"stb_table$ebnf$1",symbols:[],postprocess:()=>null},{name:"stb_table",symbols:["table_ref","stb_table$ebnf$1"],postprocess:e=>(0,n.track)(e,{type:"table",name:(0,n.track)(e,{...e[0],...e[1]})})},{name:"stb_statement",symbols:["selection_paren","stb_opts"],postprocess:e=>(0,n.track)(e,{type:"statement",statement:t(e[0]),...e[1]})},{name:"select_values",symbols:["kw_values","insert_values"],postprocess:e=>(0,n.track)(e,{type:"values",values:e[1]})},{name:"stb_call$ebnf$1",symbols:["kw_withordinality"],postprocess:r},{name:"stb_call$ebnf$1",symbols:[],postprocess:()=>null},{name:"stb_call$ebnf$2",symbols:["stb_call_alias"],postprocess:r},{name:"stb_call$ebnf$2",symbols:[],postprocess:()=>null},{name:"stb_call",symbols:["expr_function_call","stb_call$ebnf$1","stb_call$ebnf$2"],postprocess:e=>{const u=e[1],l=e[2];return!u&&!l?e[0]:(0,n.track)(e,{...e[0],...u&&{withOrdinality:!0},alias:l?f(l[0],l[1]):void 0})}},{name:"stb_call_alias$subexpression$1$ebnf$1",symbols:[s.lexerAny.has("kw_as")?{type:"kw_as"}:kw_as],postprocess:r},{name:"stb_call_alias$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"stb_call_alias$subexpression$1",symbols:["stb_call_alias$subexpression$1$ebnf$1","ident"],postprocess:b},{name:"stb_call_alias$ebnf$1",symbols:["stb_call_alias_list"],postprocess:r},{name:"stb_call_alias$ebnf$1",symbols:[],postprocess:()=>null},{name:"stb_call_alias",symbols:["stb_call_alias$subexpression$1","stb_call_alias$ebnf$1"]},{name:"stb_call_alias_list",symbols:["lparen","stb_call_alias_list_raw","rparen"],postprocess:_(1)},{name:"stb_call_alias_list_raw$ebnf$1",symbols:[]},{name:"stb_call_alias_list_raw$ebnf$1$subexpression$1",symbols:["comma","ident"],postprocess:b},{name:"stb_call_alias_list_raw$ebnf$1",symbols:["stb_call_alias_list_raw$ebnf$1","stb_call_alias_list_raw$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"stb_call_alias_list_raw",symbols:["ident","stb_call_alias_list_raw$ebnf$1"],postprocess:([e,u])=>[e,...u||[]]},{name:"select_table_join$ebnf$1",symbols:["select_table_join_clause"],postprocess:r},{name:"select_table_join$ebnf$1",symbols:[],postprocess:()=>null},{name:"select_table_join",symbols:["select_join_op",s.lexerAny.has("kw_join")?{type:"kw_join"}:kw_join,"select_from_subject","select_table_join$ebnf$1"],postprocess:e=>(0,n.track)(e,{...t(e[2]),join:{type:w(e[0]," "),...e[3]&&t(e[3])}})},{name:"select_table_join_clause",symbols:[s.lexerAny.has("kw_on")?{type:"kw_on"}:kw_on,"expr"],postprocess:e=>(0,n.track)(e,{on:b(e)})},{name:"select_table_join_clause$macrocall$2",symbols:["ident"]},{name:"select_table_join_clause$macrocall$1$ebnf$1",symbols:[]},{name:"select_table_join_clause$macrocall$1$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("comma")?{type:"comma"}:comma,"select_table_join_clause$macrocall$2"],postprocess:b},{name:"select_table_join_clause$macrocall$1$ebnf$1",symbols:["select_table_join_clause$macrocall$1$ebnf$1","select_table_join_clause$macrocall$1$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"select_table_join_clause$macrocall$1",symbols:["select_table_join_clause$macrocall$2","select_table_join_clause$macrocall$1$ebnf$1"],postprocess:([e,u])=>[t(e),...u.map(t)||[]]},{name:"select_table_join_clause",symbols:[s.lexerAny.has("kw_using")?{type:"kw_using"}:kw_using,"lparen","select_table_join_clause$macrocall$1","rparen"],postprocess:e=>(0,n.track)(e,{using:e[2].map(m)})},{name:"select_join_op$subexpression$1$ebnf$1",symbols:[s.lexerAny.has("kw_inner")?{type:"kw_inner"}:kw_inner],postprocess:r},{name:"select_join_op$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"select_join_op$subexpression$1",symbols:["select_join_op$subexpression$1$ebnf$1"],postprocess:e=>(0,n.box)(e,"INNER JOIN")},{name:"select_join_op",symbols:["select_join_op$subexpression$1"]},{name:"select_join_op$subexpression$2",symbols:[s.lexerAny.has("kw_cross")?{type:"kw_cross"}:kw_cross],postprocess:e=>(0,n.box)(e,"CROSS JOIN")},{name:"select_join_op",symbols:["select_join_op$subexpression$2"]},{name:"select_join_op$subexpression$3$ebnf$1",symbols:[s.lexerAny.has("kw_outer")?{type:"kw_outer"}:kw_outer],postprocess:r},{name:"select_join_op$subexpression$3$ebnf$1",symbols:[],postprocess:()=>null},{name:"select_join_op$subexpression$3",symbols:[s.lexerAny.has("kw_left")?{type:"kw_left"}:kw_left,"select_join_op$subexpression$3$ebnf$1"],postprocess:e=>(0,n.box)(e,"LEFT JOIN")},{name:"select_join_op",symbols:["select_join_op$subexpression$3"]},{name:"select_join_op$subexpression$4$ebnf$1",symbols:[s.lexerAny.has("kw_outer")?{type:"kw_outer"}:kw_outer],postprocess:r},{name:"select_join_op$subexpression$4$ebnf$1",symbols:[],postprocess:()=>null},{name:"select_join_op$subexpression$4",symbols:[s.lexerAny.has("kw_right")?{type:"kw_right"}:kw_right,"select_join_op$subexpression$4$ebnf$1"],postprocess:e=>(0,n.box)(e,"RIGHT JOIN")},{name:"select_join_op",symbols:["select_join_op$subexpression$4"]},{name:"select_join_op$subexpression$5$ebnf$1",symbols:[s.lexerAny.has("kw_outer")?{type:"kw_outer"}:kw_outer],postprocess:r},{name:"select_join_op$subexpression$5$ebnf$1",symbols:[],postprocess:()=>null},{name:"select_join_op$subexpression$5",symbols:[s.lexerAny.has("kw_full")?{type:"kw_full"}:kw_full,"select_join_op$subexpression$5$ebnf$1"],postprocess:e=>(0,n.box)(e,"FULL JOIN")},{name:"select_join_op",symbols:["select_join_op$subexpression$5"]},{name:"select_what$ebnf$1",symbols:["select_distinct"],postprocess:r},{name:"select_what$ebnf$1",symbols:[],postprocess:()=>null},{name:"select_what$ebnf$2",symbols:["select_expr_list_aliased"],postprocess:r},{name:"select_what$ebnf$2",symbols:[],postprocess:()=>null},{name:"select_what",symbols:[s.lexerAny.has("kw_select")?{type:"kw_select"}:kw_select,"select_what$ebnf$1","select_what$ebnf$2"],postprocess:e=>(0,n.track)(e,{columns:e[2],...e[1]&&{distinct:(0,n.unbox)(e[1])}})},{name:"select_expr_list_aliased$ebnf$1",symbols:[]},{name:"select_expr_list_aliased$ebnf$1$subexpression$1",symbols:["comma","select_expr_list_item"],postprocess:b},{name:"select_expr_list_aliased$ebnf$1",symbols:["select_expr_list_aliased$ebnf$1","select_expr_list_aliased$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"select_expr_list_aliased",symbols:["select_expr_list_item","select_expr_list_aliased$ebnf$1"],postprocess:([e,u])=>[e,...u||[]]},{name:"select_expr_list_item$ebnf$1",symbols:["ident_aliased"],postprocess:r},{name:"select_expr_list_item$ebnf$1",symbols:[],postprocess:()=>null},{name:"select_expr_list_item",symbols:["expr","select_expr_list_item$ebnf$1"],postprocess:e=>(0,n.track)(e,{expr:e[0],...e[1]?{alias:m(e[1])}:{}})},{name:"select_distinct",symbols:[s.lexerAny.has("kw_all")?{type:"kw_all"}:kw_all],postprocess:e=>(0,n.box)(e,"all")},{name:"select_distinct$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("kw_on")?{type:"kw_on"}:kw_on,"lparen","expr_list_raw","rparen"],postprocess:_(2)},{name:"select_distinct$ebnf$1",symbols:["select_distinct$ebnf$1$subexpression$1"],postprocess:r},{name:"select_distinct$ebnf$1",symbols:[],postprocess:()=>null},{name:"select_distinct",symbols:[s.lexerAny.has("kw_distinct")?{type:"kw_distinct"}:kw_distinct,"select_distinct$ebnf$1"],postprocess:e=>(0,n.box)(e,e[1]||"distinct")},{name:"select_where",symbols:[s.lexerAny.has("kw_where")?{type:"kw_where"}:kw_where,"expr"],postprocess:b},{name:"select_groupby",symbols:[s.lexerAny.has("kw_group")?{type:"kw_group"}:kw_group,"kw_by","expr_list_raw"],postprocess:b},{name:"select_having",symbols:[s.lexerAny.has("kw_having")?{type:"kw_having"}:kw_having,"expr"],postprocess:b},{name:"select_limit_offset$ebnf$1$subexpression$1",symbols:["select_offset"]},{name:"select_limit_offset$ebnf$1$subexpression$1",symbols:["select_limit"]},{name:"select_limit_offset$ebnf$1",symbols:["select_limit_offset$ebnf$1$subexpression$1"]},{name:"select_limit_offset$ebnf$1$subexpression$2",symbols:["select_offset"]},{name:"select_limit_offset$ebnf$1$subexpression$2",symbols:["select_limit"]},{name:"select_limit_offset$ebnf$1",symbols:["select_limit_offset$ebnf$1","select_limit_offset$ebnf$1$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"select_limit_offset",symbols:["select_limit_offset$ebnf$1"],postprocess:(e,u)=>{const l=t(e);if(!Array.isArray(l))return(0,n.track)(e,l);if(l.length!=2)return u;const $=t(l[0]),g=t(l[1]);return $.offset&&g.offset||$.limit&&g.limit?u:(0,n.track)(e,{...$,...g})}},{name:"select_offset$ebnf$1$subexpression$1",symbols:["kw_row"]},{name:"select_offset$ebnf$1$subexpression$1",symbols:["kw_rows"]},{name:"select_offset$ebnf$1",symbols:["select_offset$ebnf$1$subexpression$1"],postprocess:r},{name:"select_offset$ebnf$1",symbols:[],postprocess:()=>null},{name:"select_offset",symbols:[s.lexerAny.has("kw_offset")?{type:"kw_offset"}:kw_offset,"expr_nostar","select_offset$ebnf$1"],postprocess:e=>(0,n.track)(e,{offset:t(e[1])})},{name:"select_limit$subexpression$1",symbols:["select_limit_1"]},{name:"select_limit$subexpression$1",symbols:["select_limit_2"]},{name:"select_limit",symbols:["select_limit$subexpression$1"],postprocess:e=>(0,n.track)(e,{limit:t(e)})},{name:"select_limit_1",symbols:[s.lexerAny.has("kw_limit")?{type:"kw_limit"}:kw_limit,"expr_nostar"],postprocess:b},{name:"select_limit_2$ebnf$1$subexpression$1",symbols:["kw_first"]},{name:"select_limit_2$ebnf$1$subexpression$1",symbols:["kw_next"]},{name:"select_limit_2$ebnf$1",symbols:["select_limit_2$ebnf$1$subexpression$1"],postprocess:r},{name:"select_limit_2$ebnf$1",symbols:[],postprocess:()=>null},{name:"select_limit_2$subexpression$1",symbols:["kw_row"]},{name:"select_limit_2$subexpression$1",symbols:["kw_rows"]},{name:"select_limit_2",symbols:[s.lexerAny.has("kw_fetch")?{type:"kw_fetch"}:kw_fetch,"select_limit_2$ebnf$1","expr_nostar","select_limit_2$subexpression$1",s.lexerAny.has("kw_only")?{type:"kw_only"}:kw_only],postprocess:_(2)},{name:"select_for$subexpression$1",symbols:["kw_update"],postprocess:e=>(0,n.track)(e,{type:"update"})},{name:"select_for$subexpression$1",symbols:["kw_no","kw_key","kw_update"],postprocess:e=>(0,n.track)(e,{type:"no key update"})},{name:"select_for$subexpression$1",symbols:["kw_share"],postprocess:e=>(0,n.track)(e,{type:"share"})},{name:"select_for$subexpression$1",symbols:["kw_key","kw_share"],postprocess:e=>(0,n.track)(e,{type:"key share"})},{name:"select_for",symbols:[s.lexerAny.has("kw_for")?{type:"kw_for"}:kw_for,"select_for$subexpression$1"]},{name:"select_skip$subexpression$1",symbols:["kw_nowait"],postprocess:e=>(0,n.track)(e,{type:"nowait"})},{name:"select_skip$subexpression$1",symbols:["kw_skip","kw_locked"],postprocess:e=>(0,n.track)(e,{type:"skip locked"})},{name:"select_skip",symbols:["select_skip$subexpression$1"]},{name:"select_order_by$subexpression$1",symbols:[s.lexerAny.has("kw_order")?{type:"kw_order"}:kw_order,"kw_by"]},{name:"select_order_by$ebnf$1",symbols:[]},{name:"select_order_by$ebnf$1$subexpression$1",symbols:["comma","select_order_by_expr"],postprocess:b},{name:"select_order_by$ebnf$1",symbols:["select_order_by$ebnf$1","select_order_by$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"select_order_by",symbols:["select_order_by$subexpression$1","select_order_by_expr","select_order_by$ebnf$1"],postprocess:([e,u,l])=>[u,...l||[]]},{name:"select_order_by_expr$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("kw_asc")?{type:"kw_asc"}:kw_asc]},{name:"select_order_by_expr$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("kw_desc")?{type:"kw_desc"}:kw_desc]},{name:"select_order_by_expr$ebnf$1",symbols:["select_order_by_expr$ebnf$1$subexpression$1"],postprocess:r},{name:"select_order_by_expr$ebnf$1",symbols:[],postprocess:()=>null},{name:"select_order_by_expr$ebnf$2$subexpression$1$subexpression$1",symbols:["kw_first"]},{name:"select_order_by_expr$ebnf$2$subexpression$1$subexpression$1",symbols:["kw_last"]},{name:"select_order_by_expr$ebnf$2$subexpression$1",symbols:["kw_nulls","select_order_by_expr$ebnf$2$subexpression$1$subexpression$1"],postprocess:b},{name:"select_order_by_expr$ebnf$2",symbols:["select_order_by_expr$ebnf$2$subexpression$1"],postprocess:r},{name:"select_order_by_expr$ebnf$2",symbols:[],postprocess:()=>null},{name:"select_order_by_expr",symbols:["expr","select_order_by_expr$ebnf$1","select_order_by_expr$ebnf$2"],postprocess:e=>(0,n.track)(e,{by:e[0],...e[1]&&{order:w(e[1]).toUpperCase()},...e[2]&&{nulls:w(e[2]).toUpperCase()}})},{name:"expr",symbols:["expr_nostar"],postprocess:t},{name:"expr",symbols:["expr_star"],postprocess:t},{name:"expr_nostar",symbols:["expr_paren"],postprocess:t},{name:"expr_nostar",symbols:["expr_or"],postprocess:t},{name:"expr_paren$subexpression$1",symbols:["expr_or_select"]},{name:"expr_paren$subexpression$1",symbols:["expr_list_many"]},{name:"expr_paren",symbols:["lparen","expr_paren$subexpression$1","rparen"],postprocess:_(1)},{name:"expr_or$macrocall$2$macrocall$2",symbols:[s.lexerAny.has("kw_or")?{type:"kw_or"}:kw_or]},{name:"expr_or$macrocall$2$macrocall$1",symbols:["expr_or$macrocall$2$macrocall$2"],postprocess:e=>(0,n.track)(e,{op:(w(e," ")||"<error>").toUpperCase()})},{name:"expr_or$macrocall$2",symbols:["expr_or$macrocall$2$macrocall$1"]},{name:"expr_or$macrocall$3",symbols:["expr_or"]},{name:"expr_or$macrocall$4",symbols:["expr_and"]},{name:"expr_or$macrocall$1$subexpression$1",symbols:["expr_or$macrocall$3"]},{name:"expr_or$macrocall$1$subexpression$1",symbols:["expr_paren"]},{name:"expr_or$macrocall$1$subexpression$2",symbols:["expr_or$macrocall$4"]},{name:"expr_or$macrocall$1$subexpression$2",symbols:["expr_paren"]},{name:"expr_or$macrocall$1",symbols:["expr_or$macrocall$1$subexpression$1","expr_or$macrocall$2","expr_or$macrocall$1$subexpression$2"],postprocess:e=>(0,n.track)(e,{type:"binary",left:t(e[0]),right:t(e[2]),...t(e[1])})},{name:"expr_or$macrocall$1",symbols:["expr_or$macrocall$4"],postprocess:t},{name:"expr_or",symbols:["expr_or$macrocall$1"]},{name:"expr_and$macrocall$2$macrocall$2",symbols:[s.lexerAny.has("kw_and")?{type:"kw_and"}:kw_and]},{name:"expr_and$macrocall$2$macrocall$1",symbols:["expr_and$macrocall$2$macrocall$2"],postprocess:e=>(0,n.track)(e,{op:(w(e," ")||"<error>").toUpperCase()})},{name:"expr_and$macrocall$2",symbols:["expr_and$macrocall$2$macrocall$1"]},{name:"expr_and$macrocall$3",symbols:["expr_and"]},{name:"expr_and$macrocall$4",symbols:["expr_not"]},{name:"expr_and$macrocall$1$subexpression$1",symbols:["expr_and$macrocall$3"]},{name:"expr_and$macrocall$1$subexpression$1",symbols:["expr_paren"]},{name:"expr_and$macrocall$1$subexpression$2",symbols:["expr_and$macrocall$4"]},{name:"expr_and$macrocall$1$subexpression$2",symbols:["expr_paren"]},{name:"expr_and$macrocall$1",symbols:["expr_and$macrocall$1$subexpression$1","expr_and$macrocall$2","expr_and$macrocall$1$subexpression$2"],postprocess:e=>(0,n.track)(e,{type:"binary",left:t(e[0]),right:t(e[2]),...t(e[1])})},{name:"expr_and$macrocall$1",symbols:["expr_and$macrocall$4"],postprocess:t},{name:"expr_and",symbols:["expr_and$macrocall$1"]},{name:"expr_not$macrocall$2$macrocall$2",symbols:[s.lexerAny.has("kw_not")?{type:"kw_not"}:kw_not]},{name:"expr_not$macrocall$2$macrocall$1",symbols:["expr_not$macrocall$2$macrocall$2"],postprocess:e=>(0,n.track)(e,{op:(w(e," ")||"<error>").toUpperCase()})},{name:"expr_not$macrocall$2",symbols:["expr_not$macrocall$2$macrocall$1"]},{name:"expr_not$macrocall$3",symbols:["expr_not"]},{name:"expr_not$macrocall$4",symbols:["expr_eq"]},{name:"expr_not$macrocall$1$subexpression$1",symbols:["expr_not$macrocall$3"]},{name:"expr_not$macrocall$1$subexpression$1",symbols:["expr_paren"]},{name:"expr_not$macrocall$1",symbols:["expr_not$macrocall$2","expr_not$macrocall$1$subexpression$1"],postprocess:e=>(0,n.track)(e,{type:"unary",...t(e[0]),operand:t(e[1])})},{name:"expr_not$macrocall$1",symbols:["expr_not$macrocall$4"],postprocess:t},{name:"expr_not",symbols:["expr_not$macrocall$1"]},{name:"expr_eq$macrocall$2$macrocall$2$subexpression$1",symbols:[s.lexerAny.has("op_eq")?{type:"op_eq"}:op_eq]},{name:"expr_eq$macrocall$2$macrocall$2$subexpression$1",symbols:[s.lexerAny.has("op_neq")?{type:"op_neq"}:op_neq]},{name:"expr_eq$macrocall$2$macrocall$2",symbols:["expr_eq$macrocall$2$macrocall$2$subexpression$1"]},{name:"expr_eq$macrocall$2$macrocall$1$macrocall$2",symbols:["expr_eq$macrocall$2$macrocall$2"]},{name:"expr_eq$macrocall$2$macrocall$1$macrocall$1",symbols:["expr_eq$macrocall$2$macrocall$1$macrocall$2"],postprocess:e=>(0,n.track)(e,{op:(w(e," ")||"<error>").toUpperCase()})},{name:"expr_eq$macrocall$2$macrocall$1",symbols:["expr_eq$macrocall$2$macrocall$1$macrocall$1"],postprocess:t},{name:"expr_eq$macrocall$2$macrocall$1",symbols:["kw_operator","lparen","ident","dot","expr_eq$macrocall$2$macrocall$2","rparen"],postprocess:e=>(0,n.track)(e,{op:(w(e[4]," ")||"<error>").toUpperCase(),opSchema:w(e[2])})},{name:"expr_eq$macrocall$2",symbols:["expr_eq$macrocall$2$macrocall$1"]},{name:"expr_eq$macrocall$3",symbols:["expr_eq"]},{name:"expr_eq$macrocall$4",symbols:["expr_is"]},{name:"expr_eq$macrocall$1$subexpression$1",symbols:["expr_eq$macrocall$3"]},{name:"expr_eq$macrocall$1$subexpression$1",symbols:["expr_paren"]},{name:"expr_eq$macrocall$1$subexpression$2",symbols:["expr_eq$macrocall$4"]},{name:"expr_eq$macrocall$1$subexpression$2",symbols:["expr_paren"]},{name:"expr_eq$macrocall$1",symbols:["expr_eq$macrocall$1$subexpression$1","expr_eq$macrocall$2","expr_eq$macrocall$1$subexpression$2"],postprocess:e=>(0,n.track)(e,{type:"binary",left:t(e[0]),right:t(e[2]),...t(e[1])})},{name:"expr_eq$macrocall$1",symbols:["expr_eq$macrocall$4"],postprocess:t},{name:"expr_eq",symbols:["expr_eq$macrocall$1"]},{name:"expr_star",symbols:["star"],postprocess:e=>(0,n.track)(e,{type:"ref",name:"*"})},{name:"expr_is$subexpression$1",symbols:["expr_is"]},{name:"expr_is$subexpression$1",symbols:["expr_paren"]},{name:"expr_is$subexpression$2",symbols:[s.lexerAny.has("kw_isnull")?{type:"kw_isnull"}:kw_isnull]},{name:"expr_is$subexpression$2",symbols:[s.lexerAny.has("kw_is")?{type:"kw_is"}:kw_is,s.lexerAny.has("kw_null")?{type:"kw_null"}:kw_null]},{name:"expr_is",symbols:["expr_is$subexpression$1","expr_is$subexpression$2"],postprocess:e=>(0,n.track)(e,{type:"unary",op:"IS NULL",operand:t(e[0])})},{name:"expr_is$subexpression$3",symbols:["expr_is"]},{name:"expr_is$subexpression$3",symbols:["expr_paren"]},{name:"expr_is$subexpression$4",symbols:[s.lexerAny.has("kw_notnull")?{type:"kw_notnull"}:kw_notnull]},{name:"expr_is$subexpression$4",symbols:[s.lexerAny.has("kw_is")?{type:"kw_is"}:kw_is,"kw_not_null"]},{name:"expr_is",symbols:["expr_is$subexpression$3","expr_is$subexpression$4"],postprocess:e=>(0,n.track)(e,{type:"unary",op:"IS NOT NULL",operand:t(e[0])})},{name:"expr_is$subexpression$5",symbols:["expr_is"]},{name:"expr_is$subexpression$5",symbols:["expr_paren"]},{name:"expr_is$ebnf$1",symbols:[s.lexerAny.has("kw_not")?{type:"kw_not"}:kw_not],postprocess:r},{name:"expr_is$ebnf$1",symbols:[],postprocess:()=>null},{name:"expr_is$subexpression$6",symbols:[s.lexerAny.has("kw_true")?{type:"kw_true"}:kw_true]},{name:"expr_is$subexpression$6",symbols:[s.lexerAny.has("kw_false")?{type:"kw_false"}:kw_false]},{name:"expr_is",symbols:["expr_is$subexpression$5",s.lexerAny.has("kw_is")?{type:"kw_is"}:kw_is,"expr_is$ebnf$1","expr_is$subexpression$6"],postprocess:e=>(0,n.track)(e,{type:"unary",op:"IS "+h([e[2],e[3]]).join(" ").toUpperCase(),operand:t(e[0])})},{name:"expr_is",symbols:["expr_compare"],postprocess:t},{name:"expr_compare$macrocall$2$macrocall$2",symbols:[s.lexerAny.has("op_compare")?{type:"op_compare"}:op_compare]},{name:"expr_compare$macrocall$2$macrocall$1$macrocall$2",symbols:["expr_compare$macrocall$2$macrocall$2"]},{name:"expr_compare$macrocall$2$macrocall$1$macrocall$1",symbols:["expr_compare$macrocall$2$macrocall$1$macrocall$2"],postprocess:e=>(0,n.track)(e,{op:(w(e," ")||"<error>").toUpperCase()})},{name:"expr_compare$macrocall$2$macrocall$1",symbols:["expr_compare$macrocall$2$macrocall$1$macrocall$1"],postprocess:t},{name:"expr_compare$macrocall$2$macrocall$1",symbols:["kw_operator","lparen","ident","dot","expr_compare$macrocall$2$macrocall$2","rparen"],postprocess:e=>(0,n.track)(e,{op:(w(e[4]," ")||"<error>").toUpperCase(),opSchema:w(e[2])})},{name:"expr_compare$macrocall$2",symbols:["expr_compare$macrocall$2$macrocall$1"]},{name:"expr_compare$macrocall$3",symbols:["expr_compare"]},{name:"expr_compare$macrocall$4",symbols:["expr_range"]},{name:"expr_compare$macrocall$1$subexpression$1",symbols:["expr_compare$macrocall$3"]},{name:"expr_compare$macrocall$1$subexpression$1",symbols:["expr_paren"]},{name:"expr_compare$macrocall$1$subexpression$2",symbols:["expr_compare$macrocall$4"]},{name:"expr_compare$macrocall$1$subexpression$2",symbols:["expr_paren"]},{name:"expr_compare$macrocall$1",symbols:["expr_compare$macrocall$1$subexpression$1","expr_compare$macrocall$2","expr_compare$macrocall$1$subexpression$2"],postprocess:e=>(0,n.track)(e,{type:"binary",left:t(e[0]),right:t(e[2]),...t(e[1])})},{name:"expr_compare$macrocall$1",symbols:["expr_compare$macrocall$4"],postprocess:t},{name:"expr_compare",symbols:["expr_compare$macrocall$1"]},{name:"expr_range$macrocall$2",symbols:["ops_between"]},{name:"expr_range$macrocall$3",symbols:[s.lexerAny.has("kw_and")?{type:"kw_and"}:kw_and]},{name:"expr_range$macrocall$4",symbols:["expr_range"]},{name:"expr_range$macrocall$5",symbols:["expr_others"]},{name:"expr_range$macrocall$1$subexpression$1",symbols:["expr_range$macrocall$4"]},{name:"expr_range$macrocall$1$subexpression$1",symbols:["expr_paren"]},{name:"expr_range$macrocall$1$subexpression$2",symbols:["expr_range$macrocall$4"]},{name:"expr_range$macrocall$1$subexpression$2",symbols:["expr_paren"]},{name:"expr_range$macrocall$1$subexpression$3",symbols:["expr_range$macrocall$5"]},{name:"expr_range$macrocall$1$subexpression$3",symbols:["expr_paren"]},{name:"expr_range$macrocall$1",symbols:["expr_range$macrocall$1$subexpression$1","expr_range$macrocall$2","expr_range$macrocall$1$subexpression$2","expr_range$macrocall$3","expr_range$macrocall$1$subexpression$3"],postprocess:e=>(0,n.track)(e,{type:"ternary",value:t(e[0]),lo:t(e[2]),hi:t(e[4]),op:(h(e[1]).join(" ")||"<error>").toUpperCase()})},{name:"expr_range$macrocall$1",symbols:["expr_range$macrocall$5"],postprocess:t},{name:"expr_range",symbols:["expr_range$macrocall$1"]},{name:"expr_others$macrocall$2$macrocall$2",symbols:[s.lexerAny.has("ops_others")?{type:"ops_others"}:ops_others]},{name:"expr_others$macrocall$2$macrocall$1$macrocall$2",symbols:["expr_others$macrocall$2$macrocall$2"]},{name:"expr_others$macrocall$2$macrocall$1$macrocall$1",symbols:["expr_others$macrocall$2$macrocall$1$macrocall$2"],postprocess:e=>(0,n.track)(e,{op:(w(e," ")||"<error>").toUpperCase()})},{name:"expr_others$macrocall$2$macrocall$1",symbols:["expr_others$macrocall$2$macrocall$1$macrocall$1"],postprocess:t},{name:"expr_others$macrocall$2$macrocall$1",symbols:["kw_operator","lparen","ident","dot","expr_others$macrocall$2$macrocall$2","rparen"],postprocess:e=>(0,n.track)(e,{op:(w(e[4]," ")||"<error>").toUpperCase(),opSchema:w(e[2])})},{name:"expr_others$macrocall$2",symbols:["expr_others$macrocall$2$macrocall$1"]},{name:"expr_others$macrocall$3",symbols:["expr_others"]},{name:"expr_others$macrocall$4",symbols:["expr_like"]},{name:"expr_others$macrocall$1$subexpression$1",symbols:["expr_others$macrocall$3"]},{name:"expr_others$macrocall$1$subexpression$1",symbols:["expr_paren"]},{name:"expr_others$macrocall$1$subexpression$2",symbols:["expr_others$macrocall$4"]},{name:"expr_others$macrocall$1$subexpression$2",symbols:["expr_paren"]},{name:"expr_others$macrocall$1",symbols:["expr_others$macrocall$1$subexpression$1","expr_others$macrocall$2","expr_others$macrocall$1$subexpression$2"],postprocess:e=>(0,n.track)(e,{type:"binary",left:t(e[0]),right:t(e[2]),...t(e[1])})},{name:"expr_others$macrocall$1",symbols:["expr_others$macrocall$4"],postprocess:t},{name:"expr_others",symbols:["expr_others$macrocall$1"]},{name:"expr_like$macrocall$2$macrocall$2",symbols:["ops_like"]},{name:"expr_like$macrocall$2$macrocall$1",symbols:["expr_like$macrocall$2$macrocall$2"],postprocess:e=>(0,n.track)(e,{op:(w(e," ")||"<error>").toUpperCase()})},{name:"expr_like$macrocall$2",symbols:["expr_like$macrocall$2$macrocall$1"]},{name:"expr_like$macrocall$3",symbols:["expr_like"]},{name:"expr_like$macrocall$4",symbols:["expr_in"]},{name:"expr_like$macrocall$1$subexpression$1",symbols:["expr_like$macrocall$3"]},{name:"expr_like$macrocall$1$subexpression$1",symbols:["expr_paren"]},{name:"expr_like$macrocall$1$subexpression$2",symbols:["expr_like$macrocall$4"]},{name:"expr_like$macrocall$1$subexpression$2",symbols:["expr_paren"]},{name:"expr_like$macrocall$1",symbols:["expr_like$macrocall$1$subexpression$1","expr_like$macrocall$2","expr_like$macrocall$1$subexpression$2"],postprocess:e=>(0,n.track)(e,{type:"binary",left:t(e[0]),right:t(e[2]),...t(e[1])})},{name:"expr_like$macrocall$1",symbols:["expr_like$macrocall$4"],postprocess:t},{name:"expr_like",symbols:["expr_like$macrocall$1"]},{name:"expr_in$macrocall$2$macrocall$2",symbols:["ops_in"]},{name:"expr_in$macrocall$2$macrocall$1",symbols:["expr_in$macrocall$2$macrocall$2"],postprocess:e=>(0,n.track)(e,{op:(w(e," ")||"<error>").toUpperCase()})},{name:"expr_in$macrocall$2",symbols:["expr_in$macrocall$2$macrocall$1"]},{name:"expr_in$macrocall$3",symbols:["expr_in"]},{name:"expr_in$macrocall$4",symbols:["expr_add"]},{name:"expr_in$macrocall$1$subexpression$1",symbols:["expr_in$macrocall$3"]},{name:"expr_in$macrocall$1$subexpression$1",symbols:["expr_paren"]},{name:"expr_in$macrocall$1$subexpression$2",symbols:["expr_in$macrocall$4"]},{name:"expr_in$macrocall$1$subexpression$2",symbols:["expr_paren"]},{name:"expr_in$macrocall$1",symbols:["expr_in$macrocall$1$subexpression$1","expr_in$macrocall$2","expr_in$macrocall$1$subexpression$2"],postprocess:e=>(0,n.track)(e,{type:"binary",left:t(e[0]),right:t(e[2]),...t(e[1])})},{name:"expr_in$macrocall$1",symbols:["expr_in$macrocall$4"],postprocess:t},{name:"expr_in",symbols:["expr_in$macrocall$1"]},{name:"expr_add$macrocall$2$macrocall$2$subexpression$1",symbols:[s.lexerAny.has("op_plus")?{type:"op_plus"}:op_plus]},{name:"expr_add$macrocall$2$macrocall$2$subexpression$1",symbols:[s.lexerAny.has("op_minus")?{type:"op_minus"}:op_minus]},{name:"expr_add$macrocall$2$macrocall$2$subexpression$1",symbols:[s.lexerAny.has("op_additive")?{type:"op_additive"}:op_additive]},{name:"expr_add$macrocall$2$macrocall$2",symbols:["expr_add$macrocall$2$macrocall$2$subexpression$1"]},{name:"expr_add$macrocall$2$macrocall$1$macrocall$2",symbols:["expr_add$macrocall$2$macrocall$2"]},{name:"expr_add$macrocall$2$macrocall$1$macrocall$1",symbols:["expr_add$macrocall$2$macrocall$1$macrocall$2"],postprocess:e=>(0,n.track)(e,{op:(w(e," ")||"<error>").toUpperCase()})},{name:"expr_add$macrocall$2$macrocall$1",symbols:["expr_add$macrocall$2$macrocall$1$macrocall$1"],postprocess:t},{name:"expr_add$macrocall$2$macrocall$1",symbols:["kw_operator","lparen","ident","dot","expr_add$macrocall$2$macrocall$2","rparen"],postprocess:e=>(0,n.track)(e,{op:(w(e[4]," ")||"<error>").toUpperCase(),opSchema:w(e[2])})},{name:"expr_add$macrocall$2",symbols:["expr_add$macrocall$2$macrocall$1"]},{name:"expr_add$macrocall$3",symbols:["expr_add"]},{name:"expr_add$macrocall$4",symbols:["expr_mult"]},{name:"expr_add$macrocall$1$subexpression$1",symbols:["expr_add$macrocall$3"]},{name:"expr_add$macrocall$1$subexpression$1",symbols:["expr_paren"]},{name:"expr_add$macrocall$1$subexpression$2",symbols:["expr_add$macrocall$4"]},{name:"expr_add$macrocall$1$subexpression$2",symbols:["expr_paren"]},{name:"expr_add$macrocall$1",symbols:["expr_add$macrocall$1$subexpression$1","expr_add$macrocall$2","expr_add$macrocall$1$subexpression$2"],postprocess:e=>(0,n.track)(e,{type:"binary",left:t(e[0]),right:t(e[2]),...t(e[1])})},{name:"expr_add$macrocall$1",symbols:["expr_add$macrocall$4"],postprocess:t},{name:"expr_add",symbols:["expr_add$macrocall$1"]},{name:"expr_mult$macrocall$2$macrocall$2$subexpression$1",symbols:[s.lexerAny.has("star")?{type:"star"}:star]},{name:"expr_mult$macrocall$2$macrocall$2$subexpression$1",symbols:[s.lexerAny.has("op_div")?{type:"op_div"}:op_div]},{name:"expr_mult$macrocall$2$macrocall$2$subexpression$1",symbols:[s.lexerAny.has("op_mod")?{type:"op_mod"}:op_mod]},{name:"expr_mult$macrocall$2$macrocall$2",symbols:["expr_mult$macrocall$2$macrocall$2$subexpression$1"]},{name:"expr_mult$macrocall$2$macrocall$1$macrocall$2",symbols:["expr_mult$macrocall$2$macrocall$2"]},{name:"expr_mult$macrocall$2$macrocall$1$macrocall$1",symbols:["expr_mult$macrocall$2$macrocall$1$macrocall$2"],postprocess:e=>(0,n.track)(e,{op:(w(e," ")||"<error>").toUpperCase()})},{name:"expr_mult$macrocall$2$macrocall$1",symbols:["expr_mult$macrocall$2$macrocall$1$macrocall$1"],postprocess:t},{name:"expr_mult$macrocall$2$macrocall$1",symbols:["kw_operator","lparen","ident","dot","expr_mult$macrocall$2$macrocall$2","rparen"],postprocess:e=>(0,n.track)(e,{op:(w(e[4]," ")||"<error>").toUpperCase(),opSchema:w(e[2])})},{name:"expr_mult$macrocall$2",symbols:["expr_mult$macrocall$2$macrocall$1"]},{name:"expr_mult$macrocall$3",symbols:["expr_mult"]},{name:"expr_mult$macrocall$4",symbols:["expr_exp"]},{name:"expr_mult$macrocall$1$subexpression$1",symbols:["expr_mult$macrocall$3"]},{name:"expr_mult$macrocall$1$subexpression$1",symbols:["expr_paren"]},{name:"expr_mult$macrocall$1$subexpression$2",symbols:["expr_mult$macrocall$4"]},{name:"expr_mult$macrocall$1$subexpression$2",symbols:["expr_paren"]},{name:"expr_mult$macrocall$1",symbols:["expr_mult$macrocall$1$subexpression$1","expr_mult$macrocall$2","expr_mult$macrocall$1$subexpression$2"],postprocess:e=>(0,n.track)(e,{type:"binary",left:t(e[0]),right:t(e[2]),...t(e[1])})},{name:"expr_mult$macrocall$1",symbols:["expr_mult$macrocall$4"],postprocess:t},{name:"expr_mult",symbols:["expr_mult$macrocall$1"]},{name:"expr_exp$macrocall$2$macrocall$2",symbols:[s.lexerAny.has("op_exp")?{type:"op_exp"}:op_exp]},{name:"expr_exp$macrocall$2$macrocall$1$macrocall$2",symbols:["expr_exp$macrocall$2$macrocall$2"]},{name:"expr_exp$macrocall$2$macrocall$1$macrocall$1",symbols:["expr_exp$macrocall$2$macrocall$1$macrocall$2"],postprocess:e=>(0,n.track)(e,{op:(w(e," ")||"<error>").toUpperCase()})},{name:"expr_exp$macrocall$2$macrocall$1",symbols:["expr_exp$macrocall$2$macrocall$1$macrocall$1"],postprocess:t},{name:"expr_exp$macrocall$2$macrocall$1",symbols:["kw_operator","lparen","ident","dot","expr_exp$macrocall$2$macrocall$2","rparen"],postprocess:e=>(0,n.track)(e,{op:(w(e[4]," ")||"<error>").toUpperCase(),opSchema:w(e[2])})},{name:"expr_exp$macrocall$2",symbols:["expr_exp$macrocall$2$macrocall$1"]},{name:"expr_exp$macrocall$3",symbols:["expr_exp"]},{name:"expr_exp$macrocall$4",symbols:["expr_unary_add"]},{name:"expr_exp$macrocall$1$subexpression$1",symbols:["expr_exp$macrocall$3"]},{name:"expr_exp$macrocall$1$subexpression$1",symbols:["expr_paren"]},{name:"expr_exp$macrocall$1$subexpression$2",symbols:["expr_exp$macrocall$4"]},{name:"expr_exp$macrocall$1$subexpression$2",symbols:["expr_paren"]},{name:"expr_exp$macrocall$1",symbols:["expr_exp$macrocall$1$subexpression$1","expr_exp$macrocall$2","expr_exp$macrocall$1$subexpression$2"],postprocess:e=>(0,n.track)(e,{type:"binary",left:t(e[0]),right:t(e[2]),...t(e[1])})},{name:"expr_exp$macrocall$1",symbols:["expr_exp$macrocall$4"],postprocess:t},{name:"expr_exp",symbols:["expr_exp$macrocall$1"]},{name:"expr_unary_add$macrocall$2$macrocall$2$subexpression$1",symbols:[s.lexerAny.has("op_plus")?{type:"op_plus"}:op_plus]},{name:"expr_unary_add$macrocall$2$macrocall$2$subexpression$1",symbols:[s.lexerAny.has("op_minus")?{type:"op_minus"}:op_minus]},{name:"expr_unary_add$macrocall$2$macrocall$2",symbols:["expr_unary_add$macrocall$2$macrocall$2$subexpression$1"]},{name:"expr_unary_add$macrocall$2$macrocall$1$macrocall$2",symbols:["expr_unary_add$macrocall$2$macrocall$2"]},{name:"expr_unary_add$macrocall$2$macrocall$1$macrocall$1",symbols:["expr_unary_add$macrocall$2$macrocall$1$macrocall$2"],postprocess:e=>(0,n.track)(e,{op:(w(e," ")||"<error>").toUpperCase()})},{name:"expr_unary_add$macrocall$2$macrocall$1",symbols:["expr_unary_add$macrocall$2$macrocall$1$macrocall$1"],postprocess:t},{name:"expr_unary_add$macrocall$2$macrocall$1",symbols:["kw_operator","lparen","ident","dot","expr_unary_add$macrocall$2$macrocall$2","rparen"],postprocess:e=>(0,n.track)(e,{op:(w(e[4]," ")||"<error>").toUpperCase(),opSchema:w(e[2])})},{name:"expr_unary_add$macrocall$2",symbols:["expr_unary_add$macrocall$2$macrocall$1"]},{name:"expr_unary_add$macrocall$3",symbols:["expr_unary_add"]},{name:"expr_unary_add$macrocall$4",symbols:["expr_various_constructs"]},{name:"expr_unary_add$macrocall$1$subexpression$1",symbols:["expr_unary_add$macrocall$3"]},{name:"expr_unary_add$macrocall$1$subexpression$1",symbols:["expr_paren"]},{name:"expr_unary_add$macrocall$1",symbols:["expr_unary_add$macrocall$2","expr_unary_add$macrocall$1$subexpression$1"],postprocess:e=>(0,n.track)(e,{type:"unary",...t(e[0]),operand:t(e[1])})},{name:"expr_unary_add$macrocall$1",symbols:["expr_unary_add$macrocall$4"],postprocess:t},{name:"expr_unary_add",symbols:["expr_unary_add$macrocall$1"]},{name:"expr_various_constructs$macrocall$2$macrocall$2",symbols:["various_binaries"]},{name:"expr_various_constructs$macrocall$2$macrocall$1",symbols:["expr_various_constructs$macrocall$2$macrocall$2"],postprocess:e=>(0,n.track)(e,{op:(w(e," ")||"<error>").toUpperCase()})},{name:"expr_various_constructs$macrocall$2",symbols:["expr_various_constructs$macrocall$2$macrocall$1"]},{name:"expr_various_constructs$macrocall$3",symbols:["expr_various_constructs"]},{name:"expr_various_constructs$macrocall$4",symbols:["expr_array_index"]},{name:"expr_various_constructs$macrocall$1$subexpression$1",symbols:["expr_various_constructs$macrocall$3"]},{name:"expr_various_constructs$macrocall$1$subexpression$1",symbols:["expr_paren"]},{name:"expr_various_constructs$macrocall$1$subexpression$2",symbols:["expr_various_constructs$macrocall$4"]},{name:"expr_various_constructs$macrocall$1$subexpression$2",symbols:["expr_paren"]},{name:"expr_various_constructs$macrocall$1",symbols:["expr_various_constructs$macrocall$1$subexpression$1","expr_various_constructs$macrocall$2","expr_various_constructs$macrocall$1$subexpression$2"],postprocess:e=>(0,n.track)(e,{type:"binary",left:t(e[0]),right:t(e[2]),...t(e[1])})},{name:"expr_various_constructs$macrocall$1",symbols:["expr_various_constructs$macrocall$4"],postprocess:t},{name:"expr_various_constructs",symbols:["expr_various_constructs$macrocall$1"]},{name:"expr_array_index$subexpression$1",symbols:["expr_array_index"]},{name:"expr_array_index$subexpression$1",symbols:["expr_paren"]},{name:"expr_array_index",symbols:["expr_array_index$subexpression$1",s.lexerAny.has("lbracket")?{type:"lbracket"}:lbracket,"expr_nostar",s.lexerAny.has("rbracket")?{type:"rbracket"}:rbracket],postprocess:e=>(0,n.track)(e,{type:"arrayIndex",array:t(e[0]),index:t(e[2])})},{name:"expr_array_index",symbols:["expr_member"],postprocess:t},{name:"expr_member$subexpression$1",symbols:["expr_member"]},{name:"expr_member$subexpression$1",symbols:["expr_paren"]},{name:"expr_member$subexpression$2",symbols:["string"]},{name:"expr_member$subexpression$2",symbols:["int"]},{name:"expr_member",symbols:["expr_member$subexpression$1","ops_member","expr_member$subexpression$2"],postprocess:e=>(0,n.track)(e,{type:"member",operand:t(e[0]),op:e[1],member:t(e[2])})},{name:"expr_member$subexpression$3",symbols:["expr_member"]},{name:"expr_member$subexpression$3",symbols:["expr_paren"]},{name:"expr_member",symbols:["expr_member$subexpression$3",s.lexerAny.has("op_cast")?{type:"op_cast"}:op_cast,"data_type"],postprocess:e=>(0,n.track)(e,{type:"cast",operand:t(e[0]),to:e[2]})},{name:"expr_member",symbols:[s.lexerAny.has("kw_cast")?{type:"kw_cast"}:kw_cast,"lparen","expr_nostar",s.lexerAny.has("kw_as")?{type:"kw_as"}:kw_as,"data_type","rparen"],postprocess:e=>(0,n.track)(e,{type:"cast",operand:t(e[2]),to:e[4]})},{name:"expr_member",symbols:["data_type","string"],postprocess:e=>(0,n.track)(e,{type:"cast",operand:(0,n.track)(e[1],{type:"string",value:(0,n.unbox)(e[1])}),to:(0,n.unbox)(e[0])})},{name:"expr_member",symbols:["expr_dot"],postprocess:t},{name:"expr_dot$subexpression$1",symbols:["word"]},{name:"expr_dot$subexpression$1",symbols:["star"]},{name:"expr_dot",symbols:["qname",s.lexerAny.has("dot")?{type:"dot"}:dot,"expr_dot$subexpression$1"],postprocess:e=>(0,n.track)(e,{type:"ref",table:t(e[0]),name:w(e[2])})},{name:"expr_dot",symbols:["expr_final"],postprocess:t},{name:"expr_final",symbols:["expr_basic"]},{name:"expr_final",symbols:["expr_primary"]},{name:"expr_basic",symbols:["expr_special_calls"]},{name:"expr_basic",symbols:["expr_call"]},{name:"expr_basic",symbols:["expr_array"]},{name:"expr_basic",symbols:["expr_case"]},{name:"expr_basic",symbols:["expr_extract"]},{name:"expr_basic",symbols:["word"],postprocess:e=>(0,n.track)(e,{type:"ref",name:t(e[0])})},{name:"expr_array$ebnf$1",symbols:["expr_subarray_items"],postprocess:r},{name:"expr_array$ebnf$1",symbols:[],postprocess:()=>null},{name:"expr_array",symbols:[s.lexerAny.has("kw_array")?{type:"kw_array"}:kw_array,s.lexerAny.has("lbracket")?{type:"lbracket"}:lbracket,"expr_array$ebnf$1",s.lexerAny.has("rbracket")?{type:"rbracket"}:rbracket],postprocess:e=>(0,n.track)(e,{type:"array",expressions:e[2]||[]})},{name:"expr_array",symbols:[s.lexerAny.has("kw_array")?{type:"kw_array"}:kw_array,"lparen","selection","rparen"],postprocess:e=>(0,n.track)(e,{type:"array select",select:t(e[2])})},{name:"expr_subarray$ebnf$1",symbols:["expr_subarray_items"],postprocess:r},{name:"expr_subarray$ebnf$1",symbols:[],postprocess:()=>null},{name:"expr_subarray",symbols:[s.lexerAny.has("lbracket")?{type:"lbracket"}:lbracket,"expr_subarray$ebnf$1",s.lexerAny.has("rbracket")?{type:"rbracket"}:rbracket],postprocess:_(1)},{name:"expr_subarray_items$macrocall$2",symbols:["expr_list_item"]},{name:"expr_subarray_items$macrocall$1$ebnf$1",symbols:[]},{name:"expr_subarray_items$macrocall$1$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("comma")?{type:"comma"}:comma,"expr_subarray_items$macrocall$2"],postprocess:b},{name:"expr_subarray_items$macrocall$1$ebnf$1",symbols:["expr_subarray_items$macrocall$1$ebnf$1","expr_subarray_items$macrocall$1$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"expr_subarray_items$macrocall$1",symbols:["expr_subarray_items$macrocall$2","expr_subarray_items$macrocall$1$ebnf$1"],postprocess:([e,u])=>[e,...u||[]]},{name:"expr_subarray_items",symbols:["expr_subarray_items$macrocall$1"],postprocess:e=>e[0].map(t)},{name:"expr_subarray_items$macrocall$4",symbols:["expr_subarray"]},{name:"expr_subarray_items$macrocall$3$ebnf$1",symbols:[]},{name:"expr_subarray_items$macrocall$3$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("comma")?{type:"comma"}:comma,"expr_subarray_items$macrocall$4"],postprocess:b},{name:"expr_subarray_items$macrocall$3$ebnf$1",symbols:["expr_subarray_items$macrocall$3$ebnf$1","expr_subarray_items$macrocall$3$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"expr_subarray_items$macrocall$3",symbols:["expr_subarray_items$macrocall$4","expr_subarray_items$macrocall$3$ebnf$1"],postprocess:([e,u])=>[e,...u||[]]},{name:"expr_subarray_items",symbols:["expr_subarray_items$macrocall$3"],postprocess:e=>e[0].map(u=>(0,n.track)(u,{type:"array",expressions:u[0].map(t)}))},{name:"expr_function_call$ebnf$1",symbols:["expr_list_raw"],postprocess:r},{name:"expr_function_call$ebnf$1",symbols:[],postprocess:()=>null},{name:"expr_function_call",symbols:["expr_fn_name","lparen","expr_function_call$ebnf$1","rparen"],postprocess:e=>(0,n.track)(e,{type:"call",function:t(e[0]),args:e[2]||[]})},{name:"expr_call$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("kw_all")?{type:"kw_all"}:kw_all]},{name:"expr_call$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("kw_distinct")?{type:"kw_distinct"}:kw_distinct]},{name:"expr_call$ebnf$1",symbols:["expr_call$ebnf$1$subexpression$1"],postprocess:r},{name:"expr_call$ebnf$1",symbols:[],postprocess:()=>null},{name:"expr_call$ebnf$2",symbols:["expr_list_raw"],postprocess:r},{name:"expr_call$ebnf$2",symbols:[],postprocess:()=>null},{name:"expr_call$ebnf$3",symbols:["select_order_by"],postprocess:r},{name:"expr_call$ebnf$3",symbols:[],postprocess:()=>null},{name:"expr_call$ebnf$4$subexpression$1",symbols:["kw_filter","lparen",s.lexerAny.has("kw_where")?{type:"kw_where"}:kw_where,"expr","rparen"],postprocess:_(3)},{name:"expr_call$ebnf$4",symbols:["expr_call$ebnf$4$subexpression$1"],postprocess:r},{name:"expr_call$ebnf$4",symbols:[],postprocess:()=>null},{name:"expr_call$ebnf$5",symbols:["expr_call_over"],postprocess:r},{name:"expr_call$ebnf$5",symbols:[],postprocess:()=>null},{name:"expr_call",symbols:["expr_fn_name","lparen","expr_call$ebnf$1","expr_call$ebnf$2","expr_call$ebnf$3","rparen","expr_call$ebnf$4","expr_call$ebnf$5"],postprocess:e=>(0,n.track)(e,{type:"call",function:t(e[0]),...e[2]&&{distinct:w(e[2])},args:e[3]||[],...e[4]&&{orderBy:e[4]},...e[6]&&{filter:t(e[6])},...e[7]&&{over:t(e[7])}})},{name:"expr_call_over$ebnf$1$subexpression$1",symbols:["kw_partition","kw_by","expr_list_raw"],postprocess:b},{name:"expr_call_over$ebnf$1",symbols:["expr_call_over$ebnf$1$subexpression$1"],postprocess:r},{name:"expr_call_over$ebnf$1",symbols:[],postprocess:()=>null},{name:"expr_call_over$ebnf$2",symbols:["select_order_by"],postprocess:r},{name:"expr_call_over$ebnf$2",symbols:[],postprocess:()=>null},{name:"expr_call_over",symbols:["kw_over","lparen","expr_call_over$ebnf$1","expr_call_over$ebnf$2","rparen"],postprocess:e=>(0,n.track)(e,{...e[2]&&{partitionBy:e[2]},...e[3]&&{orderBy:e[3]}})},{name:"expr_extract$subexpression$1",symbols:["word"],postprocess:k("extract")},{name:"expr_extract",symbols:["expr_extract$subexpression$1","lparen","word",s.lexerAny.has("kw_from")?{type:"kw_from"}:kw_from,"expr","rparen"],postprocess:e=>(0,n.track)(e,{type:"extract",field:m(e[2]),from:e[4]})},{name:"expr_primary",symbols:["float"],postprocess:e=>(0,n.track)(e,{type:"numeric",value:(0,n.unbox)(e[0])})},{name:"expr_primary",symbols:["int"],postprocess:e=>(0,n.track)(e,{type:"integer",value:(0,n.unbox)(e[0])})},{name:"expr_primary",symbols:["string"],postprocess:e=>(0,n.track)(e,{type:"string",value:(0,n.unbox)(e[0])})},{name:"expr_primary",symbols:[s.lexerAny.has("kw_true")?{type:"kw_true"}:kw_true],postprocess:e=>(0,n.track)(e,{type:"boolean",value:!0})},{name:"expr_primary",symbols:[s.lexerAny.has("kw_false")?{type:"kw_false"}:kw_false],postprocess:e=>(0,n.track)(e,{type:"boolean",value:!1})},{name:"expr_primary",symbols:[s.lexerAny.has("kw_null")?{type:"kw_null"}:kw_null],postprocess:e=>(0,n.track)(e,{type:"null"})},{name:"expr_primary",symbols:["value_keyword"],postprocess:e=>(0,n.track)(e,{type:"keyword",keyword:w(e)})},{name:"expr_primary",symbols:[s.lexerAny.has("qparam")?{type:"qparam"}:qparam],postprocess:e=>(0,n.track)(e,{type:"parameter",name:w(e[0])})},{name:"expr_primary",symbols:[s.lexerAny.has("kw_default")?{type:"kw_default"}:kw_default],postprocess:e=>(0,n.track)(e,{type:"default"})},{name:"ops_like",symbols:["ops_like_keywors"]},{name:"ops_like",symbols:["ops_like_operators"]},{name:"ops_like_keywors$ebnf$1",symbols:[s.lexerAny.has("kw_not")?{type:"kw_not"}:kw_not],postprocess:r},{name:"ops_like_keywors$ebnf$1",symbols:[],postprocess:()=>null},{name:"ops_like_keywors$subexpression$1",symbols:[s.lexerAny.has("kw_like")?{type:"kw_like"}:kw_like]},{name:"ops_like_keywors$subexpression$1",symbols:[s.lexerAny.has("kw_ilike")?{type:"kw_ilike"}:kw_ilike]},{name:"ops_like_keywors",symbols:["ops_like_keywors$ebnf$1","ops_like_keywors$subexpression$1"]},{name:"ops_like_operators$subexpression$1",symbols:[s.lexerAny.has("op_like")?{type:"op_like"}:op_like],postprocess:()=>"LIKE"},{name:"ops_like_operators",symbols:["ops_like_operators$subexpression$1"]},{name:"ops_like_operators$subexpression$2",symbols:[s.lexerAny.has("op_ilike")?{type:"op_ilike"}:op_ilike],postprocess:()=>"ILIKE"},{name:"ops_like_operators",symbols:["ops_like_operators$subexpression$2"]},{name:"ops_like_operators$subexpression$3",symbols:[s.lexerAny.has("op_not_like")?{type:"op_not_like"}:op_not_like],postprocess:()=>"NOT LIKE"},{name:"ops_like_operators",symbols:["ops_like_operators$subexpression$3"]},{name:"ops_like_operators$subexpression$4",symbols:[s.lexerAny.has("op_not_ilike")?{type:"op_not_ilike"}:op_not_ilike],postprocess:()=>"NOT ILIKE"},{name:"ops_like_operators",symbols:["ops_like_operators$subexpression$4"]},{name:"ops_in$ebnf$1",symbols:[s.lexerAny.has("kw_not")?{type:"kw_not"}:kw_not],postprocess:r},{name:"ops_in$ebnf$1",symbols:[],postprocess:()=>null},{name:"ops_in",symbols:["ops_in$ebnf$1",s.lexerAny.has("kw_in")?{type:"kw_in"}:kw_in]},{name:"ops_between$ebnf$1",symbols:[s.lexerAny.has("kw_not")?{type:"kw_not"}:kw_not],postprocess:r},{name:"ops_between$ebnf$1",symbols:[],postprocess:()=>null},{name:"ops_between",symbols:["ops_between$ebnf$1","kw_between"]},{name:"ops_member$subexpression$1",symbols:[s.lexerAny.has("op_member")?{type:"op_member"}:op_member]},{name:"ops_member$subexpression$1",symbols:[s.lexerAny.has("op_membertext")?{type:"op_membertext"}:op_membertext]},{name:"ops_member",symbols:["ops_member$subexpression$1"],postprocess:e=>{var u;return(u=t(e))===null||u===void 0?void 0:u.value}},{name:"expr_list_item",symbols:["expr_or_select"],postprocess:t},{name:"expr_list_item",symbols:["expr_star"],postprocess:t},{name:"expr_list_raw$macrocall$2",symbols:["expr_list_item"]},{name:"expr_list_raw$macrocall$1$ebnf$1",symbols:[]},{name:"expr_list_raw$macrocall$1$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("comma")?{type:"comma"}:comma,"expr_list_raw$macrocall$2"],postprocess:b},{name:"expr_list_raw$macrocall$1$ebnf$1",symbols:["expr_list_raw$macrocall$1$ebnf$1","expr_list_raw$macrocall$1$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"expr_list_raw$macrocall$1",symbols:["expr_list_raw$macrocall$2","expr_list_raw$macrocall$1$ebnf$1"],postprocess:([e,u])=>[e,...u||[]]},{name:"expr_list_raw",symbols:["expr_list_raw$macrocall$1"],postprocess:([e])=>e.map(t)},{name:"expr_list_raw_many$macrocall$2",symbols:["expr_list_item"]},{name:"expr_list_raw_many$macrocall$1$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("comma")?{type:"comma"}:comma,"expr_list_raw_many$macrocall$2"],postprocess:b},{name:"expr_list_raw_many$macrocall$1$ebnf$1",symbols:["expr_list_raw_many$macrocall$1$ebnf$1$subexpression$1"]},{name:"expr_list_raw_many$macrocall$1$ebnf$1$subexpression$2",symbols:[s.lexerAny.has("comma")?{type:"comma"}:comma,"expr_list_raw_many$macrocall$2"],postprocess:b},{name:"expr_list_raw_many$macrocall$1$ebnf$1",symbols:["expr_list_raw_many$macrocall$1$ebnf$1","expr_list_raw_many$macrocall$1$ebnf$1$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"expr_list_raw_many$macrocall$1",symbols:["expr_list_raw_many$macrocall$2","expr_list_raw_many$macrocall$1$ebnf$1"],postprocess:([e,u])=>[e,...u||[]]},{name:"expr_list_raw_many",symbols:["expr_list_raw_many$macrocall$1"],postprocess:([e])=>e.map(t)},{name:"expr_or_select",symbols:["expr_nostar"],postprocess:t},{name:"expr_or_select",symbols:["selection"],postprocess:t},{name:"expr_list_many",symbols:["expr_list_raw_many"],postprocess:e=>(0,n.track)(e,{type:"list",expressions:e[0]})},{name:"expr_case$ebnf$1",symbols:["expr_nostar"],postprocess:r},{name:"expr_case$ebnf$1",symbols:[],postprocess:()=>null},{name:"expr_case$ebnf$2",symbols:[]},{name:"expr_case$ebnf$2",symbols:["expr_case$ebnf$2","expr_case_whens"],postprocess:e=>e[0].concat([e[1]])},{name:"expr_case$ebnf$3",symbols:["expr_case_else"],postprocess:r},{name:"expr_case$ebnf$3",symbols:[],postprocess:()=>null},{name:"expr_case",symbols:[s.lexerAny.has("kw_case")?{type:"kw_case"}:kw_case,"expr_case$ebnf$1","expr_case$ebnf$2","expr_case$ebnf$3",s.lexerAny.has("kw_end")?{type:"kw_end"}:kw_end],postprocess:e=>(0,n.track)(e,{type:"case",value:e[1],whens:e[2],else:e[3]})},{name:"expr_case_whens",symbols:[s.lexerAny.has("kw_when")?{type:"kw_when"}:kw_when,"expr_nostar",s.lexerAny.has("kw_then")?{type:"kw_then"}:kw_then,"expr_nostar"],postprocess:e=>(0,n.track)(e,{when:e[1],value:e[3]})},{name:"expr_case_else",symbols:[s.lexerAny.has("kw_else")?{type:"kw_else"}:kw_else,"expr_nostar"],postprocess:b},{name:"expr_fn_name$subexpression$1$ebnf$1$subexpression$1",symbols:["word",s.lexerAny.has("dot")?{type:"dot"}:dot]},{name:"expr_fn_name$subexpression$1$ebnf$1",symbols:["expr_fn_name$subexpression$1$ebnf$1$subexpression$1"],postprocess:r},{name:"expr_fn_name$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"expr_fn_name$subexpression$1",symbols:["expr_fn_name$subexpression$1$ebnf$1","word_or_keyword"],postprocess:e=>(0,n.track)(e,{name:(0,n.unbox)(t(e[1])),...e[0]&&{schema:w(e[0][0])}})},{name:"expr_fn_name",symbols:["expr_fn_name$subexpression$1"]},{name:"expr_fn_name$subexpression$2$subexpression$1",symbols:[s.lexerAny.has("kw_any")?{type:"kw_any"}:kw_any]},{name:"expr_fn_name$subexpression$2$subexpression$1",symbols:[s.lexerAny.has("kw_some")?{type:"kw_some"}:kw_some]},{name:"expr_fn_name$subexpression$2$subexpression$1",symbols:[s.lexerAny.has("kw_all")?{type:"kw_all"}:kw_all]},{name:"expr_fn_name$subexpression$2",symbols:["expr_fn_name$subexpression$2$subexpression$1"],postprocess:e=>(0,n.track)(e,{name:w(t(e))})},{name:"expr_fn_name",symbols:["expr_fn_name$subexpression$2"]},{name:"word_or_keyword",symbols:["word"]},{name:"word_or_keyword",symbols:["value_keyword"],postprocess:e=>(0,n.box)(e,w(e))},{name:"value_keyword",symbols:[s.lexerAny.has("kw_current_catalog")?{type:"kw_current_catalog"}:kw_current_catalog]},{name:"value_keyword",symbols:[s.lexerAny.has("kw_current_date")?{type:"kw_current_date"}:kw_current_date]},{name:"value_keyword",symbols:[s.lexerAny.has("kw_current_role")?{type:"kw_current_role"}:kw_current_role]},{name:"value_keyword",symbols:[s.lexerAny.has("kw_current_schema")?{type:"kw_current_schema"}:kw_current_schema]},{name:"value_keyword",symbols:[s.lexerAny.has("kw_current_timestamp")?{type:"kw_current_timestamp"}:kw_current_timestamp]},{name:"value_keyword",symbols:[s.lexerAny.has("kw_current_time")?{type:"kw_current_time"}:kw_current_time]},{name:"value_keyword",symbols:[s.lexerAny.has("kw_localtimestamp")?{type:"kw_localtimestamp"}:kw_localtimestamp]},{name:"value_keyword",symbols:[s.lexerAny.has("kw_localtime")?{type:"kw_localtime"}:kw_localtime]},{name:"value_keyword",symbols:[s.lexerAny.has("kw_session_user")?{type:"kw_session_user"}:kw_session_user]},{name:"value_keyword",symbols:[s.lexerAny.has("kw_user")?{type:"kw_user"}:kw_user]},{name:"value_keyword",symbols:[s.lexerAny.has("kw_current_user")?{type:"kw_current_user"}:kw_current_user]},{name:"expr_special_calls",symbols:["spe_overlay"]},{name:"expr_special_calls",symbols:["spe_substring"]},{name:"spe_overlay$subexpression$1",symbols:["word"],postprocess:k("overlay")},{name:"spe_overlay$subexpression$2",symbols:[s.lexerAny.has("lparen")?{type:"lparen"}:lparen,"expr_nostar"]},{name:"spe_overlay$subexpression$3",symbols:[s.lexerAny.has("kw_placing")?{type:"kw_placing"}:kw_placing,"expr_nostar"]},{name:"spe_overlay$subexpression$4",symbols:[s.lexerAny.has("kw_from")?{type:"kw_from"}:kw_from,"expr_nostar"]},{name:"spe_overlay$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("kw_for")?{type:"kw_for"}:kw_for,"expr_nostar"]},{name:"spe_overlay$ebnf$1",symbols:["spe_overlay$ebnf$1$subexpression$1"],postprocess:r},{name:"spe_overlay$ebnf$1",symbols:[],postprocess:()=>null},{name:"spe_overlay",symbols:["spe_overlay$subexpression$1","spe_overlay$subexpression$2","spe_overlay$subexpression$3","spe_overlay$subexpression$4","spe_overlay$ebnf$1",s.lexerAny.has("rparen")?{type:"rparen"}:rparen],postprocess:e=>(0,n.track)(e,{type:"overlay",value:e[1][1],placing:e[2][1],from:e[3][1],...e[4]&&{for:e[4][1]}})},{name:"spe_substring$subexpression$1",symbols:["word"],postprocess:k("substring")},{name:"spe_substring$subexpression$2",symbols:[s.lexerAny.has("lparen")?{type:"lparen"}:lparen,"expr_nostar"]},{name:"spe_substring$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("kw_from")?{type:"kw_from"}:kw_from,"expr_nostar"]},{name:"spe_substring$ebnf$1",symbols:["spe_substring$ebnf$1$subexpression$1"],postprocess:r},{name:"spe_substring$ebnf$1",symbols:[],postprocess:()=>null},{name:"spe_substring$ebnf$2$subexpression$1",symbols:[s.lexerAny.has("kw_for")?{type:"kw_for"}:kw_for,"expr_nostar"]},{name:"spe_substring$ebnf$2",symbols:["spe_substring$ebnf$2$subexpression$1"],postprocess:r},{name:"spe_substring$ebnf$2",symbols:[],postprocess:()=>null},{name:"spe_substring",symbols:["spe_substring$subexpression$1","spe_substring$subexpression$2","spe_substring$ebnf$1","spe_substring$ebnf$2",s.lexerAny.has("rparen")?{type:"rparen"}:rparen],postprocess:e=>(0,n.track)(e,{type:"substring",value:e[1][1],...e[2]&&{from:e[2][1]},...e[3]&&{for:e[3][1]}})},{name:"various_binaries",symbols:["kw_at","kw_time","kw_zone"],postprocess:()=>"AT TIME ZONE"},{name:"createtable_statement$ebnf$1",symbols:["createtable_modifiers"],postprocess:r},{name:"createtable_statement$ebnf$1",symbols:[],postprocess:()=>null},{name:"createtable_statement$ebnf$2",symbols:["kw_ifnotexists"],postprocess:r},{name:"createtable_statement$ebnf$2",symbols:[],postprocess:()=>null},{name:"createtable_statement$ebnf$3",symbols:["createtable_opts"],postprocess:r},{name:"createtable_statement$ebnf$3",symbols:[],postprocess:()=>null},{name:"createtable_statement",symbols:[s.lexerAny.has("kw_create")?{type:"kw_create"}:kw_create,"createtable_statement$ebnf$1",s.lexerAny.has("kw_table")?{type:"kw_table"}:kw_table,"createtable_statement$ebnf$2","qname","lparen","createtable_declarationlist","rparen","createtable_statement$ebnf$3"],postprocess:e=>{const u=e[6].filter($=>"kind"in $),l=e[6].filter($=>!("kind"in $));return(0,n.track)(e,{type:"create table",...e[3]?{ifNotExists:!0}:{},name:e[4],columns:u,...t(e[1]),...l.length?{constraints:l}:{},...b(e)})}},{name:"createtable_modifiers",symbols:["kw_unlogged"],postprocess:e=>e[0]?{unlogged:!0}:{}},{name:"createtable_modifiers",symbols:["m_locglob"]},{name:"createtable_modifiers",symbols:["m_tmp"]},{name:"createtable_modifiers",symbols:["m_locglob","m_tmp"],postprocess:([e,u])=>({...e,...u})},{name:"m_locglob$subexpression$1",symbols:["kw_local"]},{name:"m_locglob$subexpression$1",symbols:["kw_global"]},{name:"m_locglob",symbols:["m_locglob$subexpression$1"],postprocess:e=>({locality:w(e)})},{name:"m_tmp$subexpression$1",symbols:["kw_temp"]},{name:"m_tmp$subexpression$1",symbols:["kw_temporary"]},{name:"m_tmp",symbols:["m_tmp$subexpression$1"],postprocess:e=>({temporary:!0})},{name:"createtable_declarationlist$ebnf$1",symbols:[]},{name:"createtable_declarationlist$ebnf$1$subexpression$1",symbols:["comma","createtable_declaration"],postprocess:b},{name:"createtable_declarationlist$ebnf$1",symbols:["createtable_declarationlist$ebnf$1","createtable_declarationlist$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"createtable_declarationlist",symbols:["createtable_declaration","createtable_declarationlist$ebnf$1"],postprocess:([e,u])=>[e,...u||[]]},{name:"createtable_declaration$subexpression$1",symbols:["createtable_constraint"]},{name:"createtable_declaration$subexpression$1",symbols:["createtable_column"]},{name:"createtable_declaration$subexpression$1",symbols:["createtable_like"]},{name:"createtable_declaration",symbols:["createtable_declaration$subexpression$1"],postprocess:t},{name:"createtable_constraint$macrocall$2",symbols:["createtable_constraint_def"]},{name:"createtable_constraint$macrocall$1$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("kw_constraint")?{type:"kw_constraint"}:kw_constraint,"word"]},{name:"createtable_constraint$macrocall$1$ebnf$1",symbols:["createtable_constraint$macrocall$1$ebnf$1$subexpression$1"],postprocess:r},{name:"createtable_constraint$macrocall$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"createtable_constraint$macrocall$1",symbols:["createtable_constraint$macrocall$1$ebnf$1","createtable_constraint$macrocall$2"],postprocess:e=>{const u=e[0]&&m(e[0][1]);return u?(0,n.track)(e,{constraintName:u,...t(e[1])}):(0,n.track)(e,t(e[1]))}},{name:"createtable_constraint",symbols:["createtable_constraint$macrocall$1"],postprocess:t},{name:"createtable_constraint_def",symbols:["createtable_constraint_def_unique"]},{name:"createtable_constraint_def",symbols:["createtable_constraint_def_check"]},{name:"createtable_constraint_def",symbols:["createtable_constraint_foreignkey"]},{name:"createtable_constraint_def_unique$subexpression$1",symbols:[s.lexerAny.has("kw_unique")?{type:"kw_unique"}:kw_unique]},{name:"createtable_constraint_def_unique$subexpression$1",symbols:["kw_primary_key"]},{name:"createtable_constraint_def_unique",symbols:["createtable_constraint_def_unique$subexpression$1","lparen","createtable_collist","rparen"],postprocess:e=>(0,n.track)(e,{type:w(e[0]," "),columns:e[2].map(m)})},{name:"createtable_constraint_def_check",symbols:[s.lexerAny.has("kw_check")?{type:"kw_check"}:kw_check,"expr_paren"],postprocess:e=>(0,n.track)(e,{type:"check",expr:t(e[1])})},{name:"createtable_constraint_foreignkey",symbols:[s.lexerAny.has("kw_foreign")?{type:"kw_foreign"}:kw_foreign,"kw_key","collist_paren","createtable_references"],postprocess:e=>(0,n.track)(e,{type:"foreign key",localColumns:e[2].map(m),...e[3]})},{name:"createtable_references$ebnf$1",symbols:[]},{name:"createtable_references$ebnf$1",symbols:["createtable_references$ebnf$1","createtable_constraint_foreignkey_onsometing"],postprocess:e=>e[0].concat([e[1]])},{name:"createtable_references",symbols:[s.lexerAny.has("kw_references")?{type:"kw_references"}:kw_references,"table_ref","collist_paren","createtable_references$ebnf$1"],postprocess:e=>(0,n.track)(e,{foreignTable:t(e[1]),foreignColumns:e[2].map(m),...e[3].reduce((u,l)=>({...u,...l}),{})})},{name:"createtable_constraint_foreignkey_onsometing",symbols:[s.lexerAny.has("kw_on")?{type:"kw_on"}:kw_on,"kw_delete","createtable_constraint_on_action"],postprocess:e=>(0,n.track)(e,{onDelete:b(e)})},{name:"createtable_constraint_foreignkey_onsometing",symbols:[s.lexerAny.has("kw_on")?{type:"kw_on"}:kw_on,"kw_update","createtable_constraint_on_action"],postprocess:e=>(0,n.track)(e,{onUpdate:b(e)})},{name:"createtable_constraint_foreignkey_onsometing$subexpression$1",symbols:[s.lexerAny.has("kw_full")?{type:"kw_full"}:kw_full]},{name:"createtable_constraint_foreignkey_onsometing$subexpression$1",symbols:["kw_partial"]},{name:"createtable_constraint_foreignkey_onsometing$subexpression$1",symbols:["kw_simple"]},{name:"createtable_constraint_foreignkey_onsometing",symbols:["kw_match","createtable_constraint_foreignkey_onsometing$subexpression$1"],postprocess:e=>(0,n.track)(e,{match:w(b(e))})},{name:"createtable_constraint_on_action$subexpression$1",symbols:["kw_cascade"]},{name:"createtable_constraint_on_action$subexpression$1$subexpression$1",symbols:["kw_no","kw_action"]},{name:"createtable_constraint_on_action$subexpression$1",symbols:["createtable_constraint_on_action$subexpression$1$subexpression$1"]},{name:"createtable_constraint_on_action$subexpression$1",symbols:["kw_restrict"]},{name:"createtable_constraint_on_action$subexpression$1$subexpression$2",symbols:[s.lexerAny.has("kw_null")?{type:"kw_null"}:kw_null]},{name:"createtable_constraint_on_action$subexpression$1$subexpression$2",symbols:[s.lexerAny.has("kw_default")?{type:"kw_default"}:kw_default]},{name:"createtable_constraint_on_action$subexpression$1",symbols:["kw_set","createtable_constraint_on_action$subexpression$1$subexpression$2"]},{name:"createtable_constraint_on_action",symbols:["createtable_constraint_on_action$subexpression$1"],postprocess:e=>w(e," ")},{name:"createtable_collist$ebnf$1",symbols:[]},{name:"createtable_collist$ebnf$1$subexpression$1",symbols:["comma","ident"],postprocess:b},{name:"createtable_collist$ebnf$1",symbols:["createtable_collist$ebnf$1","createtable_collist$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"createtable_collist",symbols:["ident","createtable_collist$ebnf$1"],postprocess:([e,u])=>[e,...u||[]]},{name:"createtable_column$ebnf$1",symbols:["createtable_collate"],postprocess:r},{name:"createtable_column$ebnf$1",symbols:[],postprocess:()=>null},{name:"createtable_column$ebnf$2",symbols:[]},{name:"createtable_column$ebnf$2",symbols:["createtable_column$ebnf$2","createtable_column_constraint"],postprocess:e=>e[0].concat([e[1]])},{name:"createtable_column",symbols:["word","data_type","createtable_column$ebnf$1","createtable_column$ebnf$2"],postprocess:e=>(0,n.track)(e,{kind:"column",name:m(e[0]),dataType:e[1],...e[2]?{collate:e[2][1]}:{},...e[3]&&e[3].length?{constraints:e[3]}:{}})},{name:"createtable_like$ebnf$1",symbols:[]},{name:"createtable_like$ebnf$1",symbols:["createtable_like$ebnf$1","createtable_like_opt"],postprocess:e=>e[0].concat([e[1]])},{name:"createtable_like",symbols:[s.lexerAny.has("kw_like")?{type:"kw_like"}:kw_like,"qname","createtable_like$ebnf$1"],postprocess:e=>(0,n.track)(e,{kind:"like table",like:e[1],options:e[2]})},{name:"createtable_like_opt$subexpression$1",symbols:["kw_including"]},{name:"createtable_like_opt$subexpression$1",symbols:["kw_excluding"]},{name:"createtable_like_opt",symbols:["createtable_like_opt$subexpression$1","createtable_like_opt_val"],postprocess:e=>(0,n.track)(e,{verb:w(e[0]),option:w(e[1])})},{name:"createtable_like_opt_val",symbols:["word"],postprocess:E("defaults","constraints","indexes","storage","comments")},{name:"createtable_like_opt_val",symbols:[s.lexerAny.has("kw_all")?{type:"kw_all"}:kw_all]},{name:"createtable_column_constraint$macrocall$2",symbols:["createtable_column_constraint_def"]},{name:"createtable_column_constraint$macrocall$1$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("kw_constraint")?{type:"kw_constraint"}:kw_constraint,"word"]},{name:"createtable_column_constraint$macrocall$1$ebnf$1",symbols:["createtable_column_constraint$macrocall$1$ebnf$1$subexpression$1"],postprocess:r},{name:"createtable_column_constraint$macrocall$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"createtable_column_constraint$macrocall$1",symbols:["createtable_column_constraint$macrocall$1$ebnf$1","createtable_column_constraint$macrocall$2"],postprocess:e=>{const u=e[0]&&m(e[0][1]);return u?(0,n.track)(e,{constraintName:u,...t(e[1])}):(0,n.track)(e,t(e[1]))}},{name:"createtable_column_constraint",symbols:["createtable_column_constraint$macrocall$1"],postprocess:t},{name:"createtable_column_constraint_def",symbols:[s.lexerAny.has("kw_unique")?{type:"kw_unique"}:kw_unique],postprocess:e=>(0,n.track)(e,{type:"unique"})},{name:"createtable_column_constraint_def",symbols:["kw_primary_key"],postprocess:e=>(0,n.track)(e,{type:"primary key"})},{name:"createtable_column_constraint_def",symbols:["kw_not_null"],postprocess:e=>(0,n.track)(e,{type:"not null"})},{name:"createtable_column_constraint_def",symbols:[s.lexerAny.has("kw_null")?{type:"kw_null"}:kw_null],postprocess:e=>(0,n.track)(e,{type:"null"})},{name:"createtable_column_constraint_def",symbols:[s.lexerAny.has("kw_default")?{type:"kw_default"}:kw_default,"expr"],postprocess:e=>(0,n.track)(e,{type:"default",default:t(e[1])})},{name:"createtable_column_constraint_def",symbols:[s.lexerAny.has("kw_check")?{type:"kw_check"}:kw_check,"expr_paren"],postprocess:e=>(0,n.track)(e,{type:"check",expr:t(e[1])})},{name:"createtable_column_constraint_def",symbols:["createtable_references"],postprocess:e=>(0,n.track)(e,{type:"reference",...t(e)})},{name:"createtable_column_constraint_def",symbols:["altercol_generated"]},{name:"createtable_collate",symbols:[s.lexerAny.has("kw_collate")?{type:"kw_collate"}:kw_collate,"qualified_name"]},{name:"createtable_opts$subexpression$1",symbols:["word"],postprocess:k("inherits")},{name:"createtable_opts$macrocall$2",symbols:["qname"]},{name:"createtable_opts$macrocall$1$ebnf$1",symbols:[]},{name:"createtable_opts$macrocall$1$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("comma")?{type:"comma"}:comma,"createtable_opts$macrocall$2"],postprocess:b},{name:"createtable_opts$macrocall$1$ebnf$1",symbols:["createtable_opts$macrocall$1$ebnf$1","createtable_opts$macrocall$1$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"createtable_opts$macrocall$1",symbols:["createtable_opts$macrocall$2","createtable_opts$macrocall$1$ebnf$1"],postprocess:([e,u])=>[t(e),...u.map(t)||[]]},{name:"createtable_opts",symbols:["createtable_opts$subexpression$1","lparen","createtable_opts$macrocall$1","rparen"],postprocess:e=>(0,n.track)(e,{inherits:e[2]})},{name:"createindex_statement$ebnf$1",symbols:[s.lexerAny.has("kw_unique")?{type:"kw_unique"}:kw_unique],postprocess:r},{name:"createindex_statement$ebnf$1",symbols:[],postprocess:()=>null},{name:"createindex_statement$ebnf$2",symbols:["kw_ifnotexists"],postprocess:r},{name:"createindex_statement$ebnf$2",symbols:[],postprocess:()=>null},{name:"createindex_statement$ebnf$3",symbols:["word"],postprocess:r},{name:"createindex_statement$ebnf$3",symbols:[],postprocess:()=>null},{name:"createindex_statement$ebnf$4$subexpression$1",symbols:[s.lexerAny.has("kw_using")?{type:"kw_using"}:kw_using,"ident"],postprocess:b},{name:"createindex_statement$ebnf$4",symbols:["createindex_statement$ebnf$4$subexpression$1"],postprocess:r},{name:"createindex_statement$ebnf$4",symbols:[],postprocess:()=>null},{name:"createindex_statement$ebnf$5",symbols:["createindex_with"],postprocess:r},{name:"createindex_statement$ebnf$5",symbols:[],postprocess:()=>null},{name:"createindex_statement$ebnf$6",symbols:["createindex_tblspace"],postprocess:r},{name:"createindex_statement$ebnf$6",symbols:[],postprocess:()=>null},{name:"createindex_statement$ebnf$7",symbols:["createindex_predicate"],postprocess:r},{name:"createindex_statement$ebnf$7",symbols:[],postprocess:()=>null},{name:"createindex_statement",symbols:[s.lexerAny.has("kw_create")?{type:"kw_create"}:kw_create,"createindex_statement$ebnf$1","kw_index","createindex_statement$ebnf$2","createindex_statement$ebnf$3",s.lexerAny.has("kw_on")?{type:"kw_on"}:kw_on,"table_ref","createindex_statement$ebnf$4","lparen","createindex_expressions","rparen","createindex_statement$ebnf$5","createindex_statement$ebnf$6","createindex_statement$ebnf$7"],postprocess:e=>(0,n.track)(e,{type:"create index",...e[1]&&{unique:!0},...e[3]&&{ifNotExists:!0},...e[4]&&{indexName:m(e[4])},table:e[6],...e[7]&&{using:m(e[7])},expressions:e[9],...e[11]&&{with:e[11]},...e[12]&&{tablespace:t(e[12])},...e[13]&&{where:t(e[13])}})},{name:"createindex_expressions$ebnf$1",symbols:[]},{name:"createindex_expressions$ebnf$1$subexpression$1",symbols:["comma","createindex_expression"],postprocess:b},{name:"createindex_expressions$ebnf$1",symbols:["createindex_expressions$ebnf$1","createindex_expressions$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"createindex_expressions",symbols:["createindex_expression","createindex_expressions$ebnf$1"],postprocess:([e,u])=>[e,...u||[]]},{name:"createindex_expression$subexpression$1",symbols:["expr_basic"]},{name:"createindex_expression$subexpression$1",symbols:["expr_paren"]},{name:"createindex_expression$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("kw_collate")?{type:"kw_collate"}:kw_collate,"qualified_name"],postprocess:b},{name:"createindex_expression$ebnf$1",symbols:["createindex_expression$ebnf$1$subexpression$1"],postprocess:r},{name:"createindex_expression$ebnf$1",symbols:[],postprocess:()=>null},{name:"createindex_expression$ebnf$2",symbols:["qualified_name"],postprocess:r},{name:"createindex_expression$ebnf$2",symbols:[],postprocess:()=>null},{name:"createindex_expression$ebnf$3$subexpression$1",symbols:[s.lexerAny.has("kw_asc")?{type:"kw_asc"}:kw_asc]},{name:"createindex_expression$ebnf$3$subexpression$1",symbols:[s.lexerAny.has("kw_desc")?{type:"kw_desc"}:kw_desc]},{name:"createindex_expression$ebnf$3",symbols:["createindex_expression$ebnf$3$subexpression$1"],postprocess:r},{name:"createindex_expression$ebnf$3",symbols:[],postprocess:()=>null},{name:"createindex_expression$ebnf$4$subexpression$1$subexpression$1",symbols:["kw_first"]},{name:"createindex_expression$ebnf$4$subexpression$1$subexpression$1",symbols:["kw_last"]},{name:"createindex_expression$ebnf$4$subexpression$1",symbols:["kw_nulls","createindex_expression$ebnf$4$subexpression$1$subexpression$1"],postprocess:b},{name:"createindex_expression$ebnf$4",symbols:["createindex_expression$ebnf$4$subexpression$1"],postprocess:r},{name:"createindex_expression$ebnf$4",symbols:[],postprocess:()=>null},{name:"createindex_expression",symbols:["createindex_expression$subexpression$1","createindex_expression$ebnf$1","createindex_expression$ebnf$2","createindex_expression$ebnf$3","createindex_expression$ebnf$4"],postprocess:e=>(0,n.track)(e,{expression:t(e[0]),...e[1]&&{collate:t(e[1])},...e[2]&&{opclass:t(e[2])},...e[3]&&{order:t(e[3]).value},...e[4]&&{nulls:t(e[4])}})},{name:"createindex_predicate",symbols:[s.lexerAny.has("kw_where")?{type:"kw_where"}:kw_where,"expr"],postprocess:b},{name:"createindex_with$macrocall$2",symbols:["createindex_with_item"]},{name:"createindex_with$macrocall$1$ebnf$1",symbols:[]},{name:"createindex_with$macrocall$1$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("comma")?{type:"comma"}:comma,"createindex_with$macrocall$2"],postprocess:b},{name:"createindex_with$macrocall$1$ebnf$1",symbols:["createindex_with$macrocall$1$ebnf$1","createindex_with$macrocall$1$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"createindex_with$macrocall$1",symbols:["createindex_with$macrocall$2","createindex_with$macrocall$1$ebnf$1"],postprocess:([e,u])=>[t(e),...u.map(t)||[]]},{name:"createindex_with",symbols:[s.lexerAny.has("kw_with")?{type:"kw_with"}:kw_with,"lparen","createindex_with$macrocall$1","rparen"],postprocess:_(2)},{name:"createindex_with_item$subexpression$1",symbols:["string"]},{name:"createindex_with_item$subexpression$1",symbols:["int"]},{name:"createindex_with_item",symbols:["ident",s.lexerAny.has("op_eq")?{type:"op_eq"}:op_eq,"createindex_with_item$subexpression$1"],postprocess:e=>(0,n.track)(e,{parameter:w(e[0]),value:t(e[2]).toString()})},{name:"createindex_tblspace",symbols:["kw_tablespace","ident"],postprocess:b},{name:"createextension_statement$ebnf$1",symbols:["kw_ifnotexists"],postprocess:r},{name:"createextension_statement$ebnf$1",symbols:[],postprocess:()=>null},{name:"createextension_statement$ebnf$2",symbols:[s.lexerAny.has("kw_with")?{type:"kw_with"}:kw_with],postprocess:r},{name:"createextension_statement$ebnf$2",symbols:[],postprocess:()=>null},{name:"createextension_statement$ebnf$3$subexpression$1",symbols:["kw_schema","word"],postprocess:b},{name:"createextension_statement$ebnf$3",symbols:["createextension_statement$ebnf$3$subexpression$1"],postprocess:r},{name:"createextension_statement$ebnf$3",symbols:[],postprocess:()=>null},{name:"createextension_statement$ebnf$4$subexpression$1",symbols:["kw_version","string"],postprocess:b},{name:"createextension_statement$ebnf$4",symbols:["createextension_statement$ebnf$4$subexpression$1"],postprocess:r},{name:"createextension_statement$ebnf$4",symbols:[],postprocess:()=>null},{name:"createextension_statement$ebnf$5$subexpression$1",symbols:[s.lexerAny.has("kw_from")?{type:"kw_from"}:kw_from,"string"],postprocess:b},{name:"createextension_statement$ebnf$5",symbols:["createextension_statement$ebnf$5$subexpression$1"],postprocess:r},{name:"createextension_statement$ebnf$5",symbols:[],postprocess:()=>null},{name:"createextension_statement",symbols:[s.lexerAny.has("kw_create")?{type:"kw_create"}:kw_create,"kw_extension","createextension_statement$ebnf$1","word","createextension_statement$ebnf$2","createextension_statement$ebnf$3","createextension_statement$ebnf$4","createextension_statement$ebnf$5"],postprocess:e=>(0,n.track)(e,{type:"create extension",...e[2]?{ifNotExists:!0}:{},extension:m(e[3]),...e[5]?{schema:m(e[5])}:{},...e[6]?{version:y(e[6])}:{},...e[7]?{from:y(e[7])}:{}})},{name:"simplestatements_all",symbols:["simplestatements_start_transaction"]},{name:"simplestatements_all",symbols:["simplestatements_commit"]},{name:"simplestatements_all",symbols:["simplestatements_rollback"]},{name:"simplestatements_all",symbols:["simplestatements_tablespace"]},{name:"simplestatements_all",symbols:["simplestatements_set"]},{name:"simplestatements_all",symbols:["simplestatements_show"]},{name:"simplestatements_all",symbols:["simplestatements_begin"]},{name:"simplestatements_start_transaction$subexpression$1",symbols:["kw_start","kw_transaction"]},{name:"simplestatements_start_transaction",symbols:["simplestatements_start_transaction$subexpression$1"],postprocess:e=>(0,n.track)(e,{type:"start transaction"})},{name:"simplestatements_commit",symbols:["kw_commit"],postprocess:e=>(0,n.track)(e,{type:"commit"})},{name:"simplestatements_rollback",symbols:["kw_rollback"],postprocess:e=>(0,n.track)(e,{type:"rollback"})},{name:"simplestatements_tablespace",symbols:["kw_tablespace","word"],postprocess:e=>(0,n.track)(e,{type:"tablespace",tablespace:m(e[1])})},{name:"simplestatements_set$subexpression$1",symbols:["simplestatements_set_simple"]},{name:"simplestatements_set$subexpression$1",symbols:["simplestatements_set_timezone"]},{name:"simplestatements_set",symbols:["kw_set","simplestatements_set$subexpression$1"],postprocess:b},{name:"simplestatements_set_timezone",symbols:["kw_time","kw_zone","simplestatements_set_timezone_val"],postprocess:e=>(0,n.track)(e,{type:"set timezone",to:e[2]})},{name:"simplestatements_set_timezone_val$subexpression$1",symbols:["string"]},{name:"simplestatements_set_timezone_val$subexpression$1",symbols:["int"]},{name:"simplestatements_set_timezone_val",symbols:["simplestatements_set_timezone_val$subexpression$1"],postprocess:e=>(0,n.track)(e,{type:"value",value:t(e[0])})},{name:"simplestatements_set_timezone_val",symbols:["kw_local"],postprocess:e=>(0,n.track)(e,{type:"local"})},{name:"simplestatements_set_timezone_val",symbols:[s.lexerAny.has("kw_default")?{type:"kw_default"}:kw_default],postprocess:e=>(0,n.track)(e,{type:"default"})},{name:"simplestatements_set_timezone_val",symbols:["kw_interval","string","kw_hour",s.lexerAny.has("kw_to")?{type:"kw_to"}:kw_to,"kw_minute"],postprocess:e=>(0,n.track)(e,{type:"interval",value:(0,n.unbox)(e[1])})},{name:"simplestatements_set_simple$subexpression$1",symbols:[s.lexerAny.has("op_eq")?{type:"op_eq"}:op_eq]},{name:"simplestatements_set_simple$subexpression$1",symbols:[s.lexerAny.has("kw_to")?{type:"kw_to"}:kw_to]},{name:"simplestatements_set_simple",symbols:["ident","simplestatements_set_simple$subexpression$1","simplestatements_set_val"],postprocess:e=>(0,n.track)(e,{type:"set",variable:m(e[0]),set:(0,n.unbox)(e[2])})},{name:"simplestatements_set_val",symbols:["simplestatements_set_val_raw"],postprocess:t},{name:"simplestatements_set_val",symbols:[s.lexerAny.has("kw_default")?{type:"kw_default"}:kw_default],postprocess:e=>(0,n.track)(e,{type:"default"})},{name:"simplestatements_set_val$ebnf$1$subexpression$1",symbols:["comma","simplestatements_set_val_raw"]},{name:"simplestatements_set_val$ebnf$1",symbols:["simplestatements_set_val$ebnf$1$subexpression$1"]},{name:"simplestatements_set_val$ebnf$1$subexpression$2",symbols:["comma","simplestatements_set_val_raw"]},{name:"simplestatements_set_val$ebnf$1",symbols:["simplestatements_set_val$ebnf$1","simplestatements_set_val$ebnf$1$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"simplestatements_set_val",symbols:["simplestatements_set_val_raw","simplestatements_set_val$ebnf$1"],postprocess:e=>(0,n.track)(e,{type:"list",values:[e[0],...e[1]||[]]})},{name:"simplestatements_set_val_raw$subexpression$1",symbols:["string"]},{name:"simplestatements_set_val_raw$subexpression$1",symbols:["int"]},{name:"simplestatements_set_val_raw",symbols:["simplestatements_set_val_raw$subexpression$1"],postprocess:e=>(0,n.track)(e,{type:"value",value:t(e)})},{name:"simplestatements_set_val_raw$subexpression$2",symbols:[s.lexerAny.has("word")?{type:"word"}:word]},{name:"simplestatements_set_val_raw$subexpression$2",symbols:[s.lexerAny.has("kw_on")?{type:"kw_on"}:kw_on]},{name:"simplestatements_set_val_raw$subexpression$2",symbols:[s.lexerAny.has("kw_true")?{type:"kw_true"}:kw_true]},{name:"simplestatements_set_val_raw$subexpression$2",symbols:[s.lexerAny.has("kw_false")?{type:"kw_false"}:kw_false]},{name:"simplestatements_set_val_raw",symbols:["simplestatements_set_val_raw$subexpression$2"],postprocess:e=>(0,n.track)(e,{type:"identifier",name:t(e).value})},{name:"simplestatements_set_val_raw",symbols:[s.lexerAny.has("quoted_word")?{type:"quoted_word"}:quoted_word],postprocess:e=>(0,n.track)(e,{type:"identifier",doubleQuoted:!0,name:t(e).value})},{name:"simplestatements_show",symbols:["kw_show","ident"],postprocess:e=>(0,n.track)(e,{type:"show",variable:m(e[1])})},{name:"create_schema$subexpression$1",symbols:[s.lexerAny.has("kw_create")?{type:"kw_create"}:kw_create,"kw_schema"]},{name:"create_schema$ebnf$1",symbols:["kw_ifnotexists"],postprocess:r},{name:"create_schema$ebnf$1",symbols:[],postprocess:()=>null},{name:"create_schema",symbols:["create_schema$subexpression$1","create_schema$ebnf$1","ident"],postprocess:e=>(0,n.track)(e,{type:"create schema",name:m(e[2]),...e[1]?{ifNotExists:!0}:{}})},{name:"raise_statement$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:E("debug","log","info","notice","warning","exception")},{name:"raise_statement$ebnf$1",symbols:["raise_statement$ebnf$1$subexpression$1"],postprocess:r},{name:"raise_statement$ebnf$1",symbols:[],postprocess:()=>null},{name:"raise_statement$ebnf$2$subexpression$1",symbols:["comma","expr_list_raw"],postprocess:b},{name:"raise_statement$ebnf$2",symbols:["raise_statement$ebnf$2$subexpression$1"],postprocess:r},{name:"raise_statement$ebnf$2",symbols:[],postprocess:()=>null},{name:"raise_statement$ebnf$3",symbols:["raise_using"],postprocess:r},{name:"raise_statement$ebnf$3",symbols:[],postprocess:()=>null},{name:"raise_statement",symbols:["kw_raise","raise_statement$ebnf$1","string","raise_statement$ebnf$2","raise_statement$ebnf$3"],postprocess:e=>(0,n.track)(e,{type:"raise",format:w(e[2]),...e[1]&&{level:w(e[1])},...e[3]&&e[3].length&&{formatExprs:e[3]},...e[4]&&e[4].length&&{using:e[4]}})},{name:"raise_using$macrocall$2",symbols:["raise_using_one"]},{name:"raise_using$macrocall$1$ebnf$1",symbols:[]},{name:"raise_using$macrocall$1$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("comma")?{type:"comma"}:comma,"raise_using$macrocall$2"],postprocess:b},{name:"raise_using$macrocall$1$ebnf$1",symbols:["raise_using$macrocall$1$ebnf$1","raise_using$macrocall$1$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"raise_using$macrocall$1",symbols:["raise_using$macrocall$2","raise_using$macrocall$1$ebnf$1"],postprocess:([e,u])=>[t(e),...u.map(t)||[]]},{name:"raise_using",symbols:[s.lexerAny.has("kw_using")?{type:"kw_using"}:kw_using,"raise_using$macrocall$1"],postprocess:b},{name:"raise_using_one",symbols:["raise_using_what",s.lexerAny.has("op_eq")?{type:"op_eq"}:op_eq,"expr"],postprocess:e=>(0,n.track)(e,{type:w(e[0]),value:e[2]})},{name:"raise_using_what",symbols:[s.lexerAny.has("kw_table")?{type:"kw_table"}:kw_table]},{name:"raise_using_what",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:E("message","detail","hint","errcode","column","constraint","datatype","schema")},{name:"comment_statement",symbols:["kw_comment",s.lexerAny.has("kw_on")?{type:"kw_on"}:kw_on,"comment_what",s.lexerAny.has("kw_is")?{type:"kw_is"}:kw_is,"string"],postprocess:e=>(0,n.track)(e,{type:"comment",comment:(0,n.unbox)(b(e)),on:t(e[2])})},{name:"comment_what",symbols:["comment_what_col"]},{name:"comment_what",symbols:["comment_what_nm"]},{name:"comment_what_nm$subexpression$1",symbols:[s.lexerAny.has("kw_table")?{type:"kw_table"}:kw_table]},{name:"comment_what_nm$subexpression$1",symbols:["kw_materialized","kw_view"]},{name:"comment_what_nm$subexpression$1",symbols:[s.lexerAny.has("word")?{type:"word"}:word],postprocess:E("database","index","trigger","type","view")},{name:"comment_what_nm",symbols:["comment_what_nm$subexpression$1","qualified_name"],postprocess:e=>(0,n.track)(e,{type:w(e[0]),name:e[1]})},{name:"comment_what_col",symbols:["kw_column","qcolumn"],postprocess:e=>(0,n.track)(e,{type:"column",column:b(e)})},{name:"simplestatements_begin$ebnf$1$subexpression$1",symbols:["kw_transaction"]},{name:"simplestatements_begin$ebnf$1$subexpression$1",symbols:["kw_work"]},{name:"simplestatements_begin$ebnf$1",symbols:["simplestatements_begin$ebnf$1$subexpression$1"],postprocess:r},{name:"simplestatements_begin$ebnf$1",symbols:[],postprocess:()=>null},{name:"simplestatements_begin$ebnf$2",symbols:[]},{name:"simplestatements_begin$ebnf$2$subexpression$1",symbols:["simplestatements_begin_isol"]},{name:"simplestatements_begin$ebnf$2$subexpression$1",symbols:["simplestatements_begin_writ"]},{name:"simplestatements_begin$ebnf$2$subexpression$1",symbols:["simplestatements_begin_def"]},{name:"simplestatements_begin$ebnf$2",symbols:["simplestatements_begin$ebnf$2","simplestatements_begin$ebnf$2$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"simplestatements_begin",symbols:["kw_begin","simplestatements_begin$ebnf$1","simplestatements_begin$ebnf$2"],postprocess:e=>(0,n.track)(e,{type:"begin",...e[2].reduce((u,l)=>({...t(u),...t(l)}),{})})},{name:"simplestatements_begin_isol$subexpression$1",symbols:["kw_isolation","kw_level"]},{name:"simplestatements_begin_isol$subexpression$2",symbols:["kw_serializable"]},{name:"simplestatements_begin_isol$subexpression$2$subexpression$1",symbols:["word"],postprocess:k("repeatable")},{name:"simplestatements_begin_isol$subexpression$2",symbols:["simplestatements_begin_isol$subexpression$2$subexpression$1","kw_read"]},{name:"simplestatements_begin_isol$subexpression$2$subexpression$2",symbols:["word"],postprocess:k("committed")},{name:"simplestatements_begin_isol$subexpression$2",symbols:["kw_read","simplestatements_begin_isol$subexpression$2$subexpression$2"]},{name:"simplestatements_begin_isol$subexpression$2$subexpression$3",symbols:["word"],postprocess:k("uncommitted")},{name:"simplestatements_begin_isol$subexpression$2",symbols:["kw_read","simplestatements_begin_isol$subexpression$2$subexpression$3"]},{name:"simplestatements_begin_isol",symbols:["simplestatements_begin_isol$subexpression$1","simplestatements_begin_isol$subexpression$2"],postprocess:e=>(0,n.track)(e,{isolationLevel:w(e[1]," ")})},{name:"simplestatements_begin_writ$subexpression$1",symbols:["kw_read","kw_write"]},{name:"simplestatements_begin_writ$subexpression$1",symbols:["kw_read",s.lexerAny.has("kw_only")?{type:"kw_only"}:kw_only]},{name:"simplestatements_begin_writ",symbols:["simplestatements_begin_writ$subexpression$1"],postprocess:e=>(0,n.track)(e,{writeable:w(e," ")})},{name:"simplestatements_begin_def$ebnf$1",symbols:[s.lexerAny.has("kw_not")?{type:"kw_not"}:kw_not],postprocess:r},{name:"simplestatements_begin_def$ebnf$1",symbols:[],postprocess:()=>null},{name:"simplestatements_begin_def",symbols:["simplestatements_begin_def$ebnf$1",s.lexerAny.has("kw_deferrable")?{type:"kw_deferrable"}:kw_deferrable],postprocess:e=>(0,n.track)(e,{deferrable:!e[0]})},{name:"insert_statement$subexpression$1",symbols:["kw_insert",s.lexerAny.has("kw_into")?{type:"kw_into"}:kw_into]},{name:"insert_statement$ebnf$1",symbols:["collist_paren"],postprocess:r},{name:"insert_statement$ebnf$1",symbols:[],postprocess:()=>null},{name:"insert_statement$ebnf$2$subexpression$1$subexpression$1",symbols:["kw_system"]},{name:"insert_statement$ebnf$2$subexpression$1$subexpression$1",symbols:[s.lexerAny.has("kw_user")?{type:"kw_user"}:kw_user]},{name:"insert_statement$ebnf$2$subexpression$1",symbols:["kw_overriding","insert_statement$ebnf$2$subexpression$1$subexpression$1","kw_value"],postprocess:_(1)},{name:"insert_statement$ebnf$2",symbols:["insert_statement$ebnf$2$subexpression$1"],postprocess:r},{name:"insert_statement$ebnf$2",symbols:[],postprocess:()=>null},{name:"insert_statement$ebnf$3$subexpression$1",symbols:["selection"]},{name:"insert_statement$ebnf$3$subexpression$1",symbols:["selection_paren"]},{name:"insert_statement$ebnf$3",symbols:["insert_statement$ebnf$3$subexpression$1"],postprocess:r},{name:"insert_statement$ebnf$3",symbols:[],postprocess:()=>null},{name:"insert_statement$ebnf$4$subexpression$1",symbols:[s.lexerAny.has("kw_on")?{type:"kw_on"}:kw_on,"kw_conflict","insert_on_conflict"],postprocess:b},{name:"insert_statement$ebnf$4",symbols:["insert_statement$ebnf$4$subexpression$1"],postprocess:r},{name:"insert_statement$ebnf$4",symbols:[],postprocess:()=>null},{name:"insert_statement$ebnf$5$subexpression$1",symbols:[s.lexerAny.has("kw_returning")?{type:"kw_returning"}:kw_returning,"select_expr_list_aliased"],postprocess:b},{name:"insert_statement$ebnf$5",symbols:["insert_statement$ebnf$5$subexpression$1"],postprocess:r},{name:"insert_statement$ebnf$5",symbols:[],postprocess:()=>null},{name:"insert_statement",symbols:["insert_statement$subexpression$1","table_ref_aliased","insert_statement$ebnf$1","insert_statement$ebnf$2","insert_statement$ebnf$3","insert_statement$ebnf$4","insert_statement$ebnf$5"],postprocess:e=>{const u=e[2]&&e[2].map(m),l=w(e[3]),$=t(e[4]),g=e[5],O=e[6];return(0,n.track)(e,{type:"insert",into:t(e[1]),insert:$,...l&&{overriding:l},...u&&{columns:u},...O&&{returning:O},...g&&{onConflict:g}})}},{name:"insert_values$ebnf$1",symbols:[]},{name:"insert_values$ebnf$1$subexpression$1",symbols:["comma","insert_value"],postprocess:b},{name:"insert_values$ebnf$1",symbols:["insert_values$ebnf$1","insert_values$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"insert_values",symbols:["insert_value","insert_values$ebnf$1"],postprocess:([e,u])=>[e,...u||[]]},{name:"insert_value",symbols:["lparen","insert_expr_list_raw","rparen"],postprocess:_(1)},{name:"insert_expr_list_raw$ebnf$1",symbols:[]},{name:"insert_expr_list_raw$ebnf$1$subexpression$1",symbols:["comma","expr_or_select"],postprocess:b},{name:"insert_expr_list_raw$ebnf$1",symbols:["insert_expr_list_raw$ebnf$1","insert_expr_list_raw$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"insert_expr_list_raw",symbols:["expr_or_select","insert_expr_list_raw$ebnf$1"],postprocess:([e,u])=>[e,...u||[]]},{name:"insert_on_conflict$ebnf$1",symbols:["insert_on_conflict_what"],postprocess:r},{name:"insert_on_conflict$ebnf$1",symbols:[],postprocess:()=>null},{name:"insert_on_conflict",symbols:["insert_on_conflict$ebnf$1","insert_on_conflict_do"],postprocess:e=>(0,n.track)(e,{...e[0]?{on:t(e[0])}:{},...e[1]})},{name:"insert_on_conflict_what",symbols:["lparen","expr_list_raw","rparen"],postprocess:e=>(0,n.track)(e,{type:"on expr",exprs:e[1]})},{name:"insert_on_conflict_what",symbols:[s.lexerAny.has("kw_on")?{type:"kw_on"}:kw_on,s.lexerAny.has("kw_constraint")?{type:"kw_constraint"}:kw_constraint,"qname"],postprocess:e=>(0,n.track)(e,{type:"on constraint",constraint:b(e)})},{name:"insert_on_conflict_do",symbols:[s.lexerAny.has("kw_do")?{type:"kw_do"}:kw_do,"kw_nothing"],postprocess:e=>({do:"do nothing"})},{name:"insert_on_conflict_do$subexpression$1",symbols:[s.lexerAny.has("kw_do")?{type:"kw_do"}:kw_do,"kw_update","kw_set"]},{name:"insert_on_conflict_do$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("kw_where")?{type:"kw_where"}:kw_where,"expr"],postprocess:b},{name:"insert_on_conflict_do$ebnf$1",symbols:["insert_on_conflict_do$ebnf$1$subexpression$1"],postprocess:r},{name:"insert_on_conflict_do$ebnf$1",symbols:[],postprocess:()=>null},{name:"insert_on_conflict_do",symbols:["insert_on_conflict_do$subexpression$1","update_set_list","insert_on_conflict_do$ebnf$1"],postprocess:e=>({do:{sets:e[1]},...e[2]&&{where:e[2]}})},{name:"update_statement$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("kw_from")?{type:"kw_from"}:kw_from,"select_from_subject"],postprocess:b},{name:"update_statement$ebnf$1",symbols:["update_statement$ebnf$1$subexpression$1"],postprocess:r},{name:"update_statement$ebnf$1",symbols:[],postprocess:()=>null},{name:"update_statement$ebnf$2",symbols:["select_where"],postprocess:r},{name:"update_statement$ebnf$2",symbols:[],postprocess:()=>null},{name:"update_statement$ebnf$3$subexpression$1",symbols:[s.lexerAny.has("kw_returning")?{type:"kw_returning"}:kw_returning,"select_expr_list_aliased"],postprocess:b},{name:"update_statement$ebnf$3",symbols:["update_statement$ebnf$3$subexpression$1"],postprocess:r},{name:"update_statement$ebnf$3",symbols:[],postprocess:()=>null},{name:"update_statement",symbols:["kw_update","table_ref_aliased","kw_set","update_set_list","update_statement$ebnf$1","update_statement$ebnf$2","update_statement$ebnf$3"],postprocess:e=>{const u=t(e[4]),l=t(e[5]),$=e[6];return(0,n.track)(e,{type:"update",table:t(e[1]),sets:e[3],...l?{where:l}:{},...u?{from:u}:{},...$?{returning:$}:{}})}},{name:"update_set_list$ebnf$1",symbols:[]},{name:"update_set_list$ebnf$1$subexpression$1",symbols:["comma","update_set"],postprocess:b},{name:"update_set_list$ebnf$1",symbols:["update_set_list$ebnf$1","update_set_list$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"update_set_list",symbols:["update_set","update_set_list$ebnf$1"],postprocess:([e,u])=>{const l=[];for(const $ of[e,...u||[]]){const g=t($);Array.isArray(g)?l.push(...g):l.push(g)}return l}},{name:"update_set",symbols:["update_set_one"]},{name:"update_set",symbols:["update_set_multiple"]},{name:"update_set_one",symbols:["ident",s.lexerAny.has("op_eq")?{type:"op_eq"}:op_eq,"expr"],postprocess:e=>(0,n.box)(e,{column:m(e[0]),value:t(e[2])})},{name:"update_set_multiple$subexpression$1",symbols:["lparen","expr_list_raw","rparen"],postprocess:_(1)},{name:"update_set_multiple",symbols:["collist_paren",s.lexerAny.has("op_eq")?{type:"op_eq"}:op_eq,"update_set_multiple$subexpression$1"],postprocess:e=>{const u=e[0],l=e[2];if(u.length!==l.length)throw new Error("number of columns does not match number of values");return(0,n.box)(e,u.map(($,g)=>({column:m($),value:t(l[g])})))}},{name:"altertable_statement$ebnf$1",symbols:["kw_ifexists"],postprocess:r},{name:"altertable_statement$ebnf$1",symbols:[],postprocess:()=>null},{name:"altertable_statement$ebnf$2",symbols:[s.lexerAny.has("kw_only")?{type:"kw_only"}:kw_only],postprocess:r},{name:"altertable_statement$ebnf$2",symbols:[],postprocess:()=>null},{name:"altertable_statement",symbols:["kw_alter",s.lexerAny.has("kw_table")?{type:"kw_table"}:kw_table,"altertable_statement$ebnf$1","altertable_statement$ebnf$2","table_ref","altertable_actions"],postprocess:e=>(0,n.track)(e,{type:"alter table",...e[2]?{ifExists:!0}:{},...e[3]?{only:!0}:{},table:t(e[4]),changes:(0,n.unbox)(e[5]).map(t)})},{name:"altertable_actions$ebnf$1",symbols:[]},{name:"altertable_actions$ebnf$1$subexpression$1",symbols:["comma","altertable_action"],postprocess:b},{name:"altertable_actions$ebnf$1",symbols:["altertable_actions$ebnf$1","altertable_actions$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"altertable_actions",symbols:["altertable_action","altertable_actions$ebnf$1"],postprocess:([e,u])=>[e,...u||[]]},{name:"altertable_action",symbols:["altertable_rename_table"]},{name:"altertable_action",symbols:["altertable_rename_column"]},{name:"altertable_action",symbols:["altertable_rename_constraint"]},{name:"altertable_action",symbols:["altertable_add_column"]},{name:"altertable_action",symbols:["altertable_drop_column"]},{name:"altertable_action",symbols:["altertable_alter_column"]},{name:"altertable_action",symbols:["altertable_add_constraint"]},{name:"altertable_action",symbols:["altertable_drop_constraint"]},{name:"altertable_action",symbols:["altertable_owner"]},{name:"altertable_rename_table",symbols:["kw_rename",s.lexerAny.has("kw_to")?{type:"kw_to"}:kw_to,"word"],postprocess:e=>(0,n.track)(e,{type:"rename",to:m(b(e))})},{name:"altertable_rename_column$ebnf$1",symbols:["kw_column"],postprocess:r},{name:"altertable_rename_column$ebnf$1",symbols:[],postprocess:()=>null},{name:"altertable_rename_column",symbols:["kw_rename","altertable_rename_column$ebnf$1","ident",s.lexerAny.has("kw_to")?{type:"kw_to"}:kw_to,"ident"],postprocess:e=>(0,n.track)(e,{type:"rename column",column:m(e[2]),to:m(b(e))})},{name:"altertable_rename_constraint",symbols:["kw_rename",s.lexerAny.has("kw_constraint")?{type:"kw_constraint"}:kw_constraint,"ident",s.lexerAny.has("kw_to")?{type:"kw_to"}:kw_to,"ident"],postprocess:e=>(0,n.track)(e,{type:"rename constraint",constraint:m(e[2]),to:m(b(e))})},{name:"altertable_add_column$ebnf$1",symbols:["kw_column"],postprocess:r},{name:"altertable_add_column$ebnf$1",symbols:[],postprocess:()=>null},{name:"altertable_add_column$ebnf$2",symbols:["kw_ifnotexists"],postprocess:r},{name:"altertable_add_column$ebnf$2",symbols:[],postprocess:()=>null},{name:"altertable_add_column",symbols:["kw_add","altertable_add_column$ebnf$1","altertable_add_column$ebnf$2","createtable_column"],postprocess:e=>(0,n.track)(e,{type:"add column",...e[2]?{ifNotExists:!0}:{},column:t(e[3])})},{name:"altertable_drop_column$ebnf$1",symbols:["kw_column"],postprocess:r},{name:"altertable_drop_column$ebnf$1",symbols:[],postprocess:()=>null},{name:"altertable_drop_column$ebnf$2",symbols:["kw_ifexists"],postprocess:r},{name:"altertable_drop_column$ebnf$2",symbols:[],postprocess:()=>null},{name:"altertable_drop_column$ebnf$3$subexpression$1",symbols:["kw_restrict"]},{name:"altertable_drop_column$ebnf$3$subexpression$1",symbols:["kw_cascade"]},{name:"altertable_drop_column$ebnf$3",symbols:["altertable_drop_column$ebnf$3$subexpression$1"],postprocess:r},{name:"altertable_drop_column$ebnf$3",symbols:[],postprocess:()=>null},{name:"altertable_drop_column",symbols:["kw_drop","altertable_drop_column$ebnf$1","altertable_drop_column$ebnf$2","ident","altertable_drop_column$ebnf$3"],postprocess:e=>(0,n.track)(e,{type:"drop column",...e[2]?{ifExists:!0}:{},column:m(e[3]),...e[4]?{behaviour:w(e[4]," ")}:{}})},{name:"altertable_alter_column$ebnf$1",symbols:["kw_column"],postprocess:r},{name:"altertable_alter_column$ebnf$1",symbols:[],postprocess:()=>null},{name:"altertable_alter_column",symbols:["kw_alter","altertable_alter_column$ebnf$1","ident","altercol"],postprocess:e=>(0,n.track)(e,{type:"alter column",column:m(e[2]),alter:t(e[3])})},{name:"altercol$ebnf$1$subexpression$1",symbols:["kw_set","kw_data"]},{name:"altercol$ebnf$1",symbols:["altercol$ebnf$1$subexpression$1"],postprocess:r},{name:"altercol$ebnf$1",symbols:[],postprocess:()=>null},{name:"altercol",symbols:["altercol$ebnf$1","kw_type","data_type"],postprocess:e=>(0,n.track)(e,{type:"set type",dataType:t(b(e))})},{name:"altercol",symbols:["kw_set",s.lexerAny.has("kw_default")?{type:"kw_default"}:kw_default,"expr"],postprocess:e=>(0,n.track)(e,{type:"set default",default:t(b(e))})},{name:"altercol",symbols:["kw_drop",s.lexerAny.has("kw_default")?{type:"kw_default"}:kw_default],postprocess:e=>(0,n.track)(e,{type:"drop default"})},{name:"altercol$subexpression$1",symbols:["kw_set"]},{name:"altercol$subexpression$1",symbols:["kw_drop"]},{name:"altercol",symbols:["altercol$subexpression$1","kw_not_null"],postprocess:e=>(0,n.track)(e,{type:w(e," ")})},{name:"altercol",symbols:["altercol_generated_add"],postprocess:t},{name:"altertable_add_constraint",symbols:["kw_add","createtable_constraint"],postprocess:e=>(0,n.track)(e,{type:"add constraint",constraint:t(b(e))})},{name:"altertable_drop_constraint$ebnf$1",symbols:["kw_ifexists"],postprocess:r},{name:"altertable_drop_constraint$ebnf$1",symbols:[],postprocess:()=>null},{name:"altertable_drop_constraint$ebnf$2$subexpression$1",symbols:["kw_restrict"]},{name:"altertable_drop_constraint$ebnf$2$subexpression$1",symbols:["kw_cascade"]},{name:"altertable_drop_constraint$ebnf$2",symbols:["altertable_drop_constraint$ebnf$2$subexpression$1"],postprocess:r},{name:"altertable_drop_constraint$ebnf$2",symbols:[],postprocess:()=>null},{name:"altertable_drop_constraint",symbols:["kw_drop",s.lexerAny.has("kw_constraint")?{type:"kw_constraint"}:kw_constraint,"altertable_drop_constraint$ebnf$1","ident","altertable_drop_constraint$ebnf$2"],postprocess:e=>(0,n.track)(e,{type:"drop constraint",...e[2]?{ifExists:!0}:{},constraint:m(e[3]),...e[4]?{behaviour:w(e[4]," ")}:{}})},{name:"altertable_owner",symbols:["kw_owner",s.lexerAny.has("kw_to")?{type:"kw_to"}:kw_to,"ident"],postprocess:e=>(0,n.track)(e,{type:"owner",to:m(b(e))})},{name:"altercol_generated_add",symbols:["kw_add","altercol_generated"],postprocess:b},{name:"altercol_generated$ebnf$1$subexpression$1",symbols:["kw_always"]},{name:"altercol_generated$ebnf$1$subexpression$1",symbols:["kw_by",s.lexerAny.has("kw_default")?{type:"kw_default"}:kw_default]},{name:"altercol_generated$ebnf$1",symbols:["altercol_generated$ebnf$1$subexpression$1"],postprocess:r},{name:"altercol_generated$ebnf$1",symbols:[],postprocess:()=>null},{name:"altercol_generated$subexpression$1",symbols:[s.lexerAny.has("kw_as")?{type:"kw_as"}:kw_as,"kw_identity"]},{name:"altercol_generated$ebnf$2$subexpression$1",symbols:["lparen","altercol_generated_seq","rparen"],postprocess:_(1)},{name:"altercol_generated$ebnf$2",symbols:["altercol_generated$ebnf$2$subexpression$1"],postprocess:r},{name:"altercol_generated$ebnf$2",symbols:[],postprocess:()=>null},{name:"altercol_generated",symbols:["kw_generated","altercol_generated$ebnf$1","altercol_generated$subexpression$1","altercol_generated$ebnf$2"],postprocess:e=>(0,n.track)(e,{type:"add generated",...e[1]&&{always:w(e[1]," ")},...e[3]&&{sequence:t(e[3])}})},{name:"altercol_generated_seq$ebnf$1$subexpression$1",symbols:["kw_sequence","kw_name","qualified_name"]},{name:"altercol_generated_seq$ebnf$1",symbols:["altercol_generated_seq$ebnf$1$subexpression$1"],postprocess:r},{name:"altercol_generated_seq$ebnf$1",symbols:[],postprocess:()=>null},{name:"altercol_generated_seq$ebnf$2",symbols:[]},{name:"altercol_generated_seq$ebnf$2",symbols:["altercol_generated_seq$ebnf$2","create_sequence_option"],postprocess:e=>e[0].concat([e[1]])},{name:"altercol_generated_seq",symbols:["altercol_generated_seq$ebnf$1","altercol_generated_seq$ebnf$2"],postprocess:e=>{const u={...e[0]&&{name:t(b(e[0]))}};return C(u,e[1]),(0,n.track)(e,u)}},{name:"alterindex_statement$ebnf$1",symbols:["kw_ifexists"],postprocess:r},{name:"alterindex_statement$ebnf$1",symbols:[],postprocess:()=>null},{name:"alterindex_statement",symbols:["kw_alter","kw_index","alterindex_statement$ebnf$1","table_ref","alterindex_action"],postprocess:e=>(0,n.track)(e,{type:"alter index",...e[2]?{ifExists:!0}:{},index:t(e[3]),change:t(e[4])})},{name:"alterindex_action",symbols:["alterindex_rename"]},{name:"alterindex_action",symbols:["alterindex_set_tablespace"]},{name:"alterindex_rename",symbols:["kw_rename",s.lexerAny.has("kw_to")?{type:"kw_to"}:kw_to,"word"],postprocess:e=>(0,n.track)(e,{type:"rename",to:m(b(e))})},{name:"alterindex_set_tablespace",symbols:["kw_set","kw_tablespace","word"],postprocess:e=>(0,n.track)(e,{type:"set tablespace",tablespace:m(b(e))})},{name:"delete_statement",symbols:["delete_delete"]},{name:"delete_statement",symbols:["delete_truncate"]},{name:"delete_delete$subexpression$1",symbols:["kw_delete",s.lexerAny.has("kw_from")?{type:"kw_from"}:kw_from]},{name:"delete_delete$ebnf$1",symbols:["select_where"],postprocess:r},{name:"delete_delete$ebnf$1",symbols:[],postprocess:()=>null},{name:"delete_delete$ebnf$2$subexpression$1",symbols:[s.lexerAny.has("kw_returning")?{type:"kw_returning"}:kw_returning,"select_expr_list_aliased"],postprocess:b},{name:"delete_delete$ebnf$2",symbols:["delete_delete$ebnf$2$subexpression$1"],postprocess:r},{name:"delete_delete$ebnf$2",symbols:[],postprocess:()=>null},{name:"delete_delete",symbols:["delete_delete$subexpression$1","table_ref_aliased","delete_delete$ebnf$1","delete_delete$ebnf$2"],postprocess:e=>{const u=e[2],l=e[3];return(0,n.track)(e,{type:"delete",from:t(e[1]),...u?{where:u}:{},...l?{returning:l}:{}})}},{name:"delete_truncate$subexpression$1$ebnf$1",symbols:[s.lexerAny.has("kw_table")?{type:"kw_table"}:kw_table],postprocess:r},{name:"delete_truncate$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"delete_truncate$subexpression$1",symbols:["kw_truncate","delete_truncate$subexpression$1$ebnf$1"]},{name:"delete_truncate$macrocall$2",symbols:["table_ref"]},{name:"delete_truncate$macrocall$1$ebnf$1",symbols:[]},{name:"delete_truncate$macrocall$1$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("comma")?{type:"comma"}:comma,"delete_truncate$macrocall$2"],postprocess:b},{name:"delete_truncate$macrocall$1$ebnf$1",symbols:["delete_truncate$macrocall$1$ebnf$1","delete_truncate$macrocall$1$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"delete_truncate$macrocall$1",symbols:["delete_truncate$macrocall$2","delete_truncate$macrocall$1$ebnf$1"],postprocess:([e,u])=>[t(e),...u.map(t)||[]]},{name:"delete_truncate$ebnf$1$subexpression$1$subexpression$1",symbols:["kw_restart"]},{name:"delete_truncate$ebnf$1$subexpression$1$subexpression$1",symbols:["kw_continue"]},{name:"delete_truncate$ebnf$1$subexpression$1",symbols:["delete_truncate$ebnf$1$subexpression$1$subexpression$1","kw_identity"]},{name:"delete_truncate$ebnf$1",symbols:["delete_truncate$ebnf$1$subexpression$1"],postprocess:r},{name:"delete_truncate$ebnf$1",symbols:[],postprocess:()=>null},{name:"delete_truncate$ebnf$2$subexpression$1",symbols:["kw_restrict"]},{name:"delete_truncate$ebnf$2$subexpression$1",symbols:["kw_cascade"]},{name:"delete_truncate$ebnf$2",symbols:["delete_truncate$ebnf$2$subexpression$1"],postprocess:r},{name:"delete_truncate$ebnf$2",symbols:[],postprocess:()=>null},{name:"delete_truncate",symbols:["delete_truncate$subexpression$1","delete_truncate$macrocall$1","delete_truncate$ebnf$1","delete_truncate$ebnf$2"],postprocess:e=>(0,n.track)(e,{type:"truncate table",tables:e[1],...e[2]&&{identity:w(e[2][0])},...e[3]&&{cascade:w(e[3])}})},{name:"create_sequence_statement$ebnf$1$subexpression$1",symbols:["kw_temp"]},{name:"create_sequence_statement$ebnf$1$subexpression$1",symbols:["kw_temporary"]},{name:"create_sequence_statement$ebnf$1",symbols:["create_sequence_statement$ebnf$1$subexpression$1"],postprocess:r},{name:"create_sequence_statement$ebnf$1",symbols:[],postprocess:()=>null},{name:"create_sequence_statement$ebnf$2",symbols:["kw_ifnotexists"],postprocess:r},{name:"create_sequence_statement$ebnf$2",symbols:[],postprocess:()=>null},{name:"create_sequence_statement$ebnf$3",symbols:[]},{name:"create_sequence_statement$ebnf$3",symbols:["create_sequence_statement$ebnf$3","create_sequence_option"],postprocess:e=>e[0].concat([e[1]])},{name:"create_sequence_statement",symbols:[s.lexerAny.has("kw_create")?{type:"kw_create"}:kw_create,"create_sequence_statement$ebnf$1","kw_sequence","create_sequence_statement$ebnf$2","qualified_name","create_sequence_statement$ebnf$3"],postprocess:e=>{const u={type:"create sequence",...e[1]&&{temp:!0},...e[3]&&{ifNotExists:!0},name:t(e[4]),options:{}};return C(u.options,e[5]),(0,n.track)(e,u)}},{name:"create_sequence_option",symbols:[s.lexerAny.has("kw_as")?{type:"kw_as"}:kw_as,"data_type"],postprocess:e=>(0,n.box)(e,["as",e[1]])},{name:"create_sequence_option$ebnf$1",symbols:["kw_by"],postprocess:r},{name:"create_sequence_option$ebnf$1",symbols:[],postprocess:()=>null},{name:"create_sequence_option",symbols:["kw_increment","create_sequence_option$ebnf$1","int"],postprocess:e=>(0,n.box)(e,["incrementBy",e[2]])},{name:"create_sequence_option",symbols:["create_sequence_minvalue"],postprocess:e=>(0,n.box)(e,["minValue",e[0]])},{name:"create_sequence_option",symbols:["create_sequence_maxvalue"],postprocess:e=>(0,n.box)(e,["maxValue",e[0]])},{name:"create_sequence_option$ebnf$2",symbols:[s.lexerAny.has("kw_with")?{type:"kw_with"}:kw_with],postprocess:r},{name:"create_sequence_option$ebnf$2",symbols:[],postprocess:()=>null},{name:"create_sequence_option",symbols:["kw_start","create_sequence_option$ebnf$2","int"],postprocess:e=>(0,n.box)(e,["startWith",e[2]])},{name:"create_sequence_option",symbols:["kw_cache","int"],postprocess:e=>(0,n.box)(e,["cache",e[1]])},{name:"create_sequence_option$ebnf$3",symbols:["kw_no"],postprocess:r},{name:"create_sequence_option$ebnf$3",symbols:[],postprocess:()=>null},{name:"create_sequence_option",symbols:["create_sequence_option$ebnf$3","kw_cycle"],postprocess:e=>(0,n.box)(e,["cycle",w(e," ")])},{name:"create_sequence_option",symbols:["create_sequence_owned_by"],postprocess:e=>(0,n.box)(e,["ownedBy",t(e)])},{name:"create_sequence_minvalue",symbols:["kw_minvalue","int"],postprocess:b},{name:"create_sequence_minvalue",symbols:["kw_no","kw_minvalue"],postprocess:e=>(0,n.box)(e,"no minvalue")},{name:"create_sequence_maxvalue",symbols:["kw_maxvalue","int"],postprocess:b},{name:"create_sequence_maxvalue",symbols:["kw_no","kw_maxvalue"],postprocess:e=>(0,n.box)(e,"no maxvalue")},{name:"create_sequence_owned_by$subexpression$1",symbols:["kw_none"]},{name:"create_sequence_owned_by$subexpression$1",symbols:["qcolumn"]},{name:"create_sequence_owned_by",symbols:["kw_owned","kw_by","create_sequence_owned_by$subexpression$1"],postprocess:e=>(0,n.box)(e,t(b(e)))},{name:"alter_sequence_statement$ebnf$1",symbols:["kw_ifexists"],postprocess:r},{name:"alter_sequence_statement$ebnf$1",symbols:[],postprocess:()=>null},{name:"alter_sequence_statement",symbols:["kw_alter","kw_sequence","alter_sequence_statement$ebnf$1","qualified_name","alter_sequence_statement_body"],postprocess:e=>{const u={type:"alter sequence",...e[2]&&{ifExists:!0},name:t(e[3]),change:e[4]};return(0,n.track)(e,u)}},{name:"alter_sequence_statement_body$ebnf$1",symbols:["alter_sequence_option"]},{name:"alter_sequence_statement_body$ebnf$1",symbols:["alter_sequence_statement_body$ebnf$1","alter_sequence_option"],postprocess:e=>e[0].concat([e[1]])},{name:"alter_sequence_statement_body",symbols:["alter_sequence_statement_body$ebnf$1"],postprocess:e=>{const u={type:"set options"};return C(u,e[0]),(0,n.track)(e,u)}},{name:"alter_sequence_statement_body$subexpression$1",symbols:["ident"]},{name:"alter_sequence_statement_body$subexpression$1",symbols:[s.lexerAny.has("kw_session_user")?{type:"kw_session_user"}:kw_session_user]},{name:"alter_sequence_statement_body$subexpression$1",symbols:[s.lexerAny.has("kw_current_user")?{type:"kw_current_user"}:kw_current_user]},{name:"alter_sequence_statement_body",symbols:["kw_owner",s.lexerAny.has("kw_to")?{type:"kw_to"}:kw_to,"alter_sequence_statement_body$subexpression$1"],postprocess:e=>(0,n.track)(e,{type:"owner to",owner:m(b(e))})},{name:"alter_sequence_statement_body",symbols:["kw_rename",s.lexerAny.has("kw_to")?{type:"kw_to"}:kw_to,"ident"],postprocess:e=>(0,n.track)(e,{type:"rename",newName:m(b(e))})},{name:"alter_sequence_statement_body",symbols:["kw_set","kw_schema","ident"],postprocess:e=>(0,n.track)(e,{type:"set schema",newSchema:m(b(e))})},{name:"alter_sequence_option",symbols:["create_sequence_option"],postprocess:t},{name:"alter_sequence_option$ebnf$1$subexpression$1$ebnf$1",symbols:[s.lexerAny.has("kw_with")?{type:"kw_with"}:kw_with],postprocess:r},{name:"alter_sequence_option$ebnf$1$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"alter_sequence_option$ebnf$1$subexpression$1",symbols:["alter_sequence_option$ebnf$1$subexpression$1$ebnf$1","int"],postprocess:b},{name:"alter_sequence_option$ebnf$1",symbols:["alter_sequence_option$ebnf$1$subexpression$1"],postprocess:r},{name:"alter_sequence_option$ebnf$1",symbols:[],postprocess:()=>null},{name:"alter_sequence_option",symbols:["kw_restart","alter_sequence_option$ebnf$1"],postprocess:e=>(0,n.box)(e,["restart",typeof(0,n.unbox)(e[1])=="number"?(0,n.unbox)(e[1]):!0])},{name:"drop_statement$ebnf$1",symbols:["kw_ifexists"],postprocess:r},{name:"drop_statement$ebnf$1",symbols:[],postprocess:()=>null},{name:"drop_statement$macrocall$2",symbols:["qualified_name"]},{name:"drop_statement$macrocall$1$ebnf$1",symbols:[]},{name:"drop_statement$macrocall$1$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("comma")?{type:"comma"}:comma,"drop_statement$macrocall$2"],postprocess:b},{name:"drop_statement$macrocall$1$ebnf$1",symbols:["drop_statement$macrocall$1$ebnf$1","drop_statement$macrocall$1$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"drop_statement$macrocall$1",symbols:["drop_statement$macrocall$2","drop_statement$macrocall$1$ebnf$1"],postprocess:([e,u])=>[t(e),...u.map(t)||[]]},{name:"drop_statement$ebnf$2$subexpression$1",symbols:["kw_cascade"]},{name:"drop_statement$ebnf$2$subexpression$1",symbols:["kw_restrict"]},{name:"drop_statement$ebnf$2",symbols:["drop_statement$ebnf$2$subexpression$1"],postprocess:r},{name:"drop_statement$ebnf$2",symbols:[],postprocess:()=>null},{name:"drop_statement",symbols:["kw_drop","drop_what","drop_statement$ebnf$1","drop_statement$macrocall$1","drop_statement$ebnf$2"],postprocess:(e,u)=>{const l=t(e[1]);return(0,n.track)(e,{...l,...e[2]&&{ifExists:!0},names:e[3],...e[4]&&{cascade:w(e[4])}})}},{name:"drop_what",symbols:[s.lexerAny.has("kw_table")?{type:"kw_table"}:kw_table],postprocess:e=>(0,n.track)(e,{type:"drop table"})},{name:"drop_what",symbols:["kw_sequence"],postprocess:e=>(0,n.track)(e,{type:"drop sequence"})},{name:"drop_what",symbols:["kw_type"],postprocess:e=>(0,n.track)(e,{type:"drop type"})},{name:"drop_what",symbols:["kw_trigger"],postprocess:e=>(0,n.track)(e,{type:"drop trigger"})},{name:"drop_what$ebnf$1",symbols:[s.lexerAny.has("kw_concurrently")?{type:"kw_concurrently"}:kw_concurrently],postprocess:r},{name:"drop_what$ebnf$1",symbols:[],postprocess:()=>null},{name:"drop_what",symbols:["kw_index","drop_what$ebnf$1"],postprocess:e=>(0,n.track)(e,{type:"drop index",...e[1]&&{concurrently:!0}})},{name:"with_statement",symbols:[s.lexerAny.has("kw_with")?{type:"kw_with"}:kw_with,"with_statement_bindings","with_statement_statement"],postprocess:e=>(0,n.track)(e,{type:"with",bind:e[1],in:t(e[2])})},{name:"with_recursive_statement$subexpression$1",symbols:[s.lexerAny.has("kw_with")?{type:"kw_with"}:kw_with,"kw_recursive"]},{name:"with_recursive_statement",symbols:["with_recursive_statement$subexpression$1","ident","collist_paren",s.lexerAny.has("kw_as")?{type:"kw_as"}:kw_as,"lparen","union_statement","rparen","with_statement_statement"],postprocess:e=>(0,n.track)(e,{type:"with recursive",alias:m(e[1]),columnNames:e[2].map(m),bind:e[5],in:t(e[7])})},{name:"with_statement_bindings$ebnf$1",symbols:[]},{name:"with_statement_bindings$ebnf$1$subexpression$1",symbols:["comma","with_statement_binding"],postprocess:b},{name:"with_statement_bindings$ebnf$1",symbols:["with_statement_bindings$ebnf$1","with_statement_bindings$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"with_statement_bindings",symbols:["with_statement_binding","with_statement_bindings$ebnf$1"],postprocess:([e,u])=>[e,...u||[]]},{name:"with_statement_binding",symbols:["word",s.lexerAny.has("kw_as")?{type:"kw_as"}:kw_as,"lparen","with_statement_statement","rparen"],postprocess:e=>(0,n.track)(e,{alias:m(e[0]),statement:t(e[3])})},{name:"with_statement_statement",symbols:["selection"]},{name:"with_statement_statement",symbols:["insert_statement"]},{name:"with_statement_statement",symbols:["update_statement"]},{name:"with_statement_statement",symbols:["delete_statement"]},{name:"createtype_statement$subexpression$1",symbols:["createtype_enum"]},{name:"createtype_statement$subexpression$1",symbols:["createtype_composite"]},{name:"createtype_statement",symbols:[s.lexerAny.has("kw_create")?{type:"kw_create"}:kw_create,"kw_type","qualified_name","createtype_statement$subexpression$1"],postprocess:e=>(0,n.track)(e,{name:e[2],...t(e[3])})},{name:"createtype_enum$macrocall$2",symbols:["enum_value"]},{name:"createtype_enum$macrocall$1$ebnf$1",symbols:[]},{name:"createtype_enum$macrocall$1$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("comma")?{type:"comma"}:comma,"createtype_enum$macrocall$2"],postprocess:b},{name:"createtype_enum$macrocall$1$ebnf$1",symbols:["createtype_enum$macrocall$1$ebnf$1","createtype_enum$macrocall$1$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"createtype_enum$macrocall$1",symbols:["createtype_enum$macrocall$2","createtype_enum$macrocall$1$ebnf$1"],postprocess:([e,u])=>[t(e),...u.map(t)||[]]},{name:"createtype_enum",symbols:[s.lexerAny.has("kw_as")?{type:"kw_as"}:kw_as,"kw_enum","lparen","createtype_enum$macrocall$1","rparen"],postprocess:e=>(0,n.track)(e,{type:"create enum",values:e[3]})},{name:"enum_value",symbols:["string"],postprocess:e=>(0,n.track)(e,{value:w(e)})},{name:"createtype_composite$macrocall$2",symbols:["createtype_composite_attr"]},{name:"createtype_composite$macrocall$1$ebnf$1",symbols:[]},{name:"createtype_composite$macrocall$1$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("comma")?{type:"comma"}:comma,"createtype_composite$macrocall$2"],postprocess:b},{name:"createtype_composite$macrocall$1$ebnf$1",symbols:["createtype_composite$macrocall$1$ebnf$1","createtype_composite$macrocall$1$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"createtype_composite$macrocall$1",symbols:["createtype_composite$macrocall$2","createtype_composite$macrocall$1$ebnf$1"],postprocess:([e,u])=>[t(e),...u.map(t)||[]]},{name:"createtype_composite",symbols:[s.lexerAny.has("kw_as")?{type:"kw_as"}:kw_as,"lparen","createtype_composite$macrocall$1","rparen"],postprocess:e=>(0,n.track)(e,{type:"create composite type",attributes:e[2]})},{name:"createtype_composite_attr$ebnf$1",symbols:["createtable_collate"],postprocess:r},{name:"createtype_composite_attr$ebnf$1",symbols:[],postprocess:()=>null},{name:"createtype_composite_attr",symbols:["word","data_type","createtype_composite_attr$ebnf$1"],postprocess:e=>(0,n.track)(e,{name:m(e[0]),dataType:e[1],...e[2]?{collate:e[2][1]}:{}})},{name:"union_left",symbols:["select_statement"]},{name:"union_left",symbols:["select_values"]},{name:"union_left",symbols:["selection_paren"]},{name:"union_right",symbols:["selection"]},{name:"union_right",symbols:["selection_paren"]},{name:"union_statement$subexpression$1$ebnf$1",symbols:[s.lexerAny.has("kw_all")?{type:"kw_all"}:kw_all],postprocess:r},{name:"union_statement$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"union_statement$subexpression$1",symbols:[s.lexerAny.has("kw_union")?{type:"kw_union"}:kw_union,"union_statement$subexpression$1$ebnf$1"]},{name:"union_statement",symbols:["union_left","union_statement$subexpression$1","union_right"],postprocess:e=>(0,n.track)(e,{type:w(e[1]," "),left:t(e[0]),right:t(e[2])})},{name:"prepare$ebnf$1$subexpression$1",symbols:["lparen","data_type_list","rparen"],postprocess:_(1)},{name:"prepare$ebnf$1",symbols:["prepare$ebnf$1$subexpression$1"],postprocess:r},{name:"prepare$ebnf$1",symbols:[],postprocess:()=>null},{name:"prepare",symbols:["kw_prepare","ident","prepare$ebnf$1",s.lexerAny.has("kw_as")?{type:"kw_as"}:kw_as,"statement_noprep"],postprocess:e=>(0,n.track)(e,{type:"prepare",name:m(e[1]),...e[2]&&{args:e[2]},statement:t(b(e))})},{name:"deallocate$ebnf$1",symbols:["kw_prepare"],postprocess:r},{name:"deallocate$ebnf$1",symbols:[],postprocess:()=>null},{name:"deallocate",symbols:["kw_deallocate","deallocate$ebnf$1","deallocate_target"],postprocess:e=>(0,n.track)(e,{type:"deallocate",target:e[2]})},{name:"deallocate_target",symbols:["deallocate_all"],postprocess:t},{name:"deallocate_target",symbols:["deallocate_name"],postprocess:t},{name:"deallocate_name",symbols:["ident"],postprocess:e=>(0,n.track)(e,m(e[0]))},{name:"deallocate_all",symbols:[s.lexerAny.has("kw_all")?{type:"kw_all"}:kw_all],postprocess:e=>(0,n.track)(e,{option:"all"})},{name:"create_view_statements",symbols:["create_view"]},{name:"create_view_statements",symbols:["create_materialized_view"]},{name:"create_view$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("kw_or")?{type:"kw_or"}:kw_or,"kw_replace"]},{name:"create_view$ebnf$1",symbols:["create_view$ebnf$1$subexpression$1"],postprocess:r},{name:"create_view$ebnf$1",symbols:[],postprocess:()=>null},{name:"create_view$ebnf$2$subexpression$1",symbols:["kw_temp"]},{name:"create_view$ebnf$2$subexpression$1",symbols:["kw_temporary"]},{name:"create_view$ebnf$2",symbols:["create_view$ebnf$2$subexpression$1"],postprocess:r},{name:"create_view$ebnf$2",symbols:[],postprocess:()=>null},{name:"create_view$ebnf$3",symbols:["kw_recursive"],postprocess:r},{name:"create_view$ebnf$3",symbols:[],postprocess:()=>null},{name:"create_view$ebnf$4$subexpression$1$macrocall$2",symbols:["ident"]},{name:"create_view$ebnf$4$subexpression$1$macrocall$1$ebnf$1",symbols:[]},{name:"create_view$ebnf$4$subexpression$1$macrocall$1$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("comma")?{type:"comma"}:comma,"create_view$ebnf$4$subexpression$1$macrocall$2"],postprocess:b},{name:"create_view$ebnf$4$subexpression$1$macrocall$1$ebnf$1",symbols:["create_view$ebnf$4$subexpression$1$macrocall$1$ebnf$1","create_view$ebnf$4$subexpression$1$macrocall$1$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"create_view$ebnf$4$subexpression$1$macrocall$1",symbols:["create_view$ebnf$4$subexpression$1$macrocall$2","create_view$ebnf$4$subexpression$1$macrocall$1$ebnf$1"],postprocess:([e,u])=>[t(e),...u.map(t)||[]]},{name:"create_view$ebnf$4$subexpression$1",symbols:["lparen","create_view$ebnf$4$subexpression$1$macrocall$1","rparen"],postprocess:_(1)},{name:"create_view$ebnf$4",symbols:["create_view$ebnf$4$subexpression$1"],postprocess:r},{name:"create_view$ebnf$4",symbols:[],postprocess:()=>null},{name:"create_view$ebnf$5",symbols:["create_view_opts"],postprocess:r},{name:"create_view$ebnf$5",symbols:[],postprocess:()=>null},{name:"create_view$ebnf$6$subexpression$1$subexpression$1",symbols:["kw_local"]},{name:"create_view$ebnf$6$subexpression$1$subexpression$1",symbols:["kw_cascaded"]},{name:"create_view$ebnf$6$subexpression$1",symbols:[s.lexerAny.has("kw_with")?{type:"kw_with"}:kw_with,"create_view$ebnf$6$subexpression$1$subexpression$1",s.lexerAny.has("kw_check")?{type:"kw_check"}:kw_check,"kw_option"],postprocess:_(1)},{name:"create_view$ebnf$6",symbols:["create_view$ebnf$6$subexpression$1"],postprocess:r},{name:"create_view$ebnf$6",symbols:[],postprocess:()=>null},{name:"create_view",symbols:[s.lexerAny.has("kw_create")?{type:"kw_create"}:kw_create,"create_view$ebnf$1","create_view$ebnf$2","create_view$ebnf$3","kw_view","qualified_name","create_view$ebnf$4","create_view$ebnf$5",s.lexerAny.has("kw_as")?{type:"kw_as"}:kw_as,"selection","create_view$ebnf$6"],postprocess:e=>(0,n.track)(e,{type:"create view",...e[1]&&{orReplace:!0},...e[2]&&{temp:!0},...e[3]&&{recursive:!0},name:e[5],...e[6]&&{columnNames:e[6].map(m)},...e[7]&&{parameters:v(e[7])},query:e[9],...e[10]&&{checkOption:w(e[10])}})},{name:"create_view_opt",symbols:["ident",s.lexerAny.has("op_eq")?{type:"op_eq"}:op_eq,"ident"],postprocess:([e,u,l])=>[w(e),w(l)]},{name:"create_view_opts$macrocall$2",symbols:["create_view_opt"]},{name:"create_view_opts$macrocall$1$ebnf$1",symbols:[]},{name:"create_view_opts$macrocall$1$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("comma")?{type:"comma"}:comma,"create_view_opts$macrocall$2"],postprocess:b},{name:"create_view_opts$macrocall$1$ebnf$1",symbols:["create_view_opts$macrocall$1$ebnf$1","create_view_opts$macrocall$1$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"create_view_opts$macrocall$1",symbols:["create_view_opts$macrocall$2","create_view_opts$macrocall$1$ebnf$1"],postprocess:([e,u])=>[t(e),...u.map(t)||[]]},{name:"create_view_opts",symbols:[s.lexerAny.has("kw_with")?{type:"kw_with"}:kw_with,"create_view_opts$macrocall$1"],postprocess:b},{name:"create_materialized_view$ebnf$1",symbols:["kw_ifnotexists"],postprocess:r},{name:"create_materialized_view$ebnf$1",symbols:[],postprocess:()=>null},{name:"create_materialized_view$ebnf$2$subexpression$1$macrocall$2",symbols:["ident"]},{name:"create_materialized_view$ebnf$2$subexpression$1$macrocall$1$ebnf$1",symbols:[]},{name:"create_materialized_view$ebnf$2$subexpression$1$macrocall$1$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("comma")?{type:"comma"}:comma,"create_materialized_view$ebnf$2$subexpression$1$macrocall$2"],postprocess:b},{name:"create_materialized_view$ebnf$2$subexpression$1$macrocall$1$ebnf$1",symbols:["create_materialized_view$ebnf$2$subexpression$1$macrocall$1$ebnf$1","create_materialized_view$ebnf$2$subexpression$1$macrocall$1$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"create_materialized_view$ebnf$2$subexpression$1$macrocall$1",symbols:["create_materialized_view$ebnf$2$subexpression$1$macrocall$2","create_materialized_view$ebnf$2$subexpression$1$macrocall$1$ebnf$1"],postprocess:([e,u])=>[t(e),...u.map(t)||[]]},{name:"create_materialized_view$ebnf$2$subexpression$1",symbols:["lparen","create_materialized_view$ebnf$2$subexpression$1$macrocall$1","rparen"],postprocess:_(1)},{name:"create_materialized_view$ebnf$2",symbols:["create_materialized_view$ebnf$2$subexpression$1"],postprocess:r},{name:"create_materialized_view$ebnf$2",symbols:[],postprocess:()=>null},{name:"create_materialized_view$ebnf$3",symbols:["create_view_opts"],postprocess:r},{name:"create_materialized_view$ebnf$3",symbols:[],postprocess:()=>null},{name:"create_materialized_view$ebnf$4$subexpression$1",symbols:["kw_tablespace","ident"],postprocess:b},{name:"create_materialized_view$ebnf$4",symbols:["create_materialized_view$ebnf$4$subexpression$1"],postprocess:r},{name:"create_materialized_view$ebnf$4",symbols:[],postprocess:()=>null},{name:"create_materialized_view$ebnf$5$subexpression$1$ebnf$1",symbols:["kw_no"],postprocess:r},{name:"create_materialized_view$ebnf$5$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"create_materialized_view$ebnf$5$subexpression$1",symbols:[s.lexerAny.has("kw_with")?{type:"kw_with"}:kw_with,"create_materialized_view$ebnf$5$subexpression$1$ebnf$1","kw_data"]},{name:"create_materialized_view$ebnf$5",symbols:["create_materialized_view$ebnf$5$subexpression$1"],postprocess:r},{name:"create_materialized_view$ebnf$5",symbols:[],postprocess:()=>null},{name:"create_materialized_view",symbols:[s.lexerAny.has("kw_create")?{type:"kw_create"}:kw_create,"kw_materialized","kw_view","create_materialized_view$ebnf$1","qualified_name","create_materialized_view$ebnf$2","create_materialized_view$ebnf$3","create_materialized_view$ebnf$4",s.lexerAny.has("kw_as")?{type:"kw_as"}:kw_as,"selection","create_materialized_view$ebnf$5"],postprocess:e=>(0,n.track)(e,{type:"create materialized view",...e[3]&&{ifNotExists:!0},name:e[4],...e[5]&&{columnNames:e[6].map(m)},...e[6]&&{parameters:v(e[6])},...e[7]&&{tablespace:m(e[7])},query:e[9],...e[10]&&{withData:w(e[10][1])!=="no"}})},{name:"refresh_view_statements$ebnf$1",symbols:[s.lexerAny.has("kw_concurrently")?{type:"kw_concurrently"}:kw_concurrently],postprocess:r},{name:"refresh_view_statements$ebnf$1",symbols:[],postprocess:()=>null},{name:"refresh_view_statements$ebnf$2$subexpression$1$ebnf$1",symbols:["kw_no"],postprocess:r},{name:"refresh_view_statements$ebnf$2$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"refresh_view_statements$ebnf$2$subexpression$1",symbols:[s.lexerAny.has("kw_with")?{type:"kw_with"}:kw_with,"refresh_view_statements$ebnf$2$subexpression$1$ebnf$1","kw_data"]},{name:"refresh_view_statements$ebnf$2",symbols:["refresh_view_statements$ebnf$2$subexpression$1"],postprocess:r},{name:"refresh_view_statements$ebnf$2",symbols:[],postprocess:()=>null},{name:"refresh_view_statements",symbols:["kw_refresh","kw_materialized","kw_view","refresh_view_statements$ebnf$1","qname","refresh_view_statements$ebnf$2"],postprocess:e=>(0,n.track)(e,{type:"refresh materialized view",...e[3]?{concurrently:!0}:{},name:e[4],...e[5]?{withData:w(e[5][1])!=="no"}:{}})},{name:"functions_statements",symbols:["create_func"]},{name:"functions_statements",symbols:["do_stm"]},{name:"functions_statements",symbols:["drop_func"]},{name:"create_func$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("kw_or")?{type:"kw_or"}:kw_or,"kw_replace"]},{name:"create_func$ebnf$1",symbols:["create_func$ebnf$1$subexpression$1"],postprocess:r},{name:"create_func$ebnf$1",symbols:[],postprocess:()=>null},{name:"create_func$subexpression$1$ebnf$1$macrocall$2",symbols:["func_argdef"]},{name:"create_func$subexpression$1$ebnf$1$macrocall$1$ebnf$1",symbols:[]},{name:"create_func$subexpression$1$ebnf$1$macrocall$1$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("comma")?{type:"comma"}:comma,"create_func$subexpression$1$ebnf$1$macrocall$2"],postprocess:b},{name:"create_func$subexpression$1$ebnf$1$macrocall$1$ebnf$1",symbols:["create_func$subexpression$1$ebnf$1$macrocall$1$ebnf$1","create_func$subexpression$1$ebnf$1$macrocall$1$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"create_func$subexpression$1$ebnf$1$macrocall$1",symbols:["create_func$subexpression$1$ebnf$1$macrocall$2","create_func$subexpression$1$ebnf$1$macrocall$1$ebnf$1"],postprocess:([e,u])=>[t(e),...u.map(t)||[]]},{name:"create_func$subexpression$1$ebnf$1",symbols:["create_func$subexpression$1$ebnf$1$macrocall$1"],postprocess:r},{name:"create_func$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"create_func$subexpression$1",symbols:["lparen","create_func$subexpression$1$ebnf$1","rparen"],postprocess:_(1)},{name:"create_func$ebnf$2",symbols:["func_spec"]},{name:"create_func$ebnf$2",symbols:["create_func$ebnf$2","func_spec"],postprocess:e=>e[0].concat([e[1]])},{name:"create_func",symbols:[s.lexerAny.has("kw_create")?{type:"kw_create"}:kw_create,"create_func$ebnf$1","kw_function","qname","create_func$subexpression$1","create_func$ebnf$2"],postprocess:(e,u)=>{var l;const $={};for(const g of e[5]){for(const O in g)if(O[0]!=="_"&&O in $)throw new Error("conflicting or redundant options "+O);Object.assign($,g)}return(0,n.track)(e,{type:"create function",...e[1]&&{orReplace:!0},name:e[3],arguments:(l=e[4])!==null&&l!==void 0?l:[],...$})}},{name:"func_argdef$ebnf$1",symbols:["func_argopts"],postprocess:r},{name:"func_argdef$ebnf$1",symbols:[],postprocess:()=>null},{name:"func_argdef$ebnf$2",symbols:["func_argdefault"],postprocess:r},{name:"func_argdef$ebnf$2",symbols:[],postprocess:()=>null},{name:"func_argdef",symbols:["func_argdef$ebnf$1","data_type","func_argdef$ebnf$2"],postprocess:e=>(0,n.track)(e,{default:e[2],type:e[1],...e[0]})},{name:"func_argdefault",symbols:[s.lexerAny.has("kw_default")?{type:"kw_default"}:kw_default,"expr"],postprocess:e=>e[1]},{name:"func_argdefault",symbols:[s.lexerAny.has("op_eq")?{type:"op_eq"}:op_eq,"expr"],postprocess:e=>e[1]},{name:"func_argopts$ebnf$1",symbols:["word"],postprocess:r},{name:"func_argopts$ebnf$1",symbols:[],postprocess:()=>null},{name:"func_argopts",symbols:["func_argmod","func_argopts$ebnf$1"],postprocess:e=>(0,n.track)(e,{mode:w(e[0]),...e[1]&&{name:m(e[1])}})},{name:"func_argopts",symbols:["word"],postprocess:(e,u)=>{const l=m(e);return l==="out"||l==="inout"||l==="variadic"?u:(0,n.track)(e,{name:l})}},{name:"func_argmod",symbols:[s.lexerAny.has("kw_in")?{type:"kw_in"}:kw_in]},{name:"func_argmod",symbols:["kw_out"]},{name:"func_argmod",symbols:["kw_inout"]},{name:"func_argmod",symbols:["kw_variadic"]},{name:"func_spec",symbols:["kw_language","word"],postprocess:e=>(0,n.track)(e,{language:m(b(e))})},{name:"func_spec",symbols:["func_purity"],postprocess:e=>(0,n.track)(e,{purity:w(e)})},{name:"func_spec$subexpression$1",symbols:[s.lexerAny.has("codeblock")?{type:"codeblock"}:codeblock]},{name:"func_spec$subexpression$1",symbols:["string"]},{name:"func_spec",symbols:[s.lexerAny.has("kw_as")?{type:"kw_as"}:kw_as,"func_spec$subexpression$1"],postprocess:e=>({code:w(b(e))})},{name:"func_spec$ebnf$1",symbols:[s.lexerAny.has("kw_not")?{type:"kw_not"}:kw_not],postprocess:r},{name:"func_spec$ebnf$1",symbols:[],postprocess:()=>null},{name:"func_spec$subexpression$2",symbols:["word"],postprocess:k("leakproof")},{name:"func_spec",symbols:["func_spec$ebnf$1","func_spec$subexpression$2"],postprocess:e=>(0,n.track)(e,{leakproof:!e[0]})},{name:"func_spec",symbols:["func_returns"],postprocess:e=>(0,n.track)(e,{returns:t(e)})},{name:"func_spec$subexpression$3",symbols:["word"],postprocess:k("called")},{name:"func_spec",symbols:["func_spec$subexpression$3","oninp"],postprocess:()=>({onNullInput:"call"})},{name:"func_spec$subexpression$4",symbols:["word"],postprocess:k("returns")},{name:"func_spec",symbols:["func_spec$subexpression$4",s.lexerAny.has("kw_null")?{type:"kw_null"}:kw_null,"oninp"],postprocess:()=>({onNullInput:"null"})},{name:"func_spec$subexpression$5",symbols:["word"],postprocess:k("strict")},{name:"func_spec",symbols:["func_spec$subexpression$5"],postprocess:()=>({onNullInput:"strict"})},{name:"func_purity",symbols:["word"],postprocess:k("immutable")},{name:"func_purity",symbols:["word"],postprocess:k("stable")},{name:"func_purity",symbols:["word"],postprocess:k("volatile")},{name:"oninp$subexpression$1",symbols:["word"],postprocess:k("input")},{name:"oninp",symbols:[s.lexerAny.has("kw_on")?{type:"kw_on"}:kw_on,s.lexerAny.has("kw_null")?{type:"kw_null"}:kw_null,"oninp$subexpression$1"]},{name:"func_returns",symbols:["kw_returns","data_type"],postprocess:b},{name:"func_returns$macrocall$2",symbols:["func_ret_table_col"]},{name:"func_returns$macrocall$1$ebnf$1",symbols:[]},{name:"func_returns$macrocall$1$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("comma")?{type:"comma"}:comma,"func_returns$macrocall$2"],postprocess:b},{name:"func_returns$macrocall$1$ebnf$1",symbols:["func_returns$macrocall$1$ebnf$1","func_returns$macrocall$1$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"func_returns$macrocall$1",symbols:["func_returns$macrocall$2","func_returns$macrocall$1$ebnf$1"],postprocess:([e,u])=>[t(e),...u.map(t)||[]]},{name:"func_returns",symbols:["kw_returns",s.lexerAny.has("kw_table")?{type:"kw_table"}:kw_table,"lparen","func_returns$macrocall$1","rparen"],postprocess:e=>(0,n.track)(e,{kind:"table",columns:e[3]})},{name:"func_ret_table_col",symbols:["word","data_type"],postprocess:e=>(0,n.track)(e,{name:m(e[0]),type:e[1]})},{name:"do_stm$ebnf$1$subexpression$1",symbols:["kw_language","word"],postprocess:b},{name:"do_stm$ebnf$1",symbols:["do_stm$ebnf$1$subexpression$1"],postprocess:r},{name:"do_stm$ebnf$1",symbols:[],postprocess:()=>null},{name:"do_stm",symbols:[s.lexerAny.has("kw_do")?{type:"kw_do"}:kw_do,"do_stm$ebnf$1",s.lexerAny.has("codeblock")?{type:"codeblock"}:codeblock],postprocess:e=>(0,n.track)(e,{type:"do",...e[1]&&{language:m(e[1])},code:e[2].value})},{name:"drop_func$ebnf$1$subexpression$1",symbols:["kw_if","kw_exists"]},{name:"drop_func$ebnf$1",symbols:["drop_func$ebnf$1$subexpression$1"],postprocess:r},{name:"drop_func$ebnf$1",symbols:[],postprocess:()=>null},{name:"drop_func$ebnf$2",symbols:["drop_func_overload"],postprocess:r},{name:"drop_func$ebnf$2",symbols:[],postprocess:()=>null},{name:"drop_func",symbols:["kw_drop","kw_function","drop_func$ebnf$1","qname","drop_func$ebnf$2"],postprocess:e=>(0,n.track)(e,{type:"drop function",...e[2]&&{ifExists:!0},name:e[3],...e[4]&&{arguments:e[4]}})},{name:"drop_func_overload$macrocall$2",symbols:["drop_func_overload_col"]},{name:"drop_func_overload$macrocall$1$ebnf$1",symbols:[]},{name:"drop_func_overload$macrocall$1$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("comma")?{type:"comma"}:comma,"drop_func_overload$macrocall$2"],postprocess:b},{name:"drop_func_overload$macrocall$1$ebnf$1",symbols:["drop_func_overload$macrocall$1$ebnf$1","drop_func_overload$macrocall$1$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"drop_func_overload$macrocall$1",symbols:["drop_func_overload$macrocall$2","drop_func_overload$macrocall$1$ebnf$1"],postprocess:([e,u])=>[t(e),...u.map(t)||[]]},{name:"drop_func_overload",symbols:["lparen","drop_func_overload$macrocall$1","rparen"],postprocess:_(1)},{name:"drop_func_overload_col$ebnf$1",symbols:["word"],postprocess:r},{name:"drop_func_overload_col$ebnf$1",symbols:[],postprocess:()=>null},{name:"drop_func_overload_col",symbols:["drop_func_overload_col$ebnf$1","qname"],postprocess:e=>(0,n.track)(e,{type:e[1],...e[0]&&{name:m(e[0])}})},{name:"main$ebnf$1",symbols:[]},{name:"main$ebnf$1",symbols:["main$ebnf$1","statement_separator"],postprocess:e=>e[0].concat([e[1]])},{name:"main$ebnf$2",symbols:[]},{name:"main$ebnf$2$subexpression$1$ebnf$1",symbols:["statement_separator"]},{name:"main$ebnf$2$subexpression$1$ebnf$1",symbols:["main$ebnf$2$subexpression$1$ebnf$1","statement_separator"],postprocess:e=>e[0].concat([e[1]])},{name:"main$ebnf$2$subexpression$1",symbols:["main$ebnf$2$subexpression$1$ebnf$1","statement"]},{name:"main$ebnf$2",symbols:["main$ebnf$2","main$ebnf$2$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"main$ebnf$3",symbols:[]},{name:"main$ebnf$3",symbols:["main$ebnf$3","statement_separator"],postprocess:e=>e[0].concat([e[1]])},{name:"main",symbols:["main$ebnf$1","statement","main$ebnf$2","main$ebnf$3"],postprocess:([e,u,l])=>{const $=l,g=[t(u),...$.map(O=>t(O[1]))];return g.length===1?g[0]:g}},{name:"statement_separator",symbols:[s.lexerAny.has("semicolon")?{type:"semicolon"}:semicolon]},{name:"statement",symbols:["statement_noprep"]},{name:"statement",symbols:["prepare"]},{name:"statement",symbols:["deallocate"]},{name:"statement_noprep",symbols:["selection"]},{name:"statement_noprep",symbols:["createtable_statement"]},{name:"statement_noprep",symbols:["createextension_statement"]},{name:"statement_noprep",symbols:["createindex_statement"]},{name:"statement_noprep",symbols:["simplestatements_all"]},{name:"statement_noprep",symbols:["insert_statement"]},{name:"statement_noprep",symbols:["update_statement"]},{name:"statement_noprep",symbols:["altertable_statement"]},{name:"statement_noprep",symbols:["alterindex_statement"]},{name:"statement_noprep",symbols:["delete_statement"]},{name:"statement_noprep",symbols:["create_sequence_statement"]},{name:"statement_noprep",symbols:["alter_sequence_statement"]},{name:"statement_noprep",symbols:["drop_statement"]},{name:"statement_noprep",symbols:["createtype_statement"]},{name:"statement_noprep",symbols:["create_view_statements"]},{name:"statement_noprep",symbols:["refresh_view_statements"]},{name:"statement_noprep",symbols:["create_schema"]},{name:"statement_noprep",symbols:["raise_statement"]},{name:"statement_noprep",symbols:["comment_statement"]},{name:"statement_noprep",symbols:["functions_statements"]},{name:"selection",symbols:["select_statement"],postprocess:t},{name:"selection",symbols:["select_values"],postprocess:t},{name:"selection",symbols:["with_statement"],postprocess:t},{name:"selection",symbols:["with_recursive_statement"],postprocess:t},{name:"selection",symbols:["union_statement"],postprocess:t},{name:"selection_paren",symbols:["lparen","selection","rparen"],postprocess:_(1)}],ParserStart:"main"};o.default=q},function(i,o,c){Object.defineProperty(o,"__esModule",{value:!0});function r(f){return f[0]}const s=c(12),n=f=>f&&f[f.length-1],m={Lexer:s.lexerAny,ParserRules:[{name:"main$ebnf$1",symbols:["elements"],postprocess:r},{name:"main$ebnf$1",symbols:[],postprocess:()=>null},{name:"main",symbols:[s.lexerAny.has("start_list")?{type:"start_list"}:start_list,"main$ebnf$1",s.lexerAny.has("end_list")?{type:"end_list"}:end_list],postprocess:f=>f[1]||[]},{name:"elements$ebnf$1",symbols:[]},{name:"elements$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("comma")?{type:"comma"}:comma,"elt"],postprocess:n},{name:"elements$ebnf$1",symbols:["elements$ebnf$1","elements$ebnf$1$subexpression$1"],postprocess:f=>f[0].concat([f[1]])},{name:"elements",symbols:["elt","elements$ebnf$1"],postprocess:([f,y])=>[f,...y||[]]},{name:"elt",symbols:[s.lexerAny.has("value")?{type:"value"}:value],postprocess:f=>f[0].value},{name:"elt",symbols:["main"],postprocess:f=>f[0]}],ParserStart:"main"};o.default=m},function(i,o,c){Object.defineProperty(o,"__esModule",{value:!0}),o.lexerAny=o.lexer=void 0;const r=c(0);o.lexer=(0,r.compile)({valueString:{match:/"(?:\\["\\]|[^\n"\\])*"/,value:s=>JSON.parse(s),type:s=>"value"},valueRaw:{match:/[^\s,\{\}"](?:[^,\{\}"]*[^\s,\{\}"])?/,type:()=>"value"},comma:",",space:{match:/[\s\t\n\v\f\r]+/,lineBreaks:!0},start_list:"{",end_list:"}"}),o.lexer.next=(s=>()=>{let n;for(;(n=s.call(o.lexer))&&n.type==="space";);return n})(o.lexer.next),o.lexerAny=o.lexer},function(i,o,c){Object.defineProperty(o,"__esModule",{value:!0});function r(t){return t[0]}const s=c(14),n=t=>_=>_[t],m=t=>t&&t[t.length-1];function f(t){return Array.isArray(t)&&t.length===1&&(t=f(t[0])),Array.isArray(t)&&!t.length?null:t}const y={Lexer:s.lexerAny,ParserRules:[{name:"number$subexpression$1",symbols:["float"]},{name:"number$subexpression$1",symbols:["int"]},{name:"number",symbols:["number$subexpression$1"],postprocess:f},{name:"float",symbols:[s.lexerAny.has("float")?{type:"float"}:float],postprocess:t=>parseFloat(f(t))},{name:"int",symbols:[s.lexerAny.has("int")?{type:"int"}:int],postprocess:t=>parseInt(f(t),10)},{name:"comma",symbols:[s.lexerAny.has("comma")?{type:"comma"}:comma],postprocess:r},{name:"point$macrocall$2",symbols:["point_content"]},{name:"point$macrocall$1$subexpression$1",symbols:["point$macrocall$2"]},{name:"point$macrocall$1$subexpression$1",symbols:[s.lexerAny.has("lparen")?{type:"lparen"}:lparen,"point$macrocall$2",s.lexerAny.has("rparen")?{type:"rparen"}:rparen],postprocess:n(1)},{name:"point$macrocall$1",symbols:["point$macrocall$1$subexpression$1"],postprocess:f},{name:"point",symbols:["point$macrocall$1"],postprocess:f},{name:"point_content",symbols:["number","comma","number"],postprocess:t=>({x:t[0],y:t[2]})},{name:"line",symbols:[s.lexerAny.has("lcurl")?{type:"lcurl"}:lcurl,"number","comma","number","comma","number",s.lexerAny.has("rcurl")?{type:"rcurl"}:rcurl],postprocess:t=>({a:t[1],b:t[3],c:t[5]})},{name:"box",symbols:["closed_path"],postprocess:([t],_)=>t.length!==2?_:t},{name:"lseg",symbols:["path"],postprocess:([t],_)=>t.path.length!==2?_:t.path},{name:"path",symbols:["open_path"],postprocess:([t])=>({closed:!1,path:t})},{name:"path",symbols:["closed_path"],postprocess:([t])=>({closed:!0,path:t})},{name:"open_path$macrocall$2",symbols:[s.lexerAny.has("lbracket")?{type:"lbracket"}:lbracket]},{name:"open_path$macrocall$3",symbols:[s.lexerAny.has("rbracket")?{type:"rbracket"}:rbracket]},{name:"open_path$macrocall$1$macrocall$2",symbols:["point"]},{name:"open_path$macrocall$1$macrocall$1$ebnf$1",symbols:[]},{name:"open_path$macrocall$1$macrocall$1$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("comma")?{type:"comma"}:comma,"open_path$macrocall$1$macrocall$2"],postprocess:m},{name:"open_path$macrocall$1$macrocall$1$ebnf$1",symbols:["open_path$macrocall$1$macrocall$1$ebnf$1","open_path$macrocall$1$macrocall$1$ebnf$1$subexpression$1"],postprocess:t=>t[0].concat([t[1]])},{name:"open_path$macrocall$1$macrocall$1",symbols:["open_path$macrocall$1$macrocall$2","open_path$macrocall$1$macrocall$1$ebnf$1"],postprocess:([t,_])=>[f(t),..._.map(f)||[]]},{name:"open_path$macrocall$1",symbols:["open_path$macrocall$2","open_path$macrocall$1$macrocall$1","open_path$macrocall$3"],postprocess:n(1)},{name:"open_path",symbols:["open_path$macrocall$1"],postprocess:m},{name:"closed_path$subexpression$1$macrocall$2",symbols:[s.lexerAny.has("lparen")?{type:"lparen"}:lparen]},{name:"closed_path$subexpression$1$macrocall$3",symbols:[s.lexerAny.has("rparen")?{type:"rparen"}:rparen]},{name:"closed_path$subexpression$1$macrocall$1$macrocall$2",symbols:["point"]},{name:"closed_path$subexpression$1$macrocall$1$macrocall$1$ebnf$1",symbols:[]},{name:"closed_path$subexpression$1$macrocall$1$macrocall$1$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("comma")?{type:"comma"}:comma,"closed_path$subexpression$1$macrocall$1$macrocall$2"],postprocess:m},{name:"closed_path$subexpression$1$macrocall$1$macrocall$1$ebnf$1",symbols:["closed_path$subexpression$1$macrocall$1$macrocall$1$ebnf$1","closed_path$subexpression$1$macrocall$1$macrocall$1$ebnf$1$subexpression$1"],postprocess:t=>t[0].concat([t[1]])},{name:"closed_path$subexpression$1$macrocall$1$macrocall$1",symbols:["closed_path$subexpression$1$macrocall$1$macrocall$2","closed_path$subexpression$1$macrocall$1$macrocall$1$ebnf$1"],postprocess:([t,_])=>[f(t),..._.map(f)||[]]},{name:"closed_path$subexpression$1$macrocall$1",symbols:["closed_path$subexpression$1$macrocall$2","closed_path$subexpression$1$macrocall$1$macrocall$1","closed_path$subexpression$1$macrocall$3"],postprocess:n(1)},{name:"closed_path$subexpression$1",symbols:["closed_path$subexpression$1$macrocall$1"],postprocess:m},{name:"closed_path$subexpression$1$macrocall$5",symbols:["point"]},{name:"closed_path$subexpression$1$macrocall$4$ebnf$1",symbols:[]},{name:"closed_path$subexpression$1$macrocall$4$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("comma")?{type:"comma"}:comma,"closed_path$subexpression$1$macrocall$5"],postprocess:m},{name:"closed_path$subexpression$1$macrocall$4$ebnf$1",symbols:["closed_path$subexpression$1$macrocall$4$ebnf$1","closed_path$subexpression$1$macrocall$4$ebnf$1$subexpression$1"],postprocess:t=>t[0].concat([t[1]])},{name:"closed_path$subexpression$1$macrocall$4",symbols:["closed_path$subexpression$1$macrocall$5","closed_path$subexpression$1$macrocall$4$ebnf$1"],postprocess:([t,_])=>[f(t),..._.map(f)||[]]},{name:"closed_path$subexpression$1",symbols:["closed_path$subexpression$1$macrocall$4"],postprocess:m},{name:"closed_path",symbols:["closed_path$subexpression$1"],postprocess:n(0)},{name:"polygon",symbols:["closed_path"],postprocess:n(0)},{name:"circle_body",symbols:["point","comma","number"],postprocess:t=>({c:t[0],r:t[2]})},{name:"circle$subexpression$1$macrocall$2",symbols:[s.lexerAny.has("lcomp")?{type:"lcomp"}:lcomp]},{name:"circle$subexpression$1$macrocall$3",symbols:[s.lexerAny.has("rcomp")?{type:"rcomp"}:rcomp]},{name:"circle$subexpression$1$macrocall$1",symbols:["circle$subexpression$1$macrocall$2","circle_body","circle$subexpression$1$macrocall$3"],postprocess:n(1)},{name:"circle$subexpression$1",symbols:["circle$subexpression$1$macrocall$1"]},{name:"circle$subexpression$1$macrocall$5",symbols:[s.lexerAny.has("lparen")?{type:"lparen"}:lparen]},{name:"circle$subexpression$1$macrocall$6",symbols:[s.lexerAny.has("rparen")?{type:"rparen"}:rparen]},{name:"circle$subexpression$1$macrocall$4",symbols:["circle$subexpression$1$macrocall$5","circle_body","circle$subexpression$1$macrocall$6"],postprocess:n(1)},{name:"circle$subexpression$1",symbols:["circle$subexpression$1$macrocall$4"]},{name:"circle$subexpression$1",symbols:["circle_body"]},{name:"circle",symbols:["circle$subexpression$1"],postprocess:f}],ParserStart:"number"};o.default=y},function(i,o,c){Object.defineProperty(o,"__esModule",{value:!0}),o.lexerAny=o.lexer=void 0;const r=c(0);o.lexer=(0,r.compile)({comma:",",space:{match:/[\s\t\n\v\f\r]+/,lineBreaks:!0},int:/\-?\d+(?![\.\d])/,float:/\-?(?:(?:\d*\.\d+)|(?:\d+\.\d*))/,lcurl:"{",rcurl:"}",lparen:"(",rparen:")",lbracket:"[",rbracket:"]",lcomp:"<",rcomp:">"}),o.lexer.next=(s=>()=>{let n;for(;(n=s.call(o.lexer))&&n.type==="space";);return n})(o.lexer.next),o.lexerAny=o.lexer},function(i,o,c){Object.defineProperty(o,"__esModule",{value:!0});function r(m){return m[0]}const s=c(16),n={Lexer:s.lexerAny,ParserRules:[{name:"main$ebnf$1",symbols:["elt"]},{name:"main$ebnf$1",symbols:["main$ebnf$1","elt"],postprocess:m=>m[0].concat([m[1]])},{name:"main",symbols:["main$ebnf$1"],postprocess:([m])=>{const f=new Set;for(const y of m){const t=typeof y[1]=="number"?y[0]:"time";if(f.has(t))return"invalid";f.add(t)}return m}},{name:"elt",symbols:["time"]},{name:"elt",symbols:["num","unit"],postprocess:([[m],f])=>(f=f[0].type,[f,m])},{name:"unit",symbols:[s.lexerAny.has("years")?{type:"years"}:years]},{name:"unit",symbols:[s.lexerAny.has("months")?{type:"months"}:months]},{name:"unit",symbols:[s.lexerAny.has("days")?{type:"days"}:days]},{name:"unit",symbols:[s.lexerAny.has("hours")?{type:"hours"}:hours]},{name:"unit",symbols:[s.lexerAny.has("minutes")?{type:"minutes"}:minutes]},{name:"unit",symbols:[s.lexerAny.has("seconds")?{type:"seconds"}:seconds]},{name:"unit",symbols:[s.lexerAny.has("milliseconds")?{type:"milliseconds"}:milliseconds]},{name:"num",symbols:["int"]},{name:"num",symbols:["float"]},{name:"uint",symbols:[s.lexerAny.has("int")?{type:"int"}:int],postprocess:([m])=>parseInt(m,10)},{name:"int$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("neg")?{type:"neg"}:neg]},{name:"int$ebnf$1",symbols:["int$ebnf$1$subexpression$1"],postprocess:r},{name:"int$ebnf$1",symbols:[],postprocess:()=>null},{name:"int",symbols:["int$ebnf$1",s.lexerAny.has("int")?{type:"int"}:int],postprocess:([m,f])=>parseInt(f,10)*(m?-1:1)},{name:"float$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("neg")?{type:"neg"}:neg]},{name:"float$ebnf$1",symbols:["float$ebnf$1$subexpression$1"],postprocess:r},{name:"float$ebnf$1",symbols:[],postprocess:()=>null},{name:"float$ebnf$2",symbols:[s.lexerAny.has("int")?{type:"int"}:int],postprocess:r},{name:"float$ebnf$2",symbols:[],postprocess:()=>null},{name:"float",symbols:["float$ebnf$1","float$ebnf$2",s.lexerAny.has("dot")?{type:"dot"}:dot,s.lexerAny.has("int")?{type:"int"}:int],postprocess:([m,...f])=>parseFloat(f.map(y=>y?y.text:"0").join(""))*(m?-1:1)},{name:"time$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("colon")?{type:"colon"}:colon,"uint"]},{name:"time$ebnf$1",symbols:["time$ebnf$1$subexpression$1"],postprocess:r},{name:"time$ebnf$1",symbols:[],postprocess:()=>null},{name:"time$ebnf$2$subexpression$1",symbols:[s.lexerAny.has("dot")?{type:"dot"}:dot,s.lexerAny.has("int")?{type:"int"}:int]},{name:"time$ebnf$2",symbols:["time$ebnf$2$subexpression$1"],postprocess:r},{name:"time$ebnf$2",symbols:[],postprocess:()=>null},{name:"time",symbols:["uint",s.lexerAny.has("colon")?{type:"colon"}:colon,"uint","time$ebnf$1","time$ebnf$2"],postprocess:([m,f,y,t,_])=>{t=t&&t[1],_=_&&_[1];const b=typeof t=="number"?[["hours",m],["minutes",y],["seconds",t]]:[["minutes",m],["seconds",y]];return _&&b.push(["milliseconds",parseFloat("0."+_)*1e3]),b}}],ParserStart:"main"};o.default=n},function(i,o,c){Object.defineProperty(o,"__esModule",{value:!0}),o.lexerAny=o.lexer=void 0;const r=c(0);o.lexer=(0,r.compile)({int:/\d+/,neg:"-",dot:".",years:/(?:y|yrs?|years?)\b/,months:/(?:mon(?:th)?s?)\b/,days:/(?:d|days?)\b/,hours:/(?:h|hrs?|hours?)\b/,minutes:/(?:m|mins?|minutes?)\b/,seconds:/(?:s|secs?|seconds?)\b/,milliseconds:/(?:ms|milliseconds?)\b/,space:{match:/[\s\t\n\v\f\r]+/,lineBreaks:!0},colon:":"}),o.lexer.next=(s=>()=>{let n;for(;(n=s.call(o.lexer))&&n.type==="space";);return n})(o.lexer.next),o.lexerAny=o.lexer},function(i,o,c){Object.defineProperty(o,"__esModule",{value:!0});function r(m){return m[0]}const s=c(18),n={Lexer:s.lexerAny,ParserRules:[{name:"num",symbols:[s.lexerAny.has("int")?{type:"int"}:int]},{name:"num",symbols:[s.lexerAny.has("float")?{type:"float"}:float]},{name:"main$ebnf$1",symbols:[]},{name:"main$ebnf$1",symbols:["main$ebnf$1","long"],postprocess:m=>m[0].concat([m[1]])},{name:"main$ebnf$2$subexpression$1$ebnf$1",symbols:["short"]},{name:"main$ebnf$2$subexpression$1$ebnf$1",symbols:["main$ebnf$2$subexpression$1$ebnf$1","short"],postprocess:m=>m[0].concat([m[1]])},{name:"main$ebnf$2$subexpression$1",symbols:[s.lexerAny.has("T")?{type:"T"}:T,"main$ebnf$2$subexpression$1$ebnf$1"]},{name:"main$ebnf$2",symbols:["main$ebnf$2$subexpression$1"],postprocess:r},{name:"main$ebnf$2",symbols:[],postprocess:()=>null},{name:"main",symbols:[s.lexerAny.has("P")?{type:"P"}:P,"main$ebnf$1","main$ebnf$2"],postprocess:([m,f,y],t)=>(y=y?y[1]:[],!f.length&&!y.length?t:f.length?y.length?[...f,...y]:f:y)},{name:"long$subexpression$1",symbols:[s.lexerAny.has("Y")?{type:"Y"}:Y]},{name:"long$subexpression$1",symbols:[s.lexerAny.has("M")?{type:"M"}:M]},{name:"long$subexpression$1",symbols:[s.lexerAny.has("W")?{type:"W"}:W]},{name:"long$subexpression$1",symbols:[s.lexerAny.has("D")?{type:"D"}:D]},{name:"long",symbols:["num","long$subexpression$1"],postprocess:([m,f])=>{switch(m=parseFloat(m[0].value),f=f[0].type,f){case"Y":return["years",m];case"M":return["months",m];case"W":return["days",m*7];case"D":return["days",m];default:throw new Error("Unexpected unit "+f)}}},{name:"short$ebnf$1",symbols:[s.lexerAny.has("T")?{type:"T"}:T],postprocess:r},{name:"short$ebnf$1",symbols:[],postprocess:()=>null},{name:"short$subexpression$1",symbols:[s.lexerAny.has("H")?{type:"H"}:H]},{name:"short$subexpression$1",symbols:[s.lexerAny.has("M")?{type:"M"}:M]},{name:"short$subexpression$1",symbols:[s.lexerAny.has("S")?{type:"S"}:S]},{name:"short",symbols:["short$ebnf$1","num","short$subexpression$1"],postprocess:([m,f,y])=>{switch(f=parseFloat(f[0].value),y=y[0].type,y){case"H":return["hours",f];case"M":return["minutes",f];case"S":return["seconds",f];default:throw new Error("Unexpected unit "+y)}}}],ParserStart:"num"};o.default=n},function(i,o,c){Object.defineProperty(o,"__esModule",{value:!0}),o.lexerAny=o.lexer=void 0;const r=c(0);o.lexer=(0,r.compile)({int:/\-?\d+(?![\.\d])/,float:/\-?(?:(?:\d*\.\d+)|(?:\d+\.\d*))/,P:"P",Y:"Y",M:"M",W:"W",D:"D",H:"H",S:"S",T:"T"}),o.lexerAny=o.lexer},function(i,o,c){Object.defineProperty(o,"__esModule",{value:!0}),o.toSql=void 0;const r=c(2),s=c(5),n=c(6),m=c(20),f=c(3),y=new Set(f.sqlKeywords.map(u=>u.toLowerCase()));let t=[];function _(u){return b(u.name)}function b(u,l){if(!l){const $=u.toLowerCase();if($===u&&!y.has($)&&/^[a-z][a-z0-9_]*$/.test($))return u}return'"'+u+'"'}function p(u,l,$){$&&t.push("(");let g=!0;for(const O of u)g||t.push(", "),g=!1,l(O);$&&t.push(")")}function d(u,l){switch(u.type){case"foreign key":t.push(" foreign key (",...u.localColumns.map(_).join(", "),")");case"reference":t.push(" REFERENCES "),l.tableRef(u.foreignTable),t.push("(",...u.foreignColumns.map(_).join(", "),") "),u.match&&t.push(" MATCH ",u.match.toUpperCase()),u.onDelete&&t.push(" ON DELETE ",u.onDelete),u.onUpdate&&t.push(" ON UPDATE ",u.onUpdate);break;case"primary key":case"unique":t.push(" ",u.type," "),"columns"in u&&t.push("(",...u.columns.map(_).join(", "),") ");break;case"check":t.push(" check "),l.expr(u.expr);break;case"not null":case"null":t.push(" ",u.type," ");break;case"default":t.push(" default "),l.expr(u.default);break;case"add generated":t.push(" GENERATED "),N(l,u);break;default:throw n.NotSupported.never(u)}t.push(" ")}function h(u,l){u.schema&&t.push(b(u.schema),"."),t.push(b(u.name,l)," ")}function w(u){h(u),u.alias&&t.push(" AS ",b(u.alias)," ")}function v(u,l){t.push(" ORDER BY "),p(l,$=>{u.expr($.by),$.order&&t.push(" ",$.order," "),$.nulls&&t.push(" NULLS ",$.nulls," ")},!1)}function A(u){switch(u.type){case"default":t.push("DEFAULT ");break;case"identifier":t.push(u.name);break;case"list":let l=!0;for(const $ of u.values)l||t.push(", "),l=!1,A($);break;case"value":t.push(typeof u.value=="number"?u.value.toString():(0,m.literal)(u.value));break;default:throw n.NotSupported.never(u)}}function N(u,l){l.always&&t.push(l.always.toUpperCase()," "),t.push("AS IDENTITY "),l.sequence&&(t.push("("),l.sequence.name&&(t.push("SEQUENCE NAME "),h(l.sequence.name),t.push(" ")),x(u,l.sequence),t.push(") "))}function x(u,l){l.as&&(t.push("AS "),u.dataType(l.as),t.push(" ")),typeof l.incrementBy=="number"&&t.push("INCREMENT BY ",l.incrementBy.toString()," "),l.minValue==="no minvalue"&&t.push("NO MINVALUE "),typeof l.minValue=="number"&&t.push("MINVALUE ",l.minValue.toString()," "),l.maxValue==="no maxvalue"&&t.push("NO MAXVALUE "),typeof l.maxValue=="number"&&t.push("MAXVALUE ",l.maxValue.toString()," "),typeof l.startWith=="number"&&t.push("START WITH ",l.startWith.toString()," "),typeof l.cache=="number"&&t.push("CACHE ",l.cache.toString()," "),l.cycle&&t.push(l.cycle," "),l.ownedBy==="none"?t.push("OWNED BY NONE "):l.ownedBy&&(t.push("OWNED BY "),k(l.ownedBy)),"restart"in l&&(l.restart===!0?t.push("RESTART "):l.restart&&t.push("RESTART WITH ",l.restart.toString()," "))}function k(u){u.schema&&t.push(b(u.schema),"."),t.push(b(u.table),".",b(u.column)," ")}function E(u,l,$){if(!l){$();return}t.push(l.type," "),$(),l.on&&(t.push("ON "),u.expr(l.on)),l.using&&(t.push("USING ("),p(l.using,g=>t.push(_(g)),!1),t.push(") ")),t.push(" ")}function C(u){u.opSchema?t.push(" operator(",b(u.opSchema),".",u.op,") "):t.push(" ",u.op," ")}const q=(0,s.astVisitor)(u=>({addColumn:(...l)=>{t.push(" ADD COLUMN "),l[0].ifNotExists&&t.push("IF NOT EXISTS "),u.super().addColumn(...l)},createExtension:l=>{t.push("CREATE EXTENSION "),l.ifNotExists&&t.push(" IF NOT EXISTS "),t.push(_(l.extension)),!(!l.from&&!l.version&&!l.schema)&&(t.push(" WITH"),l.schema&&t.push(" SCHEMA ",_(l.schema)),l.version&&t.push(" VERSION ",(0,m.literal)(l.version.value)),l.from&&t.push(" FROM ",(0,m.literal)(l.from.value)))},tablespace:l=>{t.push("TABLESPACE ",_(l.tablespace))},addConstraint:l=>{t.push(" ADD ");const $=l.constraint.constraintName;$&&t.push(" CONSTRAINT ",_($)," "),d(l.constraint,u)},alterColumn:(l,$)=>{t.push(" ALTER COLUMN ",_(l.column)," "),u.super().alterColumn(l,$)},setColumnDefault:(l,$,g)=>{if(t.push(" SET DEFAULT "),u.expr(l.default),l.updateExisting)throw new Error("Not implemented: updateExisting on set column default")},createEnum:l=>{t.push("CREATE TYPE "),h(l.name),t.push(" AS ENUM "),p(l.values,$=>t.push((0,m.literal)($.value)),!0),t.push(" ")},createCompositeType:l=>{t.push("CREATE TYPE "),h(l.name),t.push(" AS "),p(l.attributes,$=>{t.push(_($.name)," "),u.dataType($.dataType),$.collate&&(t.push("COLLATE "),h($.collate))},!0),t.push(" ")},setTableOwner:l=>{t.push(" OWNER TO ",_(l.to))},alterColumnSimple:l=>t.push(l.type),alterColumnAddGenerated:l=>{t.push(" ADD GENERATED "),N(u,l)},setColumnType:l=>{t.push(" SET DATA TYPE "),u.dataType(l.dataType),t.push(" ")},alterTable:l=>{t.push("ALTER TABLE "),l.ifExists&&t.push(" IF EXISTS "),l.only&&t.push(" ONLY "),w(l.table),p(l.changes,$=>u.tableAlteration($,l.table),!1)},alterIndex:l=>{switch(t.push("ALTER INDEX "),l.ifExists&&t.push(" IF EXISTS "),w(l.index),l.change.type){case"rename":t.push(" RENAME TO "),h(l.change.to),t.push(" ");break;case"set tablespace":t.push(" SET TABLESPACE "),h(l.change.tablespace),t.push(" ");break;default:throw n.NotSupported.never(l.change,"Alter index type not supported: ")}},tableAlteration:(l,$)=>{switch(l.type){case"add column":return u.addColumn(l,$);case"add constraint":return u.addConstraint(l,$);case"alter column":return u.alterColumn(l,$);case"rename":return u.renameTable(l,$);case"rename column":return u.renameColumn(l,$);case"rename constraint":return u.renameConstraint(l,$);case"drop column":return u.dropColumn(l,$);case"drop constraint":return u.dropConstraint(l,$);case"owner":return u.setTableOwner(l,$);default:throw n.NotSupported.never(l)}},array:l=>{t.push(l.type==="array"?"ARRAY[":"("),p(l.expressions,$=>u.expr($),!1),t.push(l.type==="array"?"]":")")},arrayIndex:l=>{u.expr(l.array),t.push("["),u.expr(l.index),t.push("] ")},expr:l=>{if(l.type==="ref"){u.ref(l);return}if(l.type==="list"){u.super().expr(l);return}t.push("("),u.super().expr(l),t.push(")")},callOverlay:l=>{t.push("OVERLAY("),u.expr(l.value),t.push(" PLACING "),u.expr(l.placing),t.push(" FROM "),u.expr(l.from),l.for&&(t.push(" FOR "),u.expr(l.for)),t.push(")")},callSubstring:l=>{t.push("SUBSTRING("),u.expr(l.value),l.from&&(t.push(" FROM "),u.expr(l.from)),l.for&&(t.push(" FOR "),u.expr(l.for)),t.push(")")},binary:l=>{u.expr(l.left),C(l),u.expr(l.right)},call:l=>{h(l.function),t.push("("),l.distinct&&t.push(l.distinct," "),p(l.args,$=>u.expr($),!1),l.orderBy&&v(u,l.orderBy),t.push(") "),l.filter&&(t.push("filter (where "),u.expr(l.filter),t.push(") ")),l.over&&(t.push("over ("),l.over.partitionBy&&(t.push("PARTITION BY "),p(l.over.partitionBy,$=>u.expr($),!1),t.push(" ")),l.over.orderBy&&(v(u,l.over.orderBy),t.push(" ")),t.push(") "))},case:l=>{t.push("CASE "),l.value&&u.expr(l.value);for(const $ of l.whens)t.push(" WHEN "),u.expr($.when),t.push(" THEN "),u.expr($.value);l.else&&(t.push(" ELSE "),u.expr(l.else)),t.push(" END ")},cast:l=>{u.expr(l.operand),t.push("::"),u.dataType(l.to)},constant:l=>{switch(l.type){case"boolean":t.push(l.value?"true":"false");break;case"integer":t.push(l.value.toString(10));break;case"numeric":t.push(l.value.toString()),Number.isInteger(l.value)&&t.push(".");break;case"null":t.push("null");break;case"constant":break;case"string":t.push((0,m.literal)(l.value));break;default:throw n.NotSupported.never(l)}},valueKeyword:l=>{t.push(l.keyword," ")},comment:l=>{switch(t.push("COMMENT ON ",l.on.type.toUpperCase()," "),l.on.type){case"column":k(l.on.column);break;default:h(l.on.name);break}t.push(" IS ",(0,m.literal)(l.comment)," ")},extract:l=>{t.push("EXTRACT (",l.field.name.toUpperCase()," FROM "),u.expr(l.from),t.push(") ")},createColumn:l=>{var $;t.push(_(l.name)," "),u.dataType(l.dataType),t.push(" "),l.collate&&(t.push("COLLATE "),h(l.collate));for(const g of($=l.constraints)!==null&&$!==void 0?$:[])u.constraint(g)},begin:l=>{t.push("BEGIN "),l.isolationLevel&&t.push("ISOLATION LEVEL ",l.isolationLevel.toUpperCase()," "),l.writeable&&t.push(l.writeable.toUpperCase()," "),typeof l.deferrable=="boolean"&&(l.deferrable||t.push("NOT "),t.push("DEFERRABLE "))},alterSequence:l=>{switch(t.push("ALTER SEQUENCE "),l.ifExists&&t.push("IF EXISTS "),h(l.name),l.change.type){case"set options":x(u,l.change);break;case"rename":t.push("RENAME TO ",_(l.change.newName)," ");break;case"set schema":t.push("SET SCHEMA ",_(l.change.newSchema)," ");break;case"owner to":l.change.owner,t.push("OWNER TO ",_(l.change.owner)," ");break;default:throw n.NotSupported.never(l.change)}},createSequence:l=>{t.push("CREATE "),l.temp&&t.push("TEMPORARY "),t.push("SEQUENCE "),l.ifNotExists&&t.push("IF NOT EXISTS "),h(l.name),x(u,l.options)},drop:l=>{t.push(l.type.toUpperCase()," "),l.concurrently&&t.push("CONCURRENTLY "),l.ifExists&&t.push("IF EXISTS "),p(l.names,$=>u.tableRef($),!1),l.cascade&&t.push(l.cascade.toUpperCase()," ")},constraint:l=>{l.constraintName&&t.push(" CONSTRAINT ",_(l.constraintName)," "),d(l,u)},do:l=>{t.push("DO"),l.language&&t.push(" LANGUAGE ",l.language.name),t.push(" $$",l.code,"$$")},createFunction:l=>{var $;if(t.push(l.orReplace?"CREATE OR REPLACE FUNCTION ":"CREATE FUNCTION "),h(l.name),p(l.arguments,g=>{g.mode&&t.push(g.mode," "),g.name&&t.push(_(g.name)," "),u.dataType(g.type),g.default&&(t.push(" = "),u.expr(g.default))},!0),l.returns)switch(l.returns.kind){case"table":t.push(" RETURNS TABLE "),p(l.returns.columns,g=>{t.push(_(g.name)," "),u.dataType(g.type)},!0);break;case void 0:case null:case"array":t.push(" RETURNS "),u.dataType(l.returns);break;default:throw n.NotSupported.never(l.returns)}switch(t.push(" AS $$",($=l.code)!==null&&$!==void 0?$:"","$$"),l.language&&t.push("LANGUAGE ",l.language.name," "),l.purity&&t.push(l.purity.toUpperCase()," "),typeof l.leakproof=="boolean"&&t.push(l.leakproof?"LEAKPROOF ":"NOT LEAKPROOF "),l.onNullInput){case"call":t.push("CALLED ON NULL INPUT ");break;case"null":t.push("RETURNS NULL ON NULL INPUT ");break;case"strict":t.push("STRICT ");break;case null:case void 0:break;default:throw n.NotSupported.never(l.onNullInput)}},dropFunction:l=>{t.push("DROP FUNCTION "),l.ifExists&&t.push("IF EXISTS "),h(l.name),l.arguments&&p(l.arguments,$=>{$.name&&(h($.name),t.push(" ")),u.dataType($.type)},!0),t.push(" ")},with:l=>{t.push("WITH "),p(l.bind,$=>{t.push(_($.alias)," AS ("),u.statement($.statement),t.push(") ")},!1),u.statement(l.in)},withRecursive:l=>{t.push("WITH RECURSIVE ",_(l.alias),"(",...l.columnNames.map(_).join(", "),") AS ("),u.union(l.bind),t.push(") "),u.statement(l.in)},setGlobal:l=>{t.push("SET ",_(l.variable)," = "),A(l.set)},setTimezone:l=>{switch(t.push("SET TIME ZONE "),l.to.type){case"default":case"local":t.push(l.to.type.toUpperCase()," ");break;case"value":t.push(typeof l.to.value=="string"?(0,m.literal)(l.to.value):l.to.value.toString(10));break;case"interval":t.push("INTERVAL ",(0,m.literal)(l.to.value)," HOUR TO MINUTE");break;default:throw n.NotSupported.never(l.to)}},dataType:l=>{var $,g;if((l==null?void 0:l.kind)==="array"){u.dataType(l.arrayOf),t.push("[]");return}if(!(l!=null&&l.name)){t.push("unkown");return}let O=!0;if(l.schema)h(l,l.doubleQuoted);else if(l.doubleQuoted)h(l,!0);else switch(l.name){case"double precision":case"character varying":case"bit varying":t.push(l.name," ");break;case"time without time zone":case"timestamp without time zone":case"time with time zone":case"timestamp with time zone":const R=l.name.split(" ");t.push(R.shift()),!(($=l.config)===null||$===void 0)&&$.length&&p(l.config,L=>t.push(L.toString(10)),!0),t.push(" "),t.push(R.join(" ")," "),O=!1;break;default:h(l);break}O&&(!((g=l.config)===null||g===void 0)&&g.length)&&p(l.config,R=>t.push(R.toString(10)),!0)},createIndex:l=>{t.push(l.unique?"CREATE UNIQUE INDEX ":"CREATE INDEX "),l.ifNotExists&&t.push(" IF NOT EXISTS "),l.indexName&&t.push(_(l.indexName)," "),t.push("ON "),u.tableRef(l.table),l.using&&t.push("USING ",_(l.using)," "),p(l.expressions,$=>{u.expr($.expression),t.push(" "),$.collate&&(t.push("COLLATE "),h($.collate)),$.opclass&&h($.opclass),$.order&&t.push($.order," "),$.nulls&&t.push("nulls ",$.nulls," ")},!0),l.with&&(t.push("WITH "),p(l.with,$=>{t.push($.parameter," = ",(0,m.literal)($.value))},!0)),l.tablespace&&t.push("TABLESPACE ",b(l.tablespace)),l.where&&(t.push(" WHERE "),u.expr(l.where)),t.push(" ")},createTable:l=>{var $;t.push("CREATE "),l.locality&&t.push(l.locality.toUpperCase()," "),l.temporary&&t.push("TEMPORARY "),l.unlogged&&t.push("UNLOGGED "),t.push(l.ifNotExists?"TABLE IF NOT EXISTS ":"TABLE "),u.tableRef(l.name),t.push("("),p(l.columns,g=>{switch(g.kind){case"column":return u.createColumn(g);case"like table":return u.likeTable(g);default:throw n.NotSupported.never(g)}},!1),l.constraints&&(t.push(", "),p(l.constraints,g=>{const O=g.constraintName;O&&t.push("CONSTRAINT ",_(O)," "),d(g,u)},!1)),t.push(") "),!(($=l.inherits)===null||$===void 0)&&$.length&&(t.push(" INHERITS "),p(l.inherits,g=>h(g),!0))},likeTable:l=>{t.push(" LIKE "),u.tableRef(l.like),t.push(" ");for(const{verb:$,option:g}of l.options)t.push($.toUpperCase()," ",g.toUpperCase()," ")},createSchema:l=>{t.push(l.ifNotExists?"CREATE SCHEMA IF NOT EXISTS ":"CREATE SCHEMA "),t.push(_(l.name))},truncateTable:l=>{t.push("TRUNCATE TABLE ");let $=!0;for(const g of l.tables)$||t.push(", "),$=!1,u.tableRef(g);if(l.identity)switch(l.identity){case"restart":t.push(" RESTART IDENTITY ");break;case"continue":t.push(" CONTINUE IDENTITY ");break}l.cascade&&t.push(" ",l.cascade," ")},delete:l=>{t.push("DELETE FROM "),u.tableRef(l.from),l.where&&(t.push(" WHERE "),u.expr(l.where)),l.returning&&(t.push(" RETURNING "),p(l.returning,$=>u.selectionColumn($),!1)),t.push(" ")},dropColumn:l=>{t.push(" DROP COLUMN "),l.ifExists&&t.push(" IF EXISTS "),t.push(_(l.column)),l.behaviour&&t.push(" ",l.behaviour),t.push(" ")},dropConstraint:l=>{t.push(" DROP CONSTRAINT "),l.ifExists&&t.push(" IF EXISTS "),t.push(_(l.constraint)),l.behaviour&&t.push(" ",l.behaviour.toUpperCase()," ")},from:l=>u.super().from(l),fromCall:l=>{E(u,l.join,()=>{var $,g;if(u.call(l),l.withOrdinality&&t.push(" WITH ORDINALITY"),l.alias){t.push(" AS ",_(l.alias)," ");const O=(g=($=l.alias.columns)===null||$===void 0?void 0:$.length)!==null&&g!==void 0?g:0;if(O>0){t.push("(");for(let R=0;R<O;++R)R!==0&&t.push(", "),t.push(_(l.alias.columns[R]));t.push(")")}}}),t.push(" ")},fromStatement:l=>{E(u,l.join,()=>{t.push("("),u.select(l.statement),t.push(") "),l.alias&&(t.push(" AS ",b(l.alias)),l.columnNames&&p(l.columnNames,$=>t.push(_($)),!0),t.push(" "))}),t.push(" ")},values:l=>{t.push("VALUES "),p(l.values,$=>{p($,g=>{u.expr(g)},!0)},!1)},fromTable:l=>{E(u,l.join,()=>{if(u.tableRef(l.name),l.name.columnNames){if(!l.name.alias)throw new Error("Cannot specify aliased column names without an alias");p(l.name.columnNames,$=>t.push(_($)),!0)}})},join:l=>{throw new Error("Should not happen ")},insert:l=>{if(t.push("INSERT INTO "),u.tableRef(l.into),l.columns&&t.push("(",l.columns.map(_).join(", "),")"),t.push(" "),l.overriding&&t.push("OVERRIDING ",l.overriding.toUpperCase()," VALUE "),u.select(l.insert),t.push(" "),l.onConflict){t.push("ON CONFLICT ");const $=l.onConflict.on;switch($==null?void 0:$.type){case"on expr":p($.exprs,g=>u.expr(g),!0);break;case"on constraint":t.push("ON CONSTRAINT "),h($.constraint);case null:case void 0:break;default:throw n.NotSupported.never($)}l.onConflict.do==="do nothing"?t.push(" DO NOTHING"):(t.push(" DO UPDATE SET "),p(l.onConflict.do.sets,g=>u.set(g),!1),l.onConflict.where&&(t.push(" WHERE "),u.expr(l.onConflict.where))),t.push(" ")}l.returning&&(t.push(" RETURNING "),p(l.returning,$=>u.selectionColumn($),!1))},raise:l=>{var $,g;t.push("RAISE "),l.level&&t.push(l.level.toUpperCase()," "),t.push((0,m.literal)(l.format)," "),!(($=l.formatExprs)===null||$===void 0)&&$.length&&(t.push(", "),p(l.formatExprs,O=>u.expr(O),!1)),!((g=l.using)===null||g===void 0)&&g.length&&(t.push(" USING "),p(l.using,({type:O,value:R})=>{t.push(O.toUpperCase(),"="),u.expr(R)},!1)),t.push(" ")},default:()=>{t.push(" DEFAULT ")},member:l=>{u.expr(l.operand),t.push(l.op),t.push(typeof l.member=="number"?l.member.toString(10):(0,m.literal)(l.member))},ref:l=>{l.table&&(h(l.table),t.push(".")),t.push(l.name==="*"?"*":b(l.name))},parameter:l=>{t.push(l.name)},renameColumn:l=>{t.push(" RENAME COLUMN ",_(l.column)," TO ",_(l.to))},renameConstraint:l=>{t.push(" RENAME CONSTRAINT ",_(l.constraint)," TO ",_(l.to))},renameTable:l=>{t.push(" RENAME TO ",_(l.to))},createView:l=>{t.push("CREATE "),l.orReplace&&t.push("OR REPLACE "),l.temp&&t.push("TEMP "),l.recursive&&t.push("RECURSIVE "),t.push("VIEW "),u.tableRef(l.name),l.columnNames&&p(l.columnNames,g=>t.push(_(g)),!0);const $=l.parameters&&Object.entries(l.parameters);$!=null&&$.length&&(t.push(" WITH "),p($,([g,O])=>t.push(g,"=",O),!1)),t.push(" AS "),u.select(l.query),l.checkOption&&t.push(" WITH ",l.checkOption.toUpperCase()," CHECK OPTION")},createMaterializedView:l=>{t.push("CREATE MATERIALIZED VIEW "),l.ifNotExists&&t.push("IF NOT EXISTS "),u.tableRef(l.name),l.columnNames&&p(l.columnNames,g=>t.push(_(g)),!0);const $=l.parameters&&Object.entries(l.parameters);$!=null&&$.length&&(t.push(" WITH "),p($,([g,O])=>t.push(g,"=",O),!1)),l.tablespace&&t.push(" TABLESPACE ",_(l.tablespace)),t.push(" AS "),u.select(l.query),typeof l.withData=="boolean"&&t.push(l.withData?" WITH DATA":" WITH NO DATA")},refreshMaterializedView:l=>{t.push("REFRESH MATERIALIZED VIEW "),l.concurrently&&t.push("CONCURRENTLY "),u.tableRef(l.name),typeof l.withData=="boolean"&&t.push(l.withData?" WITH DATA":" WITH NO DATA")},select:l=>u.super().select(l),selection:l=>{if(t.push("SELECT "),l.distinct&&(typeof l.distinct=="string"?t.push(l.distinct.toUpperCase()):(t.push(" DISTINCT ON "),p(l.distinct,$=>u.expr($),!0)),t.push(" ")),l.columns&&p(l.columns,$=>u.selectionColumn($),!1),t.push(" "),l.from){t.push("FROM ");const $=l.from.length;for(let g=0;g<$;g++){const O=l.from[g];g>0&&!O.join&&t.push(","),u.from(O)}t.push(" ")}l.where&&(t.push("WHERE "),u.expr(l.where),t.push(" ")),l.groupBy&&(t.push("GROUP BY "),p(l.groupBy,$=>u.expr($),!1),t.push(" "),l.having&&(t.push(" HAVING "),u.expr(l.having),t.push(" "))),l.orderBy&&(v(u,l.orderBy),t.push(" ")),l.limit&&(l.limit.offset&&(t.push("OFFSET "),u.expr(l.limit.offset)),l.limit.limit&&(t.push("LIMIT "),u.expr(l.limit.limit))),l.for&&(t.push("FOR ",l.for.type.toUpperCase()),l.skip&&t.push(" ",l.skip.type.toUpperCase()))},show:l=>{t.push("SHOW ",_(l.variable))},prepare:l=>{var $;t.push("PREPARE ",_(l.name)),!(($=l.args)===null||$===void 0)&&$.length&&p(l.args,g=>u.dataType(g),!0),t.push(" AS "),u.statement(l.statement)},deallocate:l=>{if(t.push("DEALLOCATE "),"name"in l.target){t.push(l.target.name);return}t.push("ALL")},arraySelect:l=>{t.push("array("),u.select(l.select),t.push(")")},union:l=>{t.push("("),u.statement(l.left),t.push(") ",l.type.toUpperCase()," "),l.right.type==="union"||l.right.type==="union all"?u.union(l.right):(t.push("("),u.statement(l.right),t.push(")"))},selectionColumn:l=>{u.expr(l.expr),l.alias&&t.push(" AS ",_(l.alias)),t.push(" ")},set:l=>{t.push(_(l.column)," = "),u.expr(l.value),t.push(" ")},statement:l=>u.super().statement(l),tableRef:l=>{h(l),l.alias&&t.push(" AS ",b(l.alias)),t.push(" ")},ternary:l=>{u.expr(l.value),t.push(" ",l.op," "),u.expr(l.lo),t.push(" AND "),u.expr(l.hi),t.push(" ")},transaction:l=>{t.push(l.type)},unary:l=>{switch(l.op){case"+":case"-":C(l),u.expr(l.operand);break;case"NOT":t.push(l.op),t.push(" "),u.expr(l.operand);break;default:u.expr(l.operand),t.push(" "),t.push(l.op)}},update:l=>{t.push("UPDATE "),u.tableRef(l.table),t.push(" SET "),p(l.sets,$=>u.set($),!1),t.push(" "),l.from&&(t.push("FROM "),u.from(l.from),t.push(" ")),l.where&&(t.push("WHERE "),u.expr(l.where),t.push(" ")),l.returning&&(t.push(" RETURNING "),p(l.returning,$=>u.selectionColumn($),!1),t.push(" "))}}));o.toSql={};const e=r.AstDefaultMapper.prototype;for(const u of Object.getOwnPropertyNames(e)){const l=e[u];u==="constructor"||u==="super"||typeof l!="function"||(o.toSql[u]=function(...$){try{return q[u].apply(q,$),t.join("").trim()}finally{t=[]}})}},function(i,o,c){Object.defineProperty(o,"__esModule",{value:!0}),o.literal=void 0;function r(s){if(s==null)return"NULL";if(Array.isArray(s)){var n=s.map(r);return"("+n.join(", ")+")"}var m=~s.indexOf("\\"),f=m?"E":"";return s=s.replace(/'/g,"''"),s=s.replace(/\\/g,"\\\\"),f+"'"+s+"'"}o.literal=r},function(i,o,c){Object.defineProperty(o,"__esModule",{value:!0}),o.locationOf=void 0;function r(s){const n=s._location;if(!n)throw new Error("This statement has not been parsed using location tracking (which has a small performance hit). ");return n}o.locationOf=r}]))})(Ie);function rs(a){return Ie.parse(a,"expr")}const _r=new Set(["any_value","arg_max","max_by","arg_min","argMin","min_by","avg","mean","bit_and","bit_or","bit_xor","bitstring_agg","bool_and","bool_or","count","favg","first","arbitrary","fsum","kahan_sum","geomean","geometric_mean","histogram","last","list","array_agg","max","min","product","string_agg","group_concat","listagg","sum","approx_count_distinct","approx_quantile","reservoir_quantile","corr","covar_pop","covar_samp","entropy","kurtosis","mad","median","mode","quantile_cont","quantile_disc","quantile","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","skewness","stddev_pop","stddev_samp","stddev","var_pop","var_samp","variance"]);function $r(a,i){const o=new Map;i.forEach(r=>{o.set(r.name??r.fid,r)});const c=r=>{switch(r.type){case"integer":case"numeric":return["quantitative",!1];case"null":case"string":case"boolean":return["nominal",!1];case"unary":const[s,n]=c(r.operand);switch(r.op){case"+":case"-":return["quantitative",n];default:return["nominal",n]}case"ref":{const m=o.get(r.name);return m?[m.semanticType,!1]:["nominal",!1]}case"case":return r.else?c(r.else):c(r.whens[0].value);case"array":case"list":return r.expressions.length?c(r.expressions[0]):["nominal",!1];case"binary":return c(r.left);case"call":{if(r.function.name==="count")return["quantitative",!0];const[m]=c(r.args[0]);return[m,_r.has(r.function.name.toLowerCase())]}case"cast":{const[m,f]=c(r.operand);if("name"in r.to)switch(r.to.name.toLowerCase()){case"date":case"timestamp":case"timestamp with time zone":case"time":case"time with time zone":case"interval":return["temporal",f];case"smallint":case"integer":case"bigint":case"decimal":case"numeric":case"real":case"double precision":case"smallserial":case"serial":case"bigserial":return["quantitative",f]}return["nominal",f]}default:return["nominal",!1]}};return c(a)}function br(a){const i=new Set,o=c=>{c.type==="ref"?i.add(c.name):Object.values(c).forEach(r=>{r!==null&&typeof r=="object"&&"type"in r&&o(r)})};return o(rs(a)),Array.from(i)}function Xs(a,i){const o=new Map;i.forEach(s=>{o.set((s.name??s.fid).toLowerCase(),s)});const c=rs(a),r=Ie.astMapper(()=>({ref:s=>{var n;return Ie.assignChanged(s,{name:((n=o.get(s.name.toLowerCase()))==null?void 0:n.fid)||s.name})}}));return Ie.toSql.expr(r.expr(c))}function V(a){for(var i=arguments.length,o=Array(i>1?i-1:0),c=1;c<i;c++)o[c-1]=arguments[c];{var r=kr[a],s=r?typeof r=="function"?r.apply(null,o):r:"unknown error nr: "+a;throw Error("[Immer] "+s)}}function Te(a){return!!a&&!!a[ee]}function ve(a){var i;return!!a&&(function(o){if(!o||typeof o!="object")return!1;var c=Object.getPrototypeOf(o);if(c===null)return!0;var r=Object.hasOwnProperty.call(c,"constructor")&&c.constructor;return r===Object||typeof r=="function"&&Function.toString.call(r)===vr}(a)||Array.isArray(a)||!!a[it]||!!(!((i=a.constructor)===null||i===void 0)&&i[it])||as(a)||os(a))}function Pe(a,i,o){o===void 0&&(o=!1),Ne(a)===0?(o?Object.keys:ds)(a).forEach(function(c){o&&typeof c=="symbol"||i(c,a[c],a)}):a.forEach(function(c,r){return i(r,c,a)})}function Ne(a){var i=a[ee];return i?i.i>3?i.i-4:i.i:Array.isArray(a)?1:as(a)?2:os(a)?3:0}function ns(a,i){return Ne(a)===2?a.has(i):Object.prototype.hasOwnProperty.call(a,i)}function fr(a,i){return Ne(a)===2?a.get(i):a[i]}function Zs(a,i,o){var c=Ne(a);c===2?a.set(i,o):c===3?a.add(o):a[i]=o}function yr(a,i){return a===i?a!==0||1/a==1/i:a!=a&&i!=i}function as(a){return xr&&a instanceof Map}function os(a){return gr&&a instanceof Set}function Ae(a){return a.o||a.t}function ls(a){if(Array.isArray(a))return Array.prototype.slice.call(a);var i=Ar(a);delete i[ee];for(var o=ds(i),c=0;c<o.length;c++){var r=o[c],s=i[r];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(i[r]={configurable:!0,writable:!0,enumerable:s.enumerable,value:a[r]})}return Object.create(Object.getPrototypeOf(a),i)}function is(a,i){return i===void 0&&(i=!1),cs(a)||Te(a)||!ve(a)||(Ne(a)>1&&(a.set=a.add=a.clear=a.delete=dr),Object.freeze(a),i&&Pe(a,function(o,c){return is(c,!0)},!0)),a}function dr(){V(2)}function cs(a){return a==null||typeof a!="object"||Object.isFrozen(a)}function ce(a){var i=Sr[a];return i||V(18,a),i}function et(){return Ce||V(0),Ce}function ps(a,i){i&&(ce("Patches"),a.u=[],a.s=[],a.v=i)}function We(a){ms(a),a.p.forEach(hr),a.p=null}function ms(a){a===Ce&&(Ce=a.l)}function st(a){return Ce={p:[],l:Ce,h:a,m:!0,_:0}}function hr(a){var i=a[ee];i.i===0||i.i===1?i.j():i.g=!0}function us(a,i){i._=i.p.length;var o=i.p[0],c=a!==void 0&&a!==o;return i.h.O||ce("ES5").S(i,a,c),c?(o[ee].P&&(We(i),V(4)),ve(a)&&(a=Ye(i,a),i.l||Je(i,a)),i.u&&ce("Patches").M(o[ee].t,a,i.u,i.s)):a=Ye(i,o,[]),We(i),i.u&&i.v(i.u,i.s),a!==lt?a:void 0}function Ye(a,i,o){if(cs(i))return i;var c=i[ee];if(!c)return Pe(i,function(m,f){return tt(a,c,i,m,f,o)},!0),i;if(c.A!==a)return i;if(!c.P)return Je(a,c.t,!0),c.t;if(!c.I){c.I=!0,c.A._--;var r=c.i===4||c.i===5?c.o=ls(c.k):c.o,s=r,n=!1;c.i===3&&(s=new Set(r),r.clear(),n=!0),Pe(s,function(m,f){return tt(a,c,r,m,f,o,n)}),Je(a,r,!1),o&&a.u&&ce("Patches").N(c,o,a.u,a.s)}return c.o}function tt(a,i,o,c,r,s,n){if(r===o&&V(5),Te(r)){var m=Ye(a,r,s&&i&&i.i!==3&&!ns(i.R,c)?s.concat(c):void 0);if(Zs(o,c,m),!Te(m))return;a.m=!1}else n&&o.add(r);if(ve(r)&&!cs(r)){if(!a.h.D&&a._<1)return;Ye(a,r),i&&i.A.l||Je(a,r)}}function Je(a,i,o){o===void 0&&(o=!1),!a.l&&a.h.D&&a.m&&is(i,o)}function _s(a,i){var o=a[ee];return(o?Ae(o):a)[i]}function rt(a,i){if(i in a)for(var o=Object.getPrototypeOf(a);o;){var c=Object.getOwnPropertyDescriptor(o,i);if(c)return c;o=Object.getPrototypeOf(o)}}function $s(a){a.P||(a.P=!0,a.l&&$s(a.l))}function bs(a){a.o||(a.o=ls(a.t))}function fs(a,i,o){var c=as(i)?ce("MapSet").F(i,o):os(i)?ce("MapSet").T(i,o):a.O?function(r,s){var n=Array.isArray(r),m={i:n?1:0,A:s?s.A:et(),P:!1,I:!1,R:{},l:s,t:r,k:null,o:null,j:null,C:!1},f=m,y=hs;n&&(f=[m],y=je);var t=Proxy.revocable(f,y),_=t.revoke,b=t.proxy;return m.k=b,m.j=_,b}(i,o):ce("ES5").J(i,o);return(o?o.A:et()).p.push(c),c}function wr(a){return Te(a)||V(22,a),function i(o){if(!ve(o))return o;var c,r=o[ee],s=Ne(o);if(r){if(!r.P&&(r.i<4||!ce("ES5").K(r)))return r.t;r.I=!0,c=nt(o,s),r.I=!1}else c=nt(o,s);return Pe(c,function(n,m){r&&fr(r.t,n)===m||Zs(c,n,i(m))}),s===3?new Set(c):c}(a)}function nt(a,i){switch(i){case 2:return new Map(a);case 3:return Array.from(a)}return ls(a)}var at,Ce,ys=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",xr=typeof Map<"u",gr=typeof Set<"u",ot=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",lt=ys?Symbol.for("immer-nothing"):((at={})["immer-nothing"]=!0,at),it=ys?Symbol.for("immer-draftable"):"__$immer_draftable",ee=ys?Symbol.for("immer-state"):"__$immer_state",kr={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(a){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+a},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(a){return"Cannot apply patch, path doesn't resolve: "+a},16:'Sets cannot have "replace" patches.',17:function(a){return"Unsupported patch operation: "+a},18:function(a){return"The plugin for '"+a+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+a+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(a){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+a+"'"},22:function(a){return"'current' expects a draft, got: "+a},23:function(a){return"'original' expects a draft, got: "+a},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},vr=""+Object.prototype.constructor,ds=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(a){return Object.getOwnPropertyNames(a).concat(Object.getOwnPropertySymbols(a))}:Object.getOwnPropertyNames,Ar=Object.getOwnPropertyDescriptors||function(a){var i={};return ds(a).forEach(function(o){i[o]=Object.getOwnPropertyDescriptor(a,o)}),i},Sr={},hs={get:function(a,i){if(i===ee)return a;var o=Ae(a);if(!ns(o,i))return function(r,s,n){var m,f=rt(s,n);return f?"value"in f?f.value:(m=f.get)===null||m===void 0?void 0:m.call(r.k):void 0}(a,o,i);var c=o[i];return a.I||!ve(c)?c:c===_s(a.t,i)?(bs(a),a.o[i]=fs(a.A.h,c,a)):c},has:function(a,i){return i in Ae(a)},ownKeys:function(a){return Reflect.ownKeys(Ae(a))},set:function(a,i,o){var c=rt(Ae(a),i);if(c!=null&&c.set)return c.set.call(a.k,o),!0;if(!a.P){var r=_s(Ae(a),i),s=r==null?void 0:r[ee];if(s&&s.t===o)return a.o[i]=o,a.R[i]=!1,!0;if(yr(o,r)&&(o!==void 0||ns(a.t,i)))return!0;bs(a),$s(a)}return a.o[i]===o&&(o!==void 0||i in a.o)||Number.isNaN(o)&&Number.isNaN(a.o[i])||(a.o[i]=o,a.R[i]=!0),!0},deleteProperty:function(a,i){return _s(a.t,i)!==void 0||i in a.t?(a.R[i]=!1,bs(a),$s(a)):delete a.R[i],a.o&&delete a.o[i],!0},getOwnPropertyDescriptor:function(a,i){var o=Ae(a),c=Reflect.getOwnPropertyDescriptor(o,i);return c&&{writable:!0,configurable:a.i!==1||i!=="length",enumerable:c.enumerable,value:o[i]}},defineProperty:function(){V(11)},getPrototypeOf:function(a){return Object.getPrototypeOf(a.t)},setPrototypeOf:function(){V(12)}},je={};Pe(hs,function(a,i){je[a]=function(){return arguments[0]=arguments[0][0],i.apply(this,arguments)}}),je.deleteProperty=function(a,i){return isNaN(parseInt(i))&&V(13),je.set.call(this,a,i,void 0)},je.set=function(a,i,o){return i!=="length"&&isNaN(parseInt(i))&&V(14),hs.set.call(this,a[0],i,o,a[0])};var Or=function(){function a(o){var c=this;this.O=ot,this.D=!0,this.produce=function(r,s,n){if(typeof r=="function"&&typeof s!="function"){var m=s;s=r;var f=c;return function(h){var w=this;h===void 0&&(h=m);for(var v=arguments.length,A=Array(v>1?v-1:0),N=1;N<v;N++)A[N-1]=arguments[N];return f.produce(h,function(x){var k;return(k=s).call.apply(k,[w,x].concat(A))})}}var y;if(typeof s!="function"&&V(6),n!==void 0&&typeof n!="function"&&V(7),ve(r)){var t=st(c),_=fs(c,r,void 0),b=!0;try{y=s(_),b=!1}finally{b?We(t):ms(t)}return typeof Promise<"u"&&y instanceof Promise?y.then(function(h){return ps(t,n),us(h,t)},function(h){throw We(t),h}):(ps(t,n),us(y,t))}if(!r||typeof r!="object"){if((y=s(r))===void 0&&(y=r),y===lt&&(y=void 0),c.D&&is(y,!0),n){var p=[],d=[];ce("Patches").M(r,y,p,d),n(p,d)}return y}V(21,r)},this.produceWithPatches=function(r,s){if(typeof r=="function")return function(y){for(var t=arguments.length,_=Array(t>1?t-1:0),b=1;b<t;b++)_[b-1]=arguments[b];return c.produceWithPatches(y,function(p){return r.apply(void 0,[p].concat(_))})};var n,m,f=c.produce(r,s,function(y,t){n=y,m=t});return typeof Promise<"u"&&f instanceof Promise?f.then(function(y){return[y,n,m]}):[f,n,m]},typeof(o==null?void 0:o.useProxies)=="boolean"&&this.setUseProxies(o.useProxies),typeof(o==null?void 0:o.autoFreeze)=="boolean"&&this.setAutoFreeze(o.autoFreeze)}var i=a.prototype;return i.createDraft=function(o){ve(o)||V(8),Te(o)&&(o=wr(o));var c=st(this),r=fs(this,o,void 0);return r[ee].C=!0,ms(c),r},i.finishDraft=function(o,c){var r=o&&o[ee];r&&r.C||V(9),r.I&&V(10);var s=r.A;return ps(s,c),us(void 0,s)},i.setAutoFreeze=function(o){this.D=o},i.setUseProxies=function(o){o&&!ot&&V(20),this.O=o},i.applyPatches=function(o,c){var r;for(r=c.length-1;r>=0;r--){var s=c[r];if(s.path.length===0&&s.op==="replace"){o=s.value;break}}r>-1&&(c=c.slice(r+1));var n=ce("Patches").$;return Te(o)?n(o,c):this.produce(o,function(m){return n(m,c)})},a}(),se=new Or,Er=se.produce;se.produceWithPatches.bind(se),se.setAutoFreeze.bind(se),se.setUseProxies.bind(se),se.applyPatches.bind(se),se.createDraft.bind(se),se.finishDraft.bind(se);const Tr=Er;var z;(function(a){a[a.setConfig=0]="setConfig",a[a.removeField=1]="removeField",a[a.reorderField=2]="reorderField",a[a.moveField=3]="moveField",a[a.cloneField=4]="cloneField",a[a.createBinlogField=5]="createBinlogField",a[a.appendFilter=6]="appendFilter",a[a.modFilter=7]="modFilter",a[a.writeFilter=8]="writeFilter",a[a.setName=9]="setName",a[a.applySort=10]="applySort",a[a.transpose=11]="transpose",a[a.setLayout=12]="setLayout",a[a.setFieldAggregator=13]="setFieldAggregator",a[a.setGeoData=14]="setGeoData",a[a.setCoordSystem=15]="setCoordSystem",a[a.createDateDrillField=16]="createDateDrillField",a[a.createDateFeatureField=17]="createDateFeatureField",a[a.changeSemanticType=18]="changeSemanticType",a[a.setFilterAggregator=19]="setFilterAggregator",a[a.addFoldField=20]="addFoldField",a[a.upsertPaintField=21]="upsertPaintField",a[a.addSQLComputedField=22]="addSQLComputedField",a[a.removeAllField=23]="removeAllField",a[a.editAllField=24]="editAllField",a[a.replaceWithNLPQuery=25]="replaceWithNLPQuery"})(z||(z={}));const Qe={[z.setConfig]:(a,i,o)=>U(a,"config",c=>({...c,[i]:o})),[z.removeField]:(a,i,o)=>U(a,`encodings.${i}`,c=>Ks(c,o)),[z.reorderField]:(a,i,o,c)=>U(a,`encodings.${i}`,r=>r.map((s,n,m)=>n===o?m[c]:n===c?m[o]:s)),[z.moveField]:(a,i,o,c,r,s)=>{const n=a.encodings[i][o],m=c==="dimensions"?U(n,"analyticType",()=>"dimension"):c==="measures"?U(n,"analyticType",()=>"measure"):n;return U(a,"encodings",f=>({...f,[i]:Ks(a.encodings[i],o),[c]:He(a.encodings[c],m,r).slice(0,s??1/0)}))},[z.cloneField]:(a,i,o,c,r,s,n)=>{const m={...a.encodings[i][o]};return U(a,"encodings",f=>({...f,[c]:He(a.encodings[c],m,r).slice(0,n??1/0)}))},[z.createBinlogField]:(a,i,o,c,r,s)=>{const n=a.encodings[i][o],m=c.startsWith("bin"),f=m?"dimensions":i,y=m?`${c}${s}`:`log${s}`,t={fid:r,name:`${y}(${n.name})`,semanticType:m?"ordinal":"quantitative",analyticType:m?"dimension":n.analyticType,computed:!0,expression:{op:c,as:r,params:[{type:"field",value:n.fid}],num:s}};return m||(t.aggName="sum"),U(a,`encodings.${f}`,_=>_.concat(t))},[z.appendFilter]:(a,i,o,c,r)=>{const s=a.encodings[o][c];return U(a,"encodings.filters",n=>He(n,{...s,rule:null},i))},[z.modFilter]:(a,i,o,c)=>U(a,"encodings.filters",r=>{const s=a.encodings[o][c];return he(r,i,n=>({...s,rule:null}))}),[z.writeFilter]:(a,i,o)=>U(a,"encodings.filters",c=>he(c,i,r=>({...r,rule:o}))),[z.setName]:(a,i)=>({...a,name:i}),[z.applySort]:(a,i)=>{const{rows:o,columns:c}=a.encodings,r=o.length>0?o[o.length-1]:null,s=c.length>0?c[c.length-1]:null;return s!==null&&s.analyticType==="dimension"&&r!==null&&r.analyticType==="measure"?U(a,"encodings.columns",n=>he(n,n.length-1,m=>({...m,sort:i}))):s!==null&&s.analyticType==="measure"&&r!==null&&r.analyticType==="dimension"?U(a,"encodings.rows",n=>he(n,n.length-1,m=>({...m,sort:i}))):a},[z.transpose]:a=>U(a,"encodings",i=>({...i,columns:i.rows,rows:i.columns})),[z.setLayout]:(a,i)=>U(a,"layout",o=>Object.assign({},o,Object.fromEntries(i))),[z.setFieldAggregator]:(a,i,o,c)=>U(a,`encodings.${i}`,r=>he(r,o,s=>({...s,aggName:c}))),[z.setGeoData]:(a,i,o,c)=>U(a,"layout",r=>({...r,geojson:i,geoKey:o,geoUrl:c})),[z.setCoordSystem]:(a,i)=>U(a,"config",o=>({...o,coordSystem:i,geoms:[ts.GEOM_TYPES[i][0]]})),[z.createDateDrillField]:(a,i,o,c,r,s,n,m)=>{const f=a.encodings[i][o],y={fid:r,name:s,semanticType:"temporal",analyticType:f.analyticType,aggName:"sum",computed:!0,timeUnit:c,expression:{op:"dateTimeDrill",as:r,params:[{type:"field",value:f.fid},{type:"value",value:c},...n?[{type:"format",value:n}]:[],...Bs(m)?[{type:"offset",value:m}]:[]]}};return U(a,`encodings.${i}`,t=>t.concat(y))},[z.createDateFeatureField]:(a,i,o,c,r,s,n,m)=>{const f=a.encodings[i][o],y={fid:r,name:s,semanticType:"ordinal",analyticType:f.analyticType,aggName:"sum",computed:!0,expression:{op:"dateTimeFeature",as:r,params:[{type:"field",value:f.fid},{type:"value",value:c},...n?[{type:"format",value:n}]:[],...Bs(m)?[{type:"offset",value:m}]:[]]}};return U(a,`encodings.${i}`,t=>t.concat(y))},[z.changeSemanticType]:(a,i,o,c)=>U(a,`encodings.${i}`,r=>he(r,o,s=>({...s,semanticType:c}))),[z.setFilterAggregator]:(a,i,o)=>U(a,"encodings.filters",c=>he(c,i,r=>({...r,aggName:o||"sum",enableAgg:!!o,rule:null}))),[z.addFoldField]:(a,i,o,c,r,s,n)=>{let m=a;const f=m.encodings[i][o];if(!m.config.folds){const y=[...m.encodings.measures,...m.encodings.details].filter(t=>t.analyticType==="measure"&&t.fid!==Ee);m=Qe[z.setConfig](m,"folds",y.filter((t,_)=>_===0).map(t=>t.fid))}if(f.fid===Ee){const y=Object.keys(m.encodings).filter(t=>t!=="filters").map(t=>[t,m.encodings[t].findIndex(_=>_.fid===Be)]).filter(([t,_])=>_>=0);if(y.length===1){const[t,_]=y[0];m=Qe[z.cloneField](m,t,_,"details",0,`${s}_auto`,1/0)}}return Qe[z.cloneField](m,i,o,c,r,s,n)},[z.upsertPaintField]:(a,i,o)=>{if(!i)return U(a,"encodings",s=>Object.fromEntries(Object.entries(s).map(([n,m])=>[n,m.filter(f=>f.fid!==ke)])));const c="facets"in i?{op:"paint",as:ke,params:[{type:"newmap",value:i}]}:{op:"paint",as:ke,params:[{type:"map",value:i}]},r=i.usedColor.includes(255);return U(a,"encodings",s=>{let n=!1,m=!1;const f=Object.entries(s).map(([b,p])=>{const d=p.findIndex(h=>h.fid===ke);return d>-1?(n=!0,b==="filters"&&(m=!0),[b,he(p,d,h=>({...h,expression:c}))]):[b,p]}),y={fid:ke,analyticType:"dimension",name:o,semanticType:"nominal",computed:!0,expression:c,rule:{type:"not in",value:[""]}};if(n)return!m&&r?U(Object.fromEntries(f),"filters",b=>b.concat(y)):Object.fromEntries(f);const t={fid:ke,analyticType:"dimension",name:o,semanticType:"nominal",computed:!0,expression:c},_=U(U(s,"dimensions",b=>He(b,t,b.length)),"color",()=>[{...t}]);return r?U(_,"filters",b=>b.concat(y)):_})},[z.addSQLComputedField]:(a,i,o,c)=>{const[r,s]=$r(rs(c),a.encodings.dimensions.concat(a.encodings.measures)),n=r==="quantitative"?"measure":"dimension";return U(a,`encodings.${n}s`,m=>m.concat({analyticType:n,fid:i,name:o,semanticType:r,computed:!0,aggName:s?"expr":n==="dimension"?void 0:"sum",expression:{op:"expr",as:i,params:[{type:"sql",value:c}]}}))},[z.removeAllField]:(a,i)=>U(a,"encodings",o=>Object.fromEntries(Object.entries(o).map(([c,r])=>{const s=r.filter(n=>n.fid!==i);return r.length===s.length?[c,r]:[c,s]}))),[z.editAllField]:(a,i,o)=>{if(Object.keys(o).includes("name")){const c=a.encodings.dimensions.concat(a.encodings.measures).find(r=>r.fid===i);return Tr(a,r=>{c&&Object.values(r.encodings).forEach(s=>s.forEach((n,m)=>{var f;if(n.fid===i)s[m]={...n,...o};else if(((f=n.expression)==null?void 0:f.op)==="expr"){const y=n.expression.params.find(t=>t.type==="sql");if(y){const t=Xs(y.value,[{...c,fid:o.name,name:c.name??c.fid}]);t!==y.value&&(y.value=t)}}}))})}return U(a,"encodings",c=>Object.fromEntries(Object.entries(c).map(([r,s])=>s.find(m=>m.fid===i)?[r,s.map(m=>m.fid===i?{...m,...o}:m)]:[r,s])))},[z.replaceWithNLPQuery]:(a,i,o)=>({...JSON.parse(o),visId:a.visId,name:a.name})},Nr=(a,i)=>{const o={};return Object.keys(i.encodings).forEach(c=>{i.encodings[c]!==a.encodings[c]&&(o[c]=i.encodings[c])}),o};function ct(a,i){const o=[],c=new Array(i.length).fill(null).map(()=>[]);return a.forEach(r=>{const s=i.findIndex(n=>n(r));s>=0?c[s].push(r):o.push(r)}),o.concat(c.flat())}function pt(a){const i={};return a.dimensions&&a.dimensions.length>0&&(i.dimensions=ct(a.dimensions,[o=>o.fid===ke,o=>o.fid===Be])),a.measures&&a.measures.length>0&&(i.measures=ct(a.measures,[o=>o.fid===Zt,o=>o.fid===Ee])),i}const Cr=[(a,i)=>{const o=Nr(i,a),c=a.config.geoms[0];return Object.keys(o).length===0&&Hs(a.config.geoms,i.config.geoms)?a:Hs(a.config.geoms,i.config.geoms)?U(a,"encodings",r=>({...r,...Ws(c,o),...pt(o)})):U(a,"encodings",r=>({...r,...Ws(c,r),...pt(r)}))}];function Rr(a,i){const[o,...c]=i,r=Qe[o](a,...c);return Cr.reduce((s,n)=>n(s,a),r)}const Lr=ir(Rr);Object.fromEntries(Object.keys(z).map(a=>[a,(i,...o)=>Lr(i,[z[a],...o])]));function Ir(a,i,o){return{config:o!=null&&o.config?{...Vs,...o.config}:Vs,encodings:nr,layout:o!=null&&o.layout?{...Gs,...o.layout}:Gs,visId:a,name:i}}function Pr(a){var o,c,r,s,n,m,f,y,t,_,b,p,d,h,w,v,A;const i=Ir(a.visId,a.name||"Chart");return i.config={...i.config,defaultAggregated:a.config.defaultAggregated,geoms:((o=a.config.geoms)==null?void 0:o.slice())??[],limit:a.config.limit,coordSystem:a.config.coordSystem,folds:a.config.folds},i.encodings={...i.encodings,dimensions:((c=a.encodings.dimensions)==null?void 0:c.slice())??[],measures:((r=a.encodings.measures)==null?void 0:r.slice())??[],rows:((s=a.encodings.rows)==null?void 0:s.slice())??[],columns:((n=a.encodings.columns)==null?void 0:n.slice())??[],color:((m=a.encodings.color)==null?void 0:m.slice())??[],opacity:((f=a.encodings.opacity)==null?void 0:f.slice())??[],size:((y=a.encodings.size)==null?void 0:y.slice())??[],shape:((t=a.encodings.shape)==null?void 0:t.slice())??[],theta:((_=a.encodings.theta)==null?void 0:_.slice())??[],radius:((b=a.encodings.radius)==null?void 0:b.slice())??[],longitude:((p=a.encodings.longitude)==null?void 0:p.slice())??[],latitude:((d=a.encodings.latitude)==null?void 0:d.slice())??[],geoId:((h=a.encodings.geoId)==null?void 0:h.slice())??[],details:((w=a.encodings.details)==null?void 0:w.slice())??[],filters:((v=a.encodings.filters)==null?void 0:v.slice())??[],text:((A=a.encodings.text)==null?void 0:A.slice())??[]},i.layout={...i.layout,background:a.config.background,format:a.config.format,interactiveScale:a.config.interactiveScale,resolve:a.config.resolve,showActions:a.config.showActions,stack:a.config.stack,zeroScale:a.config.zeroScale,size:{...i.layout.size,...a.config.size},colorPalette:a.config.colorPalette,geojson:a.config.geojson,geoKey:a.config.geoKey,geoUrl:a.config.geoUrl,primaryColor:a.config.primaryColor,scale:a.config.scale,scaleIncludeUnmatchedChoropleth:a.config.scaleIncludeUnmatchedChoropleth,showTableSummary:a.config.showTableSummary,useSvg:a.config.useSvg},i}function jr(a){return"layout"in a?a:Pr(ar(or(a)))}function qr(a,i){return a.aggName==="expr"?a:{...a,aggName:i}}const Fr=a=>{switch(a){case"choropleth":return["geoId","color","opacity","text","details"];case"poi":return["longitude","latitude","color","opacity","size","details"];case"arc":return["radius","theta","color","opacity","size","details","text"];case"bar":case"tick":case"line":case"area":case"boxplot":return["columns","rows","color","opacity","size","details","text"];case"text":return["columns","rows","color","opacity","size","text"];case"table":return["columns","rows"];default:return["columns","rows","color","opacity","size","details","shape"]}},mt=(a,i)=>{for(const o of a.params)o.type==="field"?i(o.value):o.type==="expression"?mt(o.value,i):o.type==="sql"?br(o.value).forEach(i):o.type==="map"?(i(o.value.x),i(o.value.y)):o.type==="newmap"&&o.value.facets.flatMap(c=>c.dimensions).forEach(c=>i(c.fid))},ut=(a,i)=>{const o=new Map;return a.forEach(c=>o.set(i(c),c)),[...o.values()]},_t=(a,i)=>{const o=new Set(i);let c=a.filter(n=>o.has(n.key)),r=c.slice(),s=a.filter(n=>!o.has(n.key));for(;r.length&&s.length;){const n=new Set;for(const y of r)mt(y.expression,t=>n.add(t));const m=s.filter(y=>n.has(y.key));c=a.filter(y=>n.has(y.key)).concat(c.filter(y=>!n.has(y.key))),r=m,s=s.filter(y=>!n.has(y.key))}return c},Dr=a=>{const i=er(a),o=a.rule;return o.type==="one of"?{fid:i,rule:{type:"one of",value:[...o.value]}}:o.type==="temporal range"?{fid:i,rule:{type:"temporal range",value:o.value,offset:o.offset,format:o.format}}:o.type==="not in"?{fid:i,rule:{type:"not in",value:[...o.value]}}:o.type==="range"?{fid:i,rule:{type:"range",value:[o.value[0]?Number(o.value[0]):o.value[0],o.value[1]?Number(o.value[1]):o.value[1]]}}:o.type==="regexp"?{fid:i,rule:{type:"regexp",value:o.value,caseSensitive:o.caseSensitive}}:(console.error("unknown rule",o),{fid:i,rule:o})},Ur=(a,i,o,c,r,s,n=[],m,f)=>{const y=o.find($=>$.fid===Be)&&c.find($=>$.fid===Ee),t=o.filter($=>$.fid!==Be),_=c.filter($=>$.fid!==Ee);if(y){const $=c.find(O=>O.fid===Ee).aggName,g=n.map(O=>i.find(R=>R.fid===O)).filter(Boolean).map(O=>qr(O,$));t.push(...g.filter(O=>(O==null?void 0:O.analyticType)==="dimension")),_.push(...g.filter(O=>(O==null?void 0:O.analyticType)==="measure"))}const b=new Set([...t,..._,...a].map($=>$.fid));let p=null,d=null,h=null,w=null,v=null,A=null;const N=$=>{const g=Dr($);return b.add(g.fid),g},x=a.filter($=>!$.computed&&$.rule&&!$.enableAgg).map(N);x.length&&(p={type:"filter",filters:x});const k=_t(i.filter($=>$.computed&&$.expression&&!($.expression.op==="expr"&&$.aggName==="expr")).map($=>({key:$.fid,expression:$t($.expression,i,{timezoneDisplayOffset:f})})),[...b]);k.length&&(d={type:"transform",transform:k});const E=a.filter($=>$.computed&&$.rule&&!$.enableAgg).map(N);E.length&&(h={type:"filter",filters:E});const C=a.filter($=>$.enableAgg&&$.aggName&&$.rule),q=_t(i.filter($=>$.computed&&$.expression&&$.expression.op==="expr"&&$.aggName==="expr").map($=>({key:$.fid,expression:$t($.expression,i,{timezoneDisplayOffset:f})})),[...b]),e=_.filter($=>$.aggName).map($=>[$.fid,$.aggName]).concat(C.map($=>[$.fid,$.aggName])).concat(q.map($=>[$.expression.params[0].value,"expr"])),u=r&&(e.length||_.length===0&&t.length>0);return u?w={type:"view",query:[{op:"aggregate",groupBy:ut(t.map($=>$.fid),$=>$),measures:ut(_.concat(C).map($=>({field:$.fid,agg:$.aggName,asFieldKey:ss($.fid,$.aggName)})).concat(q.map($=>({field:$.expression.params[0].value,agg:"expr",asFieldKey:$.key}))),$=>$.asFieldKey)}]}:w={type:"view",query:[{op:"raw",fields:[...new Set([...t,..._])].filter($=>$.aggName!=="expr").map($=>$.fid)}]},u&&t.length>0&&C.length>0&&(A={type:"filter",filters:C.map(N)}),s!=="none"&&m&&m!==-1&&(v={type:"sort",by:_.map($=>u?ss($.fid,$.aggName):$.fid),sort:s}),[p,d,h,w,A,v].filter(Boolean)};function zr(a){var n,m,f,y,t,_,b,p,d,h,w;const i=jr(a),o=Fr(((m=(n=i.config)==null?void 0:n.geoms)==null?void 0:m[0])??"auto").flatMap(v=>{var A;return((A=i.encodings)==null?void 0:A[v])??[]}),c=((f=i.encodings)==null?void 0:f.rows)??[],r=((y=i.encodings)==null?void 0:y.columns)??[],s=((t=i.config)==null?void 0:t.limit)??-1;return{workflow:Ur(((_=i.encodings)==null?void 0:_.filters)??[],[...((b=i.encodings)==null?void 0:b.dimensions)??[],...((p=i.encodings)==null?void 0:p.measures)??[]],o.filter(v=>v.analyticType==="dimension"),o.filter(v=>v.analyticType==="measure"),((d=i.config)==null?void 0:d.defaultAggregated)??!0,sr({rows:c,columns:r}),((h=i.config)==null?void 0:h.folds)??[],s,(w=i.config)==null?void 0:w.timezoneDisplayOffset),limit:s>0?s:void 0}}const $t=(a,i,o)=>(a==null?void 0:a.op)==="expr"?{...a,params:[{type:"sql",value:Xs(a.params.find(c=>c.type==="sql").value,i).trim()}]}:a.op==="dateTimeDrill"||a.op==="dateTimeFeature"?{...a,params:[...a.params,{type:"displayOffset",value:o.timezoneDisplayOffset??new Date().getTimezoneOffset()}]}:a.op==="paint"?{...a,params:a.params.map(c=>{if(c.type==="map"){const r={...c.value.dict,255:{name:""}};return{type:"map",value:{x:c.value.x,y:c.value.y,domainX:c.value.domainX,domainY:c.value.domainY,map:c.value.map,dict:Object.fromEntries(c.value.usedColor.map(s=>[s,{name:r[s].name}])),mapwidth:c.value.mapwidth}}}else if(c.type==="newmap"){const r={...c.value.dict,255:{name:""}},s=Array.from(new Set(c.value.usedColor.concat(1)));return{type:"newmap",value:{facets:c.value.facets.map(({dimensions:n,map:m})=>({dimensions:n,map:m})),dict:Object.fromEntries(s.map(n=>[n,{name:r[n].name}]))}}}else return c})}:a;function Mr(a){return JSON.stringify(zr(JSON.parse(a)))}return Mr});
